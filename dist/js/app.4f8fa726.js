(function(){"use strict";var e={71:function(e,t,a){e.exports=a.p+"img/employer.08fc3969.jpg"},2231:function(e,t,a){e.exports=a.p+"img/user-1.ed2ab919.jpg"},3438:function(e,t,a){e.exports=a.p+"img/sample.01c01c9f.png"},4042:function(e,t,a){var s=a(5130),o=a(6768);const r={id:"app"};function i(e,t,a,s,i,l){const n=(0,o.g2)("router-view");return(0,o.uX)(),(0,o.CE)("div",r,[(0,o.bF)(n)])}var l={name:"App",watch:{$route(e){const t="Kozi Rwanda";document.title=e.meta.title||t}},mounted(){const e="Kozi Rwanda";document.title=this.$route.meta.title||e}},n=a(1241);const d=(0,n.A)(l,[["render",i]]);var c=d,m=a(1387);const u={class:"text-center p-8"};function g(e,t,a,s,r,i){const l=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",u,[t[1]||(t[1]=(0,o.Lk)("h1",{class:"text-4xl font-bold text-red-600"},"404 - Page Not Found",-1)),t[2]||(t[2]=(0,o.Lk)("p",{class:"mt-4 text-gray-600"},"The page you're looking for doesn't exist.",-1)),(0,o.bF)(l,{to:"/",class:"text-blue-500 underline"},{default:(0,o.k6)((()=>t[0]||(t[0]=[(0,o.eW)("Go to Home")]))),_:1})])}var h={name:"NotFound"};const p=(0,n.A)(h,[["render",g]]);var b=p;function f(e,t,a,s,r,i){return(0,o.uX)(),(0,o.CE)("div",null,t[0]||(t[0]=[(0,o.Lk)("h1",null,"Welcome to the Home Page!",-1)]))}var k={name:"HomeComponent"};const v=(0,n.A)(k,[["render",f],["__scopeId","data-v-1fa8b36a"]]);var y=v,L=a(4232);const C={class:"page-wrapper",id:"main-wrapper"},w={class:"container"},_={class:"right-panel"},A={class:"role-options"};function E(e,t,a,s,r,i){return(0,o.uX)(),(0,o.CE)("div",C,[(0,o.Lk)("div",w,[t[6]||(t[6]=(0,o.Fv)('<div class="left-panel" data-v-f1db20ee><div class="business-illustration" data-v-f1db20ee><div class="illustration-bg" data-v-f1db20ee></div><div class="floating-elements" data-v-f1db20ee><div class="element element-1" data-v-f1db20ee></div><div class="element element-2" data-v-f1db20ee></div><div class="element element-3" data-v-f1db20ee></div></div></div></div>',1)),(0,o.Lk)("div",_,[t[4]||(t[4]=(0,o.Lk)("div",{class:"header"},[(0,o.Lk)("h1",null,"Continue as"),(0,o.Lk)("p",null,"Choose your role to get started")],-1)),(0,o.Lk)("div",A,[(0,o.Lk)("div",{class:(0,L.C4)(["role-card",{selecting:"worker"===r.selectedRole}]),onClick:t[0]||(t[0]=e=>i.selectRole("worker"))},t[2]||(t[2]=[(0,o.Fv)('<div class="role-content" data-v-f1db20ee><div class="role-icon" data-v-f1db20ee><svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-f1db20ee><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" data-v-f1db20ee></path><circle cx="12" cy="7" r="4" data-v-f1db20ee></circle></svg></div><div class="role-info" data-v-f1db20ee><h3 class="role-title" data-v-f1db20ee>Worker</h3><p class="role-subtitle" data-v-f1db20ee>(Usaba akazi)</p><p class="role-description" data-v-f1db20ee>Find your dream job and advance your career</p></div><svg class="role-arrow" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-f1db20ee><path d="M5 12h14M12 5l7 7-7 7" data-v-f1db20ee></path></svg></div>',1)]),2),(0,o.Lk)("div",{class:(0,L.C4)(["role-card",{selecting:"employer"===r.selectedRole}]),onClick:t[1]||(t[1]=e=>i.selectRole("employer"))},t[3]||(t[3]=[(0,o.Fv)('<div class="role-content" data-v-f1db20ee><div class="role-icon" data-v-f1db20ee><svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-f1db20ee><rect x="2" y="3" width="20" height="14" rx="2" ry="2" data-v-f1db20ee></rect><line x1="8" y1="21" x2="16" y2="21" data-v-f1db20ee></line><line x1="12" y1="17" x2="12" y2="21" data-v-f1db20ee></line></svg></div><div class="role-info" data-v-f1db20ee><h3 class="role-title" data-v-f1db20ee>Employer</h3><p class="role-subtitle" data-v-f1db20ee>Â </p><p class="role-description" data-v-f1db20ee>Post jobs and find the perfect candidates</p></div><svg class="role-arrow" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-f1db20ee><path d="M5 12h14M12 5l7 7-7 7" data-v-f1db20ee></path></svg></div>',1)]),2)]),t[5]||(t[5]=(0,o.Lk)("div",{class:"footer"},[(0,o.Lk)("a",{href:"https://kozi.rw/",class:"footer-link",target:"_blank"},[(0,o.Lk)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[(0,o.Lk)("path",{d:"M19 12H5M12 19l-7-7 7-7"})]),(0,o.eW)(" Go to kozi ")])],-1))])])])}a(4114),a(8111),a(7588);var I={name:"RoleSelector",data(){return{selectedRole:null,isAnimating:!1,profileImage:a(6826)}},methods:{selectRole(e){if(this.isAnimating)return;this.isAnimating=!0,this.selectedRole=e;const t="worker"===e?1:2;setTimeout((()=>{this.selectedRole=null,this.isAnimating=!1,localStorage.setItem("selectedRoleId",t),this.$router.push("/login")}),600)},handleMouseMove(e){const t=this.$el.querySelector(".left-panel");if(!t)return;const a=e.clientX/window.innerWidth,s=e.clientY/window.innerHeight,o=15*(a-.5),r=15*(s-.5);t.style.transform=`translate(${o}px, ${r}px)`}},mounted(){this.$nextTick((()=>{const e=this.$el.querySelectorAll(".role-card");e.forEach(((e,t)=>{e.style.animationDelay=.3+.1*t+"s"}))})),document.addEventListener("mousemove",this.handleMouseMove)},beforeUnmount(){document.removeEventListener("mousemove",this.handleMouseMove)}};const x=(0,n.A)(I,[["render",E],["__scopeId","data-v-f1db20ee"]]);var P=x;const S={class:"page-wrapper",id:"main-wrapper"},F={class:"login-layout"},M={class:"image-section",style:{background:"linear-gradient(135deg, #EA60A7 0%, #d946a3 50%, #c026d3 100%)"}},T={class:"image-overlay"},j={class:"brand-content"},D={class:"brand-logo"},U={class:"logo-text"},$={class:"brand-tagline"},X={class:"floating-elements"},V={class:"floating-card card-1"},B={class:"card-icon"},J={class:"floating-card card-2"},N={class:"card-icon"},Q={class:"floating-card card-3"},z={class:"card-icon"},R={class:"form-section"},W={class:"form-container"},O={class:"form-header"},H={class:"form-subtitle"},Z={key:0,class:"error-container"},K={class:"alert alert-danger"},q={class:"form-group"},G={class:"input-wrapper"},Y={class:"form-group"},ee={class:"input-wrapper"},te=["type"],ae={key:0,width:"20",height:"20",viewBox:"0 0 20 20",fill:"none"},se={key:1,width:"20",height:"20",viewBox:"0 0 20 20",fill:"none"},oe=["disabled"],re={key:0,class:"spinner"},ie={key:1,width:"20",height:"20",viewBox:"0 0 20 20",fill:"none"};function le(e,t,a,r,i,l){return(0,o.uX)(),(0,o.CE)("div",S,[(0,o.Lk)("div",F,[(0,o.Lk)("div",M,[(0,o.Lk)("div",T,[(0,o.Lk)("div",j,[(0,o.Lk)("div",D,[t[4]||(t[4]=(0,o.Lk)("div",{class:"logo-icon"},[(0,o.Lk)("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none"},[(0,o.Lk)("path",{d:"M20 0C31.046 0 40 8.954 40 20C40 31.046 31.046 40 20 40C8.954 40 0 31.046 0 20C0 8.954 8.954 0 20 0Z",fill:"white"}),(0,o.Lk)("path",{d:"M20 8C15.582 8 12 11.582 12 16V20C12 24.418 15.582 28 20 28C24.418 28 28 24.418 28 20V16C28 11.582 24.418 8 20 8Z",fill:"#EA60A7"})])],-1)),(0,o.Lk)("h1",U,(0,L.v_)(l.roleDisplayName),1)]),(0,o.Lk)("div",$,[(0,o.Lk)("p",null,(0,L.v_)(l.roleTagline.line1),1),(0,o.Lk)("p",null,(0,L.v_)(l.roleTagline.line2),1)])]),(0,o.Lk)("div",X,[(0,o.Lk)("div",V,[(0,o.Lk)("div",B,(0,L.v_)(l.roleFeatures.feature1.icon),1),(0,o.Lk)("span",null,(0,L.v_)(l.roleFeatures.feature1.text),1)]),(0,o.Lk)("div",J,[(0,o.Lk)("div",N,(0,L.v_)(l.roleFeatures.feature2.icon),1),(0,o.Lk)("span",null,(0,L.v_)(l.roleFeatures.feature2.text),1)]),(0,o.Lk)("div",Q,[(0,o.Lk)("div",z,(0,L.v_)(l.roleFeatures.feature3.icon),1),(0,o.Lk)("span",null,(0,L.v_)(l.roleFeatures.feature3.text),1)])])])]),(0,o.Lk)("div",R,[(0,o.Lk)("div",W,[(0,o.Lk)("div",O,[t[5]||(t[5]=(0,o.Lk)("h2",{class:"form-title"},"Welcome Back",-1)),(0,o.Lk)("p",H,"Sign in to your "+(0,L.v_)(l.roleName.toLowerCase())+" account",1)]),(0,o.Lk)("form",{onSubmit:t[3]||(t[3]=(0,s.D$)(((...e)=>l.login&&l.login(...e)),["prevent"])),class:"login-form"},[i.errorMessage?((0,o.uX)(),(0,o.CE)("div",Z,[(0,o.Lk)("div",K,[t[6]||(t[6]=(0,o.Lk)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},[(0,o.Lk)("path",{d:"M8 0C3.58 0 0 3.58 0 8C0 12.42 3.58 16 8 16C12.42 16 16 12.42 16 8C16 3.58 12.42 0 8 0ZM9 12H7V10H9V12ZM9 8H7V4H9V8Z",fill:"currentColor"})],-1)),(0,o.eW)(" "+(0,L.v_)(i.errorMessage),1)])])):(0,o.Q3)("",!0),(0,o.Lk)("div",q,[t[8]||(t[8]=(0,o.Lk)("label",{for:"email",class:"form-label"},"Emeyili Yawe",-1)),(0,o.Lk)("div",G,[t[7]||(t[7]=(0,o.Lk)("svg",{class:"input-icon",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none"},[(0,o.Lk)("path",{d:"M18 4H2C1.45 4 1 4.45 1 5V15C1 15.55 1.45 16 2 16H18C18.55 16 19 15.55 19 15V5C19 4.45 18.55 4 18 4ZM18 7L10 12L2 7V5L10 10L18 5V7Z",fill:"currentColor"})],-1)),(0,o.bo)((0,o.Lk)("input",{type:"email","onUpdate:modelValue":t[0]||(t[0]=e=>i.email=e),class:"form-control",id:"email",required:"",placeholder:"Enter your email"},null,512),[[s.Jo,i.email]])])]),(0,o.Lk)("div",Y,[t[12]||(t[12]=(0,o.Lk)("label",{for:"password",class:"form-label"},"Ijambo Banga",-1)),(0,o.Lk)("div",ee,[t[11]||(t[11]=(0,o.Lk)("svg",{class:"input-icon",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none"},[(0,o.Lk)("path",{d:"M15 7H14V5C14 2.24 11.76 0 9 0S4 2.24 4 5V7H3C2.45 7 2 7.45 2 8V18C2 18.55 2.45 19 3 19H15C15.55 19 16 18.55 16 18V8C16 7.45 15.55 7 15 7ZM6 5C6 3.34 7.34 2 9 2S12 3.34 12 5V7H6V5Z",fill:"currentColor"})],-1)),(0,o.bo)((0,o.Lk)("input",{class:"form-control","onUpdate:modelValue":t[1]||(t[1]=e=>i.password=e),type:i.showPassword?"text":"password",id:"password",required:"",placeholder:"Enter your password"},null,8,te),[[s.hp,i.password]]),(0,o.Lk)("button",{type:"button",class:"password-toggle",onClick:t[2]||(t[2]=e=>i.showPassword=!i.showPassword)},[i.showPassword?((0,o.uX)(),(0,o.CE)("svg",ae,t[9]||(t[9]=[(0,o.Lk)("path",{d:"M10 12C8.9 12 8 11.1 8 10S8.9 8 10 8S12 8.9 12 10S11.1 12 10 12ZM10 4C5 4 1.73 7.11 1 10C1.73 12.89 5 16 10 16S18.27 12.89 19 10C18.27 7.11 15 4 10 4ZM10 14C7.24 14 4.91 12.36 4 10C4.91 7.64 7.24 6 10 6S15.09 7.64 16 10C15.09 12.36 12.76 14 10 14Z",fill:"currentColor"},null,-1)]))):((0,o.uX)(),(0,o.CE)("svg",se,t[10]||(t[10]=[(0,o.Lk)("path",{d:"M10 6C12.76 6 15.09 7.64 16 10C15.09 12.36 12.76 14 10 14C7.24 14 4.91 12.36 4 10C4.91 7.64 7.24 6 10 6ZM10 4C5 4 1.73 7.11 1 10C1.73 12.89 5 16 10 16S18.27 12.89 19 10C18.27 7.11 15 4 10 4ZM10 8C8.9 8 8 8.9 8 10S8.9 12 10 12S12 11.1 12 10S11.1 8 10 8Z",fill:"currentColor"},null,-1),(0,o.Lk)("path",{d:"M2 2L18 18",stroke:"currentColor","stroke-width":"2"},null,-1)])))])])]),(0,o.Lk)("button",{type:"submit",class:"btn-primary",disabled:i.loginInProgress},[i.loginInProgress?((0,o.uX)(),(0,o.CE)("span",re)):((0,o.uX)(),(0,o.CE)("svg",ie,t[13]||(t[13]=[(0,o.Lk)("path",{d:"M10 0C4.48 0 0 4.48 0 10S4.48 20 10 20S20 15.52 20 10S15.52 0 10 0ZM8 15L3 10L4.41 8.59L8 12.17L15.59 4.58L17 6L8 15Z",fill:"currentColor"},null,-1)]))),(0,o.eW)(" "+(0,L.v_)(i.loginInProgress?"Signing In...":"Injira"),1)],8,oe),t[14]||(t[14]=(0,o.Fv)('<div class="footer-links" data-v-ae4a27c6><p class="form-label" data-v-ae4a27c6>Nta konti ufite?</p><a href="/signup" class="link" data-v-ae4a27c6>Kanda hano</a><span class="separator" data-v-ae4a27c6>â¢</span><a href="/forgot-password" class="link" data-v-ae4a27c6>Wibagiwe Ijambo banga?</a></div><div class="footer-links" data-v-ae4a27c6><a href="/" class="link" data-v-ae4a27c6><svg width="16" height="16" viewBox="0 0 16 16" fill="none" data-v-ae4a27c6><path d="M8 0L1 7H4V16H12V7H15L8 0Z" fill="currentColor" data-v-ae4a27c6></path></svg> Subira Inyuma </a></div>',2))],32)])])])])}var ne=a(4373);const de=" https://apis.kozi.rw";var ce={data(){return{email:"",password:"",errorMessage:"",showPassword:!1,loginInProgress:!1,googleClientId:"793211149046-copaoe356k4gg5qv1bjmu92egvsn2fcn.apps.googleusercontent.com",role_id:null}},mounted(){const e=localStorage.getItem("selectedRoleId");e?(this.role_id=e,this.$nextTick((()=>{window.google&&(google.accounts.id.initialize({client_id:this.googleClientId,callback:this.handleGoogleCredential}),google.accounts.id.renderButton(document.getElementById("google-button"),{theme:"outline",size:"large",width:"100%",text:"signin_with"}))}))):this.$router.push("/role-selector")},computed:{roleName(){switch(parseInt(this.role_id)){case 1:return"Job Seeker";case 2:return"Employer";case 3:return"Admin";case 4:return"Agent";default:return"Unknown Role"}},roleDisplayName(){switch(parseInt(this.role_id)){case 1:return"Job Seeker Hub";case 2:return"Job Provider Portal";case 3:return"Admin Dashboard";case 4:return"Agent Portal";default:return"JobPortal"}},roleTagline(){switch(parseInt(this.role_id)){case 1:return{line1:"Discover your dream career",line2:"Build your professional future"};case 2:return{line1:"Find the perfect candidates",line2:"Grow your team efficiently"};case 3:return{line1:"Manage and oversee",line2:"Control platform operations"};case 4:return{line1:"Connect talent with opportunity",line2:"Bridge careers and companies"};default:return{line1:"Connect with opportunities",line2:"Shape your future"}}},roleFeatures(){switch(parseInt(this.role_id)){case 1:return{feature1:{icon:"ð",text:"Search jobs  "},feature2:{icon:"ð",text:"Build Resume"},feature3:{icon:"ð¯",text:"Apply Smartly"}};case 2:return{feature1:{icon:"ð",text:"Post Jobs"},feature2:{icon:"ð¥",text:"Find Talent"},feature3:{icon:"â¡",text:"Hire Fast and secured"}};case 3:return{feature1:{icon:"ð",text:"Analytics"},feature2:{icon:"âï¸",text:"Settings"},feature3:{icon:"ð¡ï¸",text:"Security"}};case 4:return{feature1:{icon:"ð¤",text:"Connect"},feature2:{icon:"ð¼",text:"Manage"},feature3:{icon:"ð",text:"Track"}};default:return{feature1:{icon:"ð¼",text:"Find Jobs"},feature2:{icon:"ð",text:"Grow Career"},feature3:{icon:"ð¯",text:"Match Skills"}}}}},methods:{async login(){if(this.role_id){this.loginInProgress=!0,this.errorMessage="";try{const e=await ne.A.post(`${de}/login`,{email:this.email,password:this.password,role_id:this.role_id});e.data.token?(localStorage.setItem("authToken",e.data.token),localStorage.setItem("userEmail",this.email),localStorage.setItem("roleId",this.role_id),this.routeUser()):this.errorMessage="Login failed."}catch(e){this.errorMessage=e.response?.data?.message||"Login failed."}finally{this.loginInProgress=!1}}else this.errorMessage="Please select a role before logging in."},handleGoogleCredential(e){const t=e.credential;ne.A.post(`${de}/google-login`,{token:t,role_id:this.role_id}).then((e=>{switch(localStorage.setItem("authToken",e.data.token),localStorage.setItem("userEmail",e.data.email),localStorage.setItem("roleId",this.role_id),parseInt(this.role_id)){case 1:this.$router.push("/dashboard");break;case 2:this.$router.push("/employer/dashboard");break;case 3:this.$router.push("/admin-dashboard");break;case 4:this.$router.push("/agent-dashboard");break;default:this.$router.push("/dashboard")}})).catch((e=>{this.errorMessage=e.response?.data?.message||"Google sign-in failed."}))},routeUser(){switch(parseInt(this.role_id)){case 1:this.$router.push("/dashboard");break;case 2:this.$router.push("/employer/dashboard");break;case 3:this.$router.push("/admin-dashboard");break;case 4:this.$router.push("/agent-dashboard");break;default:this.$router.push("/dashboard")}}}};const me=(0,n.A)(ce,[["render",le],["__scopeId","data-v-ae4a27c6"]]);var ue=me;const ge={class:"form-box login"},he={class:"input-box"},pe={class:"input-box"},be={class:"recaptcha"},fe=["data-sitekey"],ke={class:"form-box register"},ve=["type","onUpdate:modelValue","placeholder"],ye={class:"recaptcha"},Le=["data-sitekey"],Ce={class:"toggle-box"},we={class:"toggle-panel toggle-left"},_e={class:"toggle-panel toggle-right"};function Ae(e,t,a,r,i,l){return(0,o.uX)(),(0,o.CE)("div",{class:(0,L.C4)(["container",{active:i.isRegistering}])},[(0,o.Lk)("div",ge,[(0,o.Lk)("form",{onSubmit:t[2]||(t[2]=(0,s.D$)(((...e)=>l.handleLogin&&l.handleLogin(...e)),["prevent"]))},[t[8]||(t[8]=(0,o.Lk)("h1",null,"Login",-1)),(0,o.Lk)("div",he,[(0,o.bo)((0,o.Lk)("input",{type:"email","onUpdate:modelValue":t[0]||(t[0]=e=>i.loginForm.email=e),placeholder:"Email",required:""},null,512),[[s.Jo,i.loginForm.email]]),t[6]||(t[6]=(0,o.Lk)("i",{class:"bx bxs-envelope"},null,-1))]),(0,o.Lk)("div",pe,[(0,o.bo)((0,o.Lk)("input",{type:"password","onUpdate:modelValue":t[1]||(t[1]=e=>i.loginForm.password=e),placeholder:"Password",required:""},null,512),[[s.Jo,i.loginForm.password]]),t[7]||(t[7]=(0,o.Lk)("i",{class:"bx bxs-lock-alt"},null,-1))]),(0,o.Lk)("div",be,[(0,o.Lk)("div",{class:"g-recaptcha","data-sitekey":i.recaptchaSiteKey},null,8,fe)]),t[9]||(t[9]=(0,o.Lk)("button",{class:"btn",type:"submit"},"Login",-1)),t[10]||(t[10]=(0,o.Lk)("div",{class:"social-icons"},[(0,o.Lk)("button",{class:"google-button",type:"button"},[(0,o.Lk)("img",{src:"img/google.png",alt:"Google Login"})])],-1))],32)]),(0,o.Lk)("div",ke,[(0,o.Lk)("form",{onSubmit:t[3]||(t[3]=(0,s.D$)(((...e)=>l.handleRegister&&l.handleRegister(...e)),["prevent"]))},[t[11]||(t[11]=(0,o.Lk)("h1",null,"Registration",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.registerFields,(e=>((0,o.uX)(),(0,o.CE)("div",{class:"input-box",key:e.name},[(0,o.bo)((0,o.Lk)("input",{type:e.type,"onUpdate:modelValue":t=>i.registerForm[e.name]=t,placeholder:e.placeholder,required:""},null,8,ve),[[s.hp,i.registerForm[e.name]]]),(0,o.Lk)("i",{class:(0,L.C4)(e.icon)},null,2)])))),128)),(0,o.Lk)("div",ye,[(0,o.Lk)("div",{class:"g-recaptcha","data-sitekey":i.recaptchaSiteKey},null,8,Le)]),t[12]||(t[12]=(0,o.Lk)("button",{class:"btn",type:"submit"},"Register",-1)),t[13]||(t[13]=(0,o.Lk)("div",{class:"social-icons"},[(0,o.Lk)("button",{class:"google-button",type:"button"},[(0,o.Lk)("img",{src:"img/google.png",alt:"Google Login"})])],-1))],32)]),(0,o.Lk)("div",Ce,[(0,o.Lk)("div",we,[t[14]||(t[14]=(0,o.Lk)("h1",null,"Hello, Welcome!",-1)),t[15]||(t[15]=(0,o.Lk)("p",null,"Don't have an Account?",-1)),(0,o.Lk)("button",{class:"btn",onClick:t[4]||(t[4]=e=>i.isRegistering=!0)},"Register")]),(0,o.Lk)("div",_e,[t[16]||(t[16]=(0,o.Lk)("h1",null,"Welcome back!",-1)),t[17]||(t[17]=(0,o.Lk)("p",null,"Already have an Account?",-1)),(0,o.Lk)("button",{class:"btn",onClick:t[5]||(t[5]=e=>i.isRegistering=!1)},"Login")])])],2)}var Ee={data(){return{isRegistering:!1,recaptchaSiteKey:"6Lc-YLMqAAAAABmJD7EYyZYjbRPCzX4M4eiia-nY",loginForm:{email:"",password:""},registerForm:{email:"",telephone:"",first_name:"",last_name:"",password:""},registerFields:[{name:"email",placeholder:"Email",type:"email",icon:"bx bxs-envelope"},{name:"telephone",placeholder:"Telephone",type:"text",icon:"bx bxs-phone"},{name:"first_name",placeholder:"First Name",type:"text",icon:"bx bxs-user"},{name:"last_name",placeholder:"Last Name",type:"text",icon:"bx bxs-user"},{name:"password",placeholder:"Password",type:"password",icon:"bx bxs-lock-alt"}]}},methods:{async handleLogin(){const e=await this.verifyRecaptcha();e.success?console.log("Logging in with:",this.loginForm):alert("reCAPTCHA verification failed. Please try again.")},async handleRegister(){const e=await this.verifyRecaptcha();e.success?console.log("Registering with:",this.registerForm):alert("reCAPTCHA verification failed. Please try again.")}}};const Ie=(0,n.A)(Ee,[["render",Ae],["__scopeId","data-v-2290d41e"]]);var xe=Ie;const Pe={class:"page-wrapper",id:"main-wrapper"},Se={class:"login-layout"},Fe={class:"image-section",style:{background:"linear-gradient(135deg, #EA60A7 0%, #d946a3 50%, #c026d3 100%)"}},Me={class:"image-overlay"},Te={class:"brand-content"},je={class:"brand-logo"},De={class:"logo-text"},Ue={class:"brand-tagline"},$e={class:"floating-elements"},Xe={class:"floating-card card-1"},Ve={class:"card-icon"},Be={class:"floating-card card-2"},Je={class:"card-icon"},Ne={class:"floating-card card-3"},Qe={class:"card-icon"},ze={class:"form-section"},Re={class:"form-container"},We={class:"form-header"},Oe={class:"form-title"},He={class:"form-subtitle"},Ze={key:0,class:"error-container"},Ke={class:"form-row"},qe={class:"form-group"},Ge={class:"input-wrapper"},Ye={class:"form-group"},et={class:"input-wrapper"},tt={class:"form-group"},at={class:"input-wrapper"},st={class:"form-group"},ot={class:"input-wrapper"},rt={class:"form-group"},it={class:"input-wrapper"},lt=["type"],nt={key:0,width:"20",height:"20",viewBox:"0 0 20 20",fill:"none"},dt={key:1,width:"20",height:"20",viewBox:"0 0 20 20",fill:"none"},ct={class:"form-check"},mt=["disabled"],ut={key:0,class:"spinner"},gt={key:1,width:"20",height:"20",viewBox:"0 0 20 20",fill:"none"};function ht(e,t,a,r,i,l){return(0,o.uX)(),(0,o.CE)("div",Pe,[(0,o.Lk)("div",Se,[(0,o.Lk)("div",Fe,[(0,o.Lk)("div",Me,[(0,o.Lk)("div",Te,[(0,o.Lk)("div",je,[t[9]||(t[9]=(0,o.Lk)("div",{class:"logo-icon"},[(0,o.Lk)("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none"},[(0,o.Lk)("path",{d:"M20 0C31.046 0 40 8.954 40 20C40 31.046 31.046 40 20 40C8.954 40 0 31.046 0 20C0 8.954 8.954 0 20 0Z",fill:"white"}),(0,o.Lk)("path",{d:"M20 8C15.582 8 12 11.582 12 16V20C12 24.418 15.582 28 20 28C24.418 28 28 24.418 28 20V16C28 11.582 24.418 8 20 8Z",fill:"#EA60A7"})])],-1)),(0,o.Lk)("h1",De,(0,L.v_)(l.roleDisplayName),1)]),(0,o.Lk)("div",Ue,[(0,o.Lk)("p",null,(0,L.v_)(l.roleSignupTagline.line1),1),(0,o.Lk)("p",null,(0,L.v_)(l.roleSignupTagline.line2),1)])]),(0,o.Lk)("div",$e,[(0,o.Lk)("div",Xe,[(0,o.Lk)("div",Ve,(0,L.v_)(l.roleFeatures.feature1.icon),1),(0,o.Lk)("span",null,(0,L.v_)(l.roleFeatures.feature1.text),1)]),(0,o.Lk)("div",Be,[(0,o.Lk)("div",Je,(0,L.v_)(l.roleFeatures.feature2.icon),1),(0,o.Lk)("span",null,(0,L.v_)(l.roleFeatures.feature2.text),1)]),(0,o.Lk)("div",Ne,[(0,o.Lk)("div",Qe,(0,L.v_)(l.roleFeatures.feature3.icon),1),(0,o.Lk)("span",null,(0,L.v_)(l.roleFeatures.feature3.text),1)])])])]),(0,o.Lk)("div",ze,[(0,o.Lk)("div",Re,[(0,o.Lk)("div",We,[(0,o.Lk)("h2",Oe,"Join "+(0,L.v_)(l.roleName),1),(0,o.Lk)("p",He,"Create your "+(0,L.v_)(l.roleName.toLowerCase())+" account",1),t[10]||(t[10]=(0,o.Lk)("p",{style:{"margin-top":"2rem"},class:"form-label"},[(0,o.eW)("usanzwe ufite konti? "),(0,o.Lk)("a",{href:"/login",class:"link"},"Kanda hano")],-1))]),(0,o.Lk)("form",{onSubmit:t[8]||(t[8]=(0,s.D$)(((...e)=>l.signup&&l.signup(...e)),["prevent"])),class:"login-form"},[i.message?((0,o.uX)(),(0,o.CE)("div",Ze,[(0,o.Lk)("div",{class:(0,L.C4)(["alert",i.messageType])},[t[11]||(t[11]=(0,o.Lk)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},[(0,o.Lk)("path",{d:"M8 0C3.58 0 0 3.58 0 8C0 12.42 3.58 16 8 16C12.42 16 16 12.42 16 8C16 3.58 12.42 0 8 0ZM9 12H7V10H9V12ZM9 8H7V4H9V8Z",fill:"currentColor"})],-1)),(0,o.eW)(" "+(0,L.v_)(i.message),1)],2)])):(0,o.Q3)("",!0),(0,o.Lk)("div",Ke,[(0,o.Lk)("div",qe,[t[13]||(t[13]=(0,o.Lk)("label",{for:"first_name",class:"form-label"},"Izina ribanza",-1)),(0,o.Lk)("div",Ge,[t[12]||(t[12]=(0,o.Lk)("svg",{class:"input-icon",xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 448 512",fill:"currentColor"},[(0,o.Lk)("path",{d:"M224 256A128 128 0 1 0 224 0a128 128 0 1 0 0 256zm-45.7 48C79.8 304 0 383.8 0 482.3C0 498.7 13.3 512 29.7 512l388.6 0c16.4 0 29.7-13.3 29.7-29.7C448 383.8 368.2 304 269.7 304l-91.4 0z"})],-1)),(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>i.first_name=e),class:"form-control",id:"first_name",required:"",placeholder:"First name"},null,512),[[s.Jo,i.first_name]])])]),(0,o.Lk)("div",Ye,[t[15]||(t[15]=(0,o.Lk)("label",{for:"last_name",class:"form-label"},"Izina rya nyuma ",-1)),(0,o.Lk)("div",et,[t[14]||(t[14]=(0,o.Lk)("svg",{class:"input-icon",xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 448 512",fill:"currentColor"},[(0,o.Lk)("path",{d:"M224 256A128 128 0 1 0 224 0a128 128 0 1 0 0 256zm-45.7 48C79.8 304 0 383.8 0 482.3C0 498.7 13.3 512 29.7 512l388.6 0c16.4 0 29.7-13.3 29.7-29.7C448 383.8 368.2 304 269.7 304l-91.4 0z"})],-1)),(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>i.last_name=e),class:"form-control",id:"last_name",required:"",placeholder:"Last name"},null,512),[[s.Jo,i.last_name]])])])]),(0,o.Lk)("div",tt,[t[17]||(t[17]=(0,o.Lk)("label",{for:"telephone",class:"form-label"},"Nimero ya Telefoni",-1)),(0,o.Lk)("div",at,[t[16]||(t[16]=(0,o.Lk)("svg",{class:"input-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"20",height:"20",fill:"currentColor"},[(0,o.Lk)("path",{d:"M164.9 24.6c-7.7-18.6-28-28.5-47.4-23.2l-88 24C12.1 30.2 0 46 0 64C0 311.4 200.6 512 448 512c18 0 33.8-12.1 38.6-29.5l24-88c5.3-19.4-4.6-39.7-23.2-47.4l-96-40c-16.3-6.8-35.2-2.1-46.3 11.6L304.7 368C234.3 334.7 177.3 277.7 144 207.3L193.3 167c13.7-11.2 18.4-30 11.6-46.3l-40-96z"})],-1)),(0,o.bo)((0,o.Lk)("input",{type:"number","onUpdate:modelValue":t[2]||(t[2]=e=>i.telephone=e),class:"form-control",id:"telephone",required:"",placeholder:"Enter your phone number",onInput:t[3]||(t[3]=(...e)=>l.limitPhone&&l.limitPhone(...e))},null,544),[[s.Jo,i.telephone]])])]),(0,o.Lk)("div",st,[t[19]||(t[19]=(0,o.Lk)("label",{for:"email",class:"form-label"},"Emeyili Yawe",-1)),(0,o.Lk)("div",ot,[t[18]||(t[18]=(0,o.Lk)("svg",{class:"input-icon",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none"},[(0,o.Lk)("path",{d:"M18 4H2C1.45 4 1 4.45 1 5V15C1 15.55 1.45 16 2 16H18C18.55 16 19 15.55 19 15V5C19 4.45 18.55 4 18 4ZM18 7L10 12L2 7V5L10 10L18 5V7Z",fill:"currentColor"})],-1)),(0,o.bo)((0,o.Lk)("input",{type:"email","onUpdate:modelValue":t[4]||(t[4]=e=>i.email=e),class:"form-control",id:"email",required:"",placeholder:"Enter your email"},null,512),[[s.Jo,i.email]])])]),(0,o.Lk)("div",rt,[t[23]||(t[23]=(0,o.Lk)("label",{for:"password",class:"form-label"},"Ijambo Banga",-1)),(0,o.Lk)("div",it,[t[22]||(t[22]=(0,o.Lk)("svg",{class:"input-icon",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none"},[(0,o.Lk)("path",{d:"M15 7H14V5C14 2.24 11.76 0 9 0S4 2.24 4 5V7H3C2.45 7 2 7.45 2 8V18C2 18.55 2.45 19 3 19H15C15.55 19 16 18.55 16 18V8C16 7.45 15.55 7 15 7ZM6 5C6 3.34 7.34 2 9 2S12 3.34 12 5V7H6V5Z",fill:"currentColor"})],-1)),(0,o.bo)((0,o.Lk)("input",{class:"form-control","onUpdate:modelValue":t[5]||(t[5]=e=>i.password=e),type:i.showPassword?"text":"password",id:"password",required:"",placeholder:"Create a strong password"},null,8,lt),[[s.hp,i.password]]),(0,o.Lk)("button",{type:"button",class:"password-toggle",onClick:t[6]||(t[6]=e=>i.showPassword=!i.showPassword)},[i.showPassword?((0,o.uX)(),(0,o.CE)("svg",nt,t[20]||(t[20]=[(0,o.Lk)("path",{d:"M10 12C8.9 12 8 11.1 8 10S8.9 8 10 8S12 8.9 12 10S11.1 12 10 12ZM10 4C5 4 1.73 7.11 1 10C1.73 12.89 5 16 10 16S18.27 12.89 19 10C18.27 7.11 15 4 10 4ZM10 14C7.24 14 4.91 12.36 4 10C4.91 7.64 7.24 6 10 6S15.09 7.64 16 10C15.09 12.36 12.76 14 10 14Z",fill:"currentColor"},null,-1)]))):((0,o.uX)(),(0,o.CE)("svg",dt,t[21]||(t[21]=[(0,o.Lk)("path",{d:"M10 6C12.76 6 15.09 7.64 16 10C15.09 12.36 12.76 14 10 14C7.24 14 4.91 12.36 4 10C4.91 7.64 7.24 6 10 6ZM10 4C5 4 1.73 7.11 1 10C1.73 12.89 5 16 10 16S18.27 12.89 19 10C18.27 7.11 15 4 10 4ZM10 8C8.9 8 8 8.9 8 10S8.9 12 10 12S12 11.1 12 10S11.1 8 10 8Z",fill:"currentColor"},null,-1),(0,o.Lk)("path",{d:"M2 2L18 18",stroke:"currentColor","stroke-width":"2"},null,-1)])))])])]),(0,o.Lk)("div",ct,[(0,o.bo)((0,o.Lk)("input",{class:"form-check-input",type:"checkbox",id:"termsCheck","onUpdate:modelValue":t[7]||(t[7]=e=>i.agreedToTerms=e),required:""},null,512),[[s.lH,i.agreedToTerms]]),t[24]||(t[24]=(0,o.Lk)("label",{class:"form-check-label",for:"termsCheck"},[(0,o.eW)(" Soma kandi wemeze "),(0,o.Lk)("a",{href:"https://kozi.rw/terms-of-service",target:"_blank",rel:"noopener noreferrer",class:"terms-link"}," amategeko n'amabwiriza. ")],-1))]),(0,o.Lk)("button",{type:"submit",class:"btn-primary",disabled:i.loginInProgress},[i.loginInProgress?((0,o.uX)(),(0,o.CE)("span",ut)):((0,o.uX)(),(0,o.CE)("svg",gt,t[25]||(t[25]=[(0,o.Lk)("path",{d:"M10 0C4.48 0 0 4.48 0 10S4.48 20 10 20S20 15.52 20 10S15.52 0 10 0ZM8 15L3 10L4.41 8.59L8 12.17L15.59 4.58L17 6L8 15Z",fill:"currentColor"},null,-1)]))),(0,o.eW)(" "+(0,L.v_)(i.loginInProgress?"Signing In...":"Injira"),1)],8,mt),t[26]||(t[26]=(0,o.Fv)('<div class="footer-links" data-v-755fdc92><span class="separator" data-v-755fdc92>â¢</span><a href="/" class="link" data-v-755fdc92><svg width="16" height="16" viewBox="0 0 16 16" fill="none" data-v-755fdc92><path d="M8 0L1 7H4V16H12V7H15L8 0Z" fill="currentColor" data-v-755fdc92></path></svg> Subira inyuma </a></div>',1))],32)])])])])}var pt={name:"SignupPage",data(){return{email:"",first_name:"",last_name:"",telephone:"",password:"",role_id:null,loginInProgress:!1,message:"",messageType:"",googleClientId:"793211149046-copaoe356k4gg5qv1bjmu92egvsn2fcn.apps.googleusercontent.com",agreedToTerms:!1,showPassword:!1}},mounted(){const e=localStorage.getItem("selectedRoleId");e?(this.role_id=e,this.$nextTick((()=>{window.google&&(google.accounts.id.initialize({client_id:this.googleClientId,callback:this.handleGoogleCredential}),google.accounts.id.renderButton(document.getElementById("google-button"),{theme:"outline",size:"large",width:"100%",text:"signup_with"}))}))):this.$router.push("/role-selector")},computed:{roleName(){switch(parseInt(this.role_id)){case 1:return"Job Seeker";case 2:return"Employer";case 3:return"Admin";case 4:return"Agent";default:return"Unknown Role"}},roleDisplayName(){switch(parseInt(this.role_id)){case 1:return"Job Seeker Hub";case 2:return"Employer Portal";case 3:return"Admin Dashboard";case 4:return"Agent Portal";default:return"JobPortal"}},roleSignupTagline(){switch(parseInt(this.role_id)){case 1:return{line1:"Start your career journey today",line2:"Join thousands of successful professionals"};case 2:return{line1:"Build your dream team",line2:"Connect with top talent effortlessly"};case 3:return{line1:"Gain complete control",line2:"Manage platform operations with ease"};case 4:return{line1:"Become a career connector",line2:"Help others find their perfect match"};default:return{line1:"Join our community",line2:"Unlock new opportunities"}}},roleFeatures(){switch(parseInt(this.role_id)){case 1:return{feature1:{icon:"ð",text:"Search jobs"},feature2:{icon:"ð",text:"Build Resume"},feature3:{icon:"ð¯",text:"Apply Smartly"}};case 2:return{feature1:{icon:"ð",text:"Post Jobs"},feature2:{icon:"ð¥",text:"Find Talent"},feature3:{icon:"â¡",text:"Fast and Secure Hiring"}};case 3:return{feature1:{icon:"ð",text:"Analytics"},feature2:{icon:"âï¸",text:"Settings"},feature3:{icon:"ð¡ï¸",text:"Security"}};case 4:return{feature1:{icon:"ð¤",text:"Connect"},feature2:{icon:"ð¼",text:"Manage"},feature3:{icon:"ð",text:"Track"}};default:return{feature1:{icon:"ð¼",text:"Find Jobs"},feature2:{icon:"ð",text:"Grow Career"},feature3:{icon:"ð¯",text:"Match Skills"}}}}},methods:{limitPhone(e){e.target.value.length>12&&(e.target.value=e.target.value.slice(0,12),this.telephone=e.target.value)},async signup(){if(!this.role_id)return this.message="Please select a role before signing up.",void(this.messageType="alert-danger");if(!this.agreedToTerms)return this.message="You must agree to the Terms and Conditions.",void(this.messageType="alert-danger");this.loginInProgress=!0,this.message="";try{const e=2==this.role_id?`${de}/provider/signup`:`${de}/seeker/signup`,t=await ne.A.post(e,{email:this.email,first_name:this.first_name,last_name:this.last_name,full_name:`${this.first_name} ${this.last_name}`,telephone:this.telephone,password:this.password,role_id:this.role_id,picture:"",verifiedEmail:!1,token:""});200===t.status?(localStorage.setItem("signupEmail",this.email),this.$router.push("/verify-otp")):(this.message=t.data.message||"Signup failed.",this.messageType="alert-danger")}catch(e){this.message=e.response?.data?.message||"Signup failed.",this.messageType="alert-danger"}finally{this.loginInProgress=!1}},async handleGoogleCredential(e){const t=e.credential;try{const e=await ne.A.post(`${de}/google-login`,{token:t,role_id:this.role_id});e.data.token?(localStorage.setItem("authToken",e.data.token),localStorage.setItem("userEmail",e.data.email),localStorage.setItem("roleId",this.role_id),this.routeUser()):(this.message="Google signup failed.",this.messageType="alert-danger")}catch(a){this.message=a.response?.data?.message||"Google signup failed.",this.messageType="alert-danger"}},routeUser(){switch(parseInt(this.role_id)){case 1:this.$router.push("/dashboard");break;case 2:this.$router.push("/employer/dashboard");break;case 3:this.$router.push("/admin-dashboard");break;case 4:this.$router.push("/agent-dashboard");break;default:this.$router.push("/dashboard")}}}};const bt=(0,n.A)(pt,[["render",ht],["__scopeId","data-v-755fdc92"]]);var ft=bt;const kt={class:"page-wrapper",id:"main-wrapper"},vt={class:"login-layout"},yt={class:"image-section",style:{background:"linear-gradient(135deg, #EA60A7 0%, #d946a3 50%, #c026d3 100%)"}},Lt={class:"image-overlay"},Ct={class:"brand-content"},wt={class:"brand-logo"},_t={class:"logo-text"},At={class:"brand-tagline"},Et={class:"floating-elements"},It={class:"floating-card card-1"},xt={class:"card-icon"},Pt={class:"floating-card card-2"},St={class:"card-icon"},Ft={class:"floating-card card-3"},Mt={class:"card-icon"},Tt={class:"form-section"},jt={class:"form-container"},Dt={class:"form-header"},Ut={class:"email-display"},$t={key:0,class:"error-container"},Xt={class:"form-group"},Vt={class:"input-wrapper"},Bt={key:1,class:"countdown-section"},Jt={class:"countdown-display"},Nt=["disabled"],Qt={key:0,class:"spinner"},zt={key:1,width:"20",height:"20",viewBox:"0 0 20 20",fill:"none"},Rt={class:"resend-section"},Wt=["disabled"],Ot={key:0,class:"spinner"},Ht={key:1,width:"20",height:"20",viewBox:"0 0 20 20",fill:"none"},Zt={key:0,class:"resend-timer"};function Kt(e,t,a,r,i,l){return(0,o.uX)(),(0,o.CE)("div",kt,[(0,o.Lk)("div",vt,[(0,o.Lk)("div",yt,[(0,o.Lk)("div",Lt,[(0,o.Lk)("div",Ct,[(0,o.Lk)("div",wt,[t[4]||(t[4]=(0,o.Lk)("div",{class:"logo-icon"},[(0,o.Lk)("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none"},[(0,o.Lk)("path",{d:"M20 0C31.046 0 40 8.954 40 20C40 31.046 31.046 40 20 40C8.954 40 0 31.046 0 20C0 8.954 8.954 0 20 0Z",fill:"white"}),(0,o.Lk)("path",{d:"M20 8C15.582 8 12 11.582 12 16V20C12 24.418 15.582 28 20 28C24.418 28 28 24.418 28 20V16C28 11.582 24.418 8 20 8Z",fill:"#EA60A7"})])],-1)),(0,o.Lk)("h1",_t,(0,L.v_)(l.roleDisplayName),1)]),(0,o.Lk)("div",At,[(0,o.Lk)("p",null,(0,L.v_)(l.roleTagline.line1),1),(0,o.Lk)("p",null,(0,L.v_)(l.roleTagline.line2),1)])]),(0,o.Lk)("div",Et,[(0,o.Lk)("div",It,[(0,o.Lk)("div",xt,(0,L.v_)(l.roleFeatures.feature1.icon),1),(0,o.Lk)("span",null,(0,L.v_)(l.roleFeatures.feature1.text),1)]),(0,o.Lk)("div",Pt,[(0,o.Lk)("div",St,(0,L.v_)(l.roleFeatures.feature2.icon),1),(0,o.Lk)("span",null,(0,L.v_)(l.roleFeatures.feature2.text),1)]),(0,o.Lk)("div",Ft,[(0,o.Lk)("div",Mt,(0,L.v_)(l.roleFeatures.feature3.icon),1),(0,o.Lk)("span",null,(0,L.v_)(l.roleFeatures.feature3.text),1)])])])]),(0,o.Lk)("div",Tt,[(0,o.Lk)("div",jt,[(0,o.Lk)("div",Dt,[t[5]||(t[5]=(0,o.Lk)("h2",{class:"form-title"},"Verify Email",-1)),t[6]||(t[6]=(0,o.Lk)("p",{class:"form-subtitle"},"We've sent a verification code to your email",-1)),(0,o.Lk)("div",Ut,(0,L.v_)(i.email),1)]),(0,o.Lk)("form",{onSubmit:t[3]||(t[3]=(0,s.D$)(((...e)=>l.verifyOtp&&l.verifyOtp(...e)),["prevent"])),class:"login-form"},[i.message?((0,o.uX)(),(0,o.CE)("div",$t,[(0,o.Lk)("div",{class:(0,L.C4)(["alert",i.messageType])},[t[7]||(t[7]=(0,o.Lk)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},[(0,o.Lk)("path",{d:"M8 0C3.58 0 0 3.58 0 8C0 12.42 3.58 16 8 16C12.42 16 16 12.42 16 8C16 3.58 12.42 0 8 0ZM9 12H7V10H9V12ZM9 8H7V4H9V8Z",fill:"currentColor"})],-1)),(0,o.eW)(" "+(0,L.v_)(i.message),1)],2)])):(0,o.Q3)("",!0),(0,o.Lk)("div",Xt,[t[9]||(t[9]=(0,o.Lk)("label",{for:"otp",class:"form-label"},"Verification Code",-1)),(0,o.Lk)("div",Vt,[t[8]||(t[8]=(0,o.Lk)("svg",{class:"input-icon",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none"},[(0,o.Lk)("path",{d:"M18 4H2C1.45 4 1 4.45 1 5V15C1 15.55 1.45 16 2 16H18C18.55 16 19 15.55 19 15V5C19 4.45 18.55 4 18 4ZM18 7L10 12L2 7V5L10 10L18 5V7Z",fill:"currentColor"})],-1)),(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>i.otp=e),maxlength:"6",class:"form-control otp-input",id:"otp",required:"",placeholder:"Enter 6-digit code",onInput:t[1]||(t[1]=(...e)=>l.formatOtpInput&&l.formatOtpInput(...e))},null,544),[[s.Jo,i.otp]])]),t[10]||(t[10]=(0,o.Lk)("div",{class:"otp-hint"},[(0,o.Lk)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},[(0,o.Lk)("path",{d:"M8 0C3.58 0 0 3.58 0 8C0 12.42 3.58 16 8 16C12.42 16 16 12.42 16 8C16 3.58 12.42 0 8 0ZM9 12H7V10H9V12ZM9 8H7V4H9V8Z",fill:"currentColor"})]),(0,o.eW)(" Check your email for the code ")],-1))]),i.countdown>0?((0,o.uX)(),(0,o.CE)("div",Bt,[(0,o.Lk)("div",Jt,[t[11]||(t[11]=(0,o.Lk)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},[(0,o.Lk)("path",{d:"M8 0C3.58 0 0 3.58 0 8C0 12.42 3.58 16 8 16C12.42 16 16 12.42 16 8C16 3.58 12.42 0 8 0ZM8 2C11.31 2 14 4.69 14 8C14 11.31 11.31 14 8 14C4.69 14 2 11.31 2 8C2 4.69 4.69 2 8 2ZM8 3V8L11 11L11.71 10.29L9 7.59V3H8Z",fill:"currentColor"})],-1)),(0,o.eW)(" Code expires in "+(0,L.v_)(l.formatTime(i.countdown)),1)])])):(0,o.Q3)("",!0),(0,o.Lk)("button",{type:"submit",class:"btn-primary",disabled:i.verifyInProgress||!i.otp},[i.verifyInProgress?((0,o.uX)(),(0,o.CE)("span",Qt)):((0,o.uX)(),(0,o.CE)("svg",zt,t[12]||(t[12]=[(0,o.Lk)("path",{d:"M10 0C4.48 0 0 4.48 0 10S4.48 20 10 20S20 15.52 20 10S15.52 0 10 0ZM8 15L3 10L4.41 8.59L8 12.17L15.59 4.58L17 6L8 15Z",fill:"currentColor"},null,-1)]))),(0,o.eW)(" "+(0,L.v_)(i.verifyInProgress?"Verifying...":"Verify Code"),1)],8,Nt),t[15]||(t[15]=(0,o.Lk)("div",{class:"divider"},[(0,o.Lk)("span",{class:"divider-text"},"or")],-1)),(0,o.Lk)("div",Rt,[t[14]||(t[14]=(0,o.Lk)("p",{class:"resend-text"},"Didn't receive the code?",-1)),(0,o.Lk)("button",{type:"button",onClick:t[2]||(t[2]=(...e)=>l.resendOtp&&l.resendOtp(...e)),class:"btn-secondary",disabled:i.resendInProgress||i.countdown>540},[i.resendInProgress?((0,o.uX)(),(0,o.CE)("span",Ot)):((0,o.uX)(),(0,o.CE)("svg",Ht,t[13]||(t[13]=[(0,o.Lk)("path",{d:"M10 3V1L8 3L10 5V3C13.31 3 16 5.69 16 9C16 9.73 15.84 10.42 15.56 11.06L16.93 12.43C17.60 11.39 18 10.24 18 9C18 4.58 14.42 1 10 1C9.8 1 9.6 1.02 9.41 1.05L10 3ZM6 9C6 8.27 6.16 7.58 6.44 6.94L5.07 5.57C4.40 6.61 4 7.76 4 9C4 13.42 7.58 17 12 17C12.2 17 12.4 16.98 12.59 16.95L12 15C8.69 15 6 12.31 6 9Z",fill:"currentColor"},null,-1)]))),(0,o.eW)(" "+(0,L.v_)(i.resendInProgress?"Sending...":"Resend Code"),1)],8,Wt),i.countdown>540?((0,o.uX)(),(0,o.CE)("div",Zt," Try again in "+(0,L.v_)(Math.ceil((i.countdown-540)/60))+" minute(s) ",1)):(0,o.Q3)("",!0)]),t[16]||(t[16]=(0,o.Fv)('<div class="footer-links" data-v-c52a473e><a href="/signup" class="link" data-v-c52a473e><svg width="16" height="16" viewBox="0 0 16 16" fill="none" data-v-c52a473e><path d="M8 0L6.59 1.41L12.17 7H0V9H12.17L6.59 14.59L8 16L16 8L8 0Z" fill="currentColor" data-v-c52a473e></path></svg> Back to Sign Up </a><span class="separator" data-v-c52a473e>â¢</span><a href="/login" class="link" data-v-c52a473e>Sign In Instead</a></div>',1))],32)])])])])}var qt={name:"VerifyOtpPage",data(){return{otp:"",email:"",message:"",messageType:"",verifyInProgress:!1,resendInProgress:!1,countdown:600,timer:null,role_id:null}},mounted(){const e=localStorage.getItem("signupEmail"),t=localStorage.getItem("selectedRoleId");e?(this.email=e,this.role_id=t||"1",this.startCountdown()):this.$router.push("/signup")},computed:{roleName(){switch(parseInt(this.role_id)){case 1:return"Job Seeker";case 2:return"Employer";case 3:return"Admin";case 4:return"Agent";default:return"Job Seeker"}},roleDisplayName(){switch(parseInt(this.role_id)){case 1:return"Job Seeker Hub";case 2:return"Job Provider Portal";case 3:return"Admin Dashboard";case 4:return"Agent Portal";default:return"Job Seeker Hub"}},roleTagline(){switch(parseInt(this.role_id)){case 1:return{line1:"Discover your dream career",line2:"Build your professional future"};case 2:return{line1:"Find the perfect candidates",line2:"Grow your team efficiently"};case 3:return{line1:"Manage and oversee",line2:"Control platform operations"};case 4:return{line1:"Connect talent with opportunity",line2:"Bridge careers and companies"};default:return{line1:"Discover your dream career",line2:"Build your professional future"}}},roleFeatures(){switch(parseInt(this.role_id)){case 1:return{feature1:{icon:"ð",text:"Search Jobs"},feature2:{icon:"ð",text:"Build Resume"},feature3:{icon:"ð¯",text:"Apply Smart"}};case 2:return{feature1:{icon:"ð",text:"Post Jobs"},feature2:{icon:"ð¥",text:"Find Talent"},feature3:{icon:"â¡",text:"Hire Fast"}};case 3:return{feature1:{icon:"ð",text:"Analytics"},feature2:{icon:"âï¸",text:"Settings"},feature3:{icon:"ð¡ï¸",text:"Security"}};case 4:return{feature1:{icon:"ð¤",text:"Connect"},feature2:{icon:"ð¼",text:"Manage"},feature3:{icon:"ð",text:"Track"}};default:return{feature1:{icon:"ð",text:"Search Jobs"},feature2:{icon:"ð",text:"Build Resume"},feature3:{icon:"ð¯",text:"Apply Smart"}}}}},methods:{async verifyOtp(){if(!this.otp)return this.message="Please enter the verification code.",void(this.messageType="alert-danger");if(6!==this.otp.length)return this.message="Please enter a valid 6-digit code.",void(this.messageType="alert-danger");this.verifyInProgress=!0,this.message="";try{const e=await ne.A.post(`${de}/seeker/verify-otp`,{email:this.email,otp:this.otp});200===e.status&&(this.message="Email verified successfully! Redirecting to login...",this.messageType="alert-success",localStorage.removeItem("signupEmail"),setTimeout((()=>{this.$router.push("/login")}),2e3))}catch(e){this.message=e.response?.data?.message||"Verification failed. Please try again.",this.messageType="alert-danger"}finally{this.verifyInProgress=!1}},async resendOtp(){this.resendInProgress=!0,this.message="";try{const e=await ne.A.post(`${de}/seeker/resend-otp`,{email:this.email});200===e.status&&(this.message="New verification code sent to your email!",this.messageType="alert-success",this.countdown=600,this.startCountdown(),this.otp="")}catch(e){this.message=e.response?.data?.message||"Failed to resend code. Please try again.",this.messageType="alert-danger"}finally{this.resendInProgress=!1}},formatOtpInput(){this.otp=this.otp.replace(/\D/g,"")},formatTime(e){const t=Math.floor(e/60),a=e%60;return`${t}:${a.toString().padStart(2,"0")}`},startCountdown(){this.timer&&clearInterval(this.timer),this.timer=setInterval((()=>{this.countdown>0?this.countdown--:clearInterval(this.timer)}),1e3)}},beforeUnmount(){this.timer&&clearInterval(this.timer)}};const Gt=(0,n.A)(qt,[["render",Kt],["__scopeId","data-v-c52a473e"]]);var Yt=Gt;const ea={class:"page-wrapper",id:"main-wrapper"},ta={class:"login-layout"},aa={class:"image-section",style:{background:"linear-gradient(135deg, #EA60A7 0%, #d946a3 50%, #c026d3 100%)"}},sa={class:"image-overlay"},oa={class:"brand-content"},ra={class:"brand-logo"},ia={class:"logo-text"},la={class:"brand-tagline"},na={class:"floating-elements"},da={class:"floating-card card-1"},ca={class:"card-icon"},ma={class:"floating-card card-2"},ua={class:"card-icon"},ga={class:"floating-card card-3"},ha={class:"card-icon"},pa={class:"form-section"},ba={class:"form-container"},fa={key:0,class:"error-container"},ka={key:0,width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},va={key:1,width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},ya={class:"form-group"},La={class:"input-wrapper"},Ca=["disabled"],wa=["disabled"],_a={key:0,class:"spinner"},Aa={key:1,width:"20",height:"20",viewBox:"0 0 20 20",fill:"none"};function Ea(e,t,a,r,i,l){return(0,o.uX)(),(0,o.CE)("div",ea,[(0,o.Lk)("div",ta,[(0,o.Lk)("div",aa,[(0,o.Lk)("div",sa,[(0,o.Lk)("div",oa,[(0,o.Lk)("div",ra,[t[2]||(t[2]=(0,o.Lk)("div",{class:"logo-icon"},[(0,o.Lk)("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none"},[(0,o.Lk)("path",{d:"M20 0C31.046 0 40 8.954 40 20C40 31.046 31.046 40 20 40C8.954 40 0 31.046 0 20C0 8.954 8.954 0 20 0Z",fill:"white"}),(0,o.Lk)("path",{d:"M20 8C15.582 8 12 11.582 12 16V20C12 24.418 15.582 28 20 28C24.418 28 28 24.418 28 20V16C28 11.582 24.418 8 20 8Z",fill:"#EA60A7"})])],-1)),(0,o.Lk)("h1",ia,(0,L.v_)(l.roleDisplayName),1)]),(0,o.Lk)("div",la,[(0,o.Lk)("p",null,(0,L.v_)(l.roleTagline.line1),1),(0,o.Lk)("p",null,(0,L.v_)(l.roleTagline.line2),1)])]),(0,o.Lk)("div",na,[(0,o.Lk)("div",da,[(0,o.Lk)("div",ca,(0,L.v_)(l.roleFeatures.feature1.icon),1),(0,o.Lk)("span",null,(0,L.v_)(l.roleFeatures.feature1.text),1)]),(0,o.Lk)("div",ma,[(0,o.Lk)("div",ua,(0,L.v_)(l.roleFeatures.feature2.icon),1),(0,o.Lk)("span",null,(0,L.v_)(l.roleFeatures.feature2.text),1)]),(0,o.Lk)("div",ga,[(0,o.Lk)("div",ha,(0,L.v_)(l.roleFeatures.feature3.icon),1),(0,o.Lk)("span",null,(0,L.v_)(l.roleFeatures.feature3.text),1)])])])]),(0,o.Lk)("div",pa,[(0,o.Lk)("div",ba,[t[10]||(t[10]=(0,o.Lk)("div",{class:"form-header"},[(0,o.Lk)("h2",{class:"form-title"},"Forgot Password"),(0,o.Lk)("p",{class:"form-subtitle"},"Enter your email address and we'll send you a reset code")],-1)),(0,o.Lk)("form",{onSubmit:t[1]||(t[1]=(0,s.D$)(((...e)=>l.submitEmail&&l.submitEmail(...e)),["prevent"])),class:"login-form"},[i.message?((0,o.uX)(),(0,o.CE)("div",fa,[(0,o.Lk)("div",{class:(0,L.C4)(["alert",i.messageType])},["alert-danger"===i.messageType?((0,o.uX)(),(0,o.CE)("svg",ka,t[3]||(t[3]=[(0,o.Lk)("path",{d:"M8 0C3.58 0 0 3.58 0 8C0 12.42 3.58 16 8 16C12.42 16 16 12.42 16 8C16 3.58 12.42 0 8 0ZM9 12H7V10H9V12ZM9 8H7V4H9V8Z",fill:"currentColor"},null,-1)]))):((0,o.uX)(),(0,o.CE)("svg",va,t[4]||(t[4]=[(0,o.Lk)("path",{d:"M8 0C3.58 0 0 3.58 0 8C0 12.42 3.58 16 8 16C12.42 16 16 12.42 16 8C16 3.58 12.42 0 8 0ZM7 11L3 7L4.41 5.59L7 8.17L11.59 3.58L13 5L7 11Z",fill:"currentColor"},null,-1)]))),(0,o.eW)(" "+(0,L.v_)(i.message),1)],2)])):(0,o.Q3)("",!0),(0,o.Lk)("div",ya,[t[6]||(t[6]=(0,o.Lk)("label",{for:"email",class:"form-label"},"Email Address",-1)),(0,o.Lk)("div",La,[t[5]||(t[5]=(0,o.Lk)("svg",{class:"input-icon",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none"},[(0,o.Lk)("path",{d:"M18 4H2C1.45 4 1 4.45 1 5V15C1 15.55 1.45 16 2 16H18C18.55 16 19 15.55 19 15V5C19 4.45 18.55 4 18 4ZM18 7L10 12L2 7V5L10 10L18 5V7Z",fill:"currentColor"})],-1)),(0,o.bo)((0,o.Lk)("input",{type:"email","onUpdate:modelValue":t[0]||(t[0]=e=>i.email=e),class:"form-control",id:"email",required:"",placeholder:"Enter your email address",disabled:i.sending},null,8,Ca),[[s.Jo,i.email]])]),t[7]||(t[7]=(0,o.Lk)("div",{class:"input-hint"},[(0,o.Lk)("svg",{width:"14",height:"14",viewBox:"0 0 20 20",fill:"none"},[(0,o.Lk)("path",{d:"M18 4H2C1.45 4 1 4.45 1 5V15C1 15.55 1.45 16 2 16H18C18.55 16 19 15.55 19 15V5C19 4.45 18.55 4 18 4ZM18 7L10 12L2 7V5L10 10L18 5V7Z",fill:"currentColor"})]),(0,o.eW)(" We'll send a reset code to this email ")],-1))]),(0,o.Lk)("button",{type:"submit",class:"btn-primary",disabled:i.sending||!i.email},[i.sending?((0,o.uX)(),(0,o.CE)("span",_a)):((0,o.uX)(),(0,o.CE)("svg",Aa,t[8]||(t[8]=[(0,o.Lk)("path",{d:"M2 3L18 10L2 17V13L14 10L2 7V3Z",fill:"currentColor"},null,-1)]))),(0,o.eW)(" "+(0,L.v_)(i.sending?"Sending...":"Send Reset Code"),1)],8,wa),t[9]||(t[9]=(0,o.Fv)('<div class="footer-links" data-v-1d76410e><a href="/login" class="link" data-v-1d76410e><svg width="16" height="16" viewBox="0 0 16 16" fill="none" data-v-1d76410e><path d="M8 0L3 5H6V12H10V5H13L8 0Z" fill="currentColor" data-v-1d76410e></path></svg> Back to Sign In </a><span class="separator" data-v-1d76410e>â¢</span><a href="/signup" class="link" data-v-1d76410e>Create Account</a></div>',1))],32)])])])])}var Ia={name:"ForgotPasswordPage",data(){return{email:"",message:"",messageType:"",sending:!1,role_id:null}},mounted(){const e=localStorage.getItem("selectedRoleId");e?this.role_id=e:this.$router.push("/role-selector")},computed:{roleName(){switch(parseInt(this.role_id)){case 1:return"Job Seeker";case 2:return"Employer";case 3:return"Admin";case 4:return"Agent";default:return"Unknown Role"}},roleDisplayName(){switch(parseInt(this.role_id)){case 1:return"Job Seeker Hub";case 2:return"Job Provider Portal";case 3:return"Admin Dashboard";case 4:return"Agent Portal";default:return"JobPortal"}},roleTagline(){switch(parseInt(this.role_id)){case 1:return{line1:"Discover your dream career",line2:"Build your professional future"};case 2:return{line1:"Find the perfect candidates",line2:"Grow your team efficiently"};case 3:return{line1:"Manage and oversee",line2:"Control platform operations"};case 4:return{line1:"Connect talent with opportunity",line2:"Bridge careers and companies"};default:return{line1:"Connect with opportunities",line2:"Shape your future"}}},roleFeatures(){switch(parseInt(this.role_id)){case 1:return{feature1:{icon:"ð",text:"Search Jobs"},feature2:{icon:"ð",text:"Build Resume"},feature3:{icon:"ð¯",text:"Apply Smart"}};case 2:return{feature1:{icon:"ð",text:"Post Jobs"},feature2:{icon:"ð¥",text:"Find Talent"},feature3:{icon:"â¡",text:"Hire Fast and secured"}};case 3:return{feature1:{icon:"ð",text:"Analytics"},feature2:{icon:"âï¸",text:"Settings"},feature3:{icon:"ð¡ï¸",text:"Security"}};case 4:return{feature1:{icon:"ð¤",text:"Connect"},feature2:{icon:"ð¼",text:"Manage"},feature3:{icon:"ð",text:"Track"}};default:return{feature1:{icon:"ð¼",text:"Find Jobs"},feature2:{icon:"ð",text:"Grow Career"},feature3:{icon:"ð¯",text:"Match Skills"}}}}},methods:{async submitEmail(){if(!this.email)return this.message="Please enter your email address.",void(this.messageType="alert-danger");if(!this.role_id)return this.message="Please select a role before proceeding.",void(this.messageType="alert-danger");this.message="",this.sending=!0;try{let e=`${de}/seeker/forgot-password`;switch(parseInt(this.role_id)){case 2:e=`${de}/seeker/forgot-password`;break;case 3:e=`${de}/admin/forgot-password`;break;case 4:e=`${de}/agent/forgot-password`;break;default:e=`${de}/seeker/forgot-password`}const t=await ne.A.post(e,{email:this.email,role_id:this.role_id});200===t.status&&(this.message="Reset code sent to your email successfully!",this.messageType="alert-success",localStorage.setItem("forgotEmail",this.email),localStorage.setItem("forgotRoleId",this.role_id),setTimeout((()=>{this.$router.push("/verify-forgot-otp")}),2e3))}catch(e){this.message=e.response?.data?.message||"Failed to send reset code. Please try again.",this.messageType="alert-danger"}finally{this.sending=!1}}}};const xa=(0,n.A)(Ia,[["render",Ea],["__scopeId","data-v-1d76410e"]]);var Pa=xa;const Sa={class:"page-wrapper",id:"main-wrapper"},Fa={class:"login-layout"},Ma={class:"form-section"},Ta={class:"form-container"},ja={class:"form-header"},Da={key:0,class:"email-display"},Ua={key:0,class:"error-container"},$a={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},Xa={key:0,d:"M8 0C3.58 0 0 3.58 0 8C0 12.42 3.58 16 8 16C12.42 16 16 12.42 16 8C16 3.58 12.42 0 8 0ZM9 12H7V10H9V12ZM9 8H7V4H9V8Z",fill:"currentColor"},Va={key:1,d:"M8 0C3.58 0 0 3.58 0 8C0 12.42 3.58 16 8 16C12.42 16 16 12.42 16 8C16 3.58 12.42 0 8 0ZM7 11L3 7L4.41 5.59L7 8.17L11.59 3.58L13 5L7 11Z",fill:"currentColor"},Ba={class:"form-group"},Ja={class:"input-wrapper"},Na=["disabled"],Qa={key:0,class:"spinner"},za={key:1,width:"20",height:"20",viewBox:"0 0 20 20",fill:"none"};function Ra(e,t,a,r,i,l){return(0,o.uX)(),(0,o.CE)("div",Sa,[(0,o.Lk)("div",Fa,[t[11]||(t[11]=(0,o.Fv)('<div class="image-section" style="background:linear-gradient(135deg, #EA60A7 0%, #d946a3 50%, #c026d3 100%);" data-v-6f4c3b8e><div class="image-overlay" data-v-6f4c3b8e><div class="brand-content" data-v-6f4c3b8e><div class="brand-logo" data-v-6f4c3b8e><div class="logo-icon" data-v-6f4c3b8e><svg width="40" height="40" viewBox="0 0 40 40" fill="none" data-v-6f4c3b8e><path d="M20 0C31.046 0 40 8.954 40 20C40 31.046 31.046 40 20 40C8.954 40 0 31.046 0 20C0 8.954 8.954 0 20 0Z" fill="white" data-v-6f4c3b8e></path><path d="M20 8C15.582 8 12 11.582 12 16V20C12 24.418 15.582 28 20 28C24.418 28 28 24.418 28 20V16C28 11.582 24.418 8 20 8Z" fill="#EA60A7" data-v-6f4c3b8e></path></svg></div><h1 class="logo-text" data-v-6f4c3b8e>Secure Reset</h1></div><div class="brand-tagline" data-v-6f4c3b8e><p data-v-6f4c3b8e>Your security is our priority</p><p data-v-6f4c3b8e>Quick and safe password recovery</p></div></div><div class="floating-elements" data-v-6f4c3b8e><div class="floating-card card-1" data-v-6f4c3b8e><div class="card-icon" data-v-6f4c3b8e>ð</div><span data-v-6f4c3b8e>Secure Process</span></div><div class="floating-card card-2" data-v-6f4c3b8e><div class="card-icon" data-v-6f4c3b8e>ð§</div><span data-v-6f4c3b8e>Email Verified</span></div><div class="floating-card card-3" data-v-6f4c3b8e><div class="card-icon" data-v-6f4c3b8e>â¡</div><span data-v-6f4c3b8e>Fast Recovery</span></div></div></div></div>',1)),(0,o.Lk)("div",Ma,[(0,o.Lk)("div",Ta,[(0,o.Lk)("div",ja,[t[4]||(t[4]=(0,o.Lk)("h2",{class:"form-title"},"Verify Reset Code",-1)),t[5]||(t[5]=(0,o.Lk)("p",{class:"form-subtitle"},"Enter the verification code sent to your email",-1)),i.email?((0,o.uX)(),(0,o.CE)("div",Da,[t[3]||(t[3]=(0,o.Lk)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},[(0,o.Lk)("path",{d:"M14 2H2C1.45 2 1 2.45 1 3V13C1 13.55 1.45 14 2 14H14C14.55 14 15 13.55 15 13V3C15 2.45 14.55 2 14 2ZM14 5L8 9L2 5V3L8 7L14 3V5Z",fill:"currentColor"})],-1)),(0,o.eW)(" "+(0,L.v_)(i.email),1)])):(0,o.Q3)("",!0)]),(0,o.Lk)("form",{onSubmit:t[2]||(t[2]=(0,s.D$)(((...e)=>l.verifyForgotOtp&&l.verifyForgotOtp(...e)),["prevent"])),class:"login-form"},[i.message?((0,o.uX)(),(0,o.CE)("div",Ua,[(0,o.Lk)("div",{class:(0,L.C4)(["alert",i.messageType])},[((0,o.uX)(),(0,o.CE)("svg",$a,["alert-danger"===i.messageType?((0,o.uX)(),(0,o.CE)("path",Xa)):((0,o.uX)(),(0,o.CE)("path",Va))])),(0,o.eW)(" "+(0,L.v_)(i.message),1)],2)])):(0,o.Q3)("",!0),(0,o.Lk)("div",Ba,[t[7]||(t[7]=(0,o.Lk)("label",{for:"otp",class:"form-label"},"Verification Code",-1)),(0,o.Lk)("div",Ja,[t[6]||(t[6]=(0,o.Lk)("svg",{class:"input-icon",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none"},[(0,o.Lk)("path",{d:"M15 7H14V5C14 2.24 11.76 0 9 0S4 2.24 4 5V7H3C2.45 7 2 7.45 2 8V18C2 18.55 2.45 19 3 19H15C15.55 19 16 18.55 16 18V8C16 7.45 15.55 7 15 7ZM6 5C6 3.34 7.34 2 9 2S12 3.34 12 5V7H6V5Z",fill:"currentColor"})],-1)),(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>i.otp=e),maxlength:"6",class:"form-control otp-input",id:"otp",required:"",placeholder:"Enter 6-digit code",onInput:t[1]||(t[1]=(...e)=>l.formatOtpInput&&l.formatOtpInput(...e))},null,544),[[s.Jo,i.otp]])]),t[8]||(t[8]=(0,o.Lk)("div",{class:"otp-hint"},[(0,o.Lk)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},[(0,o.Lk)("path",{d:"M14 2H2C1.45 2 1 2.45 1 3V13C1 13.55 1.45 14 2 14H14C14.55 14 15 13.55 15 13V3C15 2.45 14.55 2 14 2ZM14 5L8 9L2 5V3L8 7L14 3V5Z",fill:"currentColor"})]),(0,o.eW)(" Check your email for the reset code ")],-1))]),(0,o.Lk)("button",{type:"submit",class:"btn-primary",disabled:i.verifying||!i.otp},[i.verifying?((0,o.uX)(),(0,o.CE)("span",Qa)):((0,o.uX)(),(0,o.CE)("svg",za,t[9]||(t[9]=[(0,o.Lk)("path",{d:"M10 0C4.48 0 0 4.48 0 10S4.48 20 10 20S20 15.52 20 10S15.52 0 10 0ZM8 15L3 10L4.41 8.59L8 12.17L15.59 4.58L17 6L8 15Z",fill:"currentColor"},null,-1)]))),(0,o.eW)(" "+(0,L.v_)(i.verifying?"Verifying...":"Verify Code"),1)],8,Na),t[10]||(t[10]=(0,o.Fv)('<div class="footer-links" data-v-6f4c3b8e><a href="/forgot-password" class="link" data-v-6f4c3b8e><svg width="16" height="16" viewBox="0 0 16 16" fill="none" data-v-6f4c3b8e><path d="M8 0L6.59 1.41L12.17 7H0V9H12.17L6.59 14.59L8 16L16 8L8 0Z" fill="currentColor" data-v-6f4c3b8e></path></svg> Back to Email Entry </a><span class="separator" data-v-6f4c3b8e>â¢</span><a href="/login" class="link" data-v-6f4c3b8e>Sign In Instead</a></div>',1))],32)])])])])}var Wa={name:"VerifyForgotOtpPage",data(){return{otp:"",email:"",message:"",messageType:"",verifying:!1}},mounted(){const e=localStorage.getItem("forgotEmail");e?this.email=e:this.$router.push("/forgot-password")},methods:{async verifyForgotOtp(){if(!this.otp)return this.message="Please enter the verification code.",void(this.messageType="alert-danger");if(6!==this.otp.length)return this.message="Please enter a valid 6-digit code.",void(this.messageType="alert-danger");this.verifying=!0,this.message="";try{const e=await ne.A.post(`${de}/seeker/verify-forgot-otp`,{email:this.email,otp:this.otp});200===e.status&&(this.message="Code verified successfully! Redirecting...",this.messageType="alert-success",setTimeout((()=>{this.$router.push("/password-change")}),2e3))}catch(e){this.message=e.response?.data?.message||"Verification failed. Please try again.",this.messageType="alert-danger"}finally{this.verifying=!1}},formatOtpInput(){this.otp=this.otp.replace(/\D/g,"")}}};const Oa=(0,n.A)(Wa,[["render",Ra],["__scopeId","data-v-6f4c3b8e"]]);var Ha=Oa;const Za={class:"page-wrapper",id:"main-wrapper"},Ka={class:"login-layout"},qa={class:"form-section"},Ga={class:"form-container"},Ya={class:"form-header"},es={key:0,class:"email-display"},ts={key:0,class:"error-container"},as={class:"form-group"},ss={class:"input-wrapper"},os={class:"form-group"},rs={class:"input-wrapper"},is={key:0,class:"password-match"},ls={key:0,class:"match-error"},ns={key:1,class:"match-success"},ds={key:1,class:"password-requirements"},cs=["disabled"],ms={key:0,class:"spinner"},us={key:1,width:"20",height:"20",viewBox:"0 0 20 20",fill:"none"};function gs(e,t,a,r,i,l){return(0,o.uX)(),(0,o.CE)("div",Za,[(0,o.Lk)("div",Ka,[t[20]||(t[20]=(0,o.Fv)('<div class="image-section" style="background:linear-gradient(135deg, #EA60A7 0%, #d946a3 50%, #c026d3 100%);" data-v-25653c08><div class="image-overlay" data-v-25653c08><div class="brand-content" data-v-25653c08><div class="brand-logo" data-v-25653c08><div class="logo-icon" data-v-25653c08><svg width="40" height="40" viewBox="0 0 40 40" fill="none" data-v-25653c08><path d="M20 0C31.046 0 40 8.954 40 20C40 31.046 31.046 40 20 40C8.954 40 0 31.046 0 20C0 8.954 8.954 0 20 0Z" fill="white" data-v-25653c08></path><path d="M20 8C15.582 8 12 11.582 12 16V20C12 24.418 15.582 28 20 28C24.418 28 28 24.418 28 20V16C28 11.582 24.418 8 20 8Z" fill="#EA60A7" data-v-25653c08></path></svg></div><h1 class="logo-text" data-v-25653c08>Reset Password</h1></div><div class="brand-tagline" data-v-25653c08><p data-v-25653c08>Create a strong new password</p><p data-v-25653c08>Secure your account with confidence</p></div></div><div class="floating-elements" data-v-25653c08><div class="floating-card card-1" data-v-25653c08><div class="card-icon" data-v-25653c08>ð</div><span data-v-25653c08>Secure Reset</span></div><div class="floating-card card-2" data-v-25653c08><div class="card-icon" data-v-25653c08>ð¡ï¸</div><span data-v-25653c08>Protected</span></div><div class="floating-card card-3" style="margin-left:3rem;" data-v-25653c08><div class="card-icon" data-v-25653c08>â</div><span data-v-25653c08> Account Verified</span></div></div></div></div>',1)),(0,o.Lk)("div",qa,[(0,o.Lk)("div",Ga,[(0,o.Lk)("div",Ya,[t[3]||(t[3]=(0,o.Lk)("h2",{class:"form-title"},"Change Password",-1)),t[4]||(t[4]=(0,o.Lk)("p",{class:"form-subtitle"},"Create a strong new password for your account",-1)),i.email?((0,o.uX)(),(0,o.CE)("div",es,(0,L.v_)(i.email),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("form",{onSubmit:t[2]||(t[2]=(0,s.D$)(((...e)=>l.resetPassword&&l.resetPassword(...e)),["prevent"])),class:"login-form"},[i.message?((0,o.uX)(),(0,o.CE)("div",ts,[(0,o.Lk)("div",{class:(0,L.C4)(["alert",i.messageType])},[t[5]||(t[5]=(0,o.Lk)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},[(0,o.Lk)("path",{d:"M8 0C3.58 0 0 3.58 0 8C0 12.42 3.58 16 8 16C12.42 16 16 12.42 16 8C16 3.58 12.42 0 8 0ZM9 12H7V10H9V12ZM9 8H7V4H9V8Z",fill:"currentColor"})],-1)),(0,o.eW)(" "+(0,L.v_)(i.message),1)],2)])):(0,o.Q3)("",!0),(0,o.Lk)("div",as,[t[7]||(t[7]=(0,o.Lk)("label",{for:"newPassword",class:"form-label"},"New Password",-1)),(0,o.Lk)("div",ss,[t[6]||(t[6]=(0,o.Lk)("svg",{class:"input-icon",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none"},[(0,o.Lk)("path",{d:"M15 7H14V5C14 2.24 11.76 0 9 0S4 2.24 4 5V7H3C2.45 7 2 7.45 2 8V18C2 18.55 2.45 19 3 19H15C15.55 19 16 18.55 16 18V8C16 7.45 15.55 7 15 7ZM6 5C6 3.34 7.34 2 9 2S12 3.34 12 5V7H6V5Z",fill:"currentColor"})],-1)),(0,o.bo)((0,o.Lk)("input",{type:"password","onUpdate:modelValue":t[0]||(t[0]=e=>i.newPassword=e),class:"form-control",id:"newPassword",required:"",placeholder:"Enter your new password"},null,512),[[s.Jo,i.newPassword]])]),t[8]||(t[8]=(0,o.Lk)("div",{class:"password-hint"},[(0,o.Lk)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},[(0,o.Lk)("path",{d:"M8 0C3.58 0 0 3.58 0 8C0 12.42 3.58 16 8 16C12.42 16 16 12.42 16 8C16 3.58 12.42 0 8 0ZM9 12H7V10H9V12ZM9 8H7V4H9V8Z",fill:"currentColor"})]),(0,o.eW)(" Make it strong and secure ")],-1))]),(0,o.Lk)("div",os,[t[12]||(t[12]=(0,o.Lk)("label",{for:"confirmPassword",class:"form-label"},"Confirm Password",-1)),(0,o.Lk)("div",rs,[t[9]||(t[9]=(0,o.Lk)("svg",{class:"input-icon",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none"},[(0,o.Lk)("path",{d:"M15 7H14V5C14 2.24 11.76 0 9 0S4 2.24 4 5V7H3C2.45 7 2 7.45 2 8V18C2 18.55 2.45 19 3 19H15C15.55 19 16 18.55 16 18V8C16 7.45 15.55 7 15 7ZM6 5C6 3.34 7.34 2 9 2S12 3.34 12 5V7H6V5Z",fill:"currentColor"})],-1)),(0,o.bo)((0,o.Lk)("input",{type:"password","onUpdate:modelValue":t[1]||(t[1]=e=>i.confirmPassword=e),class:"form-control",id:"confirmPassword",required:"",placeholder:"Confirm your new password"},null,512),[[s.Jo,i.confirmPassword]])]),i.confirmPassword?((0,o.uX)(),(0,o.CE)("div",is,[l.passwordsMismatch?((0,o.uX)(),(0,o.CE)("div",ls,t[10]||(t[10]=[(0,o.Lk)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},[(0,o.Lk)("path",{d:"M8 0C3.58 0 0 3.58 0 8C0 12.42 3.58 16 8 16C12.42 16 16 12.42 16 8C16 3.58 12.42 0 8 0ZM11 5L10 4L8 6L6 4L5 5L7 7L5 9L6 10L8 8L10 10L11 9L9 7L11 5Z",fill:"currentColor"})],-1),(0,o.eW)(" Passwords do not match ")]))):((0,o.uX)(),(0,o.CE)("div",ns,t[11]||(t[11]=[(0,o.Lk)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},[(0,o.Lk)("path",{d:"M8 0C3.58 0 0 3.58 0 8C0 12.42 3.58 16 8 16C12.42 16 16 12.42 16 8C16 3.58 12.42 0 8 0ZM7 11L3 7L4.41 5.59L7 8.17L11.59 3.58L13 5L7 11Z",fill:"currentColor"})],-1),(0,o.eW)(" Passwords match ")])))])):(0,o.Q3)("",!0)]),i.newPassword?((0,o.uX)(),(0,o.CE)("div",ds,[t[17]||(t[17]=(0,o.Lk)("div",{class:"requirements-title"},"Password Requirements:",-1)),(0,o.Lk)("div",{class:(0,L.C4)(["requirement-item",{valid:l.passwordValidation.length}])},t[13]||(t[13]=[(0,o.Lk)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},[(0,o.Lk)("path",{d:"M8 0C3.58 0 0 3.58 0 8C0 12.42 3.58 16 8 16C12.42 16 16 12.42 16 8C16 3.58 12.42 0 8 0ZM7 11L3 7L4.41 5.59L7 8.17L11.59 3.58L13 5L7 11Z",fill:"currentColor"})],-1),(0,o.eW)(" At least 8 characters ")]),2),(0,o.Lk)("div",{class:(0,L.C4)(["requirement-item",{valid:l.passwordValidation.uppercase}])},t[14]||(t[14]=[(0,o.Lk)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},[(0,o.Lk)("path",{d:"M8 0C3.58 0 0 3.58 0 8C0 12.42 3.58 16 8 16C12.42 16 16 12.42 16 8C16 3.58 12.42 0 8 0ZM7 11L3 7L4.41 5.59L7 8.17L11.59 3.58L13 5L7 11Z",fill:"currentColor"})],-1),(0,o.eW)(" One uppercase letter ")]),2),(0,o.Lk)("div",{class:(0,L.C4)(["requirement-item",{valid:l.passwordValidation.lowercase}])},t[15]||(t[15]=[(0,o.Lk)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},[(0,o.Lk)("path",{d:"M8 0C3.58 0 0 3.58 0 8C0 12.42 3.58 16 8 16C12.42 16 16 12.42 16 8C16 3.58 12.42 0 8 0ZM7 11L3 7L4.41 5.59L7 8.17L11.59 3.58L13 5L7 11Z",fill:"currentColor"})],-1),(0,o.eW)(" One lowercase letter ")]),2),(0,o.Lk)("div",{class:(0,L.C4)(["requirement-item",{valid:l.passwordValidation.number}])},t[16]||(t[16]=[(0,o.Lk)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},[(0,o.Lk)("path",{d:"M8 0C3.58 0 0 3.58 0 8C0 12.42 3.58 16 8 16C12.42 16 16 12.42 16 8C16 3.58 12.42 0 8 0ZM7 11L3 7L4.41 5.59L7 8.17L11.59 3.58L13 5L7 11Z",fill:"currentColor"})],-1),(0,o.eW)(" One number ")]),2)])):(0,o.Q3)("",!0),(0,o.Lk)("button",{type:"submit",class:"btn-primary",disabled:i.updating||l.passwordsMismatch||!l.isPasswordValid},[i.updating?((0,o.uX)(),(0,o.CE)("span",ms)):((0,o.uX)(),(0,o.CE)("svg",us,t[18]||(t[18]=[(0,o.Lk)("path",{d:"M10 0C4.48 0 0 4.48 0 10S4.48 20 10 20S20 15.52 20 10S15.52 0 10 0ZM8 15L3 10L4.41 8.59L8 12.17L15.59 4.58L17 6L8 15Z",fill:"currentColor"},null,-1)]))),(0,o.eW)(" "+(0,L.v_)(i.updating?"Updating...":"Change Password"),1)],8,cs),t[19]||(t[19]=(0,o.Fv)('<div class="footer-links" data-v-25653c08><a href="/login" class="link" data-v-25653c08><svg width="16" height="16" viewBox="0 0 16 16" fill="none" data-v-25653c08><path d="M8 0L6.59 1.41L12.17 7H0V9H12.17L6.59 14.59L8 16L16 8L8 0Z" fill="currentColor" data-v-25653c08></path></svg> Back to Login </a><span class="separator" data-v-25653c08>â¢</span><a href="/forgot-password" class="link" data-v-25653c08>Forgot Password?</a></div>',1))],32)])])])])}a(1148);var hs={name:"ChangePasswordPage",data(){return{newPassword:"",confirmPassword:"",email:"",message:"",messageType:"",updating:!1}},computed:{passwordsMismatch(){return this.newPassword!==this.confirmPassword&&""!==this.confirmPassword},passwordValidation(){return{length:this.newPassword.length>=8,uppercase:/[A-Z]/.test(this.newPassword),lowercase:/[a-z]/.test(this.newPassword),number:/\d/.test(this.newPassword)}},isPasswordValid(){return Object.values(this.passwordValidation).every(Boolean)&&this.newPassword.length>0}},mounted(){const e=localStorage.getItem("forgotEmail");e?this.email=e:this.$router.push("/forgot-password")},methods:{async resetPassword(){if(this.passwordsMismatch)return this.message="Passwords do not match.",void(this.messageType="alert-danger");if(!this.isPasswordValid)return this.message="Please meet all password requirements.",void(this.messageType="alert-danger");this.message="",this.updating=!0;try{const e=await ne.A.post(`${de}/seeker/password-change`,{email:this.email,newPassword:this.newPassword});200===e.status&&(this.message="Password updated successfully! Redirecting to login...",this.messageType="alert-success",localStorage.removeItem("forgotEmail"),setTimeout((()=>{this.$router.push("/login")}),2e3))}catch(e){console.error("Password reset error:",e.response||e),this.message=e.response?.data?.message||"Password reset failed. Please try again.",this.messageType="alert-danger"}finally{this.updating=!1}}}};const ps=(0,n.A)(hs,[["render",gs],["__scopeId","data-v-25653c08"]]);var bs=ps;const fs={class:"page-wrapper",id:"main-wrapper","data-layout":"vertical","data-navbarbg":"skin6","data-sidebartype":"full","data-sidebar-description":"fixed","data-header-description":"fixed"},ks={class:"body-wrapper",style:{"margin-top":"-3rem"}},vs={class:"container-fluid"},ys={class:"stats-cards-container"},Ls={class:"stats-card"},Cs={class:"card-content"},ws={class:"card-info"},_s={class:"card-value"},As={class:"stats-card"},Es={class:"card-content"},Is={class:"card-info"},xs={class:"card-value"},Ps={class:"stats-card"},Ss={class:"card-content"},Fs={class:"card-info"},Ms={class:"card-value"},Ts={class:"benefits-section"},js={class:"benefits-content"},Ds={class:"benefits-image"},Us=["src"];function $s(e,t,s,r,i,l){const n=(0,o.g2)("IndexComponent");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(n),(0,o.Lk)("div",fs,[(0,o.Lk)("div",ks,[(0,o.Lk)("div",vs,[(0,o.Lk)("div",ys,[(0,o.Lk)("div",Ls,[(0,o.Lk)("div",Cs,[(0,o.Lk)("div",ws,[t[0]||(t[0]=(0,o.Lk)("div",{class:"card-label"},"All Job Providers",-1)),(0,o.Lk)("div",_s,(0,L.v_)(i.productsCount),1)]),t[1]||(t[1]=(0,o.Lk)("div",{class:"card-icon"},[(0,o.Lk)("i",{class:"ti ti-notebook"})],-1))]),t[2]||(t[2]=(0,o.Lk)("div",{class:"card-gradient-bg"},null,-1))]),(0,o.Lk)("div",As,[(0,o.Lk)("div",Es,[(0,o.Lk)("div",Is,[t[3]||(t[3]=(0,o.Lk)("div",{class:"card-label"},"All Job Seekers",-1)),(0,o.Lk)("div",xs,(0,L.v_)(i.blogsCount),1)]),t[4]||(t[4]=(0,o.Lk)("div",{class:"card-icon"},[(0,o.Lk)("i",{class:"ti ti-archive"})],-1))]),t[5]||(t[5]=(0,o.Lk)("div",{class:"card-gradient-bg"},null,-1))]),(0,o.Lk)("div",Ps,[(0,o.Lk)("div",Ss,[(0,o.Lk)("div",Fs,[t[6]||(t[6]=(0,o.Lk)("div",{class:"card-label"},"All Jobs",-1)),(0,o.Lk)("div",Ms,(0,L.v_)(i.teamCount),1)]),t[7]||(t[7]=(0,o.Lk)("div",{class:"card-icon"},[(0,o.Lk)("i",{class:"ti ti-users"})],-1))]),t[8]||(t[8]=(0,o.Lk)("div",{class:"card-gradient-bg"},null,-1))])]),(0,o.Lk)("div",Ts,[t[10]||(t[10]=(0,o.Lk)("h3",{class:"section-title"}," Payment Status & Benefits of Kozi Caretakers ",-1)),t[11]||(t[11]=(0,o.Lk)("hr",{class:"section-divider"},null,-1)),(0,o.Lk)("div",js,[(0,o.Lk)("div",Ds,[(0,o.Lk)("img",{src:a(9793),alt:"Registration",class:"responsive-image"},null,8,Us)]),t[9]||(t[9]=(0,o.Fv)('<div class="benefits-instructions" data-v-6ffb303a><h2 class="instructions-title" data-v-6ffb303a>How It Works</h2><hr class="instructions-divider" data-v-6ffb303a><div class="premium-notice" data-v-6ffb303a><p data-v-6ffb303a><strong data-v-6ffb303a>N.B:</strong> A one-time payment grants access to exclusive premium features for only advanced workers! </p></div><div class="steps-container" data-v-6ffb303a><div class="step-item" data-v-6ffb303a><span class="step-number" data-v-6ffb303a>1</span><span class="step-text" data-v-6ffb303a>Dial the MoMo Pay code *182*8*1*067788#</span></div><div class="step-item" data-v-6ffb303a><span class="step-number" data-v-6ffb303a>2</span><span class="step-text" data-v-6ffb303a>Enter the amount: 1,500 RWF</span></div><div class="step-item" data-v-6ffb303a><span class="step-number" data-v-6ffb303a>3</span><span class="step-text" data-v-6ffb303a>Confirm the name: SANSON GROUP Ltd</span></div><div class="step-item" data-v-6ffb303a><span class="step-number" data-v-6ffb303a>4</span><span class="step-text" data-v-6ffb303a>Enter your MoMo PIN</span></div><div class="step-item" data-v-6ffb303a><span class="step-number" data-v-6ffb303a>5</span><span class="step-text" data-v-6ffb303a>Wait up to 5 minutes for approval</span></div></div><div class="footer-note" data-v-6ffb303a> Track your progress and take the next step in your career journey with us! </div></div>',1))])])])])])],64)}a(4979);const Xs={id:"main-wrapper"};function Vs(e,t,a,s,r,i){const l=(0,o.g2)("SidebarComponent"),n=(0,o.g2)("HeaderComponent");return(0,o.uX)(),(0,o.CE)("div",Xs,[(0,o.bF)(l,{visible:r.sidebarVisible,onCloseSidebar:t[0]||(t[0]=e=>r.sidebarVisible=!1)},null,8,["visible"]),(0,o.Lk)("div",{class:(0,L.C4)(["body-wrapper",{hidden:r.isMobile&&r.sidebarVisible}])},[(0,o.bF)(n,{onToggleSidebar:i.toggleSidebar},null,8,["onToggleSidebar"])],2)])}const Bs={class:"app-header"},Js={class:"navbar navbar-expand-lg navbar-light px-3 fixed-top",style:{"background-color":"white"}},Ns={class:"navbar-nav"},Qs={class:"nav-item d-block d-xl-none"},zs={class:"navbar-collapse justify-content-end px-0",id:"navbarNav"},Rs={class:"navbar-nav flex-row ms-auto align-items-center justify-content-end"},Ws={key:0,class:"nav-item me-3"},Os={class:"nav-item dropdown"},Hs={class:"nav-link nav-icon-hover",href:"javascript:void(0)",id:"userDropdown","data-bs-toggle":"dropdown","aria-expanded":"false"},Zs=["src"],Ks={class:"dropdown-menu dropdown-menu-end dropdown-menu-animate-up","aria-labelledby":"userDropdown"};function qs(e,t,a,s,r,i){const l=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("header",Bs,[(0,o.Lk)("nav",Js,[(0,o.Lk)("ul",Ns,[(0,o.Lk)("li",Qs,[(0,o.Lk)("a",{class:"nav-link sidebartoggler nav-icon-hover",href:"javascript:void(0)",onClick:t[0]||(t[0]=t=>e.$emit("toggle-sidebar")),title:"Toggle Sidebar"},t[3]||(t[3]=[(0,o.Lk)("i",{class:"ti ti-menu-2"},null,-1)]))])]),(0,o.Lk)("div",zs,[(0,o.Lk)("ul",Rs,[r.userEmail?((0,o.uX)(),(0,o.CE)("li",Ws,t[4]||(t[4]=[(0,o.Lk)("div",{class:"d-flex flex-column text-end"},null,-1)]))):(0,o.Q3)("",!0),(0,o.Lk)("li",Os,[(0,o.Lk)("a",Hs,[(0,o.Lk)("img",{src:r.uploadsUrl+r.image,onError:t[1]||(t[1]=e=>i.onLogoError(e)),alt:"User Profile",class:"rounded-circle",width:"35",height:"35"},null,40,Zs)]),(0,o.Lk)("ul",Ks,[(0,o.Lk)("li",null,[(0,o.bF)(l,{to:"/dashboard/View-profile",class:"dropdown-item d-flex align-items-center"},{default:(0,o.k6)((()=>t[5]||(t[5]=[(0,o.Lk)("i",{class:"ti ti-user fs-6 me-2"},null,-1),(0,o.eW)(" My Profile ")]))),_:1})]),(0,o.Lk)("li",null,[(0,o.bF)(l,{to:"/dashboard/change-password",class:"dropdown-item d-flex align-items-center"},{default:(0,o.k6)((()=>t[6]||(t[6]=[(0,o.Lk)("i",{class:"fa-solid fa-key me-2"},null,-1),(0,o.eW)(" Credentials ")]))),_:1})]),(0,o.Lk)("li",null,[(0,o.bF)(l,{to:"/dashboard/settings",class:"dropdown-item d-flex align-items-center"},{default:(0,o.k6)((()=>t[7]||(t[7]=[(0,o.Lk)("i",{class:"fa-solid fa-key me-2"},null,-1),(0,o.eW)(" Settings ")]))),_:1})]),(0,o.Lk)("li",null,[(0,o.Lk)("a",{href:"javascript:void(0)",class:"dropdown-item",onClick:t[2]||(t[2]=(...e)=>i.logout&&i.logout(...e))},t[8]||(t[8]=[(0,o.Lk)("i",{class:"ti ti-square-arrow-left me-2",style:{width:"2rem"}},null,-1),(0,o.eW)(" Logout ")]))])])])])])])])}var Gs={name:"HeaderComponent",data(){return{defaultImage:a(2231),uploadsUrl:de+"/uploads/profile/",userId:"",userEmail:"",firstName:"",lastName:"",image:""}},mounted(){this.getUserIdFromEmail()},methods:{onLogoError(e){e.target.src=this.defaultImage},async getUserIdFromEmail(){const e=localStorage.getItem("authToken");if(e)try{const t=JSON.parse(atob(e.split(".")[1]));this.userEmail=t.email;const a=await fetch(`${de}/get_user_id_by_email/${this.userEmail}`,{headers:{Authorization:`Bearer ${e}`}}),s=await a.json();a.ok?(this.userId=s.users_id,this.fetchProfile()):console.error("Unable to get user ID:",s.message)}catch(t){console.error("Error getting users_id:",t)}},async fetchProfile(){const e=localStorage.getItem("authToken");if(e&&this.userId)try{const t=await fetch(`${de}/seeker/view_profile/${this.userId}`,{headers:{Authorization:`Bearer ${e}`}}),a=await t.json();t.ok?(this.firstName=a.first_name||"",this.lastName=a.last_name||"",this.image=a.image||""):console.error("Failed to fetch profile:",a.message)}catch(t){console.error("Error fetching profile:",t)}},logout(){localStorage.removeItem("authToken"),this.$router.push("/login")}}};const Ys=(0,n.A)(Gs,[["render",qs],["__scopeId","data-v-302ab262"]]);var eo=Ys;const to={class:"sidebar-header"},ao={class:"brand-logo"},so={href:"./",class:"text-nowrap logo-img"},oo=["src"],ro={class:"sidebar-nav"},io=["href"],lo={key:0,class:"premium-badge"},no={key:0,class:"premium-badge"},co={key:0,class:"premium-badge"},mo={class:"modal-header"},uo={class:"modal-footer"};function go(e,t,r,i,l,n){const d=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("aside",{class:(0,L.C4)(["sidebar",{visible:r.visible}])},[(0,o.Lk)("div",to,[(0,o.Lk)("div",ao,[(0,o.Lk)("a",so,[(0,o.Lk)("img",{src:a(5549),alt:"Logo",style:{width:"10rem"}},null,8,oo)])]),(0,o.Lk)("button",{class:"close-btn",onClick:t[0]||(t[0]=t=>e.$emit("close-sidebar"))},"Ã")]),(0,o.Lk)("nav",ro,[(0,o.Lk)("ul",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.menuItems,(a=>((0,o.uX)(),(0,o.CE)("li",{key:a.link},[a.external?((0,o.uX)(),(0,o.CE)("a",{key:0,href:a.link,target:"_blank",rel:"noopener noreferrer",class:"sidebar-nav-link"},[(0,o.Lk)("i",{class:(0,L.C4)(a.icon),style:{"margin-right":"8px","font-size":"1.25rem"}},null,2),(0,o.eW)(" "+(0,L.v_)(a.name)+" ",1),a.premium?((0,o.uX)(),(0,o.CE)("span",lo,"Premium")):(0,o.Q3)("",!0)],8,io)):l.isProfileComplete||"/dashboard/Edit-Profile"===a.link||"/dashboard/message"===a.link?((0,o.uX)(),(0,o.Wv)(d,{key:1,to:a.link,onClick:t[1]||(t[1]=t=>e.$emit("close-sidebar")),class:(0,L.C4)([{"router-link-active":i.isActive(a.matchPrefix)}])},{default:(0,o.k6)((()=>[(0,o.Lk)("i",{class:(0,L.C4)(a.icon),style:{"margin-right":"8px","font-size":"1.25rem"}},null,2),(0,o.eW)(" "+(0,L.v_)(a.name)+" ",1),a.premium?((0,o.uX)(),(0,o.CE)("span",no,"Premium")):(0,o.Q3)("",!0)])),_:2},1032,["to","class"])):((0,o.uX)(),(0,o.CE)("a",{key:2,onClick:t[2]||(t[2]=(...e)=>n.showAccessModal&&n.showAccessModal(...e)),class:"sidebar-nav-link disabled-link",style:{cursor:"pointer"}},[(0,o.Lk)("i",{class:(0,L.C4)(a.icon),style:{"margin-right":"8px","font-size":"1.25rem"}},null,2),(0,o.eW)(" "+(0,L.v_)(a.name)+" ",1),a.premium?((0,o.uX)(),(0,o.CE)("span",co,"Premium")):(0,o.Q3)("",!0)]))])))),128))])]),l.showModal?((0,o.uX)(),(0,o.CE)("div",{key:0,class:"modal-overlay",onClick:t[5]||(t[5]=(...e)=>n.closeModal&&n.closeModal(...e))},[(0,o.Lk)("div",{class:"modal-content",onClick:t[4]||(t[4]=(0,s.D$)((()=>{}),["stop"]))},[(0,o.Lk)("div",mo,[t[6]||(t[6]=(0,o.Lk)("h3",{class:"modal-title"},[(0,o.Lk)("i",{class:"fa-solid fa-lock",style:{"margin-right":"8px",color:"#E960A6"}}),(0,o.eW)(" Uzuza Umwirondoro Wawe ")],-1)),(0,o.Lk)("button",{class:"modal-close-btn",onClick:t[3]||(t[3]=(...e)=>n.closeModal&&n.closeModal(...e))},"Ã")]),t[8]||(t[8]=(0,o.Lk)("div",{class:"modal-body"},[(0,o.Lk)("p",{style:{display:"justify"}},"Kugira ngo ubone iyi serivisi,banza wuzuze umwirondoro wawe"),(0,o.Lk)("p",{style:{display:"justify"}},"Umwirondoro wuzuye niwo ugenderwaho kugira ngo ubone akazi bityo urasabwa kuzuza umwirondoro wawe neza.")],-1)),(0,o.Lk)("div",uo,[(0,o.bF)(d,{to:"/dashboard/Edit-Profile",class:"btn-primary",onClick:n.closeModalAndNavigate},{default:(0,o.k6)((()=>t[7]||(t[7]=[(0,o.eW)(" Kanda hano ")]))),_:1},8,["onClick"])])])])):(0,o.Q3)("",!0)],2)}a(3579);var ho={props:{visible:Boolean},emits:["close-sidebar"],data(){return{userEmail:"",userId:"",isProfileComplete:!1,showModal:!1}},mounted(){this.getUserIdAndCheckProfile()},setup(){const e=(0,m.lq)(),t=[{name:"Dashboard",link:"/dashboard/",icon:"fa-solid fa-table-columns"},{name:"Edit Profile",link:"/dashboard/Edit-Profile",icon:"ti ti-user-plus",matchPrefix:["/dashboard/Edit-Profile"]},{name:"View Profile",link:"/dashboard/View-profile",icon:"ti ti-user-check",matchPrefix:["/dashboard/View-profile"]},{name:"My Application",link:"/dashboard/My-application",icon:"fa-solid fa-spinner",matchPrefix:["/dashboard/My-application"]},{name:"All jobs",link:"/dashboard/All-jobs",icon:"fa-solid fa-briefcase",premium:!0,matchPrefix:["/dashboard/All-jobs"]},{name:"Payment",link:"/dashboard/payment",icon:"fa-solid fa-money-bills",matchPrefix:["/dashboard/payment"]},{name:"Messages",link:"/dashboard/message",icon:"ti ti-message-chatbot",matchPrefix:["/dashboard/message"]},{name:"Guidelines",link:"/Kozi_Worker_Guidelines.pdf",icon:"ti ti-archive",external:!0}],a=(t,a)=>Array.isArray(t)?t.some((t=>e.path.startsWith(t))):e.path===a;return{route:e,menuItems:t,isActive:a}},methods:{async getUserIdAndCheckProfile(){const e=localStorage.getItem("authToken");if(e)try{const t=JSON.parse(atob(e.split(".")[1]));this.userEmail=t.email;const a=await fetch(`${de}/get_user_id_by_email/${this.userEmail}`,{headers:{Authorization:`Bearer ${e}`}}),s=await a.json();if(a.ok){this.userId=s.users_id;const t=await fetch(`${de}/seekers/check_columns/${this.userId}`,{headers:{Authorization:`Bearer ${e}`}}),a=await t.json();this.isProfileComplete=a.isComplete}else console.error("Unable to get user ID:",s.message)}catch(t){console.error("Error retrieving user info or checking profile:",t)}},showAccessModal(){this.showModal=!0},closeModal(){this.showModal=!1},closeModalAndNavigate(){this.showModal=!1,this.$emit("close-sidebar")}}};const po=(0,n.A)(ho,[["render",go],["__scopeId","data-v-44219a94"]]);var bo=po,fo={components:{HeaderComponent:eo,SidebarComponent:bo},data(){return{sidebarVisible:!1,isMobile:window.innerWidth<=768}},mounted(){window.addEventListener("resize",this.checkMobile)},beforeUnmount(){window.removeEventListener("resize",this.checkMobile)},methods:{toggleSidebar(){this.sidebarVisible=!this.sidebarVisible},checkMobile(){this.isMobile=window.innerWidth<=768,this.isMobile||(this.sidebarVisible=!0)}}};const ko=(0,n.A)(fo,[["render",Vs],["__scopeId","data-v-26d67c4f"]]);var vo=ko,yo={name:"WelcomeComponent",components:{IndexComponent:vo},data(){return{productsCount:0,blogsCount:0,teamCount:0,userEmail:"",userId:""}},mounted(){this.fetchDashboardCounts(),this.checkProfileStatus()},methods:{async fetchDashboardCounts(){try{const e=await ne.A.get(`${de}/providers/counts`);this.productsCount=e.data.count||0;const t=await ne.A.get(`${de}/seekers/count`);this.blogsCount=t.data.count||0;const a=await ne.A.get(`${de}/jobs/count`);this.teamCount=a.data.count||0}catch(e){console.error("Error fetching dashboard counts:",e)}},async checkProfileStatus(){const e=localStorage.getItem("authToken");if(e)try{const t=JSON.parse(atob(e.split(".")[1]));this.userEmail=t.email;const a=await ne.A.get(`${de}/get_user_id_by_email/${this.userEmail}`,{headers:{Authorization:`Bearer ${e}`}});this.userId=a.data.users_id;const s=await ne.A.get(`${de}/seekers/check_columns/${this.userId}`,{headers:{Authorization:`Bearer ${e}`}}),o=s.data.isComplete;o||this.$router.push("/dashboard/Edit-Profile")}catch(t){console.error("Error checking profile completeness:",t)}}}};const Lo=(0,n.A)(yo,[["render",$s],["__scopeId","data-v-6ffb303a"]]);var Co=Lo;const wo={class:"page-wrapper",id:"main-wrapper","data-layout":"vertical","data-navbarbg":"skin6","data-sidebartype":"full","data-sidebar-description":"fixed","data-header-description":"fixed"},_o={class:"body-wrapper"},Ao={class:"form-group row"},Eo=["for"],Io=["onUpdate:modelValue","id"],xo=["type","onUpdate:modelValue","id","max"],Po={class:"col-md-6"},So={class:"col-md-6"},Fo=["value"],Mo={class:"col-md-6"},To=["disabled"],jo=["value"],Do={class:"col-md-6"},Uo=["disabled"],$o=["value"],Xo={class:"col-md-6"},Vo=["disabled"],Bo=["value"],Jo={class:"col-md-6"},No=["disabled"],Qo=["value"],zo={class:"col-md-6"},Ro={class:"col-md-6"},Wo={class:"col-md-6"},Oo=["value"],Ho={class:"col-md-6"},Zo=["value"],Ko={class:"col-md-6"},qo=["required"],Go={key:0,class:"mt-2"},Yo=["href"],er={class:"col-md-6"},tr=["required"],ar={key:0,class:"mt-2"},sr=["href"],or={class:"col-md-6"},rr={key:0,class:"mt-2"},ir=["href"],lr={class:"col-md-12"},nr=["disabled"],dr={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},cr={key:1,class:"ms-2"},mr={key:2};function ur(e,t,a,r,i,l){const n=(0,o.g2)("IndexComponent");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(n),(0,o.Lk)("div",wo,[t[49]||(t[49]=(0,o.Lk)("div",{class:"body-wrapper",style:{"margin-top":"-3rem"}},null,-1)),(0,o.Lk)("div",_o,[t[48]||(t[48]=(0,o.Lk)("h5",{class:"card-title fw-semibold mb-4",style:{color:"#E960A6"}},[(0,o.Lk)("i",{class:"ti ti-user-plus"}),(0,o.eW)(" Update Profile")],-1)),(0,o.Lk)("form",{onSubmit:t[20]||(t[20]=(0,s.D$)(((...e)=>l.handleSubmit&&l.handleSubmit(...e)),["prevent"])),class:"mx-4"},[(0,o.Lk)("div",Ao,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.personalFields,((e,a)=>((0,o.uX)(),(0,o.CE)("div",{class:"col-md-6",key:a},[(0,o.Lk)("label",{for:e.model,class:"form-label"},(0,L.v_)(e.label),9,Eo),"telephone"===e.model?(0,o.bo)(((0,o.uX)(),(0,o.CE)("input",{key:0,type:"tel","onUpdate:modelValue":t=>i.form[e.model]=t,class:"form-control",id:e.model,onInput:t[0]||(t[0]=(...e)=>l.handleTelephoneInput&&l.handleTelephoneInput(...e)),maxlength:"12",pattern:"[0-9]*",inputmode:"numeric",placeholder:"Enter phone number",required:""},null,40,Io)),[[s.Jo,i.form[e.model]]]):(0,o.bo)(((0,o.uX)(),(0,o.CE)("input",{key:1,type:e.type,"onUpdate:modelValue":t=>i.form[e.model]=t,class:"form-control",id:e.model,max:"date_of_birth"===e.model?l.maxDateOfBirth:null,required:""},null,8,xo)),[[s.hp,i.form[e.model]]])])))),128)),(0,o.Lk)("div",Po,[t[22]||(t[22]=(0,o.Lk)("label",{class:"form-label"},"Gender",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>i.form.gender=e),class:"form-control",style:{height:"48px","padding-top":"8px","padding-bottom":"8px"},required:""},t[21]||(t[21]=[(0,o.Lk)("option",{disabled:"",value:""},"Choose Gender",-1),(0,o.Lk)("option",null,"Male",-1),(0,o.Lk)("option",null,"Female",-1),(0,o.Lk)("option",null,"Other",-1)]),512),[[s.u1,i.form.gender]])]),(0,o.Lk)("div",So,[t[24]||(t[24]=(0,o.Lk)("label",{class:"form-label"},"Province",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>i.form.province=e),onChange:t[3]||(t[3]=(...e)=>l.loadDistricts&&l.loadDistricts(...e)),class:"form-control",style:{height:"48px","padding-top":"8px","padding-bottom":"8px"},required:""},[t[23]||(t[23]=(0,o.Lk)("option",{disabled:"",value:""},"Select Province",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.provinces,(e=>((0,o.uX)(),(0,o.CE)("option",{key:e,value:e},(0,L.v_)(e),9,Fo)))),128))],544),[[s.u1,i.form.province]])]),(0,o.Lk)("div",Mo,[t[26]||(t[26]=(0,o.Lk)("label",{class:"form-label"},"District",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>i.form.district=e),onChange:t[5]||(t[5]=(...e)=>l.loadSectors&&l.loadSectors(...e)),disabled:!i.form.province,class:"form-control",style:{height:"48px","padding-top":"8px","padding-bottom":"8px"},required:""},[t[25]||(t[25]=(0,o.Lk)("option",{disabled:"",value:""},"Select District",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.districts,(e=>((0,o.uX)(),(0,o.CE)("option",{key:e,value:e},(0,L.v_)(e),9,jo)))),128))],40,To),[[s.u1,i.form.district]])]),(0,o.Lk)("div",Do,[t[28]||(t[28]=(0,o.Lk)("label",{class:"form-label"},"Sector",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[6]||(t[6]=e=>i.form.sector=e),onChange:t[7]||(t[7]=(...e)=>l.loadCells&&l.loadCells(...e)),disabled:!i.form.district,class:"form-control",style:{height:"48px","padding-top":"8px","padding-bottom":"8px"},required:""},[t[27]||(t[27]=(0,o.Lk)("option",{disabled:"",value:""},"Select Sector",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.sectors,(e=>((0,o.uX)(),(0,o.CE)("option",{key:e,value:e},(0,L.v_)(e),9,$o)))),128))],40,Uo),[[s.u1,i.form.sector]])]),(0,o.Lk)("div",Xo,[t[30]||(t[30]=(0,o.Lk)("label",{class:"form-label"},"Cell",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[8]||(t[8]=e=>i.form.cell=e),onChange:t[9]||(t[9]=(...e)=>l.loadVillages&&l.loadVillages(...e)),disabled:!i.form.sector,class:"form-control",style:{height:"48px","padding-top":"8px","padding-bottom":"8px"},required:""},[t[29]||(t[29]=(0,o.Lk)("option",{disabled:"",value:""},"Select Cell",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.cells,(e=>((0,o.uX)(),(0,o.CE)("option",{key:e,value:e},(0,L.v_)(e),9,Bo)))),128))],40,Vo),[[s.u1,i.form.cell]])]),(0,o.Lk)("div",Jo,[t[32]||(t[32]=(0,o.Lk)("label",{class:"form-label"},"Village",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[10]||(t[10]=e=>i.form.village=e),disabled:!i.form.cell,class:"form-control",style:{height:"48px","padding-top":"8px","padding-bottom":"8px"},required:""},[t[31]||(t[31]=(0,o.Lk)("option",{disabled:"",value:""},"Select Village",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.villages,(e=>((0,o.uX)(),(0,o.CE)("option",{key:e,value:e},(0,L.v_)(e),9,Qo)))),128))],8,No),[[s.u1,i.form.village]])]),(0,o.Lk)("div",zo,[t[34]||(t[34]=(0,o.Lk)("label",{class:"form-label"},"Disability",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[11]||(t[11]=e=>i.form.disability=e),class:"form-control",style:{height:"48px","padding-top":"8px","padding-bottom":"8px"},required:""},t[33]||(t[33]=[(0,o.Fv)('<option disabled value="" data-v-2899580a>Select Disability</option><option data-v-2899580a>None</option><option data-v-2899580a>Visual Impairment</option><option data-v-2899580a>Hearing Impairment</option><option data-v-2899580a>Physical Disability</option><option data-v-2899580a>Intellectual Disability</option><option data-v-2899580a>Mental Health Condition</option><option data-v-2899580a>Learning Disability</option><option data-v-2899580a>Speech and Language Disorder</option><option data-v-2899580a>Autism Spectrum Disorder</option><option data-v-2899580a>Chronic Illness (e.g. epilepsy, diabetes)</option><option data-v-2899580a>Neurological Disorder (e.g. cerebral palsy)</option><option data-v-2899580a>Albinism</option><option data-v-2899580a>Multiple Disabilities</option><option data-v-2899580a>Other</option>',15)]),512),[[s.u1,i.form.disability]])]),(0,o.Lk)("div",Ro,[t[36]||(t[36]=(0,o.Lk)("label",{class:"form-label"},"Expected Salary",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[12]||(t[12]=e=>i.form.salary=e),class:"form-control",style:{height:"48px","padding-top":"8px","padding-bottom":"8px"},required:""},t[35]||(t[35]=[(0,o.Lk)("option",{disabled:"",value:""},"Select Salary",-1),(0,o.Lk)("option",null,"35,000 Frw - 50,000 Frw",-1),(0,o.Lk)("option",null,"51,000 Frw - 80,000 Frw",-1),(0,o.Lk)("option",null,"81,000 Frw - 100,000 Frw",-1),(0,o.Lk)("option",null,"101,000 Frw - 150,000 Frw",-1),(0,o.Lk)("option",null,"150,001+ Frw",-1)]),512),[[s.u1,i.form.salary]])]),(0,o.Lk)("div",Wo,[t[38]||(t[38]=(0,o.Lk)("label",{class:"form-label"},"Category Type",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[13]||(t[13]=e=>i.selectedCategoryType=e),onChange:t[14]||(t[14]=(...e)=>l.loadCategories&&l.loadCategories(...e)),class:"form-control",style:{height:"48px","padding-top":"8px","padding-bottom":"8px"},required:""},[t[37]||(t[37]=(0,o.Lk)("option",{disabled:"",value:""},"Select Category Type",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.categoryTypes,(e=>((0,o.uX)(),(0,o.CE)("option",{key:e.id,value:e.id},(0,L.v_)(e.name),9,Oo)))),128))],544),[[s.u1,i.selectedCategoryType]])]),(0,o.Lk)("div",Ho,[t[40]||(t[40]=(0,o.Lk)("label",{class:"form-label"},"Category",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[15]||(t[15]=e=>i.form.categories_id=e),class:"form-control",style:{height:"48px","padding-top":"8px","padding-bottom":"8px"},required:""},[t[39]||(t[39]=(0,o.Lk)("option",{disabled:"",value:""},"Select Category",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.categories,(e=>((0,o.uX)(),(0,o.CE)("option",{key:e.id,value:e.id},(0,L.v_)(e.name),9,Zo)))),128))],512),[[s.u1,i.form.categories_id]])]),(0,o.Lk)("div",Ko,[t[41]||(t[41]=(0,o.Lk)("label",{class:"form-label"},"Upload ID Card",-1)),(0,o.Lk)("input",{type:"file",onChange:t[16]||(t[16]=e=>l.handleFileChange("id",e)),required:!i.form.id_url,class:"form-control"},null,40,qo),t[42]||(t[42]=(0,o.Lk)("small",{class:"form-text text-muted"},"Maximum file size: 1MB",-1)),i.form.id_url?((0,o.uX)(),(0,o.CE)("div",Go,[(0,o.Lk)("a",{href:i.form.id_url,target:"_blank",class:"btn btn-outline-secondary btn-sm"},"View Current Id card",8,Yo)])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",er,[t[43]||(t[43]=(0,o.Lk)("label",{class:"form-label"},"Upload Profile Image",-1)),(0,o.Lk)("input",{type:"file",onChange:t[17]||(t[17]=e=>l.handleFileChange("image",e)),required:!i.form.image_url,class:"form-control"},null,40,tr),t[44]||(t[44]=(0,o.Lk)("small",{class:"form-text text-muted"},"Maximum file size: 1MB",-1)),i.form.image_url?((0,o.uX)(),(0,o.CE)("div",ar,[(0,o.Lk)("a",{href:i.form.image_url,target:"_blank",class:"btn btn-outline-secondary btn-sm"},"View Current Image",8,sr)])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",or,[t[45]||(t[45]=(0,o.Lk)("label",{class:"form-label"},"Upload CV(Optional)",-1)),(0,o.Lk)("input",{type:"file",onChange:t[18]||(t[18]=e=>l.handleFileChange("cv",e)),class:"form-control"},null,32),t[46]||(t[46]=(0,o.Lk)("small",{class:"form-text text-muted"},"Maximum file size: 1MB",-1)),i.form.cv_url?((0,o.uX)(),(0,o.CE)("div",rr,[(0,o.Lk)("a",{href:i.form.cv_url,target:"_blank",class:"btn btn-outline-secondary btn-sm"},"View Current CV",8,ir)])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",lr,[t[47]||(t[47]=(0,o.Lk)("label",{class:"form-label"},"Skills and capabilities",-1)),(0,o.bo)((0,o.Lk)("textarea",{"onUpdate:modelValue":t[19]||(t[19]=e=>i.form.bio=e),class:"form-control",style:{height:"150px"},required:""},null,512),[[s.Jo,i.form.bio]])])]),i.message?((0,o.uX)(),(0,o.CE)("div",{key:0,class:(0,L.C4)(["alert",i.messageType])},(0,L.v_)(i.message),3)):(0,o.Q3)("",!0),(0,o.Lk)("button",{type:"submit",class:"btn btn-primary mb-5",disabled:i.isSubmitting},[i.isSubmitting?((0,o.uX)(),(0,o.CE)("span",dr)):(0,o.Q3)("",!0),i.isSubmitting?((0,o.uX)(),(0,o.CE)("span",cr,"Updating...")):((0,o.uX)(),(0,o.CE)("span",mr,"Update Profile"))],8,nr)],32)])])],64)}var gr=a(3523),hr={name:"ProfileComponent",components:{IndexComponent:vo},data(){return{isSubmitting:!1,form:{first_name:"",last_name:"",gender:"",fathers_name:"",mothers_name:"",telephone:"",province:"",district:"",sector:"",cell:"",village:"",bio:"",salary:"",date_of_birth:"",disability:"",cv:null,id:null,image:null,categories_id:"",id_url:null,cv_url:null,image_url:null},uploadsUrl:`${de}/uploads/profile/`,selectedCategoryType:"",userId:"",userEmail:"",message:null,messageType:null,categoryTypes:[],categories:[],currentCategoryInfo:null,provinces:[],districts:[],sectors:[],cells:[],villages:[],personalFields:[{label:"First Name",model:"first_name",type:"text"},{label:"Last Name",model:"last_name",type:"text"},{label:"Father's Name",model:"fathers_name",type:"text"},{label:"Mother's Name",model:"mothers_name",type:"text"},{label:"Date of Birth",model:"date_of_birth",type:"date"},{label:"Telephone",model:"telephone",type:"tel"}]}},computed:{maxDateOfBirth(){const e=new Date;return e.setFullYear(e.getFullYear()-18),e.toISOString().split("T")[0]}},mounted(){this.loadProvinces(),this.getUserIdFromEmail(),this.loadCategoryTypes()},methods:{loadProvinces(){this.provinces=(0,gr.getProvinces)()},loadDistricts(){this.form.province&&(this.districts=(0,gr.getDistrictsByProvince)(this.form.province),this.sectors=[],this.cells=[],this.villages=[],this.form.district="",this.form.sector="",this.form.cell="",this.form.village="")},loadSectors(){this.form.province&&this.form.district&&(this.sectors=(0,gr.getSectorsByDistrict)(this.form.province,this.form.district),this.cells=[],this.villages=[],this.form.sector="",this.form.cell="",this.form.village="")},loadCells(){this.form.province&&this.form.district&&this.form.sector&&(this.cells=(0,gr.getCellsBySector)(this.form.province,this.form.district,this.form.sector),this.villages=[],this.form.cell="",this.form.village="")},loadVillages(){this.form.province&&this.form.district&&this.form.sector&&this.form.cell&&(this.villages=(0,gr.getVillagesByCell)(this.form.province,this.form.district,this.form.sector,this.form.cell),this.form.village="")},async populateLocationData(){this.form.province&&(this.districts=(0,gr.getDistrictsByProvince)(this.form.province),this.form.district&&(this.sectors=(0,gr.getSectorsByDistrict)(this.form.province,this.form.district),this.form.sector&&(this.cells=(0,gr.getCellsBySector)(this.form.province,this.form.district,this.form.sector),this.form.cell&&(this.villages=(0,gr.getVillagesByCell)(this.form.province,this.form.district,this.form.sector,this.form.cell)))))},handleTelephoneInput(e){let t=e.target.value.replace(/\D/g,"");t.length>12&&(t=t.substring(0,12)),this.form.telephone=t,e.target.value=t},async getUserIdFromEmail(){const e=localStorage.getItem("authToken");if(e)try{const t=JSON.parse(atob(e.split(".")[1]));this.userEmail=t.email;const a=await fetch(`${de}/get_user_id_by_email/${this.userEmail}`,{headers:{Authorization:`Bearer ${e}`}}),s=await a.json();a.ok?(this.userId=s.users_id,this.fetchProfile(),this.fetchCurrentCategoryInfo()):(this.message=s.message||"Unable to get user ID.",this.messageType="alert-danger")}catch(t){console.error("Error getting users_id:",t),this.message="Failed to fetch user ID.",this.messageType="alert-danger"}},async fetchCurrentCategoryInfo(){try{const e=await fetch(`${de}/categoryandtype/${this.userId}`,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}}),t=await e.json();e.ok?(this.currentCategoryInfo=t,this.selectedCategoryType=t.category_types_id,this.form.categories_id=t.category_id,await this.loadCategories()):console.log("No current category found for user")}catch(e){console.error("Error fetching current category info:",e)}},async fetchProfile(){try{const e=await fetch(`${de}/seeker/view_profile/${this.userId}`,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}}),t=await e.json();e.ok?(this.form.date_of_birth=t.date_of_birth?t.date_of_birth.split("T")[0]:"",this.form.salary=t.salary||"",Object.keys(this.form).forEach((e=>{"date_of_birth"!==e&&"salary"!==e&&(this.form[e]=t[e]||this.form[e])})),this.form.id_url=t.id?`${de}/uploads/profile/${t.id}`:null,this.form.cv_url=t.cv?`${de}/uploads/profile/${t.cv}`:null,this.form.image_url=t.image?`${de}/uploads/profile/${t.image}`:null,await this.populateLocationData()):(this.message=t.message||"Failed to fetch profile",this.messageType="alert-danger")}catch(e){console.error("Error fetching profile:",e),this.message="Error loading profile.",this.messageType="alert-danger"}},async loadCategoryTypes(){try{const e=await fetch(`${de}/category-types`),t=await e.json();this.categoryTypes=t}catch(e){console.error("Failed to load category types:",e)}},async loadCategories(){try{const e=await fetch(`${de}/categories/${this.selectedCategoryType}`),t=await e.json();this.categories=t,this.currentCategoryInfo&&this.currentCategoryInfo.category_types_id===this.selectedCategoryType||(this.form.categories_id="")}catch(e){console.error("Failed to load categories:",e)}},handleFileChange(e,t){this.form[e]=t.target.files[0]},async handleSubmit(){this.isSubmitting=!0;const e=new FormData;for(const a of["first_name","last_name","gender","fathers_name","mothers_name","telephone","province","district","sector","cell","village","bio","salary","date_of_birth","disability","categories_id"])e.append(a,this.form[a]);this.form.image&&e.append("image",this.form.image),this.form.id&&e.append("id",this.form.id),this.form.cv&&e.append("cv",this.form.cv),e.append("is_editable",0);try{const t=await fetch(`${de}/seeker/update_profile/${this.userId}`,{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`},body:e}),a=await t.json();t.ok?(this.message="Profile updated successfully.",this.$router.push("/dashboard/view-profile"),this.messageType="alert-success",await this.fetchProfile(),await this.fetchCurrentCategoryInfo()):(this.message=a.message||"Failed to update profile.",this.messageType="alert-danger")}catch(t){console.error("Error updating profile:",t),this.message="An error occurred during update.",this.messageType="alert-danger"}finally{this.isSubmitting=!1}}}};const pr=(0,n.A)(hr,[["render",ur],["__scopeId","data-v-2899580a"]]);var br=pr;const fr={class:"page-wrapper",id:"main-wrapper","data-layout":"vertical","data-navbarbg":"skin6","data-sidebartype":"full","data-sidebar-description":"fixed","data-header-description":"fixed"},kr={class:"body-wrapper",style:{"margin-top":"-3rem"}},vr={class:"mx-4"},yr={class:"form-group row"},Lr={class:"form-label"},Cr={class:"form-control-plaintext"},wr={class:"col-md-6"},_r=["href"],Ar={class:"col-md-6"},Er=["href"],Ir=["src"],xr={class:"col-md-6"},Pr=["href"],Sr=["src"],Fr={class:"col-md-12"};function Mr(e,t,a,r,i,l){const n=(0,o.g2)("IndexComponent");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(n),(0,o.Lk)("div",fr,[(0,o.Lk)("div",kr,[t[11]||(t[11]=(0,o.Lk)("h5",{class:"card-title fw-semibold mb-4",style:{color:"#E960A6"}},[(0,o.Lk)("i",{class:"ti ti-user-plus"}),(0,o.eW)(" My Profile")],-1)),t[12]||(t[12]=(0,o.Lk)("div",{class:"card-body"},null,-1)),(0,o.Lk)("div",vr,[i.message?((0,o.uX)(),(0,o.CE)("div",{key:0,class:(0,L.C4)(["alert",i.messageType])},(0,L.v_)(i.message),3)):(0,o.Q3)("",!0),(0,o.Lk)("div",yr,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.personalFields,((e,t)=>((0,o.uX)(),(0,o.CE)("div",{class:"col-md-6",key:t},[(0,o.Lk)("label",Lr,(0,L.v_)(e.label),1),(0,o.Lk)("p",Cr,(0,L.v_)("category"===e.model?i.categoryName:"date_of_birth"===e.model?l.formatDate(i.form[e.model]):i.form[e.model]),1)])))),128)),(0,o.Lk)("div",wr,[t[1]||(t[1]=(0,o.Lk)("strong",null,"CV",-1)),t[2]||(t[2]=(0,o.Lk)("br",null,null,-1)),i.form.cv?((0,o.uX)(),(0,o.CE)("a",{key:0,href:i.uploadsUrl+i.form.cv,target:"_blank",rel:"noopener noreferrer",class:"btn btn-outline-primary btn-sm mt-2"}," View CV ",8,_r)):(0,o.Q3)("",!0),t[3]||(t[3]=(0,o.Lk)("hr",null,null,-1))]),(0,o.Lk)("div",Ar,[t[4]||(t[4]=(0,o.Lk)("strong",null,"Profile Image:",-1)),t[5]||(t[5]=(0,o.Lk)("br",null,null,-1)),(0,o.Lk)("a",{href:i.uploadsUrl+i.form.image,target:"_blank"},[(0,o.Lk)("img",{src:i.uploadsUrl+i.form.image,alt:"Profile",class:"img-thumbnail",width:"100"},null,8,Ir)],8,Er),t[6]||(t[6]=(0,o.Lk)("hr",null,null,-1))]),(0,o.Lk)("div",xr,[t[7]||(t[7]=(0,o.Lk)("strong",null,"ID card:",-1)),t[8]||(t[8]=(0,o.Lk)("br",null,null,-1)),(0,o.Lk)("a",{href:i.uploadsUrl+i.form.id,target:"_blank"},[(0,o.Lk)("img",{src:i.uploadsUrl+i.form.id,alt:"ID",class:"img-thumbnail",width:"100"},null,8,Sr)],8,Pr),t[9]||(t[9]=(0,o.Lk)("hr",null,null,-1))]),(0,o.Lk)("div",Fr,[t[10]||(t[10]=(0,o.Lk)("label",{class:"form-label"},"Skill and capabilities",-1)),(0,o.bo)((0,o.Lk)("textarea",{"onUpdate:modelValue":t[0]||(t[0]=e=>i.form.bio=e),class:"form-control",style:{height:"150px"},required:"",readonly:""},null,512),[[s.Jo,i.form.bio]])])])])])]),t[13]||(t[13]=(0,o.Lk)("br",null,null,-1)),t[14]||(t[14]=(0,o.Lk)("br",null,null,-1)),t[15]||(t[15]=(0,o.Lk)("br",null,null,-1)),t[16]||(t[16]=(0,o.Lk)("br",null,null,-1))],64)}var Tr={name:"ProfileComponent",components:{IndexComponent:vo},data(){return{form:{first_name:"",last_name:"",gender:"",fathers_name:"",mothers_name:"",telephone:"",province:"",district:"",sector:"",cell:"",village:"",bio:"",salary:"",category:"",date_of_birth:"",disability:"",cv:null,id:null,image:null,categories_id:""},uploadsUrl:`${de}/uploads/profile/`,selectedCategoryType:"",userId:"",userEmail:"",message:null,messageType:null,categoryTypes:[],categories:[],categoryName:"Unknown",personalFields:[{label:"First Name",model:"first_name"},{label:"Last Name",model:"last_name"},{label:"Father's Name",model:"fathers_name"},{label:"Mother's Name",model:"mothers_name"},{label:"Date of Birth",model:"date_of_birth"},{label:"Gender",model:"gender"},{label:"Province",model:"province"},{label:"District",model:"district"},{label:"Sector",model:"sector"},{label:"Cell",model:"cell"},{label:"Village",model:"village"},{label:"Telephone",model:"telephone"},{label:"Disability",model:"disability"},{label:"Salary",model:"salary"},{label:"Category",model:"category"}]}},mounted(){this.getUserIdFromEmail(),this.loadCategoryTypes()},methods:{formatDate(e){if(!e)return"";const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),o=String(t.getDate()).padStart(2,"0");return`${a}-${s}-${o}`},async getUserIdFromEmail(){const e=localStorage.getItem("authToken");if(e)try{const t=JSON.parse(atob(e.split(".")[1]));this.userEmail=t.email;const a=await fetch(`${de}/get_user_id_by_email/${this.userEmail}`,{headers:{Authorization:`Bearer ${e}`}}),s=await a.json();a.ok?(this.userId=s.users_id,this.fetchProfile(),this.fetchCategoryNameByUserId()):(this.message=s.message||"Unable to get user ID.",this.messageType="alert-danger")}catch(t){console.error("Error getting users_id:",t),this.message="Failed to fetch user ID.",this.messageType="alert-danger"}},async fetchProfile(){try{const e=await fetch(`${de}/seeker/view_profile/${this.userId}`,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}}),t=await e.json();e.ok?(this.form={...this.form,...t},t.categories_id&&await this.determineCategoryType(t.categories_id)):(this.message=t.message||"Failed to fetch profile",this.messageType="alert-danger")}catch(e){console.error("Error fetching profile:",e),this.message="Error loading profile.",this.messageType="alert-danger"}},async fetchCategoryNameByUserId(){try{const e=await fetch(`${de}/category/${this.userId}`),t=await e.json();e.ok&&t.name?this.categoryName=t.name:this.categoryName="Unknown"}catch(e){console.error("Failed to fetch category name:",e),this.categoryName="Error fetching category"}},async determineCategoryType(e){try{const t=await fetch(`${de}/category-details/${e}`),a=await t.json();t.ok&&(this.selectedCategoryType=a.type_id,await this.loadCategories(),this.form.categories_id=e)}catch(t){console.error("Error determining category type:",t)}},async loadCategoryTypes(){try{const e=await fetch(`${de}/category-types`),t=await e.json();this.categoryTypes=t}catch(e){console.error("Failed to load category types:",e)}},async loadCategories(){try{const e=await fetch(`${de}/categories/${this.selectedCategoryType}`),t=await e.json();this.categories=t}catch(e){console.error("Failed to load categories:",e)}}}};const jr=(0,n.A)(Tr,[["render",Mr],["__scopeId","data-v-76c0d205"]]);var Dr=jr;const Ur={class:"page-wrapper",id:"main-wrapper","data-layout":"vertical","data-navbarbg":"skin6","data-sidebartype":"full","data-sidebar-description":"fixed","data-header-description":"fixed"},$r={class:"body-wrapper",style:{"margin-top":"-4rem"}},Xr={class:"container-fluid"},Vr={class:"row"},Br={class:"col-md-6 other-div3"},Jr={class:"progress",style:{height:"30px"}},Nr=["aria-valuenow"],Qr={class:"row"},zr={class:"col-md-12"},Rr={key:0,class:"applied-jobs"},Wr={class:"job-title"},Or={key:1,class:"no-jobs-message"};function Hr(e,t,a,s,r,i){const l=(0,o.g2)("IndexComponent");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(l),(0,o.Lk)("div",Ur,[(0,o.Lk)("div",$r,[(0,o.Lk)("div",Xr,[t[4]||(t[4]=(0,o.Lk)("div",{class:"row mt-4"},[(0,o.Lk)("h3",{class:"card-title fw-semibold mb-4",style:{color:"#E960A6"}},[(0,o.Lk)("i",{class:"fa-solid fa-spinner"}),(0,o.eW)(" Application Status & Benefits of Kozi Caretakers")])],-1)),(0,o.Lk)("div",Vr,[t[2]||(t[2]=(0,o.Fv)('<div class="col-md-6 other-div3" data-v-1fe33a7a><h2 style="color:#5F9EA0;" data-v-1fe33a7a>Benefits of Kozi Caretakers</h2><ul data-v-1fe33a7a><br data-v-1fe33a7a><li style="text-align:justify;" data-v-1fe33a7a>Wide Range of Opportunities: Discover diverse job listings tailored to your skills.</li><br data-v-1fe33a7a><li style="text-align:justify;" data-v-1fe33a7a>Continuous Skill Enhancement: Engage in training programs to sharpen your skills.</li><br data-v-1fe33a7a><li style="text-align:justify;" data-v-1fe33a7a>Community Support: Connect with a supportive community of fellow job seekers.</li><br data-v-1fe33a7a><li style="text-align:justify;" data-v-1fe33a7a>Exclusive Access: Gain access to exclusive job listings for Kozi Caretaker members.</li><br data-v-1fe33a7a><li style="text-align:justify;" data-v-1fe33a7a>Thank you for choosing Kozi Caretakers. Together, we&#39;re transforming lives.</li><br data-v-1fe33a7a></ul></div>',1)),(0,o.Lk)("div",Br,[t[0]||(t[0]=(0,o.Lk)("h2",{style:{color:"#5F9EA0"}},"Application Status Update",-1)),(0,o.Lk)("div",Jr,[(0,o.Lk)("div",{class:"progress-bar",role:"progressbar",style:(0,L.Tr)({width:r.progress+"%"}),"aria-valuenow":r.progress,"aria-valuemin":"0","aria-valuemax":"100"},(0,L.v_)(r.progress)+"% ",13,Nr)]),t[1]||(t[1]=(0,o.Fv)('<br data-v-1fe33a7a><strong data-v-1fe33a7a> Step 1: Initial Sign-up:</strong> Start your journey with us! Your application status begins at 36%. Sign up and create your profile.<br data-v-1fe33a7a><br data-v-1fe33a7a><strong data-v-1fe33a7a> Step 2: Complete Your Profile:</strong> Update your information and complete your profile details to increase your status to 66%. Provide accurate information to enhance your job opportunities.<br data-v-1fe33a7a><br data-v-1fe33a7a><strong data-v-1fe33a7a>Step 3: Get Recruited:</strong> Congratulations! Once recruited, your application status reaches 100%. You are now part of our team and ready to begin your new role.<br data-v-1fe33a7a><br data-v-1fe33a7a><strong data-v-1fe33a7a>Step 4: Start Working:</strong> Begin working and making a difference! Your journey with us starts here. Dive into your responsibilities and contribute to our community.<br data-v-1fe33a7a><br data-v-1fe33a7a><span style="font-size:14px;" data-v-1fe33a7a>Track your progress and take the next step in your career journey with us!</span>',18))])]),t[5]||(t[5]=(0,o.Lk)("div",{class:"row mt-4"},[(0,o.Lk)("h3",{style:{"text-align":"center",color:"#5F9EA0","font-family":"'Michroma', sans-serif"}}," Where I Have Applied "),(0,o.Lk)("hr",{style:{margin:"20px auto",border:"0",height:"1px",width:"50%",background:"#EA60A7"}})],-1)),(0,o.Lk)("div",Qr,[(0,o.Lk)("div",zr,[r.appliedJobs.length>0?((0,o.uX)(),(0,o.CE)("div",Rr,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(r.appliedJobs,(e=>((0,o.uX)(),(0,o.CE)("div",{class:"job-card",key:e.job_id},[(0,o.Lk)("h4",Wr,[(0,o.eW)((0,L.v_)(e.job_title),1),(0,o.Lk)("span",null," at "+(0,L.v_)(e.company),1)]),t[3]||(t[3]=(0,o.Lk)("strong",null,"Status:",-1)),(0,o.Lk)("span",{class:(0,L.C4)("Pending"===e.status?"status-pending":"status-expired")},(0,L.v_)(e.status),3)])))),128))])):((0,o.uX)(),(0,o.CE)("p",Or,"You havenât applied to any jobs yet."))])])])])])],64)}a(1701);var Zr={name:"WelcomeComponent",components:{IndexComponent:vo},data(){return{userEmail:"",userId:null,progress:0,appliedJobs:[]}},mounted(){this.getUserEmailAndProgress()},methods:{async getUserEmailAndProgress(){const e=localStorage.getItem("authToken");if(e)try{const t=JSON.parse(atob(e.split(".")[1]));this.userEmail=t.email;const a=await fetch(`${de}/get_user_id_by_email/${this.userEmail}`,{headers:{Authorization:`Bearer ${e}`}}),s=await a.json();a.ok?(this.userId=s.users_id,this.getProgress(this.userId),this.getAppliedJobs(this.userId)):console.error("Failed to get users_id from email:",s.message)}catch(t){console.error("Error decoding token or fetching user ID:",t)}},async getProgress(e){try{const t=await fetch(`${de}/progress/${e}`),a=await t.json();t.ok?this.progress=Math.round(a.progress):console.error("Progress fetch failed:",a.message)}catch(t){console.error("Error fetching progress:",t)}},async getAppliedJobs(e){try{const t=await fetch(`${de}/applied_jobs/${e}`),a=await t.json();t.ok?this.appliedJobs=a.map((e=>{const t=new Date(e.deadline_date),a=new Date;return e.status=t>a?"Pending":"Expired",e})):console.error("Failed to fetch applied jobs:",a.message)}catch(t){console.error("Error fetching applied jobs:",t)}}}};const Kr=(0,n.A)(Zr,[["render",Hr],["__scopeId","data-v-1fe33a7a"]]);var qr=Kr;const Gr={class:"page-wrapper",id:"main-wrapper","data-layout":"vertical","data-navbarbg":"skin6","data-sidebartype":"full","data-sidebar-description":"fixed","data-header-description":"fixed"},Yr={class:"body-wrapper",style:{"margin-top":"-3rem"}},ei={class:"container-fluid"},ti={class:"custom-main-container"},ai={class:"custom-col-left"},si={key:0},oi=["src"],ri={class:"custom-job-content"},ii=["innerHTML"],li={class:"custom-job-meta"},ni={class:"custom-job-buttons"},di=["onClick"],ci=["href"],mi={"aria-label":"Page navigation"},ui={class:"pagination justify-content-center"},gi=["onClick"],hi={class:"custom-col-right"},pi={key:0},bi=["href"],fi={class:"custom-ad-space",style:{cursor:"pointer"}},ki=["src"],vi={key:1};function yi(e,t,a,s,r,i){const l=(0,o.g2)("IndexComponent");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(l),(0,o.Lk)("div",Gr,[(0,o.Lk)("div",Yr,[(0,o.Lk)("div",ei,[t[8]||(t[8]=(0,o.Lk)("div",{class:"job-header"},[(0,o.Lk)("h1",null,"See Our Current Job Openings")],-1)),(0,o.Lk)("div",ti,[(0,o.Lk)("div",ai,[r.jobs.length>0?((0,o.uX)(),(0,o.CE)("div",si,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.paginatedJobs,(e=>((0,o.uX)(),(0,o.CE)("div",{class:"custom-job-item",key:e.id},[(0,o.Lk)("img",{src:r.uploadsUrl+e.logo,onError:t[0]||(t[0]=e=>i.onLogoError(e)),alt:" kozi Logo",class:"custom-job-logo",width:"250"},null,40,oi),(0,o.Lk)("div",ri,[(0,o.Lk)("h3",null,(0,L.v_)(e.job_title),1),(0,o.Lk)("p",{innerHTML:i.truncateHTML(e.job_description,200)},null,8,ii),(0,o.Lk)("div",li,[(0,o.Lk)("p",null,[t[3]||(t[3]=(0,o.Lk)("strong",null,"Published:",-1)),(0,o.eW)(" "+(0,L.v_)(i.formatDate(e.published_date)),1)]),(0,o.Lk)("p",null,[t[4]||(t[4]=(0,o.Lk)("strong",null,"Deadline:",-1)),(0,o.eW)(" "+(0,L.v_)(i.formatDate(e.deadline_date)),1)]),(0,o.Lk)("p",null,[t[5]||(t[5]=(0,o.Lk)("strong",null,"Working Mode:",-1)),(0,o.eW)(" "+(0,L.v_)(e.location||"Not specified"),1)])]),(0,o.Lk)("div",ni,[(0,o.Lk)("button",{onClick:t=>i.shareJob(e),class:"custom-btn-apply"},"Share Job",8,di),(0,o.Lk)("a",{href:`/career/${e.job_id}`,class:"custom-btn-apply",target:"_blank"},"Read More",8,ci)])])])))),128))])):(0,o.Q3)("",!0),(0,o.Lk)("nav",mi,[(0,o.Lk)("ul",ui,[(0,o.Lk)("li",{class:(0,L.C4)(["page-item",{disabled:1===r.currentPage}])},[(0,o.Lk)("button",{class:"page-link",onClick:t[1]||(t[1]=e=>i.changePage(r.currentPage-1))},"Previous")],2),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.pagesToShow,(e=>((0,o.uX)(),(0,o.CE)("li",{key:e,class:(0,L.C4)(["page-item",{active:r.currentPage===e}])},[(0,o.Lk)("button",{class:"page-link",onClick:t=>i.changePage(e)},(0,L.v_)(e),9,gi)],2)))),128)),(0,o.Lk)("li",{class:(0,L.C4)(["page-item",{disabled:r.currentPage===i.totalPages}])},[(0,o.Lk)("button",{class:"page-link",onClick:t[2]||(t[2]=e=>i.changePage(r.currentPage+1))},"Next")],2)])])]),(0,o.Lk)("div",hi,[i.paginatedAdverts.length>0?((0,o.uX)(),(0,o.CE)("div",pi,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.paginatedAdverts,(e=>((0,o.uX)(),(0,o.CE)("a",{key:e.id,href:e.link,target:"_blank",rel:"noopener noreferrer",class:"custom-ad-link",style:{display:"block","margin-bottom":"16px"}},[(0,o.Lk)("div",fi,[(0,o.Lk)("img",{src:r.advert_url+e.logo,alt:"Ad Banner",class:"custom-ad-img"},null,8,ki),t[6]||(t[6]=(0,o.Lk)("div",{class:"custom-ad-overlay"},"Visit Us",-1)),t[7]||(t[7]=(0,o.Lk)("div",{class:"custom-ad-breakdown"},null,-1))])],8,bi)))),128))])):((0,o.uX)(),(0,o.CE)("p",vi,"No adverts found."))])])])])])],64)}var Li={components:{IndexComponent:vo},data(){return{jobs:[],adverts:[],message:null,messageType:null,uploadsUrl:de+"/uploads/logo/",advert_url:de+"/uploads/logo/",defaultImage:a(5549),currentPage:1,jobsPerPage:4,advertsPerPage:3}},computed:{paginatedJobs(){const e=(this.currentPage-1)*this.jobsPerPage,t=e+this.jobsPerPage;return this.jobs.slice(e,t)},totalPages(){return Math.ceil(this.jobs.length/this.jobsPerPage)},pagesToShow(){const e=this.totalPages,t=this.currentPage,a=5,s=[];let o=Math.max(1,t-Math.floor(a/2)),r=o+a-1;r>e&&(r=e,o=Math.max(1,r-a+1));for(let i=o;i<=r;i++)s.push(i);return s},paginatedAdverts(){const e=(this.currentPage-1)*this.advertsPerPage,t=[];for(let a=0;a<this.advertsPerPage;a++){const s=(e+a)%this.adverts.length;this.adverts.length>0&&t.push(this.adverts[s])}return t}},mounted(){this.fetchJobs(),this.fetchAdverts()},methods:{onLogoError(e){e.target.src=this.defaultImage},changePage(e){e>=1&&e<=this.totalPages&&(this.currentPage=e)},async fetchJobs(){try{const e=localStorage.getItem("authToken");if(!e)return this.message="Authentication required.",void(this.messageType="alert-danger");const t=await fetch(`${de}/admin/select_jobss`,{headers:{Authorization:`Bearer ${e}`}}),a=await t.json();t.ok?this.jobs=a:(this.message=a.message||"Failed to fetch jobs.",this.messageType="alert-danger")}catch(e){console.error("Error fetching jobs:",e),this.message="Error fetching jobs.",this.messageType="alert-danger"}},async fetchAdverts(){try{const e=localStorage.getItem("authToken");if(!e)return this.message="Authentication required.",void(this.messageType="alert-danger");const t=await fetch(`${de}/admin/select_advert`,{headers:{Authorization:`Bearer ${e}`}}),a=await t.json();t.ok?this.adverts=a:(this.message=a.message||"Failed to fetch adverts.",this.messageType="alert-danger")}catch(e){console.error("Error fetching adverts:",e),this.message="Error fetching adverts.",this.messageType="alert-danger"}},shareJob(e){const t=`${window.location.origin}/career/${e.job_id}`,a={title:e.job_title,text:`Check out this job: ${e.job_title}`,url:t};navigator.share?navigator.share(a).then((()=>console.log("Job shared successfully"))).catch((e=>console.error("Error sharing job:",e))):navigator.clipboard.writeText(t).then((()=>{alert("Job link copied to clipboard!")}))},formatDate(e){const t=new Date(e);return t.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})},truncateHTML(e,t){const a=document.createElement("div");a.innerHTML=e;const s=a.textContent||a.innerText||"";let o=s.slice(0,t);return s.length>t&&(o+="..."),o}}};const Ci=(0,n.A)(Li,[["render",yi],["__scopeId","data-v-2e5ef60f"]]);var wi=Ci;const _i={class:"page-wrapper",id:"main-wrapper","data-layout":"vertical","data-navbarbg":"skin6","data-sidebartype":"full","data-sidebar-description":"fixed","data-header-description":"fixed"},Ai={class:"body-wrapper",style:{"margin-top":"-3rem"}},Ei={class:"container-fluid"},Ii={class:"row"},xi={id:"about",class:"section wb"},Pi={key:0,class:"mx-4 mb-4"},Si={class:"container"},Fi={key:0,class:"job-details"},Mi={class:"section-title text-center"},Ti={style:{"font-family":"'Michroma'"}},ji={class:"lead",style:{color:"darkblue"}},Di={class:"job-details"},Ui=["innerHTML"],$i=["innerHTML"],Xi=["innerHTML"],Vi=["innerHTML"],Bi=["disabled"];function Ji(e,t,a,s,r,i){const l=(0,o.g2)("IndexComponent");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(l),(0,o.Lk)("div",_i,[(0,o.Lk)("div",Ai,[(0,o.Lk)("div",Ei,[(0,o.Lk)("div",Ii,[(0,o.Lk)("div",xi,[r.userEmail?((0,o.uX)(),(0,o.CE)("div",Pi)):(0,o.Q3)("",!0),(0,o.Lk)("div",Si,[r.job?((0,o.uX)(),(0,o.CE)("div",Fi,[(0,o.Lk)("div",Mi,[(0,o.Lk)("h3",Ti,(0,L.v_)(r.job.job_title)+" - "+(0,L.v_)(r.job.location),1),(0,o.Lk)("p",ji,[(0,o.Lk)("strong",null,"Job Opportunity at: "+(0,L.v_)(r.job.company),1),t[1]||(t[1]=(0,o.eW)()),t[2]||(t[2]=(0,o.Lk)("br",null,null,-1)),(0,o.Lk)("strong",null,"Published Date: "+(0,L.v_)(i.formatDate(r.job.published_date)),1),t[3]||(t[3]=(0,o.Lk)("br",null,null,-1)),(0,o.Lk)("strong",null,"Application Deadline: "+(0,L.v_)(i.formatDate(r.job.deadline_date)),1),t[4]||(t[4]=(0,o.Lk)("br",null,null,-1))])]),(0,o.Lk)("div",Di,[t[5]||(t[5]=(0,o.Lk)("h4",null,[(0,o.Lk)("strong",null,"Company Overview")],-1)),(0,o.Lk)("p",{innerHTML:r.job.job_description},null,8,Ui),t[6]||(t[6]=(0,o.Lk)("h4",null,[(0,o.Lk)("strong",null,"Requirements")],-1)),(0,o.Lk)("p",{innerHTML:r.job.requirements,style:{"margin-left":"2rem"}},null,8,$i),t[7]||(t[7]=(0,o.Lk)("h4",null,[(0,o.Lk)("strong",null,"Responsabilities")],-1)),(0,o.Lk)("p",{innerHTML:r.job.responsability,style:{"margin-left":"2rem"}},null,8,Xi),t[8]||(t[8]=(0,o.Lk)("h4",null,[(0,o.Lk)("strong",null,"conclusion")],-1)),(0,o.Lk)("p",{innerHTML:r.job.conclusion},null,8,Vi)]),(0,o.Lk)("button",{class:"custom-btn-apply",onClick:t[0]||(t[0]=(...e)=>i.applyForJob&&i.applyForJob(...e)),disabled:r.isApplying||!r.job?.job_id||!r.userId},(0,L.v_)(r.isApplying?"Applying...":"Apply for Job"),9,Bi),t[9]||(t[9]=(0,o.Lk)("br",null,null,-1)),t[10]||(t[10]=(0,o.Lk)("br",null,null,-1)),r.applyMessage?((0,o.uX)(),(0,o.CE)("div",{key:0,class:(0,L.C4)(["alert",r.applyStatusClass]),role:"alert"},(0,L.v_)(r.applyMessage),3)):(0,o.Q3)("",!0)])):(0,o.Q3)("",!0)])])])])])])],64)}var Ni={components:{IndexComponent:vo},data(){return{job:null,isApplying:!1,applyMessage:null,applyStatusClass:"",userEmail:null,userId:null}},async mounted(){this.fetchJobDetails(),this.getUserEmail(),await this.fetchUserId()},methods:{async fetchJobDetails(){const e=this.$route.params.job_id;try{const t=localStorage.getItem("authToken"),a=await fetch(`${de}/admin/select_job/${e}`,{headers:{Authorization:`Bearer ${t}`}}),s=await a.json();a.ok?this.job=s:console.error("Failed to fetch job:",s.message)}catch(t){console.error("Error fetching job:",t)}},formatDate(e){const t=new Date(e);return t.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})},async applyForJob(){this.isApplying=!0,this.applyMessage=null;try{const e=localStorage.getItem("authToken"),t=await fetch(`${de}/seeker/apply`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({job_id:this.job?.job_id,users_id:this.userId,user_email:this.userEmail,company:this.job?.company})}),a=await t.json();t.ok?(this.applyMessage=a.message,this.applyStatusClass="alert-success"):(this.applyMessage=a.message||"Failed to apply.",this.applyStatusClass="alert-danger")}catch(e){console.error("Error applying for job:",e),this.applyMessage="An error occurred while applying.",this.applyStatusClass="text-danger"}finally{this.isApplying=!1}},getUserEmail(){const e=localStorage.getItem("authToken");if(e){const t=e.split(".")[1],a=atob(t),s=JSON.parse(a);this.userEmail=s.email}},async fetchUserId(){const e=this.userEmail,t=localStorage.getItem("authToken");if(e&&t)try{const a=await fetch(`${de}/get_user_id_by_email/${e}`,{headers:{Authorization:`Bearer ${t}`}}),s=await a.json();a.ok?this.userId=s.users_id:console.error("Error fetching user ID:",s.message)}catch(a){console.error("Error fetching user ID:",a)}}}};const Qi=(0,n.A)(Ni,[["render",Ji],["__scopeId","data-v-3be1df9a"]]);var zi=Qi;const Ri={class:"page-wrapper",id:"main-wrapper","data-layout":"vertical","data-navbarbg":"skin6","data-sidebartype":"full","data-sidebar-description":"fixed","data-header-description":"fixed"},Wi={class:"body-wrapper",style:{"margin-top":"-5rem"}},Oi={class:"container-fluid"},Hi={class:"benefits-section"},Zi={class:"benefits-content"},Ki={class:"benefits-image"},qi=["src"],Gi={class:"contact-main"},Yi={class:"form-section"},el=["value"],tl={class:"form-group"},al={class:"textarea-wrapper"},sl={key:0,class:"character-count"},ol={class:"form-actions"},rl=["disabled"],il={key:0,class:"btn-content"},ll={key:1,class:"btn-content"},nl={key:0,class:"feedback-section"},dl={key:0,class:"feedback-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},cl={key:1,class:"feedback-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"};function ml(e,t,r,i,l,n){const d=(0,o.g2)("IndexComponent");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(d),(0,o.Lk)("div",Ri,[(0,o.Lk)("div",Wi,[(0,o.Lk)("div",Oi,[t[9]||(t[9]=(0,o.Lk)("div",{class:"row mt-4"},[(0,o.Lk)("h3",{class:"card-title fw-semibold mb-4",style:{color:"#E960A6"}},[(0,o.Lk)("i",{class:"fa-solid fa-money-bills"}),(0,o.eW)(" Application Status & Benefits of Kozi Caretakers")])],-1)),(0,o.Lk)("div",Hi,[(0,o.Lk)("div",Zi,[(0,o.Lk)("div",Ki,[(0,o.Lk)("img",{src:a(9793),alt:"Registration",class:"responsive-image"},null,8,qi)]),t[2]||(t[2]=(0,o.Fv)('<div class="benefits-instructions" data-v-4d46c4fa><h2 class="instructions-title" data-v-4d46c4fa>How It Works</h2><hr class="instructions-divider" data-v-4d46c4fa><div class="premium-notice" data-v-4d46c4fa><p data-v-4d46c4fa><strong data-v-4d46c4fa>N.B:</strong> A one-time payment grants access to exclusive premium features for only advanced workers! </p></div><div class="steps-container" data-v-4d46c4fa><div class="step-item" data-v-4d46c4fa><span class="step-number" data-v-4d46c4fa>1</span><span class="step-text" data-v-4d46c4fa>Dial the MoMo Pay code *182*8*1*067788#</span></div><div class="step-item" data-v-4d46c4fa><span class="step-number" data-v-4d46c4fa>2</span><span class="step-text" data-v-4d46c4fa>Enter the amount: 1,500 RWF</span></div><div class="step-item" data-v-4d46c4fa><span class="step-number" data-v-4d46c4fa>3</span><span class="step-text" data-v-4d46c4fa>Confirm the name: SANSON GROUP Ltd</span></div><div class="step-item" data-v-4d46c4fa><span class="step-number" data-v-4d46c4fa>4</span><span class="step-text" data-v-4d46c4fa>Enter your MoMo PIN</span></div><div class="step-item" data-v-4d46c4fa><span class="step-number" data-v-4d46c4fa>5</span><span class="step-text" data-v-4d46c4fa>Wait up to 5 minutes for approval</span></div></div><div class="footer-note" data-v-4d46c4fa> Track your progress and take the next step in your career journey with us! </div></div>',1))])]),(0,o.Lk)("main",Gi,[t[8]||(t[8]=(0,o.Fv)('<div class="header-section" data-v-4d46c4fa><div class="header-icon" data-v-4d46c4fa><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-4d46c4fa><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z" data-v-4d46c4fa></path><polyline points="22,6 12,13 2,6" data-v-4d46c4fa></polyline></svg></div><h1 class="main-title" data-v-4d46c4fa>Get in Touch with Us</h1><div class="title-underline" data-v-4d46c4fa></div></div><div class="description-section" data-v-4d46c4fa><p class="description-text" data-v-4d46c4fa> Have a question or need assistance? We&#39;re here to help! Whether you&#39;re looking for support, have feedback, or just want to share your thoughts, we&#39;d love to hear from you. Simply type your message below and we&#39;ll get back to you as soon as possible. </p></div>',2)),(0,o.Lk)("div",Yi,[(0,o.Lk)("form",{onSubmit:t[1]||(t[1]=(0,s.D$)(((...e)=>n.sendMessage&&n.sendMessage(...e)),["prevent"])),class:"contact-form"},[(0,o.Lk)("input",{type:"hidden",name:"job_seeker_id",value:l.users_id},null,8,el),(0,o.Lk)("div",tl,[t[3]||(t[3]=(0,o.Fv)('<label for="message" class="form-label" data-v-4d46c4fa><svg class="label-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-4d46c4fa><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" data-v-4d46c4fa></path><polyline points="14,2 14,8 20,8" data-v-4d46c4fa></polyline><line x1="16" y1="13" x2="8" y2="13" data-v-4d46c4fa></line><line x1="16" y1="17" x2="8" y2="17" data-v-4d46c4fa></line><polyline points="10,9 9,9 8,9" data-v-4d46c4fa></polyline></svg> Your Message </label>',1)),(0,o.Lk)("div",al,[(0,o.bo)((0,o.Lk)("textarea",{id:"message",name:"message",rows:"6","onUpdate:modelValue":t[0]||(t[0]=e=>l.message=e),placeholder:"For approval delays, please notify us here. We'll get back to you as soon as possible..",required:"",class:(0,L.C4)(["form-textarea",{"has-content":l.message.length>0}])},null,2),[[s.Jo,l.message]]),l.message.length>0?((0,o.uX)(),(0,o.CE)("div",sl,(0,L.v_)(l.message.length)+" characters ",1)):(0,o.Q3)("",!0)])]),(0,o.Lk)("div",ol,[(0,o.Lk)("button",{type:"submit",class:(0,L.C4)(["submit-btn",{sending:l.isSending,disabled:!l.message.trim()}]),disabled:l.isSending||!l.message.trim()},[l.isSending?((0,o.uX)(),(0,o.CE)("span",ll,t[5]||(t[5]=[(0,o.Lk)("svg",{class:"spinner",viewBox:"0 0 50 50"},[(0,o.Lk)("circle",{class:"path",cx:"25",cy:"25",r:"20",fill:"none","stroke-width":"5",stroke:"currentColor","stroke-linecap":"round"})],-1),(0,o.eW)(" Sending... ")]))):((0,o.uX)(),(0,o.CE)("span",il,t[4]||(t[4]=[(0,o.Lk)("svg",{class:"btn-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[(0,o.Lk)("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),(0,o.Lk)("polygon",{points:"22,2 15,22 11,13 2,9 22,2"})],-1),(0,o.eW)(" Send Message ")])))],10,rl)]),l.feedback?((0,o.uX)(),(0,o.CE)("div",nl,[(0,o.Lk)("div",{class:(0,L.C4)(["feedback-message",n.applyStatusClass])},["green"===l.feedbackColor?((0,o.uX)(),(0,o.CE)("svg",dl,t[6]||(t[6]=[(0,o.Lk)("path",{d:"M9 12l2 2 4-4"},null,-1),(0,o.Lk)("circle",{cx:"12",cy:"12",r:"10"},null,-1)]))):((0,o.uX)(),(0,o.CE)("svg",cl,t[7]||(t[7]=[(0,o.Lk)("circle",{cx:"12",cy:"12",r:"10"},null,-1),(0,o.Lk)("line",{x1:"15",y1:"9",x2:"9",y2:"15"},null,-1),(0,o.Lk)("line",{x1:"9",y1:"9",x2:"15",y2:"15"},null,-1)]))),(0,o.eW)(" "+(0,L.v_)(l.feedback),1)],2)])):(0,o.Q3)("",!0)],32)])])])])])],64)}var ul={name:"MainWrapper",components:{IndexComponent:vo},data(){return{userEmail:null,users_id:null,message:"",feedback:"",feedbackColor:"green",isSending:!1}},computed:{applyStatusClass(){return"green"===this.feedbackColor?"alert-success":"alert-danger"}},mounted(){const e=localStorage.getItem("authToken");if(e)try{const t=JSON.parse(atob(e.split(".")[1]));this.userEmail=t.email,this.getUserIdFromEmail()}catch(t){console.error("Invalid JWT token:",t)}},methods:{async getUserIdFromEmail(){const e=localStorage.getItem("authToken");if(e&&this.userEmail)try{const t=await fetch(`${de}/get_user_id_by_email/${this.userEmail}`,{headers:{Authorization:`Bearer ${e}`}}),a=await t.json();t.ok?this.users_id=a.users_id:(this.feedback=a.message||"Unable to get user ID.",this.feedbackColor="red")}catch(t){console.error("Error getting users_id:",t),this.feedback="Failed to fetch user ID.",this.feedbackColor="red"}},async sendMessage(){if(!this.message.trim()||!this.users_id)return this.feedback="Message or user ID missing.",void(this.feedbackColor="red");this.isSending=!0,this.feedback="";try{const e=localStorage.getItem("authToken"),t=await fetch(`${de}/seeker/message`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({users_id:this.users_id,user_email:this.userEmail,message:this.message.trim()})}),a=await t.json();t.ok?(this.feedback="Message sent successfully!",this.feedbackColor="green",this.message=""):(this.feedback=a.message||"Something went wrong.",this.feedbackColor="red")}catch(e){console.error("Error sending message:",e),this.feedback="Error sending message.",this.feedbackColor="red"}finally{this.isSending=!1}}}};const gl=(0,n.A)(ul,[["render",ml],["__scopeId","data-v-4d46c4fa"]]);var hl=gl;const pl={class:"page-wrapper",id:"main-wrapper","data-layout":"vertical","data-navbarbg":"skin6","data-sidebartype":"full","data-sidebar-description":"fixed","data-header-description":"fixed"},bl={class:"body-wrapper"},fl={class:"container-fluid"},kl={class:"row"},vl={class:"contact-main",style:{"margin-top":"-3rem"}},yl={class:"form-section"},Ll=["value"],Cl={class:"form-group"},wl={class:"textarea-wrapper"},_l={key:0,class:"character-count"},Al={class:"form-actions"},El=["disabled"],Il={key:0,class:"btn-content"},xl={key:1,class:"btn-content"},Pl={key:0,class:"feedback-section"},Sl={key:0,class:"feedback-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Fl={key:1,class:"feedback-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"};function Ml(e,t,a,r,i,l){const n=(0,o.g2)("IndexComponent");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(n),(0,o.Lk)("div",pl,[(0,o.Lk)("div",bl,[(0,o.Lk)("div",fl,[(0,o.Lk)("div",kl,[(0,o.Lk)("main",vl,[t[7]||(t[7]=(0,o.Fv)('<div class="header-section" data-v-40dde934><div class="header-icon" data-v-40dde934><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-40dde934><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z" data-v-40dde934></path><polyline points="22,6 12,13 2,6" data-v-40dde934></polyline></svg></div><h1 class="main-title" data-v-40dde934>Get in Touch with Us</h1><div class="title-underline" data-v-40dde934></div></div><div class="description-section" data-v-40dde934><p class="description-text" data-v-40dde934> Have a question or need assistance? We&#39;re here to help! Whether you&#39;re looking for support, have feedback, or just want to share your thoughts, we&#39;d love to hear from you. Simply type your message below and we&#39;ll get back to you as soon as possible. </p></div>',2)),(0,o.Lk)("div",yl,[(0,o.Lk)("form",{onSubmit:t[1]||(t[1]=(0,s.D$)(((...e)=>l.sendMessage&&l.sendMessage(...e)),["prevent"])),class:"contact-form"},[(0,o.Lk)("input",{type:"hidden",name:"job_seeker_id",value:i.users_id},null,8,Ll),(0,o.Lk)("div",Cl,[t[2]||(t[2]=(0,o.Fv)('<label for="message" class="form-label" data-v-40dde934><svg class="label-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-40dde934><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" data-v-40dde934></path><polyline points="14,2 14,8 20,8" data-v-40dde934></polyline><line x1="16" y1="13" x2="8" y2="13" data-v-40dde934></line><line x1="16" y1="17" x2="8" y2="17" data-v-40dde934></line><polyline points="10,9 9,9 8,9" data-v-40dde934></polyline></svg> Your Message </label>',1)),(0,o.Lk)("div",wl,[(0,o.bo)((0,o.Lk)("textarea",{id:"message",name:"message",rows:"6","onUpdate:modelValue":t[0]||(t[0]=e=>i.message=e),placeholder:"For approval delays, please notify us here. We'll get back to you as soon as possible..",required:"",class:(0,L.C4)(["form-textarea",{"has-content":i.message.length>0}])},null,2),[[s.Jo,i.message]]),i.message.length>0?((0,o.uX)(),(0,o.CE)("div",_l,(0,L.v_)(i.message.length)+" characters ",1)):(0,o.Q3)("",!0)])]),(0,o.Lk)("div",Al,[(0,o.Lk)("button",{type:"submit",class:(0,L.C4)(["submit-btn",{sending:i.isSending,disabled:!i.message.trim()}]),disabled:i.isSending||!i.message.trim()},[i.isSending?((0,o.uX)(),(0,o.CE)("span",xl,t[4]||(t[4]=[(0,o.Lk)("svg",{class:"spinner",viewBox:"0 0 50 50"},[(0,o.Lk)("circle",{class:"path",cx:"25",cy:"25",r:"20",fill:"none","stroke-width":"5",stroke:"currentColor","stroke-linecap":"round"})],-1),(0,o.eW)(" Sending... ")]))):((0,o.uX)(),(0,o.CE)("span",Il,t[3]||(t[3]=[(0,o.Lk)("svg",{class:"btn-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[(0,o.Lk)("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),(0,o.Lk)("polygon",{points:"22,2 15,22 11,13 2,9 22,2"})],-1),(0,o.eW)(" Send Message ")])))],10,El)]),i.feedback?((0,o.uX)(),(0,o.CE)("div",Pl,[(0,o.Lk)("div",{class:(0,L.C4)(["feedback-message",l.applyStatusClass])},["green"===i.feedbackColor?((0,o.uX)(),(0,o.CE)("svg",Sl,t[5]||(t[5]=[(0,o.Lk)("path",{d:"M9 12l2 2 4-4"},null,-1),(0,o.Lk)("circle",{cx:"12",cy:"12",r:"10"},null,-1)]))):((0,o.uX)(),(0,o.CE)("svg",Fl,t[6]||(t[6]=[(0,o.Lk)("circle",{cx:"12",cy:"12",r:"10"},null,-1),(0,o.Lk)("line",{x1:"15",y1:"9",x2:"9",y2:"15"},null,-1),(0,o.Lk)("line",{x1:"9",y1:"9",x2:"15",y2:"15"},null,-1)]))),(0,o.eW)(" "+(0,L.v_)(i.feedback),1)],2)])):(0,o.Q3)("",!0)],32)])])])])])])],64)}var Tl={name:"MainWrapper",components:{IndexComponent:vo},data(){return{userEmail:null,users_id:null,message:"",feedback:"",feedbackColor:"green",isSending:!1}},computed:{applyStatusClass(){return"green"===this.feedbackColor?"alert-success":"alert-danger"}},mounted(){const e=localStorage.getItem("authToken");if(e)try{const t=JSON.parse(atob(e.split(".")[1]));this.userEmail=t.email,this.getUserIdFromEmail()}catch(t){console.error("Invalid JWT token:",t)}},methods:{async getUserIdFromEmail(){const e=localStorage.getItem("authToken");if(e&&this.userEmail)try{const t=await fetch(`${de}/get_user_id_by_email/${this.userEmail}`,{headers:{Authorization:`Bearer ${e}`}}),a=await t.json();t.ok?this.users_id=a.users_id:(this.feedback=a.message||"Unable to get user ID.",this.feedbackColor="red")}catch(t){console.error("Error getting users_id:",t),this.feedback="Failed to fetch user ID.",this.feedbackColor="red"}},async sendMessage(){if(!this.message.trim()||!this.users_id)return this.feedback="Message or user ID missing.",void(this.feedbackColor="red");this.isSending=!0,this.feedback="";try{const e=localStorage.getItem("authToken"),t=await fetch(`${de}/seeker/message`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({users_id:this.users_id,user_email:this.userEmail,message:this.message.trim()})}),a=await t.json();t.ok?(this.feedback="Message sent successfully!",this.feedbackColor="green",this.message=""):(this.feedback=a.message||"Something went wrong.",this.feedbackColor="red")}catch(e){console.error("Error sending message:",e),this.feedback="Error sending message.",this.feedbackColor="red"}finally{this.isSending=!1}}}};const jl=(0,n.A)(Tl,[["render",Ml],["__scopeId","data-v-40dde934"]]);var Dl=jl;const Ul={class:"page-wrapper",id:"main-wrapper","data-layout":"vertical","data-navbarbg":"skin6","data-sidebartype":"full","data-sidebar-position":"fixed","data-header-position":"fixed"},$l={class:"body-wrapper",style:{"margin-top":"-3rem"}},Xl={class:"form-group"},Vl={class:"form-group"},Bl={class:"form-group"},Jl=["disabled"];function Nl(e,t,a,r,i,l){const n=(0,o.g2)("IndexComponent");return(0,o.uX)(),(0,o.CE)("div",Ul,[(0,o.bF)(n),(0,o.Lk)("div",$l,[t[9]||(t[9]=(0,o.Lk)("h2",{style:{"margin-left":"2rem","margin-right":"2rem"}},"Change Password",-1)),(0,o.Lk)("form",{onSubmit:t[3]||(t[3]=(0,s.D$)(((...e)=>l.changePassword&&l.changePassword(...e)),["prevent"])),style:{"margin-left":"2rem","margin-right":"2rem"}},[(0,o.Lk)("div",Xl,[t[4]||(t[4]=(0,o.Lk)("label",{for:"current_password",class:"form-label"},"Current password:",-1)),(0,o.bo)((0,o.Lk)("input",{type:"password","onUpdate:modelValue":t[0]||(t[0]=e=>i.currentPassword=e),class:"form-control",id:"current_password",required:""},null,512),[[s.Jo,i.currentPassword]])]),(0,o.Lk)("div",Vl,[t[5]||(t[5]=(0,o.Lk)("label",{for:"new_password",class:"form-label"},"New password:",-1)),(0,o.bo)((0,o.Lk)("input",{type:"password","onUpdate:modelValue":t[1]||(t[1]=e=>i.newPassword=e),class:"form-control",id:"new_password",required:""},null,512),[[s.Jo,i.newPassword]])]),(0,o.Lk)("div",Bl,[t[6]||(t[6]=(0,o.Lk)("label",{for:"confirm_password",class:"form-label"},"Confirm New Password:",-1)),(0,o.bo)((0,o.Lk)("input",{type:"password","onUpdate:modelValue":t[2]||(t[2]=e=>i.confirmPassword=e),class:"form-control",id:"confirm_password",required:""},null,512),[[s.Jo,i.confirmPassword]])]),(0,o.Lk)("button",{type:"submit",class:"btn btn-primary",disabled:i.loading},(0,L.v_)(i.loading?"Changing...":"Change"),9,Jl),t[7]||(t[7]=(0,o.Lk)("br",null,null,-1)),t[8]||(t[8]=(0,o.Lk)("br",null,null,-1)),i.passwordMessage?((0,o.uX)(),(0,o.CE)("p",{key:0,class:(0,L.C4)(["alert alert-danger",i.passwordMessageClass]),style:{"margin-left":"5rem"}},(0,L.v_)(i.passwordMessage),3)):(0,o.Q3)("",!0)],32)])])}var Ql={name:"MainWrapper",components:{IndexComponent:vo},data(){return{userEmail:null,users_id:null,currentPassword:"",newPassword:"",confirmPassword:"",passwordMessage:"",passwordMessageClass:"",feedback:"",feedbackColor:"green",loading:!1}},computed:{applyStatusClass(){return"green"===this.feedbackColor?"alert-success":"alert-danger"}},mounted(){const e=localStorage.getItem("authToken");if(e)try{const t=JSON.parse(atob(e.split(".")[1]));this.userEmail=t.email,this.getUserIdFromEmail()}catch(t){console.error("Invalid JWT token:",t)}},methods:{async getUserIdFromEmail(){const e=localStorage.getItem("authToken");if(e&&this.userEmail)try{const t=await fetch(`${de}/get_user_id_by_email/${this.userEmail}`,{headers:{Authorization:`Bearer ${e}`}}),a=await t.json();t.ok?this.users_id=a.users_id:(this.feedback=a.message||"Unable to get user ID.",this.feedbackColor="red")}catch(t){console.error("Error getting users_id:",t),this.feedback="Failed to fetch user ID.",this.feedbackColor="red"}},async changePassword(){if(this.newPassword!==this.confirmPassword)return this.passwordMessage="New password and comfirm password doesn't match.",void(this.passwordMessageClass="text-danger");this.loading=!0;try{const e=localStorage.getItem("authToken"),t=await ne.A.post(`${de}/change-password`,{current_password:this.currentPassword,new_password:this.newPassword,confirm_password:this.confirmPassword},{headers:{Authorization:`Bearer ${e}`}});t.data.success?(this.passwordMessage=t.data.message,this.passwordMessageClass="text-success",this.currentPassword="",this.newPassword="",this.confirmPassword=""):(this.passwordMessage=t.data.message,this.passwordMessageClass="text-danger")}catch(e){console.error("Error:",e),this.passwordMessage=e.response?.data?.message||"An error occurred.",this.passwordMessageClass="text-danger"}finally{this.loading=!1}}}};const zl=(0,n.A)(Ql,[["render",Nl],["__scopeId","data-v-667ca9ba"]]);var Rl=zl;const Wl={class:"page-wrapper",id:"main-wrapper","data-layout":"vertical","data-navbarbg":"skin6","data-sidebartype":"full","data-sidebar-description":"fixed","data-header-description":"fixed"},Ol={class:"body-wrapper",style:{"margin-top":"-3rem"}},Hl={class:"card border-danger"},Zl={class:"card-body"},Kl={class:"d-flex justify-content-between align-items-center"},ql=["disabled"],Gl={class:"modal-dialog"},Yl={class:"modal-content"},en={class:"modal-header border-bottom-danger"},tn=["disabled"],an={class:"modal-body"},sn={class:"text-center mb-4"},on={class:"text-muted"},rn={class:"mb-3"},ln=["disabled"],nn={class:"modal-footer"},dn=["disabled"],cn=["disabled"],mn={key:0},un={key:1};function gn(e,t,a,r,i,l){const n=(0,o.g2)("IndexComponent");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(n),(0,o.Lk)("div",Wl,[(0,o.Lk)("div",Ol,[t[19]||(t[19]=(0,o.Lk)("h5",{class:"card-title fw-semibold mb-4",style:{color:"#E960A6"}},[(0,o.Lk)("i",{class:"ti ti-user-plus"}),(0,o.eW)(" Settings ")],-1)),(0,o.Lk)("div",Hl,[t[9]||(t[9]=(0,o.Lk)("div",{class:"card-header bg-danger text-white"},[(0,o.Lk)("h6",{class:"card-title mb-0 text-white"},"Danger Zone")],-1)),(0,o.Lk)("div",Zl,[(0,o.Lk)("div",Kl,[t[8]||(t[8]=(0,o.Lk)("div",null,[(0,o.Lk)("h6",{class:"text-danger mb-1"},"Delete Account"),(0,o.Lk)("p",{class:"text-muted mb-0"}," Once you delete your account, it will be permanently removed and cannot be recovered. ")],-1)),(0,o.Lk)("button",{type:"button",class:"btn btn-outline-danger",onClick:t[0]||(t[0]=e=>i.showDeleteConfirmation=!0),disabled:i.isDeleting},t[7]||(t[7]=[(0,o.Lk)("i",{class:"ti ti-user-x"},null,-1),(0,o.eW)(" Delete Account ")]),8,ql)])])]),i.showDeleteConfirmation?((0,o.uX)(),(0,o.CE)("div",{key:0,class:(0,L.C4)(["modal fade",{show:i.showDeleteConfirmation}]),style:(0,L.Tr)({display:i.showDeleteConfirmation?"block":"none"}),tabindex:"-1"},[(0,o.Lk)("div",Gl,[(0,o.Lk)("div",Yl,[(0,o.Lk)("div",en,[t[10]||(t[10]=(0,o.Lk)("h5",{class:"modal-title text-danger"},[(0,o.Lk)("i",{class:"ti ti-alert-triangle me-2"}),(0,o.eW)(" Confirm Account Deletion ")],-1)),(0,o.Lk)("button",{type:"button",class:"btn-close",onClick:t[1]||(t[1]=(...e)=>l.closeDeleteModal&&l.closeDeleteModal(...e)),disabled:i.isDeleting},null,8,tn)]),(0,o.Lk)("div",an,[(0,o.Lk)("div",sn,[t[13]||(t[13]=(0,o.Lk)("div",{class:"text-danger mb-3"},[(0,o.Lk)("i",{class:"ti ti-alert-circle",style:{"font-size":"3rem"}})],-1)),t[14]||(t[14]=(0,o.Lk)("h6",{class:"text-danger"},"Are you absolutely sure?",-1)),(0,o.Lk)("p",on,[t[11]||(t[11]=(0,o.eW)(" This action will permanently delete your account ")),(0,o.Lk)("strong",null,(0,L.v_)(i.userEmail),1),t[12]||(t[12]=(0,o.eW)(". Once deleted, your account cannot be recovered. "))])]),t[16]||(t[16]=(0,o.Lk)("div",{class:"alert alert-warning"},[(0,o.Lk)("strong",null,"Warning:"),(0,o.eW)(" This will permanently delete your account and: "),(0,o.Lk)("ul",{class:"mb-0 mt-2"},[(0,o.Lk)("li",null,"Your access to the platform"),(0,o.Lk)("li",null,"Your job applications visibility"),(0,o.Lk)("li",null,"Your profile visibility"),(0,o.Lk)("li",null,"All platform features")])],-1)),(0,o.Lk)("div",rn,[t[15]||(t[15]=(0,o.Lk)("label",{class:"form-label"},[(0,o.eW)(" Type "),(0,o.Lk)("strong",null,"DELETE"),(0,o.eW)(" to confirm: ")],-1)),(0,o.bo)((0,o.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[2]||(t[2]=e=>i.deleteConfirmationText=e),placeholder:"Type DELETE here",disabled:i.isDeleting},null,8,ln),[[s.Jo,i.deleteConfirmationText]])])]),(0,o.Lk)("div",nn,[(0,o.Lk)("button",{type:"button",class:"btn btn-secondary",onClick:t[3]||(t[3]=(...e)=>l.closeDeleteModal&&l.closeDeleteModal(...e)),disabled:i.isDeleting}," Cancel ",8,dn),(0,o.Lk)("button",{type:"button",class:"btn btn-danger",disabled:"DELETE"!==i.deleteConfirmationText||i.isDeleting,onClick:t[4]||(t[4]=(...e)=>l.deleteAccount&&l.deleteAccount(...e))},[i.isDeleting?((0,o.uX)(),(0,o.CE)("span",mn,t[17]||(t[17]=[(0,o.Lk)("i",{class:"ti ti-loader-2 spin me-1"},null,-1),(0,o.eW)(" Deliting... ")]))):((0,o.uX)(),(0,o.CE)("span",un,t[18]||(t[18]=[(0,o.Lk)("i",{class:"ti ti-user-x me-1"},null,-1),(0,o.eW)(" Delete Account ")])))],8,cn)])])])],6)):(0,o.Q3)("",!0),i.showDeleteConfirmation?((0,o.uX)(),(0,o.CE)("div",{key:1,class:"modal-backdrop fade show",onClick:t[5]||(t[5]=(...e)=>l.closeDeleteModal&&l.closeDeleteModal(...e))})):(0,o.Q3)("",!0),i.message?((0,o.uX)(),(0,o.CE)("div",{key:2,class:(0,L.C4)(`alert ${i.messageType} alert-dismissible fade show mt-3`),role:"alert"},[(0,o.eW)((0,L.v_)(i.message)+" ",1),(0,o.Lk)("button",{type:"button",class:"btn-close",onClick:t[6]||(t[6]=(...e)=>l.clearMessage&&l.clearMessage(...e))})],2)):(0,o.Q3)("",!0)])]),t[20]||(t[20]=(0,o.Lk)("br",null,null,-1)),t[21]||(t[21]=(0,o.Lk)("br",null,null,-1)),t[22]||(t[22]=(0,o.Lk)("br",null,null,-1)),t[23]||(t[23]=(0,o.Lk)("br",null,null,-1))],64)}var hn={name:"SettingsComponent",components:{IndexComponent:vo},data(){return{userEmail:"",userId:null,showDeleteConfirmation:!1,deleteConfirmationText:"",isDeleting:!1,message:null,messageType:""}},mounted(){this.getUserIdFromEmail(),this.loadCategoryTypes()},methods:{formatDate(e){if(!e)return"";const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),o=String(t.getDate()).padStart(2,"0");return`${a}-${s}-${o}`},async getUserIdFromEmail(){const e=localStorage.getItem("authToken");if(e)try{const t=JSON.parse(atob(e.split(".")[1]));if(this.userEmail=t.email,!this.userEmail)return void this.showMessage("Unable to get email from token. Please login again.","alert-danger");const a=await fetch(`${de}/get_user_id_by_email/${this.userEmail}`,{headers:{Authorization:`Bearer ${e}`}}),s=await a.json();a.ok?(this.userId=s.users_id,this.fetchProfile(),this.fetchCategoryNameByUserId()):this.showMessage(s.message||"Unable to get user ID.","alert-danger")}catch(t){console.error("Error getting users_id:",t),this.showMessage("Failed to fetch user ID. Please try again.","alert-danger")}else this.showMessage("No authentication token found. Please login again.","alert-danger")},async fetchProfile(){console.log("Fetching profile...")},async fetchCategoryNameByUserId(){console.log("Fetching categories...")},async loadCategoryTypes(){console.log("Loading category types...")},closeDeleteModal(){this.isDeleting||(this.showDeleteConfirmation=!1,this.deleteConfirmationText="")},clearMessage(){this.message=null,this.messageType=""},showMessage(e,t){this.message=e,this.messageType=t},async deleteAccount(){if("DELETE"===this.deleteConfirmationText)if(this.userEmail){this.isDeleting=!0,this.clearMessage();try{const e=localStorage.getItem("authToken");if(!e)return this.showMessage("Authentication token not found. Please login again.","alert-danger"),void(this.isDeleting=!1);const t=`${de}/seeker/delete_my_account/${encodeURIComponent(this.userEmail)}`;console.log("Making request to:",t);const a=await fetch(t,{method:"PUT",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}}),s=await a.json();console.log("Response:",s),a.ok?(this.showMessage(s.message||"Account deactivated successfully!","alert-success"),this.closeDeleteModal(),setTimeout((()=>{localStorage.removeItem("authToken"),this.$router.push("/login")}),3e3)):(this.showMessage(s.message||"Failed to deactivate account. Please try again.","alert-danger"),this.isDeleting=!1)}catch(e){console.error("Error deactivating account:",e),this.showMessage("Network error occurred. Please check your connection and try again.","alert-danger"),this.isDeleting=!1}}else this.showMessage("User email not found. Please refresh and try again.","alert-danger");else this.showMessage("Please type 'DELETE' to confirm.","alert-warning")}}};const pn=(0,n.A)(hn,[["render",gn],["__scopeId","data-v-414276bc"]]);var bn=pn;const fn={class:"page-wrapper",id:"main-wrapper","data-layout":"vertical","data-navbarbg":"skin6","data-sidebartype":"full","data-sidebar-description":"fixed","data-header-description":"fixed"},kn={class:"body-wrapper",style:{"margin-top":"-4rem"}},vn={class:"container-fluid"},yn={class:"stats-cards-container"},Ln={class:"stats-card"},Cn={class:"card-content"},wn={class:"card-info"},_n={class:"card-value"},An={class:"stats-card"},En={class:"card-content"},In={class:"card-info"},xn={class:"card-value"},Pn={class:"stats-card"},Sn={class:"card-content"},Fn={class:"card-info"},Mn={class:"card-value"},Tn={class:"benefits-section"},jn={class:"benefits-content"},Dn={class:"benefits-image"},Un=["src"],$n={class:"profile-section"},Xn={class:"profile-content"},Vn={class:"profile-picture-container"},Bn=["src"];function Jn(e,t,s,r,i,l){const n=(0,o.g2)("IndexComponent");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(n),(0,o.Lk)("div",fn,[(0,o.Lk)("div",kn,[(0,o.Lk)("div",vn,[(0,o.Lk)("div",yn,[(0,o.Lk)("div",Ln,[(0,o.Lk)("div",Cn,[(0,o.Lk)("div",wn,[t[0]||(t[0]=(0,o.Lk)("div",{class:"card-label"},"All Job Providers",-1)),(0,o.Lk)("div",_n,(0,L.v_)(i.productsCount),1)]),t[1]||(t[1]=(0,o.Lk)("div",{class:"card-icon"},[(0,o.Lk)("i",{class:"ti ti-notebook"})],-1))]),t[2]||(t[2]=(0,o.Lk)("div",{class:"card-gradient-bg"},null,-1))]),(0,o.Lk)("div",An,[(0,o.Lk)("div",En,[(0,o.Lk)("div",In,[t[3]||(t[3]=(0,o.Lk)("div",{class:"card-label"},"All Job Seekers",-1)),(0,o.Lk)("div",xn,(0,L.v_)(i.blogsCount),1)]),t[4]||(t[4]=(0,o.Lk)("div",{class:"card-icon"},[(0,o.Lk)("i",{class:"ti ti-users"})],-1))]),t[5]||(t[5]=(0,o.Lk)("div",{class:"card-gradient-bg"},null,-1))]),(0,o.Lk)("div",Pn,[(0,o.Lk)("div",Sn,[(0,o.Lk)("div",Fn,[t[6]||(t[6]=(0,o.Lk)("div",{class:"card-label"},"Published Jobs",-1)),(0,o.Lk)("div",Mn,(0,L.v_)(i.employeesCount),1)]),t[7]||(t[7]=(0,o.Lk)("div",{class:"card-icon"},[(0,o.Lk)("i",{class:"ti ti-clipboard"})],-1))]),t[8]||(t[8]=(0,o.Lk)("div",{class:"card-gradient-bg"},null,-1))])]),(0,o.Lk)("div",Tn,[t[10]||(t[10]=(0,o.Lk)("h3",{class:"section-title"},"Benefits of Kozi Caretakers",-1)),t[11]||(t[11]=(0,o.Lk)("hr",{class:"section-divider"},null,-1)),(0,o.Lk)("div",jn,[(0,o.Lk)("div",Dn,[(0,o.Lk)("img",{src:a(71),alt:"Employer Benefits",class:"responsive-image"},null,8,Un)]),t[9]||(t[9]=(0,o.Fv)('<div class="benefits-instructions" data-v-a368829c><h2 class="instructions-title" data-v-a368829c>How It Works</h2><hr class="instructions-divider" data-v-a368829c><div class="premium-notice" data-v-a368829c><p data-v-a368829c><strong data-v-a368829c>N.B:</strong>A one-time payment grants access to exclusive premium features! This payment allows you to post job opportunities and reach a wider pool of qualified candidates. </p></div><div class="steps-container" data-v-a368829c><div class="step-item" data-v-a368829c><div class="step-number" data-v-a368829c>1</div><div class="step-text" data-v-a368829c><strong data-v-a368829c>Step 1:</strong> Dial the MoMo Pay code *182*8*1*067788#. </div></div><div class="step-item" data-v-a368829c><div class="step-number" data-v-a368829c>2</div><div class="step-text" data-v-a368829c><strong data-v-a368829c>Step 2:</strong> Enter the amount: 2,000 RWF. </div></div><div class="step-item" data-v-a368829c><div class="step-number" data-v-a368829c>3</div><div class="step-text" data-v-a368829c><strong data-v-a368829c>Step 3:</strong> Confirm the name: SANSON GROUP Ltd. </div></div><div class="step-item" data-v-a368829c><div class="step-number" data-v-a368829c>4</div><div class="step-text" data-v-a368829c><strong data-v-a368829c>Step 4:</strong> Enter your MoMo PIN. </div></div><div class="step-item" data-v-a368829c><div class="step-number" data-v-a368829c>5</div><div class="step-text" data-v-a368829c><strong data-v-a368829c>Step 5:</strong> Wait up to 5 minutes for approval. </div></div></div><div class="footer-note" data-v-a368829c> Grow your business and connect with the right talent â start hiring with us today! </div></div>',1))])]),(0,o.Lk)("div",$n,[(0,o.Lk)("div",Xn,[t[12]||(t[12]=(0,o.Fv)('<div class="profile-info" data-v-a368829c><hr class="section-divider" data-v-a368829c><h2 class="profile-title" data-v-a368829c>Profile Information</h2><div class="profile-description" data-v-a368829c><p data-v-a368829c> Welcome to your profile page! Here, you can view and update your personal information. If your profile is not complete, please check the bio section below to add more details and help potential employers learn more about you. </p></div><a href="edit-profile" class="profile-update-link" data-v-a368829c><button class="update-button" data-v-a368829c>Update My Profile</button></a></div>',1)),(0,o.Lk)("div",Vn,[(0,o.Lk)("img",{src:a(3438),alt:"Profile Picture",class:"profile-picture"},null,8,Bn)])])])])])])],64)}const Nn={id:"main-wrapper"};function Qn(e,t,a,s,r,i){const l=(0,o.g2)("SidebarComponent"),n=(0,o.g2)("HeaderComponent");return(0,o.uX)(),(0,o.CE)("div",Nn,[(0,o.bF)(l,{visible:r.sidebarVisible,onCloseSidebar:t[0]||(t[0]=e=>r.sidebarVisible=!1)},null,8,["visible"]),(0,o.Lk)("div",{class:(0,L.C4)(["body-wrapper",{hidden:r.isMobile&&r.sidebarVisible}])},[(0,o.bF)(n,{onToggleSidebar:i.toggleSidebar},null,8,["onToggleSidebar"])],2)])}const zn={class:"app-header"},Rn={class:"navbar navbar-expand-lg navbar-light fixed-top",style:{width:"100%","background-color":"white","z-index":"1000"}},Wn={class:"navbar-nav"},On={class:"nav-item d-block d-xl-none"},Hn={class:"navbar-collapse justify-content-end px-0",id:"navbarNav"},Zn={class:"navbar-nav flex-row ms-auto align-items-center justify-content-end"},Kn={class:"nav-item dropdown"},qn={class:"nav-link nav-icon-hover",href:"javascript:void(0)",id:"userDropdown","data-bs-toggle":"dropdown","aria-expanded":"false"},Gn=["src"],Yn={class:"dropdown-menu dropdown-menu-end dropdown-menu-animate-up","aria-labelledby":"userDropdown"};function ed(e,t,a,s,r,i){const l=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("header",zn,[(0,o.Lk)("nav",Rn,[(0,o.Lk)("ul",Wn,[(0,o.Lk)("li",On,[(0,o.Lk)("a",{class:"nav-link sidebartoggler nav-icon-hover",href:"javascript:void(0)",onClick:t[0]||(t[0]=t=>e.$emit("toggle-sidebar")),title:"Toggle Sidebar"},t[2]||(t[2]=[(0,o.Lk)("i",{class:"ti ti-menu-2"},null,-1)]))])]),(0,o.Lk)("div",Hn,[(0,o.Lk)("ul",Zn,[(0,o.Lk)("li",Kn,[(0,o.Lk)("a",qn,[(0,o.Lk)("img",{src:r.profileImage,width:"35",height:"35",class:"rounded-circle",alt:"User profile"},null,8,Gn)]),(0,o.Lk)("ul",Yn,[(0,o.Lk)("li",null,[(0,o.bF)(l,{to:"View-profile",class:"dropdown-item d-flex align-items-center"},{default:(0,o.k6)((()=>t[3]||(t[3]=[(0,o.Lk)("i",{class:"ti ti-user fs-6 me-2"},null,-1),(0,o.eW)(" My Profile ")]))),_:1})]),(0,o.Lk)("li",null,[(0,o.bF)(l,{to:"change-password",class:"dropdown-item d-flex align-items-center"},{default:(0,o.k6)((()=>t[4]||(t[4]=[(0,o.Lk)("i",{class:"fa-solid fa-key me-2"},null,-1),(0,o.eW)(" Credentials ")]))),_:1})]),(0,o.Lk)("li",null,[(0,o.bF)(l,{to:"/employer/settings",class:"dropdown-item d-flex align-items-center"},{default:(0,o.k6)((()=>t[5]||(t[5]=[(0,o.Lk)("i",{class:"fa-solid fa-key me-2"},null,-1),(0,o.eW)(" Settings ")]))),_:1})]),(0,o.Lk)("li",null,[(0,o.Lk)("a",{href:"javascript:void(0)",class:"dropdown-item",onClick:t[1]||(t[1]=(...e)=>i.logout&&i.logout(...e))},t[6]||(t[6]=[(0,o.Lk)("i",{class:"ti ti-square-arrow-left me-2",style:{width:"2rem"}},null,-1),(0,o.eW)(" Logout ")]))])])])])])])])}var td={name:"HeaderComponent",data(){return{profileImage:a(2231)}},methods:{logout(){localStorage.removeItem("authToken"),this.$router.push("/login")}}};const ad=(0,n.A)(td,[["render",ed],["__scopeId","data-v-605a30ca"]]);var sd=ad;const od={class:"sidebar-header"},rd={class:"brand-logo"},id={href:"dashboard",class:"text-nowrap logo-img"},ld=["src"],nd={class:"sidebar-nav"},dd=["href"],cd={key:0,class:"premium-badge"},md={key:0,class:"premium-badge"};function ud(e,t,s,r,i,l){const n=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("aside",{class:(0,L.C4)(["sidebar",{visible:s.visible}])},[(0,o.Lk)("div",od,[(0,o.Lk)("div",rd,[(0,o.Lk)("a",id,[(0,o.Lk)("img",{src:a(5549),alt:"Logo",style:{width:"10rem"}},null,8,ld)])]),(0,o.Lk)("button",{class:"close-btn",onClick:t[0]||(t[0]=t=>e.$emit("close-sidebar"))},"Ã")]),(0,o.Lk)("nav",nd,[(0,o.Lk)("ul",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(r.menuItems,(a=>((0,o.uX)(),(0,o.CE)("li",{key:a.link},[a.external?((0,o.uX)(),(0,o.CE)("a",{key:0,href:a.link,target:"_blank",rel:"noopener noreferrer",class:"sidebar-nav-link"},[(0,o.Lk)("i",{class:(0,L.C4)(a.icon),style:{"margin-right":"8px","font-size":"1.25rem"}},null,2),(0,o.eW)(" "+(0,L.v_)(a.name)+" ",1),a.premium?((0,o.uX)(),(0,o.CE)("span",cd,"Premium")):(0,o.Q3)("",!0)],8,dd)):((0,o.uX)(),(0,o.Wv)(n,{key:1,to:a.link,onClick:t[1]||(t[1]=t=>e.$emit("close-sidebar")),class:(0,L.C4)({"router-link-active":r.isActive(a.matchPrefix)})},{default:(0,o.k6)((()=>[(0,o.Lk)("i",{class:(0,L.C4)(a.icon),style:{"margin-right":"8px","font-size":"1.25rem"}},null,2),(0,o.eW)(" "+(0,L.v_)(a.name)+" ",1),a.premium?((0,o.uX)(),(0,o.CE)("span",md,"Premium")):(0,o.Q3)("",!0)])),_:2},1032,["to","class"]))])))),128))])])],2)}var gd={props:{visible:Boolean},emits:["close-sidebar"],setup(){const e=(0,m.lq)(),t=[{name:"Dashboard",link:"/employer/dashboard",icon:"fa-solid fa-table-columns",matchPrefix:["/employer/dashboard"]},{name:"Edit Profile",link:"/employer/edit-profile",icon:"ti ti-user-plus",matchPrefix:["/employer/edit-profile"]},{name:"View Profile",link:"/employer/view-profile",icon:"ti ti-user-check",matchPrefix:["/employer/view-profile"]},{name:"All Job Seekers",link:"/employer/seekers",icon:"ti ti-users",matchPrefix:["/employer/seekers"]},{name:"Add job",link:"/employer/add-job",icon:"ti ti-settings",premium:!0,matchPrefix:["/employer/add-job"]},{name:"All Categories",link:"/employer/category",icon:"ti ti-category-2",matchPrefix:["/employer/category"]},{name:"Request Support",link:"/employer/support",icon:"ti ti-message-chatbot",matchPrefix:["/employer/support"]},{name:"Guidlines",link:"/Kozi_Client_Guidelines.pdf",icon:"ti ti-archive",external:!0}],a=t=>t.some((t=>e.path.startsWith(t)));return{route:e,menuItems:t,isActive:a}}};const hd=(0,n.A)(gd,[["render",ud],["__scopeId","data-v-3e13a044"]]);var pd=hd,bd={components:{HeaderComponent:sd,SidebarComponent:pd},data(){return{sidebarVisible:!1,isMobile:window.innerWidth<=768}},mounted(){window.addEventListener("resize",this.checkMobile)},beforeUnmount(){window.removeEventListener("resize",this.checkMobile)},methods:{toggleSidebar(){this.sidebarVisible=!this.sidebarVisible},checkMobile(){this.isMobile=window.innerWidth<=768,this.isMobile||(this.sidebarVisible=!0)}}};const fd=(0,n.A)(bd,[["render",Qn],["__scopeId","data-v-22c9867a"]]);var kd=fd,vd={name:"WelcomeComponent",components:{IndexComponent:kd},setup(){return{globalVariable:de}},data(){return{productsCount:0,blogsCount:0,employeesCount:0,userEmail:""}},mounted(){ne.A.get(`${de}/providers/counts`).then((e=>{void 0!==e.data.count?this.productsCount=e.data.count:console.error("Error fetching product count:",e.data.error||"Unknown error")})).catch((e=>{console.error("Error fetching product count:",e)})),ne.A.get(`${de}/seekers/count`).then((e=>{void 0!==e.data.count?this.blogsCount=e.data.count:console.error("Error fetching blogs count:",e.data.error||"Unknown error")})).catch((e=>{console.error("Error fetching blogs count:",e)})),ne.A.get(`${de}/admin/count/jobs`).then((e=>{void 0!==e.data.count?this.employeesCount=e.data.count:console.error("Error fetching team count:",e.data.error||"Unknown error")})).catch((e=>{console.error("Error fetching employees count:",e)})),this.userEmail=localStorage.getItem("userEmail")||"No email found"}};const yd=(0,n.A)(vd,[["render",Jn],["__scopeId","data-v-a368829c"]]);var Ld=yd;const Cd={class:"page-wrapper",id:"main-wrapper","data-layout":"vertical","data-navbarbg":"skin6","data-sidebartype":"full","data-sidebar-description":"fixed","data-header-description":"fixed"},wd={class:"body-wrapper",style:{"margin-top":"-4rem"}},_d={class:"form-group row"},Ad={class:"col-md-6"},Ed=["for"],Id=["type","onUpdate:modelValue","id"],xd={class:"col-md-6"},Pd=["value"],Sd={class:"col-md-6"},Fd=["disabled"],Md=["value"],Td={class:"col-md-6"},jd=["disabled"],Dd=["value"],Ud={class:"col-md-6"},$d=["disabled"],Xd=["value"],Vd={class:"col-md-6"},Bd=["disabled"],Jd=["value"],Nd={class:"col-md-6 mt-3"},Qd=["disabled"],zd={class:"col-md-6 mt-3"},Rd={class:"form-label"},Wd=["href"],Od=["src"],Hd=["src"],Zd=["disabled"],Kd={key:0,class:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"};function qd(e,t,a,r,i,l){const n=(0,o.g2)("IndexComponent");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(n),(0,o.Lk)("div",Cd,[(0,o.Lk)("div",wd,[t[30]||(t[30]=(0,o.Lk)("h5",{class:"card-title fw-semibold mb-4",style:{color:"#E960A6"}},[(0,o.Lk)("i",{class:"ti ti-user-plus"}),(0,o.eW)(" Update Profile")],-1)),(0,o.Lk)("form",{onSubmit:t[13]||(t[13]=(0,s.D$)(((...e)=>l.handleSubmit&&l.handleSubmit(...e)),["prevent"])),class:"mx-4",enctype:"multipart/form-data"},[(0,o.Lk)("div",_d,[(0,o.Lk)("div",Ad,[t[15]||(t[15]=(0,o.Lk)("label",{class:"form-label"},"Select Category",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>i.form.category=e),onChange:t[1]||(t[1]=(...e)=>l.handleCategoryChange&&l.handleCategoryChange(...e)),class:"form-control",style:{height:"54px"},required:""},t[14]||(t[14]=[(0,o.Lk)("option",{value:"Individual"},"Individual",-1),(0,o.Lk)("option",{value:"Company"},"Company",-1)]),544),[[s.u1,i.form.category]])]),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.currentFields,((e,t)=>((0,o.uX)(),(0,o.CE)("div",{class:"col-md-6",key:t},[(0,o.Lk)("label",{for:e.model,class:"form-label"},(0,L.v_)(e.label),9,Ed),(0,o.bo)((0,o.Lk)("input",{type:e.type,"onUpdate:modelValue":t=>i.form[e.model]=t,class:"form-control",id:e.model,required:""},null,8,Id),[[s.hp,i.form[e.model]]])])))),128)),(0,o.Lk)("div",xd,[t[17]||(t[17]=(0,o.Lk)("label",{class:"form-label"},"Province",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>i.form.province=e),onChange:t[3]||(t[3]=(...e)=>l.loadDistricts&&l.loadDistricts(...e)),class:"form-control",style:{height:"48px","padding-top":"8px","padding-bottom":"8px"},required:""},[t[16]||(t[16]=(0,o.Lk)("option",{value:""},"Select Province",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.provinces,(e=>((0,o.uX)(),(0,o.CE)("option",{key:e,value:e},(0,L.v_)(e),9,Pd)))),128))],544),[[s.u1,i.form.province]])]),(0,o.Lk)("div",Sd,[t[19]||(t[19]=(0,o.Lk)("label",{class:"form-label"},"District",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>i.form.district=e),onChange:t[5]||(t[5]=(...e)=>l.loadSectors&&l.loadSectors(...e)),class:"form-control",disabled:!i.form.province,style:{height:"48px","padding-top":"8px","padding-bottom":"8px"},required:""},[t[18]||(t[18]=(0,o.Lk)("option",{value:""},"Select District",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.districts,(e=>((0,o.uX)(),(0,o.CE)("option",{key:e,value:e},(0,L.v_)(e),9,Md)))),128))],40,Fd),[[s.u1,i.form.district]])]),(0,o.Lk)("div",Td,[t[21]||(t[21]=(0,o.Lk)("label",{class:"form-label"},"Sector",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[6]||(t[6]=e=>i.form.sector=e),onChange:t[7]||(t[7]=(...e)=>l.loadCells&&l.loadCells(...e)),class:"form-control",disabled:!i.form.district,style:{height:"48px","padding-top":"8px","padding-bottom":"8px"},required:""},[t[20]||(t[20]=(0,o.Lk)("option",{value:""},"Select Sector",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.sectors,(e=>((0,o.uX)(),(0,o.CE)("option",{key:e,value:e},(0,L.v_)(e),9,Dd)))),128))],40,jd),[[s.u1,i.form.sector]])]),(0,o.Lk)("div",Ud,[t[23]||(t[23]=(0,o.Lk)("label",{class:"form-label"},"Cell",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[8]||(t[8]=e=>i.form.cell=e),onChange:t[9]||(t[9]=(...e)=>l.loadVillages&&l.loadVillages(...e)),class:"form-control",disabled:!i.form.sector,style:{height:"48px","padding-top":"8px","padding-bottom":"8px"},required:""},[t[22]||(t[22]=(0,o.Lk)("option",{value:""},"Select Cell",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.cells,(e=>((0,o.uX)(),(0,o.CE)("option",{key:e,value:e},(0,L.v_)(e),9,Xd)))),128))],40,$d),[[s.u1,i.form.cell]])]),(0,o.Lk)("div",Vd,[t[25]||(t[25]=(0,o.Lk)("label",{class:"form-label"},"Village",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[10]||(t[10]=e=>i.form.village=e),class:"form-control",disabled:!i.form.cell,style:{height:"48px","padding-top":"8px","padding-bottom":"8px"},required:""},[t[24]||(t[24]=(0,o.Lk)("option",{value:""},"Select Village",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.villages,(e=>((0,o.uX)(),(0,o.CE)("option",{key:e,value:e},(0,L.v_)(e),9,Jd)))),128))],8,Bd),[[s.u1,i.form.village]])]),(0,o.Lk)("div",Nd,[t[27]||(t[27]=(0,o.Lk)("label",{class:"form-label"},"Gender",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[11]||(t[11]=e=>i.form.gender=e),class:"form-control",disabled:"Company"===i.form.category,required:""},t[26]||(t[26]=[(0,o.Lk)("option",{value:"Male"},"Male",-1),(0,o.Lk)("option",{value:"Female"},"Female",-1),(0,o.Lk)("option",{value:"Other"},"Other",-1)]),8,Qd),[[s.u1,i.form.gender]])]),(0,o.Lk)("div",zd,[(0,o.Lk)("label",Rd,(0,L.v_)(l.uploadLabel),1),(0,o.Lk)("input",{type:"file",onChange:t[12]||(t[12]=e=>l.handleFileChange("image",e)),class:"form-control"},null,32),t[28]||(t[28]=(0,o.Lk)("small",{class:"form-text text-muted"},"Maximum file size: 1MB",-1)),i.form.image&&"string"===typeof i.form.image?((0,o.uX)(),(0,o.CE)("a",{key:0,href:i.uploadsUrl+i.form.image,target:"_blank"},[(0,o.Lk)("img",{src:i.uploadsUrl+i.form.image,alt:"Profile",class:"img-thumbnail",width:"250"},null,8,Od)],8,Wd)):(0,o.Q3)("",!0),i.form.image_url?((0,o.uX)(),(0,o.CE)("img",{key:1,src:i.form.image_url,alt:"Profile Preview",class:"img-thumbnail",width:"250"},null,8,Hd)):(0,o.Q3)("",!0),t[29]||(t[29]=(0,o.Lk)("br",null,null,-1))])]),i.message?((0,o.uX)(),(0,o.CE)("div",{key:0,class:(0,L.C4)(["alert",i.messageType])},(0,L.v_)(i.message),3)):(0,o.Q3)("",!0),(0,o.Lk)("button",{type:"submit",class:"btn btn-primary mb-5",disabled:i.isSubmitting},[i.isSubmitting?((0,o.uX)(),(0,o.CE)("span",Kd)):(0,o.Q3)("",!0),(0,o.eW)(" "+(0,L.v_)(i.isSubmitting?"Updating Profile...":"Update Profile"),1)],8,Zd)],32)])])],64)}var Gd={name:"ProfileComponent",components:{IndexComponent:kd},data(){return{form:{first_name:"",last_name:"",country:"",category:"",telephone:"",province:"",district:"",sector:"",cell:"",village:"",gender:"",image:null,image_url:""},uploadsUrl:`${de}/uploads/profile/`,userId:"",userEmail:"",message:null,messageType:null,isSubmitting:!1,provinces:[],districts:[],sectors:[],cells:[],villages:[],individualFields:[{label:"First Name",model:"first_name",type:"text"},{label:"Last Name",model:"last_name",type:"text"},{label:"Country",model:"country",type:"text"},{label:"Telephone",model:"telephone",type:"text"}],companyFields:[{label:"Company First Name",model:"first_name",type:"text"},{label:"Company Last Name",model:"last_name",type:"text"},{label:"Country",model:"country",type:"text"},{label:"Telephone",model:"telephone",type:"text"}]}},computed:{currentFields(){return"Company"===this.form.category?this.companyFields:this.individualFields},uploadLabel(){return"Company"===this.form.category?"Upload Logo":"Upload Profile Image"}},mounted(){this.getUserIdFromEmail(),this.loadProvinces()},methods:{handleCategoryChange(){"Company"===this.form.category?this.form.gender="Other":this.form.gender=""},async getUserIdFromEmail(){const e=localStorage.getItem("authToken");if(e)try{const t=JSON.parse(atob(e.split(".")[1]));this.userEmail=t.email;const a=await fetch(`${de}/get_user_id_by_email/${this.userEmail}`,{headers:{Authorization:`Bearer ${e}`}}),s=await a.json();a.ok?(this.userId=s.users_id,this.fetchProfile()):(this.message=s.message||"Unable to get user ID.",this.messageType="alert-danger")}catch(t){console.error("Error getting users_id:",t),this.message="Failed to fetch user ID.",this.messageType="alert-danger"}},async fetchProfile(){try{const e=await fetch(`${de}/provider/view_profile/${this.userId}`,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}}),t=await e.json();e.ok?(this.form={...this.form,...t},t.image_url&&(this.form.image_url=t.image_url),this.form.province&&this.loadDistricts(),this.form.district&&this.loadSectors(),this.form.sector&&this.loadCells(),this.form.cell&&this.loadVillages()):(this.message=t.message||"Failed to fetch profile",this.messageType="alert-danger")}catch(e){console.error("Error fetching profile:",e),this.message="Error loading profile.",this.messageType="alert-danger"}},loadProvinces(){try{this.provinces=(0,gr.getProvinces)()}catch(e){console.error("Error loading provinces:",e),this.message="Failed to load provinces.",this.messageType="alert-warning"}},loadDistricts(){try{this.form.province&&(this.districts=(0,gr.getDistrictsByProvince)(this.form.province),this.districts.includes(this.form.district)||(this.sectors=[],this.cells=[],this.villages=[],this.form.district="",this.form.sector="",this.form.cell="",this.form.village=""))}catch(e){console.error("Error loading districts:",e),this.message="Failed to load districts.",this.messageType="alert-warning"}},loadSectors(){try{this.form.province&&this.form.district&&(this.sectors=(0,gr.getSectorsByDistrict)(this.form.province,this.form.district),this.sectors.includes(this.form.sector)||(this.cells=[],this.villages=[],this.form.sector="",this.form.cell="",this.form.village=""))}catch(e){console.error("Error loading sectors:",e),this.message="Failed to load sectors.",this.messageType="alert-warning"}},loadCells(){try{this.form.province&&this.form.district&&this.form.sector&&(this.cells=(0,gr.getCellsBySector)(this.form.province,this.form.district,this.form.sector),this.cells.includes(this.form.cell)||(this.villages=[],this.form.cell="",this.form.village=""))}catch(e){console.error("Error loading cells:",e),this.message="Failed to load cells.",this.messageType="alert-warning"}},loadVillages(){try{this.form.province&&this.form.district&&this.form.sector&&this.form.cell&&(this.villages=(0,gr.getVillagesByCell)(this.form.province,this.form.district,this.form.sector,this.form.cell),this.villages.includes(this.form.village)||(this.form.village=""))}catch(e){console.error("Error loading villages:",e),this.message="Failed to load villages.",this.messageType="alert-warning"}},handleFileChange(e,t){const a=t.target.files[0];a&&(this.form[e]=a,this.form.image_url=URL.createObjectURL(a))},async handleSubmit(){this.isSubmitting=!0,this.message=null,this.messageType=null;const e=new FormData;for(const a in this.form)"image"===a?this.form.image instanceof File?e.append("image",this.form.image):e.append("image_name",this.form.image):"image_url"!==a&&null!==this.form[a]&&void 0!==this.form[a]&&e.append(a,this.form[a]);try{const t=await fetch(`${de}/provider/update_profile/${this.userId}`,{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`},body:e}),a=await t.json();t.ok?(this.message=a.message,this.messageType="alert-success",this.$router.push("/employer/view-profile"),this.fetchProfile()):(this.message=a.message||"Failed to update profile.",this.messageType="alert-danger")}catch(t){console.error("Error updating profile:",t),this.message="An error occurred while updating profile.",this.messageType="alert-danger"}finally{this.isSubmitting=!1}}}};const Yd=(0,n.A)(Gd,[["render",qd],["__scopeId","data-v-2a362936"]]);var ec=Yd;const tc={class:"page-wrapper",id:"main-wrapper","data-layout":"vertical","data-navbarbg":"skin6","data-sidebartype":"full","data-sidebar-description":"fixed","data-header-description":"fixed"},ac={class:"body-wrapper",style:{"margin-top":"-4rem"}},sc={class:"mx-4"},oc={class:"form-group row"},rc={class:"form-label"},ic={class:"form-control-plaintext"},lc={class:"col-md-6"},nc=["href"],dc=["src"];function cc(e,t,a,s,r,i){const l=(0,o.g2)("IndexComponent");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(l),(0,o.Lk)("div",tc,[(0,o.Lk)("div",ac,[t[2]||(t[2]=(0,o.Lk)("h5",{class:"card-title fw-semibold mb-4",style:{color:"#E960A6"}},[(0,o.Lk)("i",{class:"ti ti-user"}),(0,o.eW)(" View My profile")],-1)),t[3]||(t[3]=(0,o.Lk)("div",{class:"card-body"},null,-1)),(0,o.Lk)("div",sc,[r.message?((0,o.uX)(),(0,o.CE)("div",{key:0,class:(0,L.C4)(["alert",r.messageType])},(0,L.v_)(r.message),3)):(0,o.Q3)("",!0),(0,o.Lk)("div",oc,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(r.personalFields,((e,t)=>((0,o.uX)(),(0,o.CE)("div",{class:"col-md-6",key:t},[(0,o.Lk)("label",rc,(0,L.v_)(e.label),1),(0,o.Lk)("p",ic,(0,L.v_)(r.form[e.model]),1)])))),128)),(0,o.Lk)("div",lc,[t[0]||(t[0]=(0,o.Lk)("strong",null,"Profile Image:",-1)),t[1]||(t[1]=(0,o.Lk)("br",null,null,-1)),(0,o.Lk)("a",{href:r.uploadsUrl+r.form.image,target:"_blank"},[(0,o.Lk)("img",{src:r.uploadsUrl+r.form.image,alt:"Profile",class:"img-thumbnail",width:"250"},null,8,dc)],8,nc)])])])])])],64)}var mc={name:"ProfileComponent",components:{IndexComponent:kd},data(){return{form:{first_name:"",category:"",last_name:"",fathers_name:"",mothers_name:"",telephone:"",province:"",district:"",sector:"",cell:"",gender:"",country:"",village:"",image:""},uploadsUrl:`${de}/uploads/profile/`,selectedCategoryType:"",userId:"",userEmail:"",message:null,messageType:null,categoryTypes:[],categories:[],categoryName:"Unknown",personalFields:[{label:"Category",model:"category"},{label:"First Name",model:"first_name"},{label:"Last Name",model:"last_name"},{label:"Country",model:"country"},{label:"Province",model:"province"},{label:"District",model:"district"},{label:"Sector",model:"sector"},{label:"Cell",model:"cell"},{label:"Village",model:"village"},{label:"Telephone",model:"telephone"},{label:"Gender",model:"gender"}]}},mounted(){this.getUserIdFromEmail(),this.loadCategoryTypes()},methods:{async getUserIdFromEmail(){const e=localStorage.getItem("authToken");if(e)try{const t=JSON.parse(atob(e.split(".")[1]));this.userEmail=t.email;const a=await fetch(`${de}/get_user_id_by_email/${this.userEmail}`,{headers:{Authorization:`Bearer ${e}`}}),s=await a.json();a.ok?(this.userId=s.users_id,this.fetchProfile(),this.fetchCategoryNameByUserId()):(this.message=s.message||"Unable to get user ID.",this.messageType="alert-danger")}catch(t){console.error("Error getting users_id:",t),this.message="Failed to fetch user ID.",this.messageType="alert-danger"}},async fetchProfile(){try{const e=await fetch(`${de}/provider/view_profile/${this.userId}`,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}}),t=await e.json();e.ok?(this.form={...this.form,...t},t.image&&(this.form.image=t.image),t.categories_id&&await this.determineCategoryType(t.categories_id)):(this.message=t.message||"Failed to fetch profile",this.messageType="alert-danger")}catch(e){console.error("Error fetching profile:",e),this.message="Error loading profile.",this.messageType="alert-danger"}},async fetchCategoryNameByUserId(){try{const e=await fetch(`${de}/category/${this.userId}`),t=await e.json();e.ok&&t.name?this.categoryName=t.name:this.categoryName="Unknown"}catch(e){console.error("Failed to fetch category name:",e),this.categoryName="Error fetching category"}},async determineCategoryType(e){try{const t=await fetch(`${de}/category-details/${e}`),a=await t.json();t.ok&&(this.selectedCategoryType=a.type_id,await this.loadCategories(),this.form.categories_id=e)}catch(t){console.error("Error determining category type:",t)}},async loadCategoryTypes(){try{const e=await fetch(`${de}/category-types`),t=await e.json();this.categoryTypes=t}catch(e){console.error("Failed to load category types:",e)}},async loadCategories(){try{const e=await fetch(`${de}/categories/${this.selectedCategoryType}`),t=await e.json();this.categories=t}catch(e){console.error("Failed to load categories:",e)}}}};const uc=(0,n.A)(mc,[["render",cc],["__scopeId","data-v-25090e0c"]]);var gc=uc;const hc={class:"page-wrapper",id:"main-wrapper","data-layout":"vertical","data-navbarbg":"skin6","data-sidebartype":"full","data-sidebar-description":"fixed","data-header-description":"fixed"},pc={class:"body-wrapper",style:{"margin-top":"-4rem"}},bc={class:"container-fluid"},fc={key:0,class:"spinner-overlay"},kc={class:"row mb-3"},vc={class:"col-md-6"},yc={class:"col-md-6"},Lc=["value"],Cc={class:"row"},wc=["href"],_c={class:"card h-100 text-center p-3"},Ac=["src"],Ec={class:"card-body"},Ic={class:"card-title"},xc={style:{"font-size":"20px"}},Pc=["src"],Sc={class:"card-text"},Fc={class:"d-flex justify-content-center mt-4"},Mc={class:"pagination"},Tc=["onClick"];function jc(e,t,a,r,i,l){const n=(0,o.g2)("IndexComponent");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(n),(0,o.Lk)("div",hc,[(0,o.Lk)("div",pc,[(0,o.Lk)("div",bc,[i.isLoading?((0,o.uX)(),(0,o.CE)("div",fc,t[5]||(t[5]=[(0,o.Lk)("div",{class:"spinner-border text-pink",role:"status"},[(0,o.Lk)("span",{class:"sr-only"},"Loading...")],-1)]))):(0,o.Q3)("",!0),t[10]||(t[10]=(0,o.Lk)("h5",{class:"card-title fw-semibold mb-4",style:{color:"#E960A6"}},[(0,o.Lk)("i",{class:"ti ti-users"}),(0,o.eW)(" All seekers ")],-1)),(0,o.Lk)("div",kc,[(0,o.Lk)("div",vc,[(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>i.searchQuery=e),class:"form-control",placeholder:"Search by name"},null,512),[[s.Jo,i.searchQuery]])]),(0,o.Lk)("div",yc,[(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>i.selectedCategoryId=e),class:"form-control"},[t[6]||(t[6]=(0,o.Lk)("option",{disabled:"",value:""},"SELECT CATEGORY",-1)),t[7]||(t[7]=(0,o.Lk)("option",{value:""},"All Categories",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.categories,(e=>((0,o.uX)(),(0,o.CE)("option",{key:e.id,value:e.id},(0,L.v_)(e.name),9,Lc)))),128))],512),[[s.u1,i.selectedCategoryId]])])]),(0,o.Lk)("div",Cc,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.filteredJobs,(e=>((0,o.uX)(),(0,o.CE)("div",{class:"col-md-4 mb-4",key:e.id},[(0,o.Lk)("a",{href:`seekers/${e.users_id}`},[(0,o.Lk)("div",_c,[(0,o.Lk)("img",{src:i.uploadsUrl+e.image,onError:t[2]||(t[2]=(...e)=>l.setDefaultImage&&l.setDefaultImage(...e)),alt:"Profile",class:"card-img-top mx-auto",style:{width:"250px",height:"250px","object-fit":"cover"}},null,40,Ac),(0,o.Lk)("div",Ec,[(0,o.Lk)("h6",Ic,[(0,o.Lk)("b",xc,(0,L.v_)(e.first_name)+" "+(0,L.v_)(e.last_name),1),1===e.verification_badge?((0,o.uX)(),(0,o.CE)("img",{key:0,style:{"margin-left":"5px"},src:i.profileImage,width:"25",height:"25",class:"rounded-circle",alt:"User profile"},null,8,Pc)):(0,o.Q3)("",!0)]),(0,o.Lk)("p",null,(0,L.v_)(i.categoryNames[e.categories_id]||"Loading category..."),1),(0,o.Lk)("p",Sc,[1===e.verification_badge?((0,o.uX)(),(0,o.CE)(o.FK,{key:0},[t[8]||(t[8]=(0,o.Fv)('<i class="fa-solid fa-star" style="color:gold;" data-v-1281486a></i><i class="fa-solid fa-star" style="color:gold;" data-v-1281486a></i><i class="fa-solid fa-star" style="color:gold;" data-v-1281486a></i><i class="fa-solid fa-star" style="color:gold;" data-v-1281486a></i><i class="fa-solid fa-star" style="color:gold;" data-v-1281486a></i>',5))],64)):((0,o.uX)(),(0,o.CE)(o.FK,{key:1},[t[9]||(t[9]=(0,o.Fv)('<i class="fa-solid fa-star" style="color:gold;" data-v-1281486a></i><i class="fa-solid fa-star" style="color:gold;" data-v-1281486a></i><i class="fa-solid fa-star" data-v-1281486a></i><i class="fa-solid fa-star" data-v-1281486a></i><i class="fa-solid fa-star" data-v-1281486a></i>',5))],64))])])])],8,wc)])))),128))]),(0,o.Lk)("div",Fc,[(0,o.Lk)("nav",null,[(0,o.Lk)("ul",Mc,[(0,o.Lk)("li",{class:(0,L.C4)(["page-item",{disabled:1===i.currentPage}])},[(0,o.Lk)("button",{class:"page-link",onClick:t[3]||(t[3]=e=>l.goToPage(i.currentPage-1))},"Previous")],2),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.visiblePageNumbers,(e=>((0,o.uX)(),(0,o.CE)("li",{key:e,class:(0,L.C4)(["page-item",{active:e===i.currentPage}])},[(0,o.Lk)("button",{class:"page-link",onClick:t=>l.goToPage(e)},(0,L.v_)(e),9,Tc)],2)))),128)),(0,o.Lk)("li",{class:(0,L.C4)(["page-item",{disabled:i.currentPage===l.totalPages}])},[(0,o.Lk)("button",{class:"page-link",onClick:t[4]||(t[4]=e=>l.goToPage(i.currentPage+1))},"Next")],2)])])]),i.message?((0,o.uX)(),(0,o.CE)("div",{key:1,class:(0,L.C4)(["alert",i.messageType])},(0,L.v_)(i.message),3)):(0,o.Q3)("",!0)])])])],64)}a(2489),a(7642),a(8004),a(3853),a(5876),a(2475),a(5024),a(1698);var Dc=a(144),Uc={name:"AllSeekers",components:{IndexComponent:kd},data(){return{jobs:[],searchQuery:"",selectedCategoryId:"",categories:[],categoryNames:(0,Dc.Kh)({}),uploadsUrl:`${de}/uploads/profile/`,profileImage:a(4083),currentPage:1,perPage:6,message:"",messageType:"",isLoading:!1}},computed:{visiblePageNumbers(){const e=[],t=this.totalPages,a=this.currentPage,s=5;let o=a-Math.floor(s/2),r=a+Math.floor(s/2);o<1&&(o=1,r=Math.min(s,t)),r>t&&(r=t,o=Math.max(1,r-s+1));for(let i=o;i<=r;i++)e.push(i);return e},filteredJobs(){const e=this.searchQuery.toLowerCase();return this.jobs.filter((t=>{const a=`${t.first_name} ${t.last_name}`.toLowerCase(),s=this.categoryNames[t.categories_id]?.toLowerCase()||"",o=a.includes(e)||s.includes(e),r=!this.selectedCategoryId||t.categories_id===this.selectedCategoryId;return o&&r})).slice((this.currentPage-1)*this.perPage,this.currentPage*this.perPage)},totalPages(){const e=this.searchQuery.toLowerCase(),t=this.jobs.filter((t=>{const a=`${t.first_name} ${t.last_name}`.toLowerCase(),s=this.categoryNames[t.categories_id]?.toLowerCase()||"",o=a.includes(e)||s.includes(e),r=!this.selectedCategoryId||t.categories_id===this.selectedCategoryId;return o&&r})).length;return Math.ceil(t/this.perPage)}},methods:{async fetchJobs(){this.isLoading=!0;try{const e=localStorage.getItem("authToken");if(!e)return this.message="Authentication required.",void(this.messageType="alert-danger");const t=await fetch(`${de}/job_seekers`,{headers:{Authorization:`Bearer ${e}`}}),a=await t.json();if(t.ok){this.jobs=a;const e=[...new Set(a.map((e=>e.categories_id)))];for(const t of e)t&&this.fetchCategoryName(t)}else this.message=a.message||"Failed to fetch jobs.",this.messageType="alert-danger"}catch(e){console.error("Error fetching jobs:",e),this.message="Error fetching jobs.",this.messageType="alert-danger"}finally{this.isLoading=!1}},async fetchCategoryName(e){if(!this.categoryNames[e])try{const t=await fetch(`${de}/category_name/${e}`),a=await t.json();t.ok&&Array.isArray(a)&&a.length>0&&a[0].name?this.categoryNames[e]=a[0].name:this.categoryNames[e]="Unknown"}catch(t){console.error(`Error fetching category name for ID ${e}:`,t),this.categoryNames[e]="Unknown"}},async fetchCategories(){this.isLoading=!0;try{const e=localStorage.getItem("authToken"),t=await fetch(`${de}/name_and_id`,{headers:{Authorization:`Bearer ${e}`}}),a=await t.json();t.ok?this.categories=a:console.error("Failed to load categories:",a.message)}catch(e){console.error("Error fetching categories:",e)}finally{this.isLoading=!1}},setDefaultImage(e){e.target.src=a(3438)},goToPage(e){e>=1&&e<=this.totalPages&&(this.currentPage=e)}},watch:{searchQuery(){this.currentPage=1},selectedCategoryId(){this.currentPage=1}},mounted(){this.fetchJobs(),this.fetchCategories()}};const $c=(0,n.A)(Uc,[["render",jc],["__scopeId","data-v-1281486a"]]);var Xc=$c;const Vc={class:"page-wrapper",id:"main-wrapper","data-layout":"vertical","data-navbarbg":"skin6","data-sidebartype":"full","data-sidebar-description":"fixed","data-header-description":"fixed"},Bc={class:"body-wrapper",style:{"margin-top":"-4rem"}},Jc={class:"container-fluid"},Nc={class:"row"},Qc={key:0},zc={class:"card p-4"},Rc={class:"row"},Wc={class:"col-md-4 text-center"},Oc=["src"],Hc={class:"col-md-8"},Zc=["src"],Kc={class:"container"},qc={class:"row"},Gc={class:"col-md-10 mt-2"},Yc={class:"col-md-10 mt-2"},em={class:"col-md-10 mt-2"},tm={class:"col-md-10 mt-2"},am={class:"col-md-10 mt-2"},sm={class:"container mt-4"},om={class:"row"},rm={key:0,class:"col-12 text-center mt-4"},im={class:"alert alert-danger"},lm=["href"],nm={class:"card h-100 text-center p-3"},dm=["src"],cm={class:"card-body"},mm={class:"card-title"},um=["src"],gm={class:"card-text"},hm={key:0,class:"d-flex justify-content-center mt-4"},pm={class:"pagination"},bm=["onClick"],fm={key:1,class:"modal fade show d-block",tabindex:"-1",style:{background:"rgba(0,0,0,0.5)","justify-content":"center"}},km={class:"modal-dialog"},vm={class:"modal-content"},ym={class:"modal-header"},Lm={class:"modal-title"},Cm={key:0,class:"mt-3"},wm={class:"modal-body"},_m={class:"mb-3"},Am={class:"mb-3"},Em={class:"mb-3"},Im={class:"mb-3"},xm={class:"modal-footer"},Pm=["disabled"],Sm={key:0,class:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"},Fm={key:2,class:"modal fade show d-block",tabindex:"-1",style:{background:"rgba(0,0,0,0.5)"}},Mm={class:"modal-dialog"},Tm={class:"modal-content",style:{"margin-top":"10rem"}},jm={class:"modal-header"},Dm={class:"modal-title"},Um={key:0,class:"m-3"},$m={class:"modal-body"},Xm={class:"mb-3"},Vm={class:"modal-footer"},Bm=["disabled"];function Jm(e,t,a,r,i,l){const n=(0,o.g2)("IndexComponent");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(n),(0,o.Lk)("div",Vc,[(0,o.Lk)("div",Bc,[(0,o.Lk)("div",Jc,[(0,o.Lk)("div",Nc,[i.job?((0,o.uX)(),(0,o.CE)("div",Qc,[(0,o.Lk)("div",zc,[(0,o.Lk)("div",Rc,[(0,o.Lk)("div",Wc,[(0,o.Lk)("img",{src:i.uploadsUrl+i.job.image,onError:t[0]||(t[0]=(...e)=>l.setDefaultImage&&l.setDefaultImage(...e)),alt:"Profile",class:"card-img-top mx-auto",style:{width:"250px",height:"250px","object-fit":"cover"}},null,40,Oc)]),(0,o.Lk)("div",Hc,[(0,o.Lk)("h3",null,[(0,o.Lk)("strong",null,(0,L.v_)(i.job.first_name)+" "+(0,L.v_)(i.job.last_name),1),1===i.job.verification_badge?((0,o.uX)(),(0,o.CE)("img",{key:0,style:{"margin-left":"5px"},src:i.profileImage,width:"25",height:"25",class:"rounded-circle",alt:"verification badge"},null,8,Zc)):(0,o.Q3)("",!0)]),(0,o.Lk)("div",Kc,[(0,o.Lk)("div",qc,[t[17]||(t[17]=(0,o.Lk)("div",{class:"col-md-2 mt-2"},[(0,o.Lk)("strong",null,"Bio")],-1)),(0,o.Lk)("div",Gc,(0,L.v_)(i.job.bio),1),t[18]||(t[18]=(0,o.Lk)("div",{class:"col-md-2 mt-2"},[(0,o.Lk)("strong",null,"Salary")],-1)),(0,o.Lk)("div",Yc,(0,L.v_)(i.job.salary),1),t[19]||(t[19]=(0,o.Lk)("div",{class:"col-md-2 mt-2"},[(0,o.Lk)("strong",null,"Address")],-1)),(0,o.Lk)("div",em,(0,L.v_)(i.job.province)+" - "+(0,L.v_)(i.job.district),1),t[20]||(t[20]=(0,o.Lk)("div",{class:"col-md-2 mt-2"},[(0,o.Lk)("strong",null,"Category")],-1)),(0,o.Lk)("div",tm,(0,L.v_)(i.categoryNames[i.job.categories_id]||"Loading category..."),1),t[21]||(t[21]=(0,o.Lk)("div",{class:"col-md-2 mt-2"},null,-1)),(0,o.Lk)("div",am,[(0,o.Lk)("button",{class:"btn btn-primary mt-3",onClick:t[1]||(t[1]=e=>i.showHireModal=!0)},"Hire")])])])])])]),(0,o.Lk)("button",{class:"btn btn-primary mt-3",onClick:t[2]||(t[2]=e=>i.showSupportModal=!0)},"Quick support"),(0,o.Lk)("div",sm,[(0,o.Lk)("h4",null,"Similar "+(0,L.v_)(i.categoryNames[i.job.categories_id]||"Loading category...")+" category",1),(0,o.Lk)("div",om,[i.noRelatedJobsFound?((0,o.uX)(),(0,o.CE)("div",rm,[(0,o.Lk)("p",im,"No other "+(0,L.v_)(i.categoryNames[i.job.categories_id]||"Loading category...")+" found in this category.",1)])):((0,o.uX)(!0),(0,o.CE)(o.FK,{key:1},(0,o.pI)(l.paginatedJobs,(e=>((0,o.uX)(),(0,o.CE)("div",{class:"col-md-4 mb-4",key:e.id},[(0,o.Lk)("a",{href:`/employer/seekers/${e.users_id}`},[(0,o.Lk)("div",nm,[(0,o.Lk)("img",{src:i.uploadsUrl+e.image,onError:t[3]||(t[3]=(...e)=>l.setDefaultImage&&l.setDefaultImage(...e)),alt:"Profile",class:"card-img-top mx-auto",style:{width:"250px",height:"250px","object-fit":"cover"}},null,40,dm),(0,o.Lk)("div",cm,[(0,o.Lk)("h5",mm,[(0,o.Lk)("b",null,[(0,o.eW)((0,L.v_)(e.first_name)+" "+(0,L.v_)(e.last_name)+" ",1),1===e.verification_badge?((0,o.uX)(),(0,o.CE)("img",{key:0,style:{"margin-left":"5px"},src:i.profileImage,width:"25",height:"25",class:"rounded-circle",alt:"verification badge"},null,8,um)):(0,o.Q3)("",!0)])]),(0,o.Lk)("p",null,(0,L.v_)(i.categoryNames[e.categories_id]||"Loading category..."),1),(0,o.Lk)("p",gm,[1===e.verification_badge?((0,o.uX)(),(0,o.CE)(o.FK,{key:0},[t[22]||(t[22]=(0,o.Fv)('<i class="fa-solid fa-star" style="color:gold;" data-v-e9bbc07a></i><i class="fa-solid fa-star" style="color:gold;" data-v-e9bbc07a></i><i class="fa-solid fa-star" style="color:gold;" data-v-e9bbc07a></i><i class="fa-solid fa-star" style="color:gold;" data-v-e9bbc07a></i><i class="fa-solid fa-star" style="color:gold;" data-v-e9bbc07a></i>',5))],64)):((0,o.uX)(),(0,o.CE)(o.FK,{key:1},[t[23]||(t[23]=(0,o.Fv)('<i class="fa-solid fa-star" style="color:gold;" data-v-e9bbc07a></i><i class="fa-solid fa-star" style="color:gold;" data-v-e9bbc07a></i><i class="fa-solid fa-star" data-v-e9bbc07a></i><i class="fa-solid fa-star" data-v-e9bbc07a></i><i class="fa-solid fa-star" data-v-e9bbc07a></i>',5))],64))])])])],8,lm)])))),128))])]),l.totalPages>1?((0,o.uX)(),(0,o.CE)("div",hm,[(0,o.Lk)("ul",pm,[(0,o.Lk)("li",{class:(0,L.C4)(["page-item",{disabled:1===i.currentPage}])},[(0,o.Lk)("a",{class:"page-link",href:"#",onClick:t[4]||(t[4]=(0,s.D$)((e=>l.changePage(i.currentPage-1)),["prevent"]))},"Previous")],2),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.visiblePages,(e=>((0,o.uX)(),(0,o.CE)("li",{key:e,class:(0,L.C4)(["page-item",{active:i.currentPage===e}])},[(0,o.Lk)("a",{class:"page-link",href:"#",onClick:(0,s.D$)((t=>l.changePage(e)),["prevent"])},(0,L.v_)(e),9,bm)],2)))),128)),(0,o.Lk)("li",{class:(0,L.C4)(["page-item",{disabled:i.currentPage===l.totalPages}])},[(0,o.Lk)("a",{class:"page-link",href:"#",onClick:t[5]||(t[5]=(0,s.D$)((e=>l.changePage(i.currentPage+1)),["prevent"]))},"Next")],2)])])):(0,o.Q3)("",!0),i.showHireModal?((0,o.uX)(),(0,o.CE)("div",fm,[(0,o.Lk)("div",km,[(0,o.Lk)("div",vm,[(0,o.Lk)("div",ym,[(0,o.Lk)("h5",Lm,"Hire "+(0,L.v_)(i.job.first_name)+" "+(0,L.v_)(i.job.last_name),1),(0,o.Lk)("button",{type:"button",class:"btn-close",onClick:t[6]||(t[6]=(...e)=>l.closeHireModal&&l.closeHireModal(...e))},t[24]||(t[24]=[(0,o.Lk)("i",{class:"fa-solid fa-x"},null,-1)]))]),i.message?((0,o.uX)(),(0,o.CE)("div",Cm,[(0,o.Lk)("div",{class:(0,L.C4)(["alert",i.messageType]),role:"alert"},(0,L.v_)(i.message),3)])):(0,o.Q3)("",!0),(0,o.Lk)("div",wm,[(0,o.Lk)("div",_m,[t[26]||(t[26]=(0,o.Lk)("label",{class:"form-label"},[(0,o.eW)("When do you need the worker? "),(0,o.Lk)("span",{class:"text-danger"},"*")],-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[7]||(t[7]=e=>i.hireForm.when=e),class:"form-control",required:""},t[25]||(t[25]=[(0,o.Lk)("option",{disabled:"",value:""},"Select one",-1),(0,o.Lk)("option",null,"ASAP",-1),(0,o.Lk)("option",null,"After 3 days",-1),(0,o.Lk)("option",null,"Next week",-1),(0,o.Lk)("option",null,"Next month",-1)]),512),[[s.u1,i.hireForm.when]])]),(0,o.Lk)("div",Am,[t[28]||(t[28]=(0,o.Lk)("label",{class:"form-label"},[(0,o.eW)("Working Mode "),(0,o.Lk)("span",{class:"text-danger"},"*")],-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[8]||(t[8]=e=>i.hireForm.workingMode=e),class:"form-control",required:""},t[27]||(t[27]=[(0,o.Lk)("option",{disabled:"",value:""},"Select one",-1),(0,o.Lk)("option",{value:"full-time"},"Full-time",-1),(0,o.Lk)("option",{value:"part-time"},"Part-time",-1)]),512),[[s.u1,i.hireForm.workingMode]])]),(0,o.Lk)("div",Em,[t[30]||(t[30]=(0,o.Lk)("label",{class:"form-label"},[(0,o.eW)("Accommodation Preference "),(0,o.Lk)("span",{class:"text-danger"},"*")],-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[9]||(t[9]=e=>i.hireForm.accommodation=e),class:"form-control",required:""},t[29]||(t[29]=[(0,o.Lk)("option",{disabled:"",value:""},"Select one",-1),(0,o.Lk)("option",{value:"stay-in"},"Stay-in",-1),(0,o.Lk)("option",{value:"stay-out"},"Stay-out",-1)]),512),[[s.u1,i.hireForm.accommodation]])]),(0,o.Lk)("div",Im,[t[31]||(t[31]=(0,o.Lk)("label",{class:"form-label"},[(0,o.eW)("Job Description "),(0,o.Lk)("span",{class:"text-danger"},"*")],-1)),(0,o.bo)((0,o.Lk)("textarea",{class:"form-control",rows:"3","onUpdate:modelValue":t[10]||(t[10]=e=>i.hireForm.jobDescription=e),placeholder:"Brief job description...",required:"",style:{height:"100px"}},null,512),[[s.Jo,i.hireForm.jobDescription]])])]),(0,o.Lk)("div",xm,[(0,o.Lk)("button",{class:"btn btn-primary",onClick:t[11]||(t[11]=(...e)=>l.closeHireModal&&l.closeHireModal(...e))},"Cancel"),(0,o.Lk)("button",{class:"btn btn-primary",onClick:t[12]||(t[12]=(...e)=>l.submitHire&&l.submitHire(...e)),disabled:!l.canSubmitHire||i.loading},[i.loading?((0,o.uX)(),(0,o.CE)("span",Sm)):(0,o.Q3)("",!0),(0,o.eW)(" "+(0,L.v_)(i.loading?"Submitting...":"Submit"),1)],8,Pm)])])])])):(0,o.Q3)("",!0),i.showSupportModal?((0,o.uX)(),(0,o.CE)("div",Fm,[(0,o.Lk)("div",Mm,[(0,o.Lk)("div",Tm,[(0,o.Lk)("div",jm,[(0,o.Lk)("h5",Dm,"Support Inquiry About "+(0,L.v_)(i.job.first_name)+" "+(0,L.v_)(i.job.last_name),1),(0,o.Lk)("button",{type:"button",class:"btn-close",onClick:t[13]||(t[13]=(...e)=>l.closeSupportModal&&l.closeSupportModal(...e))},t[32]||(t[32]=[(0,o.Lk)("i",{class:"fa-solid fa-x"},null,-1)]))]),i.supportResponse.message?((0,o.uX)(),(0,o.CE)("div",Um,[(0,o.Lk)("div",{class:(0,L.C4)(["alert",i.supportResponse.type]),role:"alert"},(0,L.v_)(i.supportResponse.message),3)])):(0,o.Q3)("",!0),(0,o.Lk)("div",$m,[(0,o.Lk)("div",Xm,[t[33]||(t[33]=(0,o.Lk)("label",{class:"form-label"},[(0,o.eW)("Your Message "),(0,o.Lk)("span",{class:"text-danger"},"*")],-1)),(0,o.bo)((0,o.Lk)("textarea",{class:"form-control","onUpdate:modelValue":t[14]||(t[14]=e=>i.supportMessage=e),placeholder:"Write your inquiry about this job seeker...",style:{height:"100px"}},null,512),[[s.Jo,i.supportMessage]])])]),(0,o.Lk)("div",Vm,[(0,o.Lk)("button",{class:"btn btn-primary",onClick:t[15]||(t[15]=(...e)=>l.closeSupportModal&&l.closeSupportModal(...e))},"Cancel"),(0,o.Lk)("button",{class:"btn btn-primary",disabled:!i.supportMessage,onClick:t[16]||(t[16]=(...e)=>l.submitQuickSupport&&l.submitQuickSupport(...e))}," Send Message ",8,Bm)])])])])):(0,o.Q3)("",!0)])):(0,o.Q3)("",!0)])])])])],64)}var Nm={name:"DetailsComponent",components:{IndexComponent:kd},data(){return{job:null,jobs:[],categoryNames:{},uploadsUrl:`${de}/uploads/profile/`,profileImage:a(4083),noRelatedJobsFound:!1,message:"",messageType:"",userEmail:"",userId:null,loading:!1,jobsPerPage:9,currentPage:1,showHireModal:!1,hireForm:{when:"",workingMode:"",accommodation:"",jobDescription:""},showSupportModal:!1,supportMessage:"",supportResponse:{message:"",type:""},providerDetails:{job_provider_id:null,provider_first_name:"",provider_last_name:""}}},computed:{visiblePages(){const e=this.totalPages,t=this.currentPage,a=3;let s=Math.max(t-Math.floor(a/2),1),o=s+a-1;o>e&&(o=e,s=Math.max(o-a+1,1));const r=[];for(let i=s;i<=o;i++)r.push(i);return r},canSubmitHire(){return this.hireForm.when&&this.hireForm.workingMode&&this.hireForm.accommodation&&this.hireForm.jobDescription},paginatedJobs(){const e=(this.currentPage-1)*this.jobsPerPage;return this.jobs.slice(e,e+this.jobsPerPage)},totalPages(){return Math.ceil(this.jobs.length/this.jobsPerPage)}},methods:{changePage(e){e>=1&&e<=this.totalPages&&(this.currentPage=e,window.scrollTo({top:0,behavior:"smooth"}))},async getUserIdFromEmail(){const e=localStorage.getItem("authToken");if(e)try{const t=JSON.parse(atob(e.split(".")[1]));this.userEmail=t.email;const a=await fetch(`${de}/get_user_id_by_email/${this.userEmail}`,{headers:{Authorization:`Bearer ${e}`}}),s=await a.json();a.ok&&(this.userId=s.users_id,this.fetchProviderDetails())}catch(t){console.error("Error getting user ID:",t)}},async fetchProviderDetails(){const e=localStorage.getItem("authToken");try{const t=await fetch(`${de}/provider/job_provider_id/${this.userId}`,{headers:{Authorization:`Bearer ${e}`}}),a=await t.json();this.providerDetails=Array.isArray(a)?a[0]:a}catch(t){console.error("Error fetching provider:",t)}},async fetchJobSeeker(){const e=localStorage.getItem("authToken"),t=this.$route.params.users_id;try{const a=await fetch(`${de}/provider/job_seeker/${t}`,{headers:{Authorization:`Bearer ${e}`}}),s=await a.json();this.job=s;const o=Number(s.categories_id);o&&(this.fetchCategoryName(o),this.fetchUsersByCategory(o))}catch(a){console.error("Error fetching job seeker:",a)}},async fetchCategoryName(e){if(!this.categoryNames[e])try{const t=await fetch(`${de}/category_name/${e}`),a=await t.json();this.categoryNames[e]=a[0]?.name||"Unknown"}catch{this.categoryNames[e]="Unknown"}},async fetchUsersByCategory(e){const t=localStorage.getItem("authToken");try{const a=await fetch(`${de}/select_user_based_on_category/${e}`,{headers:{Authorization:`Bearer ${t}`}}),s=await a.json();this.jobs=s.filter((e=>e.users_id!==this.job.users_id)),this.noRelatedJobsFound=0===this.jobs.length;const o=[...new Set(this.jobs.map((e=>e.categories_id)))];for(const e of o)e&&!this.categoryNames[e]&&this.fetchCategoryName(e)}catch(a){console.error("Error fetching related jobs:",a)}},setDefaultImage(e){e.target.src=a(3438)},closeHireModal(){this.showHireModal=!1,this.hireForm={when:"",workingMode:"",accommodation:"",jobDescription:""}},async submitHire(){if(!this.canSubmitHire)return;this.loading=!0;const e=localStorage.getItem("authToken"),t={job_seeker_id:this.job?.job_seeker_id,job_provider_id:this.providerDetails?.job_provider_id,provider_first_name:this.providerDetails?.provider_first_name,provider_last_name:this.providerDetails?.provider_last_name,seeker_first_name:this.job?.first_name,seeker_last_name:this.job?.last_name,when_need_worker:this.hireForm?.when,working_mode:this.hireForm?.workingMode,accommodation_preference:this.hireForm?.accommodation,job_description:this.hireForm?.jobDescription};try{const a=await fetch(`${de}/provider/hire`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify(t)}),s=await a.json();this.message=a.ok?"Hire request submitted successfully!":s.message||"Error occurred.",this.messageType=a.ok?"alert-success":"alert-danger"}catch(a){this.message="Network error.",this.messageType="alert-danger"}finally{this.loading=!1}},closeSupportModal(){this.showSupportModal=!1,this.supportMessage="",this.supportResponse={message:"",type:""}},async submitQuickSupport(){const e=localStorage.getItem("authToken"),t={job_seeker_id:this.job?.job_seeker_id,job_provider_id:this.providerDetails?.job_provider_id,provider_first_name:this.providerDetails?.provider_first_name,provider_last_name:this.providerDetails?.provider_last_name,seeker_first_name:this.job?.first_name,seeker_last_name:this.job?.last_name,message:this.supportMessage};try{const a=await fetch(`${de}/provider/quicksupport`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify(t)}),s=await a.json();this.supportResponse={message:a.ok?"Message sent successfully.":s.message||"Error sending message.",type:a.ok?"alert-success":"alert-danger"},a.ok&&(this.supportMessage="")}catch{this.supportResponse={message:"Network error occurred.",type:"alert-danger"}}}},mounted(){this.getUserIdFromEmail(),this.fetchJobSeeker()},watch:{"$route.params.users_id"(){this.fetchJobSeeker()}}};const Qm=(0,n.A)(Nm,[["render",Jm],["__scopeId","data-v-e9bbc07a"]]);var zm=Qm;const Rm={class:"page-wrapper",id:"main-wrapper","data-layout":"vertical","data-navbarbg":"skin6","data-sidebartype":"full","data-sidebar-description":"fixed","data-header-description":"fixed"},Wm={class:"body-wrapper",style:{"margin-top":"-4rem"}},Om={class:"container-fluid"},Hm={class:"row"},Zm={class:"card h-70 text-center p-3"},Km=["src","alt"],qm={class:"card-body px-2"},Gm={class:"card-title mb-1"},Ym={class:"mb-0"},eu={class:"row"},tu={class:"col-12"},au={"aria-label":"Categories pagination"},su={class:"pagination justify-content-center"},ou=["tabindex"],ru=["onClick"],iu=["tabindex"];function lu(e,t,a,r,i,l){const n=(0,o.g2)("IndexComponent"),d=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(n),(0,o.Lk)("div",Rm,[(0,o.Lk)("div",Wm,[(0,o.Lk)("div",Om,[t[3]||(t[3]=(0,o.Lk)("div",{class:"row"},[(0,o.Lk)("h5",{class:"card-title fw-semibold mb-4",style:{color:"#E960A6"}},[(0,o.Lk)("i",{class:"ti ti-category-2"}),(0,o.eW)(" All Categories")])],-1)),(0,o.Lk)("div",Hm,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.paginatedCategories,(e=>((0,o.uX)(),(0,o.CE)("div",{class:"col-6 col-sm-6 col-md-4 col-lg-3 col-xl-3 mb-4",key:e.id},[(0,o.bF)(d,{to:`/employer/category/${e.id}`},{default:(0,o.k6)((()=>[(0,o.Lk)("div",Zm,[(0,o.Lk)("img",{src:l.getCategoryImage(e.logo),alt:e.name,class:"category-logo rounded-circle img-fluid",onError:t[0]||(t[0]=(...e)=>l.handleImageError&&l.handleImageError(...e))},null,40,Km),(0,o.Lk)("div",qm,[(0,o.Lk)("h5",Gm,[(0,o.Lk)("b",null,(0,L.v_)(e.name),1)]),(0,o.Lk)("p",Ym,(0,L.v_)(i.userCounts[e.id]||0),1)])])])),_:2},1032,["to"])])))),128))]),(0,o.Lk)("div",eu,[(0,o.Lk)("div",tu,[(0,o.Lk)("nav",au,[(0,o.Lk)("ul",su,[(0,o.Lk)("li",{class:(0,L.C4)(["page-item",{disabled:1===i.currentPage}])},[(0,o.Lk)("a",{class:"page-link",href:"#",onClick:t[1]||(t[1]=(0,s.D$)((e=>l.changePage(i.currentPage-1)),["prevent"])),tabindex:1===i.currentPage?-1:0}," Previous ",8,ou)],2),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.visiblePages,(e=>((0,o.uX)(),(0,o.CE)("li",{class:(0,L.C4)(["page-item",{active:e===i.currentPage}]),key:e},[(0,o.Lk)("a",{class:"page-link",href:"#",onClick:(0,s.D$)((t=>l.changePage(e)),["prevent"])},(0,L.v_)(e),9,ru)],2)))),128)),(0,o.Lk)("li",{class:(0,L.C4)(["page-item",{disabled:i.currentPage===l.totalPages}])},[(0,o.Lk)("a",{class:"page-link",href:"#",onClick:t[2]||(t[2]=(0,s.D$)((e=>l.changePage(i.currentPage+1)),["prevent"])),tabindex:i.currentPage===l.totalPages?-1:0}," Next ",8,iu)],2)])])])])])])])],64)}var nu={name:"WelcomeComponent",components:{IndexComponent:kd},data(){return{uploadsUrl:de+"/uploads/logo/",categories:[],userCounts:{},message:"",messageType:"",defaultImage:a(2231),currentPage:1,itemsPerPage:12}},computed:{responsiveItemsPerPage(){if("undefined"!==typeof window){const e=window.innerWidth;return e<576?4:e<768?6:e<992?8:12}return 12},totalPages(){return Math.ceil(this.categories.length/this.responsiveItemsPerPage)},paginatedCategories(){const e=(this.currentPage-1)*this.responsiveItemsPerPage,t=e+this.responsiveItemsPerPage;return this.categories.slice(e,t)},visiblePages(){const e=[],t=this.totalPages,a=this.currentPage;let s=Math.max(1,a-2),o=Math.min(t,a+2);o-s<4&&(1===s?o=Math.min(t,s+4):o===t&&(s=Math.max(1,o-4)));for(let r=s;r<=o;r++)e.push(r);return e}},methods:{getCategoryImage(e){return console.log("Logo value:",e),console.log("Full URL would be:",this.uploadsUrl+e),e&&""!==e.trim()?this.uploadsUrl+e:(console.log("Using default image"),this.defaultImage)},handleImageError(e){console.log("Image failed to load:",e.target.src),e.target.src=this.defaultImage},changePage(e){e>=1&&e<=this.totalPages&&(this.currentPage=e,window.scrollTo({top:0,behavior:"smooth"}))},handleResize(){this.$nextTick((()=>{this.currentPage>this.totalPages&&(this.currentPage=1)}))},async fetchCategory(){try{const e=localStorage.getItem("authToken");if(!e)return this.message="Authentication required.",void(this.messageType="alert-danger");const t=await fetch(`${de}/name_and_id`,{headers:{Authorization:`Bearer ${e}`}}),a=await t.json();if(t.ok){console.log("Fetched categories:",a),this.categories=a;for(const e of a)this.fetchUserCount(e.id)}else this.message=a.message||"Failed to fetch categories.",this.messageType="alert-danger"}catch(e){console.error("Error fetching categories:",e),this.message="Error fetching categories.",this.messageType="alert-danger"}},async fetchUserCount(e){try{const t=localStorage.getItem("authToken"),a=await fetch(`${de}/seekers/category/count/${e}`,{headers:{Authorization:`Bearer ${t}`}}),s=await a.json();a.ok?this.userCounts[e]=s.count||0:(console.warn(`Failed to fetch user count for category ${e}`),this.userCounts[e]=0)}catch(t){console.error(`Error fetching user count for category ${e}:`,t),this.userCounts[e]=0}}},mounted(){this.fetchCategory(),window.addEventListener("resize",this.handleResize)},beforeUnmount(){window.removeEventListener("resize",this.handleResize)}};const du=(0,n.A)(nu,[["render",lu],["__scopeId","data-v-5d97cedb"]]);var cu=du;const mu={class:"page-wrapper",id:"main-wrapper","data-layout":"vertical","data-navbarbg":"skin6","data-sidebartype":"full","data-sidebar-description":"fixed","data-header-description":"fixed"},uu={class:"body-wrapper",style:{"margin-top":"-4rem"}},gu={class:"container-fluid"},hu={class:"row"},pu={style:{"text-align":"center",color:"#5F9EA0","font-family":"'Michroma', sans-serif"}},bu={style:{"text-transform":"uppercase"}},fu={key:0,class:"text-center my-5"},ku={key:1,class:"row"},vu={class:"card h-100 text-center p-3"},yu=["src"],Lu={class:"card-body"},Cu={style:{"font-size":"20px"}},wu=["src"],_u={key:2,class:"d-flex justify-content-center mt-4"},Au={class:"pagination"},Eu=["disabled"],Iu=["onClick"],xu=["disabled"];function Pu(e,t,a,s,r,i){const l=(0,o.g2)("IndexComponent"),n=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(l),(0,o.Lk)("div",mu,[(0,o.Lk)("div",uu,[(0,o.Lk)("div",gu,[(0,o.Lk)("div",hu,[(0,o.Lk)("h3",pu,[(0,o.Lk)("p",bu," ALL WORKERS IN "+(0,L.v_)(r.categoryNames[r.category_id]||"Loading category..."),1)])]),r.loading?((0,o.uX)(),(0,o.CE)("div",fu,t[3]||(t[3]=[(0,o.Lk)("div",{class:"spinner-border",role:"status",style:{width:"4rem",height:"4rem",color:"#EA60A7"}},[(0,o.Lk)("span",{class:"visually-hidden"},"Loading...")],-1)]))):((0,o.uX)(),(0,o.CE)("div",ku,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.paginatedSeekers,(e=>((0,o.uX)(),(0,o.CE)("div",{class:"col-md-4 mb-4",key:e.users_id},[(0,o.bF)(n,{to:`/employer/seekers/${e.users_id}`},{default:(0,o.k6)((()=>[(0,o.Lk)("div",vu,[(0,o.Lk)("img",{src:r.uploadsUrl+e.image,onError:t[0]||(t[0]=(...e)=>i.setDefaultImage&&i.setDefaultImage(...e)),alt:"Profile",class:"card-img-top mx-auto",style:{width:"250px",height:"250px","object-fit":"cover"}},null,40,yu),(0,o.Lk)("div",Lu,[(0,o.Lk)("b",Cu,(0,L.v_)(e.first_name)+" "+(0,L.v_)(e.last_name),1),1===e.verification_badge?((0,o.uX)(),(0,o.CE)("img",{key:0,style:{"margin-left":"5px"},src:r.profileImage,width:"25",height:"25",class:"rounded-circle",alt:"User profile"},null,8,wu)):(0,o.Q3)("",!0),t[14]||(t[14]=(0,o.Lk)("br",null,null,-1)),1===e.verification_badge?((0,o.uX)(),(0,o.CE)(o.FK,{key:1},[t[4]||(t[4]=(0,o.Lk)("i",{class:"fa-solid fa-star",style:{color:"gold"}},null,-1)),t[5]||(t[5]=(0,o.Lk)("i",{class:"fa-solid fa-star",style:{color:"gold"}},null,-1)),t[6]||(t[6]=(0,o.Lk)("i",{class:"fa-solid fa-star",style:{color:"gold"}},null,-1)),t[7]||(t[7]=(0,o.Lk)("i",{class:"fa-solid fa-star",style:{color:"gold"}},null,-1)),t[8]||(t[8]=(0,o.Lk)("i",{class:"fa-solid fa-star",style:{color:"gold"}},null,-1))],64)):((0,o.uX)(),(0,o.CE)(o.FK,{key:2},[t[9]||(t[9]=(0,o.Lk)("i",{class:"fa-solid fa-star",style:{color:"gold"}},null,-1)),t[10]||(t[10]=(0,o.Lk)("i",{class:"fa-solid fa-star",style:{color:"gold"}},null,-1)),t[11]||(t[11]=(0,o.Lk)("i",{class:"fa-solid fa-star"},null,-1)),t[12]||(t[12]=(0,o.Lk)("i",{class:"fa-solid fa-star"},null,-1)),t[13]||(t[13]=(0,o.Lk)("i",{class:"fa-solid fa-star"},null,-1))],64))])])])),_:2},1032,["to"])])))),128))])),i.totalPages>1?((0,o.uX)(),(0,o.CE)("div",_u,[(0,o.Lk)("nav",null,[(0,o.Lk)("ul",Au,[(0,o.Lk)("li",{class:(0,L.C4)(["page-item",{disabled:1===r.currentPage}])},[(0,o.Lk)("button",{class:"page-link",onClick:t[1]||(t[1]=e=>i.changePage(r.currentPage-1)),disabled:1===r.currentPage}," Previous ",8,Eu)],2),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.visiblePages,(e=>((0,o.uX)(),(0,o.CE)("li",{key:e,class:(0,L.C4)(["page-item",{active:r.currentPage===e}])},[(0,o.Lk)("button",{class:"page-link",onClick:t=>i.changePage(e)},(0,L.v_)(e),9,Iu)],2)))),128)),(0,o.Lk)("li",{class:(0,L.C4)(["page-item",{disabled:r.currentPage===i.totalPages}])},[(0,o.Lk)("button",{class:"page-link",onClick:t[2]||(t[2]=e=>i.changePage(r.currentPage+1)),disabled:r.currentPage===i.totalPages}," Next ",8,xu)],2)])])])):(0,o.Q3)("",!0)])])])],64)}var Su={name:"WelcomeComponent",components:{IndexComponent:kd},data(){return{jobSeekers:[],message:"",messageType:"",category_id:null,categoryNames:{},profileImage:a(4083),uploadsUrl:`${de}/uploads/profile/`,loading:!1,currentPage:1,perPage:12,maxVisiblePages:5}},computed:{totalPages(){return Math.ceil(this.jobSeekers.length/this.perPage)},paginatedSeekers(){const e=(this.currentPage-1)*this.perPage,t=e+this.perPage;return this.jobSeekers.slice(e,t)},visiblePages(){const e=this.totalPages,t=this.currentPage,a=this.maxVisiblePages;if(e<=a)return Array.from({length:e},((e,t)=>t+1));let s=Math.max(1,t-Math.floor(a/2)),o=Math.min(e,s+a-1);return o-s+1<a&&(s=Math.max(1,o-a+1)),Array.from({length:o-s+1},((e,t)=>s+t))}},methods:{async FetchSeeker(){this.loading=!0;try{const e=localStorage.getItem("authToken");if(!e)return this.message="Authentication required.",this.messageType="alert-danger",void(this.loading=!1);const t=await fetch(`${de}/select_user_based_on_category/${this.category_id}`,{headers:{Authorization:`Bearer ${e}`}}),a=await t.json();if(t.ok){this.jobSeekers=a;for(const e of a)this.fetchCategoryName(e.categories_id)}else this.message=a.message||"Failed to fetch job seekers.",this.messageType="alert-danger"}catch(e){console.error("Error fetching job seekers:",e),this.message="Error fetching job seekers.",this.messageType="alert-danger"}finally{this.loading=!1}},setDefaultImage(e){e.target.src=a(3438)},async fetchCategoryName(e){if(!this.categoryNames[e])try{const t=await fetch(`${de}/category_name/${e}`),a=await t.json();t.ok&&Array.isArray(a)&&a.length>0&&a[0].name?this.categoryNames[e]=a[0].name:this.categoryNames[e]="Unknown"}catch(t){console.error(`Error fetching category name for ID ${e}:`,t),this.categoryNames[e]="Unknown"}},changePage(e){e>=1&&e<=this.totalPages&&(this.currentPage=e,window.scrollTo({top:0,behavior:"smooth"}))}},mounted(){this.category_id=this.$route.params.category_id,this.FetchSeeker(),this.fetchCategoryName(this.category_id)}};const Fu=(0,n.A)(Su,[["render",Pu]]);var Mu=Fu;const Tu={class:"page-wrapper",id:"main-wrapper","data-layout":"vertical","data-navbarbg":"skin6","data-sidebartype":"full","data-sidebar-description":"fixed","data-header-description":"fixed"},ju={class:"body-wrapper",style:{"margin-top":"-4rem"}},Du={class:"mx-4"},Uu={class:"form-group row",style:{display:"none"}},$u={class:"col-md-6"},Xu={class:"col-md-6"},Vu={class:"form-group row"},Bu={class:"col-md-6",style:{display:"none"}},Ju={class:"col-md-6"},Nu={class:"col-md-6"},Qu={class:"form-group row"},zu={class:"col-md-12"},Ru=["disabled"],Wu={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},Ou={key:1},Hu={key:2,class:"ms-2"};function Zu(e,t,a,r,i,l){const n=(0,o.g2)("IndexComponent");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(n),(0,o.Lk)("div",Tu,[(0,o.Lk)("div",ju,[t[14]||(t[14]=(0,o.Lk)("h5",{class:"card-title fw-semibold mb-4",style:{color:"#E960A6"}},[(0,o.Lk)("i",{class:"ti ti-message-chatbot"}),(0,o.eW)(" Request support")],-1)),(0,o.Lk)("div",Du,[(0,o.Lk)("div",Uu,[(0,o.Lk)("div",$u,[t[7]||(t[7]=(0,o.Lk)("label",{class:"form-label"},"Names",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>i.form.name=e),class:"form-control"},null,512),[[s.Jo,i.form.name]])]),(0,o.Lk)("div",Xu,[t[8]||(t[8]=(0,o.Lk)("label",{class:"form-label"},"Telephone",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>i.form.telephone=e),class:"form-control"},null,512),[[s.Jo,i.form.telephone]])])]),(0,o.Lk)("div",Vu,[(0,o.Lk)("div",Bu,[t[9]||(t[9]=(0,o.Lk)("label",{class:"form-label"},"Email",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=e=>i.form.email=e),class:"form-control"},null,512),[[s.Jo,i.form.email]])]),(0,o.Lk)("div",Ju,[t[11]||(t[11]=(0,o.Lk)("label",{class:"form-label"},"Priority",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>i.form.priority=e),style:{height:"48px","padding-top":"8px","padding-bottom":"8px"},class:"form-control"},t[10]||(t[10]=[(0,o.Lk)("option",{value:"quick-support"},"Quick support",-1),(0,o.Lk)("option",{value:"normal support"},"Normal support",-1)]),512),[[s.u1,i.form.priority]])]),(0,o.Lk)("div",Nu,[t[12]||(t[12]=(0,o.Lk)("label",{class:"form-label"},"Subject",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=e=>i.form.subject=e),class:"form-control"},null,512),[[s.Jo,i.form.subject]])])]),(0,o.Lk)("div",Qu,[(0,o.Lk)("div",zu,[t[13]||(t[13]=(0,o.Lk)("label",{class:"form-label"},"Message",-1)),(0,o.bo)((0,o.Lk)("textarea",{"onUpdate:modelValue":t[5]||(t[5]=e=>i.form.message=e),style:{height:"150px"},class:"form-control"},null,512),[[s.Jo,i.form.message]])])]),i.responseMessage?((0,o.uX)(),(0,o.CE)("div",{key:0,class:(0,L.C4)(["alert mt-3","success"===i.messageType?"alert-success":"alert-danger"]),role:"alert"},(0,L.v_)(i.responseMessage),3)):(0,o.Q3)("",!0),(0,o.Lk)("button",{onClick:t[6]||(t[6]=(...e)=>l.submitForm&&l.submitForm(...e)),class:"btn btn-primary mt-3",disabled:i.loading,style:{"background-color":"#E960A6"}},[i.loading?((0,o.uX)(),(0,o.CE)("span",Wu)):(0,o.Q3)("",!0),i.loading?((0,o.uX)(),(0,o.CE)("span",Hu,"Sending...")):((0,o.uX)(),(0,o.CE)("span",Ou,"Submit"))],8,Ru)])])])],64)}var Ku={components:{IndexComponent:kd},data(){return{form:{name:"",telephone:"",subject:"",email:"",priority:"quick-support",message:""},loading:!1,responseMessage:"",messageType:"",userEmail:"",userId:null,providerDetails:null}},async mounted(){const e=localStorage.getItem("authToken");if(e)try{const t=JSON.parse(atob(e.split(".")[1]));this.userEmail=t.email,this.form.email=this.userEmail}catch(t){console.error("Invalid token format",t)}this.userEmail&&await this.getUserIdFromEmail()},methods:{async submitForm(){this.loading=!0,this.responseMessage="",this.messageType="";try{const e=await fetch(`${de}/support/send-email`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.form)}),t=await e.json();this.responseMessage=t.message||"Message sent successfully!",this.messageType="success",this.form={name:this.form.name,telephone:this.form.telephone,email:this.form.email,priority:"quick-support",subject:"",message:""}}catch(e){console.error("Full error:",e),this.responseMessage="Error sending message: "+e.message,this.messageType="danger"}finally{this.loading=!1}},async getUserIdFromEmail(){const e=localStorage.getItem("authToken");if(e)try{const t=JSON.parse(atob(e.split(".")[1]));this.userEmail=t.email;const a=await fetch(`${de}/get_user_id_by_email/${this.userEmail}`,{headers:{Authorization:`Bearer ${e}`}}),s=await a.json();a.ok&&(this.userId=s.users_id,await this.fetchProviderDetails())}catch(t){console.error("Error getting user ID:",t)}},async fetchProviderDetails(){const e=localStorage.getItem("authToken");if(e&&this.userId)try{const t=await fetch(`${de}/provider/job_provider_id/${this.userId}`,{headers:{Authorization:`Bearer ${e}`}}),a=await t.json();t.ok&&(this.providerDetails=a,this.form.name=`${a.provider_first_name} ${a.provider_last_name}`)}catch(t){console.error("Error fetching provider details:",t)}}}};const qu=(0,n.A)(Ku,[["render",Zu],["__scopeId","data-v-10b7ef4c"]]);var Gu=qu;const Yu={class:"page-wrapper",id:"main-wrapper","data-layout":"vertical","data-navbarbg":"skin6","data-sidebartype":"full","data-sidebar-description":"fixed","data-header-description":"fixed"},eg={class:"body-wrapper"},tg={key:0,class:"alert alert-warning text-center mx-4"},ag={class:"form-group row"},sg={class:"col-md-6"},og=["disabled"],rg={class:"col-md-6"},ig=["disabled"],lg={class:"form-group row"},ng={class:"col-md-6"},dg=["disabled"],cg={class:"col-md-6"},mg=["disabled","min"],ug={class:"form-group row"},gg={class:"col-md-6"},hg=["disabled"],pg=["value"],bg={class:"col-md-6"},fg={key:0,class:"mb-2"},kg=["src"],vg=["disabled"],yg={class:"form-group row"},Lg={class:"col-md-12"},Cg=["disabled"],wg={class:"form-group row"},_g={class:"col-md-12"},Ag=["disabled"],Eg={class:"form-group row"},Ig={class:"col-md-12"},xg=["disabled"],Pg={class:"form-group row"},Sg={class:"col-md-6"},Fg=["disabled"],Mg={class:"col-md-6"},Tg=["disabled"],jg={class:"form-group row"},Dg={class:"col-md-12"},Ug=["disabled"],$g=["disabled"],Xg={key:0,class:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"},Vg={key:1,class:"text-muted"},Bg={class:"table-responsive"},Jg={class:"table table-bordered"},Ng=["src"],Qg=["onClick","disabled"];function zg(e,t,a,r,i,l){const n=(0,o.g2)("IndexComponent");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(n),(0,o.Lk)("div",Yu,[(0,o.Lk)("div",eg,[0===i.jobStatus?((0,o.uX)(),(0,o.CE)("div",tg," Your account is pending approval. You cannot add or edit jobs until approved. ")):(0,o.Q3)("",!0),t[31]||(t[31]=(0,o.Lk)("h5",{class:"card-title fw-semibold mb-4",style:{color:"#E960A6"}},[(0,o.Lk)("i",{class:"ti ti-settings"}),(0,o.eW)(" Add Jobs ")],-1)),(0,o.Lk)("form",{class:"mx-4",onSubmit:t[13]||(t[13]=(0,s.D$)(((...e)=>l.submitForm&&l.submitForm(...e)),["prevent"]))},[i.status.message?((0,o.uX)(),(0,o.CE)("div",{key:0,class:(0,L.C4)(["alert mt-3",i.status.success?"alert-success":"alert-danger"])},(0,L.v_)(i.status.message),3)):(0,o.Q3)("",!0),(0,o.Lk)("div",ag,[(0,o.Lk)("div",sg,[t[15]||(t[15]=(0,o.Lk)("label",{class:"form-label"},"Job Title",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>i.form.job_title=e),class:"form-control",disabled:0===i.jobStatus,required:""},null,8,og),[[s.Jo,i.form.job_title]])]),(0,o.Lk)("div",rg,[t[16]||(t[16]=(0,o.Lk)("label",{class:"form-label"},"Company Name / Your name",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>i.form.company=e),class:"form-control",disabled:0===i.jobStatus,required:""},null,8,ig),[[s.Jo,i.form.company]])])]),(0,o.Lk)("div",lg,[(0,o.Lk)("div",ng,[t[18]||(t[18]=(0,o.Lk)("label",{class:"form-label"},"Working Mode",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>i.form.location=e),class:"form-control",disabled:0===i.jobStatus,required:""},t[17]||(t[17]=[(0,o.Lk)("option",{value:"",disabled:""},"Choose mode",-1),(0,o.Lk)("option",{value:"Remote"},"Remote",-1),(0,o.Lk)("option",{value:"Full Time"},"Full Time",-1)]),8,dg),[[s.u1,i.form.location]])]),(0,o.Lk)("div",cg,[t[19]||(t[19]=(0,o.Lk)("label",{class:"form-label"},"Deadline Date",-1)),(0,o.bo)((0,o.Lk)("input",{type:"date","onUpdate:modelValue":t[3]||(t[3]=e=>i.form.deadline_date=e),class:"form-control",disabled:0===i.jobStatus,min:i.minDeadlineDate,required:""},null,8,mg),[[s.Jo,i.form.deadline_date]])])]),(0,o.Lk)("div",ug,[(0,o.Lk)("div",gg,[t[21]||(t[21]=(0,o.Lk)("label",{class:"form-label"},"Category",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>i.form.category_id=e),class:"form-control",style:{height:"48px","padding-top":"8px","padding-bottom":"8px"},disabled:0===i.jobStatus,required:"",onChange:t[5]||(t[5]=(...e)=>l.onCategoryChange&&l.onCategoryChange(...e))},[t[20]||(t[20]=(0,o.Lk)("option",{disabled:"",value:""},"Select Category",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.categories,(e=>((0,o.uX)(),(0,o.CE)("option",{key:e.id,value:e.id},(0,L.v_)(e.name),9,pg)))),128))],40,hg),[[s.u1,i.form.category_id]])]),(0,o.Lk)("div",bg,[t[22]||(t[22]=(0,o.Lk)("label",{class:"form-label"},"logo If applicable",-1)),i.form.logo&&"string"===typeof i.form.logo?((0,o.uX)(),(0,o.CE)("div",fg,[(0,o.Lk)("img",{src:i.uploadsUrl+i.form.logo,alt:"Current Logo",class:"custom-job-logo",width:"150"},null,8,kg)])):(0,o.Q3)("",!0),(0,o.Lk)("input",{type:"file",onChange:t[6]||(t[6]=(...e)=>l.handleFileUpload&&l.handleFileUpload(...e)),class:"form-control",disabled:0===i.jobStatus},null,40,vg),t[23]||(t[23]=(0,o.Lk)("small",{class:"form-text text-muted"},"Maximum file size: 1MB",-1))])]),(0,o.Lk)("div",yg,[(0,o.Lk)("div",Lg,[t[24]||(t[24]=(0,o.Lk)("label",{class:"form-label"},"Job Description",-1)),(0,o.bo)((0,o.Lk)("textarea",{"onUpdate:modelValue":t[7]||(t[7]=e=>i.form.job_description=e),class:"form-control",style:{height:"100px"},disabled:0===i.jobStatus,required:""},null,8,Cg),[[s.Jo,i.form.job_description]])])]),(0,o.Lk)("div",wg,[(0,o.Lk)("div",_g,[t[25]||(t[25]=(0,o.Lk)("label",{class:"form-label"},"Requirements",-1)),(0,o.bo)((0,o.Lk)("textarea",{"onUpdate:modelValue":t[8]||(t[8]=e=>i.form.requirements=e),class:"form-control",style:{height:"100px"},disabled:0===i.jobStatus,required:""},null,8,Ag),[[s.Jo,i.form.requirements]])])]),(0,o.Lk)("div",Eg,[(0,o.Lk)("div",Ig,[t[26]||(t[26]=(0,o.Lk)("label",{class:"form-label"},"Responsability",-1)),(0,o.bo)((0,o.Lk)("textarea",{"onUpdate:modelValue":t[9]||(t[9]=e=>i.form.responsability=e),class:"form-control",style:{height:"100px"},disabled:0===i.jobStatus,required:""},null,8,xg),[[s.Jo,i.form.responsability]])])]),(0,o.Lk)("div",Pg,[(0,o.Lk)("div",Sg,[t[27]||(t[27]=(0,o.Lk)("label",{class:"form-label"},"Salary Min",-1)),(0,o.bo)((0,o.Lk)("input",{type:"number","onUpdate:modelValue":t[10]||(t[10]=e=>i.form.salary_min=e),class:"form-control",disabled:0===i.jobStatus,required:""},null,8,Fg),[[s.Jo,i.form.salary_min]])]),(0,o.Lk)("div",Mg,[t[28]||(t[28]=(0,o.Lk)("label",{class:"form-label"},"salary Max",-1)),(0,o.bo)((0,o.Lk)("input",{type:"number","onUpdate:modelValue":t[11]||(t[11]=e=>i.form.salary_max=e),class:"form-control",disabled:0===i.jobStatus,required:""},null,8,Tg),[[s.Jo,i.form.salary_max]])])]),(0,o.Lk)("div",jg,[(0,o.Lk)("div",Dg,[t[29]||(t[29]=(0,o.Lk)("label",{class:"form-label"},"conclusion ",-1)),(0,o.bo)((0,o.Lk)("textarea",{"onUpdate:modelValue":t[12]||(t[12]=e=>i.form.conclusion=e),class:"form-control",style:{height:"100px"},disabled:0===i.jobStatus,required:""},null,8,Ug),[[s.Jo,i.form.conclusion]])])]),(0,o.Lk)("button",{type:"submit",class:"btn btn-primary mt-3",disabled:i.isSubmitting||0===i.jobStatus},[i.isSubmitting?((0,o.uX)(),(0,o.CE)("span",Xg)):(0,o.Q3)("",!0),(0,o.eW)(" "+(0,L.v_)(i.isSubmitting?"Submitting...":i.form.job_id?"Update Job":"Submit Job"),1)],8,$g)],32),t[32]||(t[32]=(0,o.Lk)("hr",{class:"my-4"},null,-1)),t[33]||(t[33]=(0,o.Lk)("h5",{class:"fw-semibold mb-3"},"Your Jobs",-1)),0===i.jobs.length?((0,o.uX)(),(0,o.CE)("div",Vg,"No jobs available yet.")):(0,o.Q3)("",!0),(0,o.Lk)("div",Bg,[(0,o.Lk)("table",Jg,[t[30]||(t[30]=(0,o.Lk)("thead",{class:"table-light"},[(0,o.Lk)("tr",null,[(0,o.Lk)("th",null,"Id"),(0,o.Lk)("th",null,"Title"),(0,o.Lk)("th",null,"Company"),(0,o.Lk)("th",null,"Description"),(0,o.Lk)("th",null,"Requirements"),(0,o.Lk)("th",null,"Responsability"),(0,o.Lk)("th",null,"salary-min"),(0,o.Lk)("th",null,"salary-max"),(0,o.Lk)("th",null,"Working mode"),(0,o.Lk)("th",null,"Category"),(0,o.Lk)("th",null,"Deadline"),(0,o.Lk)("th",null,"Conclusion"),(0,o.Lk)("th",null,"Logo"),(0,o.Lk)("th",null,"Status"),(0,o.Lk)("th",null,"Action")])],-1)),(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.jobs,((e,a)=>((0,o.uX)(),(0,o.CE)("tr",{key:e.job_id},[(0,o.Lk)("td",null,(0,L.v_)(a+1),1),(0,o.Lk)("td",null,(0,L.v_)(e.job_title),1),(0,o.Lk)("td",null,(0,L.v_)(e.job_description),1),(0,o.Lk)("td",null,(0,L.v_)(e.requirements),1),(0,o.Lk)("td",null,(0,L.v_)(e.responsability),1),(0,o.Lk)("td",null,(0,L.v_)(e.company),1),(0,o.Lk)("td",null,(0,L.v_)(e.salary_max),1),(0,o.Lk)("td",null,(0,L.v_)(e.salary_min),1),(0,o.Lk)("td",null,(0,L.v_)(e.location),1),(0,o.Lk)("td",null,(0,L.v_)(l.getCategoryName(e.category_id)),1),(0,o.Lk)("td",null,(0,L.v_)(e.deadline_date?e.deadline_date.substring(0,10):""),1),(0,o.Lk)("td",null,(0,L.v_)(e.conclusion),1),(0,o.Lk)("td",null,[(0,o.Lk)("img",{src:i.uploadsUrl+e.logo,onError:t[14]||(t[14]=e=>l.onLogoError(e)),alt:"Logo",class:"custom-job-logo",width:"100",height:"50"},null,40,Ng)]),(0,o.Lk)("td",null,[(0,o.Lk)("span",{class:(0,L.C4)([l.getStatusLabel(e.status).colorClass,"fw-bold"])},(0,L.v_)(l.getStatusLabel(e.status).text),3)]),(0,o.Lk)("td",null,[(0,o.Lk)("button",{class:"btn btn-primary mt-3",onClick:t=>l.editJob(e),disabled:0===i.jobStatus},"Edit",8,Qg)])])))),128))])])])])])],64)}var Rg={name:"MainWrapper",components:{IndexComponent:kd},data(){return{uploadsUrl:de+"/uploads/logo/",defaultImage:a(5549),form:{job_id:null,job_title:"",company:"",deadline_date:"",job_description:"",requirements:"",responsability:"",salary_min:"",salary_max:"",conclusion:"",logo:"",location:"",category_id:""},jobs:[],categories:[],categoryNames:{},isSubmitting:!1,status:{success:!1,message:""},userEmail:"",userId:"",jobStatus:null,minDeadlineDate:""}},mounted(){const e=localStorage.getItem("authToken");if(e)try{const t=JSON.parse(atob(e.split(".")[1]));this.userEmail=t.email}catch(t){console.error("Invalid token format",t)}this.setMinDeadlineDate(),this.fetchCategories(),this.userEmail&&this.getUserIdFromEmail()},methods:{onLogoError(e){e.target.src=this.defaultImage},onCategoryChange(){console.log("Category changed to:",this.form.category_id),console.log("Category type:",typeof this.form.category_id)},handleFileUpload(e){this.form.logo=e.target.files[0]},setMinDeadlineDate(){const e=new Date;e.setDate(e.getDate()+1),this.minDeadlineDate=e.toISOString().split("T")[0]},async submitForm(){this.isSubmitting=!0,this.status.message="";try{if(console.log("Form data before submit:",this.form),console.log("Category ID value:",this.form.category_id),console.log("Category ID type:",typeof this.form.category_id),!this.form.category_id||""===this.form.category_id)return this.status={success:!1,message:"Please select a category."},void(this.isSubmitting=!1);const e=new FormData;e.append("job_title",this.form.job_title),e.append("company",this.form.company),e.append("location",this.form.location),e.append("job_description",this.form.job_description),e.append("requirements",this.form.requirements),e.append("responsability",this.form.responsability),e.append("salary_min",this.form.salary_max),e.append("salary_max",this.form.salary_max),e.append("conclusion",this.form.conclusion),e.append("deadline_date",this.form.deadline_date),e.append("users_id",this.userId);const t=this.form.category_id;if(void 0===t||null===t||""===t)return console.error("Category ID is undefined or empty:",t),this.status={success:!1,message:"Category ID is missing."},void(this.isSubmitting=!1);e.append("category_id",t),console.log("Category ID being sent:",t),this.form.logo&&"string"!==typeof this.form.logo&&e.append("logo",this.form.logo),console.log("FormData entries:");for(let[i,l]of e.entries())console.log(i+": "+l);const a=localStorage.getItem("authToken"),s=this.form.job_id?`${de}/admin/update_job/${this.form.job_id}`:`${de}/admin/add_jobs`,o=this.form.job_id?"PUT":"POST",r=await fetch(s,{method:o,headers:{Authorization:`Bearer ${a}`},body:e});if(r.ok){const e=await r.json();this.status={success:!0,message:e.message||(this.form.job_id?"Job updated!":"Job added!")},this.form={job_id:null,job_title:"",company:"",deadline_date:this.minDeadlineDate,job_description:"",requirements:"",responsability:"",salary_min:"",salary_max:"",conclusion:"",logo:"",location:"",category_id:""},this.fetchJobsByUser()}else{const e=await r.text();this.status={success:!1,message:"Failed: "+e}}}catch(e){console.error("Error:",e),this.status={success:!1,message:"Unexpected error occurred."}}finally{this.isSubmitting=!1}},async fetchCategoryNameByUserId(){try{const e=await fetch(`${de}/category/${this.userId}`),t=await e.json();return e.ok&&t.name?t.name:"Unknown"}catch(e){return console.error("Failed to fetch category name:",e),"Error fetching category"}},getCategoryName(e){return this.categoryNames[e]||"Unknown"},async fetchJobsByUser(){try{const e=localStorage.getItem("authToken");if(!this.userId)return;const t=await fetch(`${de}/provider/jobs/${this.userId}`,{headers:{Authorization:`Bearer ${e}`}});if(!t.ok)throw new Error("Failed to fetch jobs");const a=await t.json();this.jobs=a}catch(e){console.error("Error fetching jobs for user:",e)}},async fetchUserStatus(){const e=localStorage.getItem("authToken");if(this.userId&&e)try{const t=await fetch(`${de}/provider/status/${this.userId}`,{headers:{Authorization:`Bearer ${e}`}}),a=await t.json();t.ok?this.jobStatus=a.status:console.error("Error fetching job status:",a.message)}catch(t){console.error("Network error while fetching job status:",t)}},async fetchCategories(){try{const e=localStorage.getItem("authToken"),t=await fetch(`${de}/name_and_id`,{headers:{Authorization:`Bearer ${e}`}}),a=await t.json();t.ok?(this.categories=a,console.log("Categories fetched:",a),console.log("First category structure:",a[0]),a.forEach((e=>{this.categoryNames[e.id]=e.name}))):console.error("Failed to load categories:",a.message)}catch(e){console.error("Error fetching categories:",e)}},editJob(e){const t=e.deadline_date?new Date(e.deadline_date).toISOString().split("T")[0]:"";this.form={job_id:e.job_id,job_title:e.job_title,company:e.company,deadline_date:t,job_description:e.job_description,requirements:e.requirements,responsability:e.responsability,salary_min:e.salary_min,salary_max:e.salary_max,conclusion:e.conclusion,logo:e.logo,location:e.location,category_id:e.category_id},window.scrollTo({top:0,behavior:"smooth"})},async getUserIdFromEmail(){const e=localStorage.getItem("authToken");if(e&&this.userEmail)try{const t=await fetch(`${de}/get_user_id_by_email/${this.userEmail}`,{headers:{Authorization:`Bearer ${e}`}}),a=await t.json();t.ok?(this.userId=a.users_id,this.fetchJobsByUser(),this.fetchUserStatus()):this.status={success:!1,message:a.message||"Unable to get user ID."}}catch(t){console.error("Error getting users_id:",t),this.status={success:!1,message:"Failed to fetch user ID."}}},getStatusLabel(e){return 0===e?{text:"Pending",colorClass:"text-danger"}:1===e?{text:"Approved",colorClass:"text-success"}:{text:"Unknown",colorClass:"text-muted"}}}};const Wg=(0,n.A)(Rg,[["render",zg],["__scopeId","data-v-858b77f2"]]);var Og=Wg;const Hg={class:"page-wrapper",id:"main-wrapper","data-layout":"vertical","data-navbarbg":"skin6","data-sidebartype":"full","data-sidebar-description":"fixed","data-header-description":"fixed"},Zg={class:"body-wrapper",style:{"margin-top":"-4rem"}},Kg={class:"form-group"},qg={class:"form-group"},Gg={class:"form-group"},Yg=["disabled"];function eh(e,t,a,r,i,l){const n=(0,o.g2)("IndexComponent");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(n),(0,o.Lk)("div",Hg,[(0,o.Lk)("div",Zg,[t[9]||(t[9]=(0,o.Lk)("h2",{style:{"margin-left":"2rem","margin-right":"2rem"}},"Change Password",-1)),(0,o.Lk)("form",{onSubmit:t[3]||(t[3]=(0,s.D$)(((...e)=>l.changePassword&&l.changePassword(...e)),["prevent"])),style:{"margin-left":"2rem","margin-right":"2rem"}},[(0,o.Lk)("div",Kg,[t[4]||(t[4]=(0,o.Lk)("label",{for:"current_password",class:"form-label"},"Current password:",-1)),(0,o.bo)((0,o.Lk)("input",{type:"password","onUpdate:modelValue":t[0]||(t[0]=e=>i.currentPassword=e),class:"form-control",id:"current_password",required:""},null,512),[[s.Jo,i.currentPassword]])]),(0,o.Lk)("div",qg,[t[5]||(t[5]=(0,o.Lk)("label",{for:"new_password",class:"form-label"},"New password:",-1)),(0,o.bo)((0,o.Lk)("input",{type:"password","onUpdate:modelValue":t[1]||(t[1]=e=>i.newPassword=e),class:"form-control",id:"new_password",required:""},null,512),[[s.Jo,i.newPassword]])]),(0,o.Lk)("div",Gg,[t[6]||(t[6]=(0,o.Lk)("label",{for:"confirm_password",class:"form-label"},"Confirm New Password:",-1)),(0,o.bo)((0,o.Lk)("input",{type:"password","onUpdate:modelValue":t[2]||(t[2]=e=>i.confirmPassword=e),class:"form-control",id:"confirm_password",required:""},null,512),[[s.Jo,i.confirmPassword]])]),(0,o.Lk)("button",{type:"submit",class:"btn btn-primary",disabled:i.loading},(0,L.v_)(i.loading?"Changing...":"Change"),9,Yg),t[7]||(t[7]=(0,o.Lk)("br",null,null,-1)),t[8]||(t[8]=(0,o.Lk)("br",null,null,-1)),i.passwordMessage?((0,o.uX)(),(0,o.CE)("p",{key:0,class:(0,L.C4)(["alert alert-danger",i.passwordMessageClass]),style:{"margin-left":"5rem"}},(0,L.v_)(i.passwordMessage),3)):(0,o.Q3)("",!0)],32)])])],64)}var th={name:"MainWrapper",components:{IndexComponent:kd},data(){return{userEmail:null,users_id:null,currentPassword:"",newPassword:"",confirmPassword:"",passwordMessage:"",passwordMessageClass:"",feedback:"",feedbackColor:"green",loading:!1}},computed:{applyStatusClass(){return"green"===this.feedbackColor?"alert-success":"alert-danger"}},mounted(){const e=localStorage.getItem("authToken");if(e)try{const t=JSON.parse(atob(e.split(".")[1]));this.userEmail=t.email,this.getUserIdFromEmail()}catch(t){console.error("Invalid JWT token:",t)}},methods:{async getUserIdFromEmail(){const e=localStorage.getItem("authToken");if(e&&this.userEmail)try{const t=await fetch(`${de}/get_user_id_by_email/${this.userEmail}`,{headers:{Authorization:`Bearer ${e}`}}),a=await t.json();t.ok?this.users_id=a.users_id:(this.feedback=a.message||"Unable to get user ID.",this.feedbackColor="red")}catch(t){console.error("Error getting users_id:",t),this.feedback="Failed to fetch user ID.",this.feedbackColor="red"}},async changePassword(){if(this.newPassword!==this.confirmPassword)return this.passwordMessage="New passwords do not match.",void(this.passwordMessageClass="text-danger");this.loading=!0;try{const e=localStorage.getItem("authToken"),t=await ne.A.post(`${de}/change-password`,{current_password:this.currentPassword,new_password:this.newPassword,confirm_password:this.confirmPassword},{headers:{Authorization:`Bearer ${e}`}});t.data.success?(this.passwordMessage=t.data.message,this.passwordMessageClass="text-success",this.currentPassword="",this.newPassword="",this.confirmPassword=""):(this.passwordMessage=t.data.message,this.passwordMessageClass="text-danger")}catch(e){console.error("Error:",e),this.passwordMessage=e.response?.data?.message||"An error occurred.",this.passwordMessageClass="text-danger"}finally{this.loading=!1}}}};const ah=(0,n.A)(th,[["render",eh],["__scopeId","data-v-17f5e906"]]);var sh=ah;const oh={class:"page-wrapper",id:"main-wrapper","data-layout":"vertical","data-navbarbg":"skin6","data-sidebartype":"full","data-sidebar-description":"fixed","data-header-description":"fixed"},rh={class:"body-wrapper",style:{"margin-top":"-3rem"}},ih={class:"card mb-4"},lh={class:"card-body"},nh={class:"text-center text-muted"},dh={class:"card border-danger"},ch={class:"card-body"},mh={class:"d-flex justify-content-between align-items-center"},uh=["disabled"],gh={class:"modal-dialog"},hh={class:"modal-content"},ph={class:"modal-header border-bottom-danger"},bh=["disabled"],fh={class:"modal-body"},kh={class:"text-center mb-4"},vh={class:"text-muted"},yh={class:"mb-3"},Lh=["disabled"],Ch={class:"modal-footer"},wh=["disabled"],_h=["disabled"],Ah={key:0},Eh={key:1};function Ih(e,t,a,r,i,l){const n=(0,o.g2)("IndexComponent");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(n),(0,o.Lk)("div",oh,[(0,o.Lk)("div",rh,[t[20]||(t[20]=(0,o.Lk)("h5",{class:"card-title fw-semibold mb-4",style:{color:"#E960A6"}},[(0,o.Lk)("i",{class:"ti ti-user-plus"}),(0,o.eW)(" Settings ")],-1)),(0,o.Lk)("div",ih,[(0,o.Lk)("div",lh,[t[7]||(t[7]=(0,o.Lk)("h5",{class:"text-center"},"Logged in as:",-1)),(0,o.Lk)("h6",nh,(0,L.v_)(i.userEmail),1)])]),(0,o.Lk)("div",dh,[t[10]||(t[10]=(0,o.Lk)("div",{class:"card-header bg-danger text-white"},[(0,o.Lk)("h6",{class:"card-title mb-0 text-white"},"Danger Zone")],-1)),(0,o.Lk)("div",ch,[(0,o.Lk)("div",mh,[t[9]||(t[9]=(0,o.Lk)("div",null,[(0,o.Lk)("h6",{class:"text-danger mb-1"},"Delete Account"),(0,o.Lk)("p",{class:"text-muted mb-0"}," Once you delete your account, it will be permanently removed and cannot be recovered. ")],-1)),(0,o.Lk)("button",{type:"button",class:"btn btn-outline-danger",onClick:t[0]||(t[0]=e=>i.showDeleteConfirmation=!0),disabled:i.isDeleting},t[8]||(t[8]=[(0,o.Lk)("i",{class:"ti ti-user-x"},null,-1),(0,o.eW)(" Delete Account ")]),8,uh)])])]),i.showDeleteConfirmation?((0,o.uX)(),(0,o.CE)("div",{key:0,class:(0,L.C4)(["modal fade",{show:i.showDeleteConfirmation}]),style:(0,L.Tr)({display:i.showDeleteConfirmation?"block":"none"}),tabindex:"-1"},[(0,o.Lk)("div",gh,[(0,o.Lk)("div",hh,[(0,o.Lk)("div",ph,[t[11]||(t[11]=(0,o.Lk)("h5",{class:"modal-title text-danger"},[(0,o.Lk)("i",{class:"ti ti-alert-triangle me-2"}),(0,o.eW)(" Confirm Account Deletion ")],-1)),(0,o.Lk)("button",{type:"button",class:"btn-close",onClick:t[1]||(t[1]=(...e)=>l.closeDeleteModal&&l.closeDeleteModal(...e)),disabled:i.isDeleting},null,8,bh)]),(0,o.Lk)("div",fh,[(0,o.Lk)("div",kh,[t[14]||(t[14]=(0,o.Lk)("div",{class:"text-danger mb-3"},[(0,o.Lk)("i",{class:"ti ti-alert-circle",style:{"font-size":"3rem"}})],-1)),t[15]||(t[15]=(0,o.Lk)("h6",{class:"text-danger"},"Are you absolutely sure?",-1)),(0,o.Lk)("p",vh,[t[12]||(t[12]=(0,o.eW)(" This action will permanently delete your account ")),(0,o.Lk)("strong",null,(0,L.v_)(i.userEmail),1),t[13]||(t[13]=(0,o.eW)(". Once deleted, your account cannot be recovered. "))])]),t[17]||(t[17]=(0,o.Lk)("div",{class:"alert alert-warning"},[(0,o.Lk)("strong",null,"Warning:"),(0,o.eW)(" This will permanently delete your account and: "),(0,o.Lk)("ul",{class:"mb-0 mt-2"},[(0,o.Lk)("li",null,"Your access to the platform"),(0,o.Lk)("li",null,"Your job applications visibility"),(0,o.Lk)("li",null,"Your profile visibility"),(0,o.Lk)("li",null,"All platform features")])],-1)),(0,o.Lk)("div",yh,[t[16]||(t[16]=(0,o.Lk)("label",{class:"form-label"},[(0,o.eW)(" Type "),(0,o.Lk)("strong",null,"DELETE"),(0,o.eW)(" to confirm: ")],-1)),(0,o.bo)((0,o.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[2]||(t[2]=e=>i.deleteConfirmationText=e),placeholder:"Type DELETE here",disabled:i.isDeleting},null,8,Lh),[[s.Jo,i.deleteConfirmationText]])])]),(0,o.Lk)("div",Ch,[(0,o.Lk)("button",{type:"button",class:"btn btn-secondary",onClick:t[3]||(t[3]=(...e)=>l.closeDeleteModal&&l.closeDeleteModal(...e)),disabled:i.isDeleting}," Cancel ",8,wh),(0,o.Lk)("button",{type:"button",class:"btn btn-danger",disabled:"DELETE"!==i.deleteConfirmationText||i.isDeleting,onClick:t[4]||(t[4]=(...e)=>l.deleteAccount&&l.deleteAccount(...e))},[i.isDeleting?((0,o.uX)(),(0,o.CE)("span",Ah,t[18]||(t[18]=[(0,o.Lk)("i",{class:"ti ti-loader-2 spin me-1"},null,-1),(0,o.eW)(" Deliting... ")]))):((0,o.uX)(),(0,o.CE)("span",Eh,t[19]||(t[19]=[(0,o.Lk)("i",{class:"ti ti-user-x me-1"},null,-1),(0,o.eW)(" Delete Account ")])))],8,_h)])])])],6)):(0,o.Q3)("",!0),i.showDeleteConfirmation?((0,o.uX)(),(0,o.CE)("div",{key:1,class:"modal-backdrop fade show",onClick:t[5]||(t[5]=(...e)=>l.closeDeleteModal&&l.closeDeleteModal(...e))})):(0,o.Q3)("",!0),i.message?((0,o.uX)(),(0,o.CE)("div",{key:2,class:(0,L.C4)(`alert ${i.messageType} alert-dismissible fade show mt-3`),role:"alert"},[(0,o.eW)((0,L.v_)(i.message)+" ",1),(0,o.Lk)("button",{type:"button",class:"btn-close",onClick:t[6]||(t[6]=(...e)=>l.clearMessage&&l.clearMessage(...e))})],2)):(0,o.Q3)("",!0)])]),t[21]||(t[21]=(0,o.Lk)("br",null,null,-1)),t[22]||(t[22]=(0,o.Lk)("br",null,null,-1)),t[23]||(t[23]=(0,o.Lk)("br",null,null,-1)),t[24]||(t[24]=(0,o.Lk)("br",null,null,-1))],64)}var xh={name:"SettingsComponent",components:{IndexComponent:kd},data(){return{userEmail:"",userId:null,showDeleteConfirmation:!1,deleteConfirmationText:"",isDeleting:!1,message:null,messageType:""}},mounted(){this.getUserIdFromEmail(),this.loadCategoryTypes()},methods:{formatDate(e){if(!e)return"";const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),o=String(t.getDate()).padStart(2,"0");return`${a}-${s}-${o}`},async getUserIdFromEmail(){const e=localStorage.getItem("authToken");if(e)try{const t=JSON.parse(atob(e.split(".")[1]));if(this.userEmail=t.email,!this.userEmail)return void this.showMessage("Unable to get email from token. Please login again.","alert-danger");const a=await fetch(`${de}/get_user_id_by_email/${this.userEmail}`,{headers:{Authorization:`Bearer ${e}`}}),s=await a.json();a.ok?(this.userId=s.users_id,this.fetchProfile(),this.fetchCategoryNameByUserId()):this.showMessage(s.message||"Unable to get user ID.","alert-danger")}catch(t){console.error("Error getting users_id:",t),this.showMessage("Failed to fetch user ID. Please try again.","alert-danger")}else this.showMessage("No authentication token found. Please login again.","alert-danger")},async fetchProfile(){console.log("Fetching profile...")},async fetchCategoryNameByUserId(){console.log("Fetching categories...")},async loadCategoryTypes(){console.log("Loading category types...")},closeDeleteModal(){this.isDeleting||(this.showDeleteConfirmation=!1,this.deleteConfirmationText="")},clearMessage(){this.message=null,this.messageType=""},showMessage(e,t){this.message=e,this.messageType=t},async deleteAccount(){if("DELETE"===this.deleteConfirmationText)if(this.userEmail){this.isDeleting=!0,this.clearMessage();try{const e=localStorage.getItem("authToken");if(!e)return this.showMessage("Authentication token not found. Please login again.","alert-danger"),void(this.isDeleting=!1);const t=`${de}/seeker/delete_my_account/${encodeURIComponent(this.userEmail)}`;console.log("Making request to:",t);const a=await fetch(t,{method:"PUT",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}}),s=await a.json();console.log("Response:",s),a.ok?(this.showMessage(s.message||"Account deactivated successfully!","alert-success"),this.closeDeleteModal(),setTimeout((()=>{localStorage.removeItem("authToken"),this.$router.push("/login")}),3e3)):(this.showMessage(s.message||"Failed to deactivate account. Please try again.","alert-danger"),this.isDeleting=!1)}catch(e){console.error("Error deactivating account:",e),this.showMessage("Network error occurred. Please check your connection and try again.","alert-danger"),this.isDeleting=!1}}else this.showMessage("User email not found. Please refresh and try again.","alert-danger");else this.showMessage("Please type 'DELETE' to confirm.","alert-warning")}}};const Ph=(0,n.A)(xh,[["render",Ih],["__scopeId","data-v-5f544d84"]]);var Sh=Ph;const Fh={class:"page-wrapper",id:"main-wrapper"},Mh={class:"login-container"},Th={class:"form-section"},jh={class:"form-container"},Dh={key:0,class:"error-container"},Uh={class:"alert alert-danger"},$h={class:"form-group"},Xh={class:"input-wrapper"},Vh={class:"form-group"},Bh={class:"input-wrapper"},Jh=["type"],Nh={key:0,width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Qh={key:1,width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},zh=["disabled"],Rh={key:0,class:"spinner"},Wh={key:1};function Oh(e,t,a,r,i,l){return(0,o.uX)(),(0,o.CE)("div",Fh,[(0,o.Lk)("div",Mh,[t[13]||(t[13]=(0,o.Fv)('<div class="image-section" data-v-6b2a0500><div class="image-overlay" data-v-6b2a0500></div><div class="brand-content" data-v-6b2a0500><div class="brand-logo" data-v-6b2a0500><div class="logo-icon" data-v-6b2a0500><svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-6b2a0500><path d="M24 4L44 14V34L24 44L4 34V14L24 4Z" fill="white" fill-opacity="0.9" data-v-6b2a0500></path><path d="M24 12L36 18V30L24 36L12 30V18L24 12Z" fill="#EA60A7" data-v-6b2a0500></path></svg></div><h1 class="brand-name" data-v-6b2a0500>AdminPanel</h1></div><div class="brand-description" data-v-6b2a0500><h2 data-v-6b2a0500>Welcome Back!</h2><p data-v-6b2a0500>Access your admin dashboard with secure authentication and powerful management tools.</p></div><div class="floating-elements" data-v-6b2a0500><div class="floating-element" style="--delay:0s;" data-v-6b2a0500></div><div class="floating-element" style="--delay:2s;" data-v-6b2a0500></div><div class="floating-element" style="--delay:4s;" data-v-6b2a0500></div></div></div></div>',1)),(0,o.Lk)("div",Th,[(0,o.Lk)("div",jh,[t[12]||(t[12]=(0,o.Lk)("div",{class:"form-header"},[(0,o.Lk)("h1",{class:"form-title"},"Admin Login"),(0,o.Lk)("p",{class:"form-subtitle"},"Sign in to your admin panel")],-1)),(0,o.Lk)("form",{onSubmit:t[3]||(t[3]=(0,s.D$)(((...e)=>l.login&&l.login(...e)),["prevent"])),class:"login-form"},[i.errorMessage?((0,o.uX)(),(0,o.CE)("div",Dh,[(0,o.Lk)("div",Uh,[t[4]||(t[4]=(0,o.Lk)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,o.Lk)("path",{d:"M8 1L15 15H1L8 1Z",stroke:"currentColor","stroke-width":"2","stroke-linejoin":"round"}),(0,o.Lk)("path",{d:"M8 6V9",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"}),(0,o.Lk)("path",{d:"M8 12H8.01",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"})],-1)),(0,o.eW)(" "+(0,L.v_)(i.errorMessage),1)])])):(0,o.Q3)("",!0),(0,o.Lk)("div",$h,[t[6]||(t[6]=(0,o.Lk)("label",{for:"email",class:"form-label"},"Email Address",-1)),(0,o.Lk)("div",Xh,[t[5]||(t[5]=(0,o.Lk)("svg",{class:"input-icon",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,o.Lk)("path",{d:"M3.33334 3.33334H16.6667C17.5833 3.33334 18.3333 4.08334 18.3333 5.00001V15C18.3333 15.9167 17.5833 16.6667 16.6667 16.6667H3.33334C2.41668 16.6667 1.66668 15.9167 1.66668 15V5.00001C1.66668 4.08334 2.41668 3.33334 3.33334 3.33334Z",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),(0,o.Lk)("path",{d:"M18.3333 5L10 10.8333L1.66668 5",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),(0,o.bo)((0,o.Lk)("input",{type:"email","onUpdate:modelValue":t[0]||(t[0]=e=>i.email=e),class:"form-control",id:"email",required:"",placeholder:"Enter your email"},null,512),[[s.Jo,i.email]])])]),(0,o.Lk)("div",Vh,[t[10]||(t[10]=(0,o.Lk)("label",{for:"password",class:"form-label"},"Password",-1)),(0,o.Lk)("div",Bh,[t[9]||(t[9]=(0,o.Lk)("svg",{class:"input-icon",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,o.Lk)("path",{d:"M15.8333 9.16667H4.16667C3.24619 9.16667 2.5 9.91286 2.5 10.8333V16.6667C2.5 17.5871 3.24619 18.3333 4.16667 18.3333H15.8333C16.7538 18.3333 17.5 17.5871 17.5 16.6667V10.8333C17.5 9.91286 16.7538 9.16667 15.8333 9.16667Z",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),(0,o.Lk)("path",{d:"M5.83334 9.16667V5.83333C5.83334 4.72826 6.27233 3.66846 7.05373 2.88705C7.83513 2.10565 8.89494 1.66667 10 1.66667C11.1051 1.66667 12.1649 2.10565 12.9463 2.88705C13.7277 3.66846 14.1667 4.72826 14.1667 5.83333V9.16667",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),(0,o.bo)((0,o.Lk)("input",{class:"form-control","onUpdate:modelValue":t[1]||(t[1]=e=>i.password=e),type:i.showPassword?"text":"password",id:"password",required:"",placeholder:"Enter your password"},null,8,Jh),[[s.hp,i.password]]),(0,o.Lk)("button",{type:"button",class:"password-toggle",onClick:t[2]||(t[2]=e=>i.showPassword=!i.showPassword)},[i.showPassword?((0,o.uX)(),(0,o.CE)("svg",Nh,t[7]||(t[7]=[(0,o.Lk)("path",{d:"M1.66668 10S4.16668 4.16667 10 4.16667 18.3333 10 18.3333 10 15.8333 15.8333 10 15.8333 1.66668 10 1.66668 10Z",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),(0,o.Lk)("path",{d:"M10 12.5C11.3807 12.5 12.5 11.3807 12.5 10C12.5 8.61929 11.3807 7.5 10 7.5C8.61929 7.5 7.5 8.61929 7.5 10C7.5 11.3807 8.61929 12.5 10 12.5Z",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)]))):((0,o.uX)(),(0,o.CE)("svg",Qh,t[8]||(t[8]=[(0,o.Lk)("path",{d:"M14.95 14.95C13.4805 16.0188 11.7668 16.6014 10 16.6667C4.16668 16.6667 1.66668 10 1.66668 10C2.98461 7.35556 4.80722 5.06927 7.05001 3.35",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),(0,o.Lk)("path",{d:"M7.70834 6.66667C8.47337 6.22544 9.33044 5.99464 10.2 6C11.0696 6.00536 11.9262 6.23627 12.6917 6.67733C13.4572 7.11838 14.1076 7.75352 14.5833 8.525C14.5833 8.525 15.425 9.80833 15.8333 10.8333",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),(0,o.Lk)("path",{d:"M10.8333 10.8333C10.6423 11.3235 10.3149 11.7381 9.89499 12.0273C9.47507 12.3166 8.98326 12.4678 8.48334 12.4608C7.98342 12.4538 7.49566 12.2889 7.08334 11.9875C6.67102 11.686 6.35372 11.2618 6.17501 10.775",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),(0,o.Lk)("path",{d:"M1.66668 1.66667L18.3333 18.3333",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])))])])]),(0,o.Lk)("button",{type:"submit",class:"btn-primary",disabled:i.loginInProgress},[i.loginInProgress?((0,o.uX)(),(0,o.CE)("span",Rh)):((0,o.uX)(),(0,o.CE)("span",Wh,t[11]||(t[11]=[(0,o.Lk)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,o.Lk)("path",{d:"M7.5 2.5H2.5V17.5H7.5",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),(0,o.Lk)("path",{d:"M13.75 6.25L17.5 10L13.75 13.75",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),(0,o.Lk)("path",{d:"M17.5 10H7.5",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]))),(0,o.eW)(" "+(0,L.v_)(i.loginInProgress?"Signing In...":"Sign In"),1)],8,zh)],32)])])])])}var Hh={data(){return{email:"",password:"",errorMessage:"",showPassword:!1,loginInProgress:!1,role_id:"3"}},methods:{async login(){this.loginInProgress=!0,this.errorMessage="";try{const e=await ne.A.post(`${de}/login`,{email:this.email,password:this.password,role_id:this.role_id});e.data.token?(localStorage.setItem("adminToken",e.data.token),localStorage.setItem("userEmail",this.email),localStorage.setItem("roleId",this.role_id),this.$router.push("/admin/index")):this.errorMessage="Login failed."}catch(e){this.errorMessage=e.response?.data?.message||"Login failed."}finally{this.loginInProgress=!1}}}};const Zh=(0,n.A)(Hh,[["render",Oh],["__scopeId","data-v-6b2a0500"]]);var Kh=Zh;const qh={class:"page-wrapper",id:"main-wrapper","data-layout":"vertical","data-navbarbg":"skin6","data-sidebartype":"full","data-sidebar-description":"fixed","data-header-description":"fixed"},Gh={class:"body-wrapper",style:{"margin-top":"-4rem"}},Yh={class:"container-fluid"},ep={class:"stats-cards-container"},tp={class:"stats-card"},ap={class:"card-content"},sp={class:"card-info"},op={class:"card-value"},rp={class:"stats-card"},ip={class:"card-content"},lp={class:"card-info"},np={class:"card-value"},dp={class:"stats-card"},cp={class:"card-content"},mp={class:"card-info"},up={class:"card-value"},gp={class:"stats-card"},hp={class:"card-content"},pp={class:"card-info"},bp={class:"card-value"},fp={class:"stats-card"},kp={class:"card-content"},vp={class:"card-info"},yp={class:"card-value"},Lp={class:"stats-card"},Cp={class:"card-content"},wp={class:"card-info"},_p={class:"card-value"},Ap={class:"stats-card"},Ep={class:"card-content"},Ip={class:"card-info"},xp={class:"card-value"},Pp={class:"stats-card"},Sp={class:"card-content"},Fp={class:"card-info"},Mp={class:"card-value"},Tp={class:"stats-card"},jp={class:"card-content"},Dp={class:"card-info"},Up={class:"card-value"},$p={class:"stats-card"},Xp={class:"card-content"},Vp={class:"card-info"},Bp={class:"card-value"},Jp={class:"stats-card"},Np={class:"card-content"},Qp={class:"card-info"},zp={class:"card-value"},Rp={class:"stats-card"},Wp={class:"card-content"},Op={class:"card-info"},Hp={class:"card-value"};function Zp(e,t,a,s,r,i){const l=(0,o.g2)("IndexComponent");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(l),(0,o.Lk)("div",qh,[(0,o.Lk)("div",Gh,[(0,o.Lk)("div",Yh,[(0,o.Lk)("div",ep,[(0,o.Lk)("div",tp,[(0,o.Lk)("div",ap,[(0,o.Lk)("div",sp,[t[0]||(t[0]=(0,o.Lk)("div",{class:"card-label"},"All Job Providers",-1)),(0,o.Lk)("div",op,(0,L.v_)(r.productsCount),1)]),t[1]||(t[1]=(0,o.Lk)("div",{class:"card-icon"},[(0,o.Lk)("i",{class:"ti ti-notebook"})],-1))]),t[2]||(t[2]=(0,o.Lk)("div",{class:"card-gradient-bg"},null,-1))]),(0,o.Lk)("div",rp,[(0,o.Lk)("div",ip,[(0,o.Lk)("div",lp,[t[3]||(t[3]=(0,o.Lk)("div",{class:"card-label"},"All Job Seekers",-1)),(0,o.Lk)("div",np,(0,L.v_)(r.blogsCount),1)]),t[4]||(t[4]=(0,o.Lk)("div",{class:"card-icon"},[(0,o.Lk)("i",{class:"ti ti-archive"})],-1))]),t[5]||(t[5]=(0,o.Lk)("div",{class:"card-gradient-bg"},null,-1))]),(0,o.Lk)("div",dp,[(0,o.Lk)("div",cp,[(0,o.Lk)("div",mp,[t[6]||(t[6]=(0,o.Lk)("div",{class:"card-label"},"Hired Seekers",-1)),(0,o.Lk)("div",up,(0,L.v_)(r.employeesCount),1)]),t[7]||(t[7]=(0,o.Lk)("div",{class:"card-icon"},[(0,o.Lk)("i",{class:"ti ti-users"})],-1))]),t[8]||(t[8]=(0,o.Lk)("div",{class:"card-gradient-bg"},null,-1))]),(0,o.Lk)("div",gp,[(0,o.Lk)("div",hp,[(0,o.Lk)("div",pp,[t[9]||(t[9]=(0,o.Lk)("div",{class:"card-label"},"Approved Seekers",-1)),(0,o.Lk)("div",bp,(0,L.v_)(r.approvedseekersCount),1)]),t[10]||(t[10]=(0,o.Lk)("div",{class:"card-icon"},[(0,o.Lk)("i",{class:"ti ti-user-check"})],-1))]),t[11]||(t[11]=(0,o.Lk)("div",{class:"card-gradient-bg"},null,-1))]),(0,o.Lk)("div",fp,[(0,o.Lk)("div",kp,[(0,o.Lk)("div",vp,[t[12]||(t[12]=(0,o.Lk)("div",{class:"card-label"},"Approved Providers",-1)),(0,o.Lk)("div",yp,(0,L.v_)(r.approvedprovidersCount),1)]),t[13]||(t[13]=(0,o.Lk)("div",{class:"card-icon"},[(0,o.Lk)("i",{class:"ti ti-building"})],-1))]),t[14]||(t[14]=(0,o.Lk)("div",{class:"card-gradient-bg"},null,-1))]),(0,o.Lk)("div",Lp,[(0,o.Lk)("div",Cp,[(0,o.Lk)("div",wp,[t[15]||(t[15]=(0,o.Lk)("div",{class:"card-label"},"All Agents",-1)),(0,o.Lk)("div",_p,(0,L.v_)(r.agentCount),1)]),t[16]||(t[16]=(0,o.Lk)("div",{class:"card-icon"},[(0,o.Lk)("i",{class:"ti ti-user-star"})],-1))]),t[17]||(t[17]=(0,o.Lk)("div",{class:"card-gradient-bg"},null,-1))]),(0,o.Lk)("div",Ap,[(0,o.Lk)("div",Ep,[(0,o.Lk)("div",Ip,[t[18]||(t[18]=(0,o.Lk)("div",{class:"card-label"},"All Jobs",-1)),(0,o.Lk)("div",xp,(0,L.v_)(r.jobsCount),1)]),t[19]||(t[19]=(0,o.Lk)("div",{class:"card-icon"},[(0,o.Lk)("i",{class:"ti ti-briefcase"})],-1))]),t[20]||(t[20]=(0,o.Lk)("div",{class:"card-gradient-bg"},null,-1))]),(0,o.Lk)("div",Pp,[(0,o.Lk)("div",Sp,[(0,o.Lk)("div",Fp,[t[21]||(t[21]=(0,o.Lk)("div",{class:"card-label"},"Unpublished Jobs",-1)),(0,o.Lk)("div",Mp,(0,L.v_)(r.unpublishedCount),1)]),t[22]||(t[22]=(0,o.Lk)("div",{class:"card-icon"},[(0,o.Lk)("i",{class:"ti ti-eye-off"})],-1))]),t[23]||(t[23]=(0,o.Lk)("div",{class:"card-gradient-bg"},null,-1))]),(0,o.Lk)("div",Tp,[(0,o.Lk)("div",jp,[(0,o.Lk)("div",Dp,[t[24]||(t[24]=(0,o.Lk)("div",{class:"card-label"},"Active Jobs",-1)),(0,o.Lk)("div",Up,(0,L.v_)(r.activeJobsCount),1)]),t[25]||(t[25]=(0,o.Lk)("div",{class:"card-icon"},[(0,o.Lk)("i",{class:"ti ti-briefcase"})],-1))]),t[26]||(t[26]=(0,o.Lk)("div",{class:"card-gradient-bg"},null,-1))]),(0,o.Lk)("div",$p,[(0,o.Lk)("div",Xp,[(0,o.Lk)("div",Vp,[t[27]||(t[27]=(0,o.Lk)("div",{class:"card-label"},"Today's Provider Registrations",-1)),(0,o.Lk)("div",Bp,(0,L.v_)(r.pendingApplicationsCount),1)]),t[28]||(t[28]=(0,o.Lk)("div",{class:"card-icon"},[(0,o.Lk)("i",{class:"ti ti-clock"})],-1))]),t[29]||(t[29]=(0,o.Lk)("div",{class:"card-gradient-bg"},null,-1))]),(0,o.Lk)("div",Jp,[(0,o.Lk)("div",Np,[(0,o.Lk)("div",Qp,[t[30]||(t[30]=(0,o.Lk)("div",{class:"card-label"},"Today's Registrations",-1)),(0,o.Lk)("div",zp,(0,L.v_)(r.todayRegistrationsCount),1)]),t[31]||(t[31]=(0,o.Lk)("div",{class:"card-icon"},[(0,o.Lk)("i",{class:"ti ti-user-plus"})],-1))]),t[32]||(t[32]=(0,o.Lk)("div",{class:"card-gradient-bg"},null,-1))]),(0,o.Lk)("div",Rp,[(0,o.Lk)("div",Wp,[(0,o.Lk)("div",Op,[t[33]||(t[33]=(0,o.Lk)("div",{class:"card-label"},"Jobs Posted This Week",-1)),(0,o.Lk)("div",Hp,(0,L.v_)(r.weeklyJobsCount),1)]),t[34]||(t[34]=(0,o.Lk)("div",{class:"card-icon"},[(0,o.Lk)("i",{class:"ti ti-trophy"})],-1))]),t[35]||(t[35]=(0,o.Lk)("div",{class:"card-gradient-bg"},null,-1))])])])])])],64)}const Kp={class:"page-wrapper",id:"main-wrapper","data-layout":"vertical","data-navbarbg":"skin6","data-sidebartype":"full","data-sidebar-position":"fixed","data-header-position":"fixed"},qp={class:"body-wrapper"};function Gp(e,t,a,s,r,i){const l=(0,o.g2)("SidebarComponent"),n=(0,o.g2)("HeaderComponent");return(0,o.uX)(),(0,o.CE)("div",Kp,[(0,o.bF)(l),(0,o.Lk)("div",qp,[(0,o.bF)(n),t[0]||(t[0]=(0,o.Lk)("div",{class:"container-fluid"},[(0,o.Lk)("div",{class:"row"})],-1))])])}const Yp={class:"app-header"},eb={class:"navbar navbar-expand-lg navbar-light px-3 fixed-top"},tb={class:"navbar-nav"},ab={class:"nav-item d-block d-xl-none"},sb={class:"navbar-collapse justify-content-end px-0",id:"navbarNav"},ob={class:"navbar-nav flex-row ms-auto align-items-center justify-content-end"},rb={class:"nav-item dropdown"},ib={class:"nav-link nav-icon-hover",href:"javascript:void(0)",id:"userDropdown","data-bs-toggle":"dropdown","aria-expanded":"false"},lb=["src"],nb={class:"dropdown-menu dropdown-menu-end dropdown-menu-animate-up","aria-labelledby":"userDropdown"};function db(e,t,a,s,r,i){const l=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("header",Yp,[(0,o.Lk)("nav",eb,[(0,o.Lk)("ul",tb,[(0,o.Lk)("li",ab,[(0,o.Lk)("a",{class:"nav-link sidebartoggler nav-icon-hover",href:"javascript:void(0)",onClick:t[0]||(t[0]=t=>e.$emit("toggle-sidebar")),title:"Toggle Sidebar"},t[2]||(t[2]=[(0,o.Lk)("i",{class:"ti ti-menu-2"},null,-1)]))])]),(0,o.Lk)("div",sb,[(0,o.Lk)("ul",ob,[(0,o.Lk)("li",rb,[(0,o.Lk)("a",ib,[(0,o.Lk)("img",{src:r.profileImage,width:"35",height:"35",class:"rounded-circle",alt:"User profile"},null,8,lb)]),(0,o.Lk)("ul",nb,[(0,o.Lk)("li",null,[(0,o.bF)(l,{to:"#",class:"dropdown-item d-flex align-items-center"},{default:(0,o.k6)((()=>t[3]||(t[3]=[(0,o.Lk)("i",{class:"ti ti-user fs-6 me-2"},null,-1),(0,o.eW)(" My Profile ")]))),_:1})]),(0,o.Lk)("li",null,[(0,o.bF)(l,{to:"",class:"dropdown-item d-flex align-items-center"},{default:(0,o.k6)((()=>t[4]||(t[4]=[(0,o.Lk)("i",{class:"fa-solid fa-key me-2"},null,-1),(0,o.eW)(" Credentials ")]))),_:1})]),(0,o.Lk)("li",null,[(0,o.Lk)("a",{href:"javascript:void(0)",class:"dropdown-item",onClick:t[1]||(t[1]=(...e)=>i.logout&&i.logout(...e))},t[5]||(t[5]=[(0,o.Lk)("i",{class:"ti ti-square-arrow-left me-2",style:{width:"2rem"}},null,-1),(0,o.eW)(" Logout ")]))])])])])])])])}var cb={name:"HeaderComponent",data(){return{profileImage:a(2231)}},methods:{logout(){localStorage.removeItem("adminToken"),this.$router.push("/admin")}}};const mb=(0,n.A)(cb,[["render",db],["__scopeId","data-v-1a4bb524"]]);var ub=mb;const gb={class:"page-wrapper",id:"main-wrapper","data-layout":"vertical","data-navbarbg":"skin6","data-sidebartype":"full","data-sidebar-position":"fixed","data-header-position":"fixed"},hb={class:"brand-logo d-flex align-items-center justify-content-between"},pb={href:"/admin",class:"text-nowrap logo-img"},bb=["src"],fb={class:"sidebar-nav scroll-sidebar","data-simplebar":"",style:{"margin-top":"2rem"}},kb={id:"sidebarnav"},vb=["onClick"],yb={class:"hide-menu"},Lb={key:0,class:"submenu"},Cb={class:"hide-menu"},wb=["href"],_b={class:"hide-menu"},Ab={class:"hide-menu"},Eb={class:"body-wrapper"};function Ib(e,t,s,r,i,l){const n=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",gb,[(0,o.Lk)("aside",{class:(0,L.C4)(["left-sidebar",{"sidebar-collapsed":!i.sidebarVisible}])},[(0,o.Lk)("div",null,[(0,o.Lk)("div",hb,[(0,o.Lk)("a",pb,[(0,o.Lk)("img",{src:a(5549),alt:"Logo",style:{width:"10rem"}},null,8,bb)]),(0,o.Lk)("div",{class:"close-btn d-xl-none d-block sidebartoggler cursor-pointer",onClick:t[0]||(t[0]=(...e)=>l.toggleSidebar&&l.toggleSidebar(...e)),"aria-label":"Toggle sidebar"},t[1]||(t[1]=[(0,o.Lk)("i",{class:"ti ti-x fs-8"},null,-1)]))]),(0,o.Lk)("nav",fb,[(0,o.Lk)("ul",kb,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.menuItems,(e=>((0,o.uX)(),(0,o.CE)("li",{key:e.name,class:(0,L.C4)(["sidebar-item",{active:l.isMainMenuActive(e)&&!l.isSubmenuOpen(e)}])},[e.children?((0,o.uX)(),(0,o.CE)(o.FK,{key:0},[(0,o.Lk)("div",{class:(0,L.C4)(["sidebar-link cursor-pointer",{active:l.isMainMenuActive(e)&&!l.isSubmenuOpen(e)}]),onClick:t=>l.toggleDropdown(e.name)},[(0,o.Lk)("span",null,[(0,o.Lk)("i",{class:(0,L.C4)(e.icon)},null,2)]),(0,o.Lk)("span",yb,(0,L.v_)(e.name),1),t[2]||(t[2]=(0,o.Lk)("i",{class:"ti ti-chevron-down ms-auto"},null,-1))],10,vb),i.openDropdown===e.name?((0,o.uX)(),(0,o.CE)("ul",Lb,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.children,(e=>((0,o.uX)(),(0,o.CE)("li",{key:e.name,class:(0,L.C4)({active:l.isChildActive(e)})},[(0,o.bF)(n,{to:e.link,class:(0,L.C4)(["sidebar-link",{active:l.isChildActive(e)}])},{default:(0,o.k6)((()=>[(0,o.Lk)("span",Cb,(0,L.v_)(e.name),1)])),_:2},1032,["to","class"])],2)))),128))])):(0,o.Q3)("",!0)],64)):e.external?((0,o.uX)(),(0,o.CE)("a",{key:1,href:e.link,class:"sidebar-link",target:"_blank",rel:"noopener"},[(0,o.Lk)("span",null,[(0,o.Lk)("i",{class:(0,L.C4)(e.icon)},null,2)]),(0,o.Lk)("span",_b,(0,L.v_)(e.name),1)],8,wb)):((0,o.uX)(),(0,o.Wv)(n,{key:2,to:e.link,class:(0,L.C4)(["sidebar-link",{active:l.isMenuItemActive(e)}])},{default:(0,o.k6)((()=>[(0,o.Lk)("span",null,[(0,o.Lk)("i",{class:(0,L.C4)(e.icon)},null,2)]),(0,o.Lk)("span",Ab,(0,L.v_)(e.name),1)])),_:2},1032,["to","class"]))],2)))),128))])])])],2),(0,o.Lk)("div",Eb,[(0,o.RG)(e.$slots,"default",{},void 0,!0)])])}var xb={name:"SidebarNavigation",data(){return{sidebarVisible:!0,openDropdown:null,isMobile:!1,menuItems:[{name:"Dashboard",link:"/admin/index",icon:"ti ti-layout-dashboard",matchPrefix:["/admin/index"]},{name:"Job Seekers",icon:"ti ti-user-plus",matchPrefix:["/admin/view-seekers","/admin/register-seeker","/admin/hired-seeker","/admin/approved-user","/admin/open-tickets"],children:[{name:"View Seekers",link:"/admin/view-seekers",matchPrefix:["/admin/view-seekers","/admin/edit-seekers","/view-seekers"]},{name:"Register Seekers",link:"/admin/register-seeker",matchPrefix:["/admin/register-seeker"]},{name:"Hired Seekers",link:"/admin/hired-seeker",matchPrefix:["/admin/hired-seeker"]},{name:"Approved Users",link:"/admin/approved-user",matchPrefix:["/admin/approved-user"]},{name:"Open Tickets",link:"/admin/open-tickets",matchPrefix:["/admin/open-tickets"]},{name:"Employment details",link:"/admin/payroll",matchPrefix:["/admin/payroll"]}]},{name:"Job Providers",icon:"ti ti-briefcase",matchPrefix:["/admin/view-provider","/admin/edit-provider","/admin/register-provider"],children:[{name:"View Providers",link:"/admin/view-provider",matchPrefix:["/admin/view-more","/admin/edit-provider"]},{name:"Register Provider",link:"/admin/register-provider",matchPrefix:["/admin/register-provider"]},{name:"Approved Providers",link:"/admin/approved-providers",matchPrefix:["/admin/approved-providers"]}]},{name:"Agents",icon:"ti ti-id-badge",matchPrefix:["/admin/view-agent","/admin/edit-agent","/admin/register-agent"],children:[{name:"View Agent",link:"/admin/view-agent",matchPrefix:["/admin/more-agent","/admin/edit-agent"]},{name:"Register Agent",link:"/admin/register-agent",matchPrefix:["/admin/register-agent"]}]},{name:"Jobs",icon:"ti ti-clipboard",matchPrefix:["/admin/Register-jobs","/admin/edit-jobs","/admin/unpublished-job","/admin/Job-Applicants"],children:[{name:"Register New jobs",link:"/admin/Register-jobs",matchPrefix:["/admin/Register-jobs","/admin/edit-jobs","/admin/job-details"]},{name:"Un Published job",link:"/admin/unpublished-job",matchPrefix:["/admin/unpublished-job"]},{name:"Job Applicants",link:"/admin/Job-Applicants",matchPrefix:["/admin/Job-Applicants"]}]},{name:"ads and category",icon:"ti ti-briefcase",matchPrefix:["/admin/advert","/admin/edit-advert","/admin/category","/admin/edit-category"],children:[{name:"Advert",link:"/admin/advert",matchPrefix:["/admin/advert","/admin/edit-advert"]},{name:"Category",link:"/admin/category",matchPrefix:["/admin/category","/admin/edit-category"]}]}]}},mounted(){this.checkIfMobile(),window.addEventListener("resize",this.checkIfMobile),this.menuItems.forEach((e=>{e.children&&this.isMainMenuActive(e)&&(this.openDropdown=e.name)}))},beforeUnmount(){window.removeEventListener("resize",this.checkIfMobile)},methods:{toggleSidebar(){this.sidebarVisible=!this.sidebarVisible},matchesPrefix(e){if(!e||0===e.length)return!1;const t=this.$route.path;return e.some((e=>t.startsWith(e)))},isMenuItemActive(e){return!(!e.link||this.$route.path!==e.link)||!(!e.matchPrefix||!this.matchesPrefix(e.matchPrefix))},isChildActive(e){return!(!e.link||this.$route.path!==e.link)||!(!e.matchPrefix||!this.matchesPrefix(e.matchPrefix))},isMainMenuActive(e){return!(!e.link||this.$route.path!==e.link)||(!(!e.matchPrefix||!this.matchesPrefix(e.matchPrefix))||!!e.children&&e.children.some((e=>this.isChildActive(e))))},isActive(e){return this.$route.path===e},isSubmenuOpen(e){return e.children&&this.openDropdown===e.name},toggleDropdown(e){this.openDropdown=this.openDropdown===e?null:e},checkIfMobile(){this.isMobile=window.innerWidth<=768,this.sidebarVisible=!this.isMobile}}};const Pb=(0,n.A)(xb,[["render",Ib],["__scopeId","data-v-23163502"]]);var Sb=Pb,Fb={name:"MainWrapper",components:{SidebarComponent:Sb,HeaderComponent:ub}};const Mb=(0,n.A)(Fb,[["render",Gp]]);var Tb=Mb,jb={name:"WelcomeComponent",components:{IndexComponent:Tb},setup(){return{globalVariable:de}},data(){return{approvedseekersCount:0,approvedprovidersCount:0,agentCount:0,jobsCount:0,unpublishedCount:0,productsCount:0,blogsCount:0,employeesCount:0,userEmail:"",activeJobsCount:0,pendingApplicationsCount:0,todayRegistrationsCount:0,hiringSuccessRate:0,weeklyJobsCount:0,monthlyApplicationsCount:0,avgDaysToHire:0,rejectedApplicationsCount:0}},mounted(){ne.A.get(`${de}/providers/counts`).then((e=>{void 0!==e.data.count?this.productsCount=e.data.count:console.error("Error fetching product count:",e.data.error||"Unknown error")})).catch((e=>{console.error("Error fetching product count:",e)})),ne.A.get(`${de}/seekers/count`).then((e=>{void 0!==e.data.count?this.blogsCount=e.data.count:console.error("Error fetching blogs count:",e.data.error||"Unknown error")})).catch((e=>{console.error("Error fetching blogs count:",e)})),ne.A.get(`${de}/employees/count`).then((e=>{void 0!==e.data.count?this.employeesCount=e.data.count:console.error("Error fetching team count:",e.data.error||"Unknown error")})).catch((e=>{console.error("Error fetching employees count:",e)})),ne.A.get(`${de}/admin/count/approved_seekers`).then((e=>{void 0!==e.data.count?this.approvedseekersCount=e.data.count:console.error("Error fetching team count:",e.data.error||"Unknown error")})).catch((e=>{console.error("Error fetching approved seekers count:",e)})),ne.A.get(`${de}/admin/count/approved_providers`).then((e=>{void 0!==e.data.count?this.approvedprovidersCount=e.data.count:console.error("Error fetching team count:",e.data.error||"Unknown error")})).catch((e=>{console.error("Error fetching approved providers count:",e)})),ne.A.get(`${de}/admin/count/agent`).then((e=>{void 0!==e.data.count?this.agentCount=e.data.count:console.error("Error fetching team count:",e.data.error||"Unknown error")})).catch((e=>{console.error("Error fetching approved seekers count:",e)})),ne.A.get(`${de}/admin/count/jobs`).then((e=>{void 0!==e.data.count?this.jobsCount=e.data.count:console.error("Error fetching team count:",e.data.error||"Unknown error")})).catch((e=>{console.error("Error fetching approved seekers count:",e)})),ne.A.get(`${de}/admin/count/unpublishedjob`).then((e=>{void 0!==e.data.count?this.unpublishedCount=e.data.count:console.error("Error fetching team count:",e.data.error||"Unknown error")})).catch((e=>{console.error("Error fetching unpublished job:",e)})),ne.A.get(`${de}/admin/count/active_jobs`).then((e=>{void 0!==e.data.count&&(this.activeJobsCount=e.data.count)})).catch((e=>{console.error("Error fetching active jobs count:",e)})),ne.A.get(`${de}/admin/count/todays_job_providers`).then((e=>{void 0!==e.data.count&&(this.pendingApplicationsCount=e.data.count)})).catch((e=>{console.error("Error fetching pending applications count:",e)})),ne.A.get(`${de}/admin/count/todays_job_seekers`).then((e=>{void 0!==e.data.count&&(this.todayRegistrationsCount=e.data.count)})).catch((e=>{console.error("Error fetching today's registrations count:",e)})),ne.A.get(`${de}/admin/count/job_posted_this_week`).then((e=>{void 0!==e.data.count&&(this.weeklyJobsCount=e.data.count)})).catch((e=>{console.error("Error fetching weekly jobs count:",e)})),this.userEmail=localStorage.getItem("userEmail")||"No email found"}};const Db=(0,n.A)(jb,[["render",Zp],["__scopeId","data-v-be3c4cc6"]]);var Ub=Db;const $b={class:"page-wrapper",id:"main-wrapper","data-layout":"vertical","data-navbarbg":"skin6","data-sidebartype":"full","data-sidebar-description":"fixed","data-header-description":"fixed"},Xb={class:"body-wrapper"},Vb={class:"form-group row"},Bb=["for"],Jb=["type","onUpdate:modelValue","id"],Nb={class:"col-md-6"},Qb={class:"col-md-6"},zb=["value"],Rb={class:"col-md-6"},Wb=["disabled"],Ob=["value"],Hb={class:"col-md-6"},Zb=["disabled"],Kb=["value"],qb={class:"col-md-6"},Gb=["disabled"],Yb=["value"],ef={class:"col-md-6"},tf=["disabled"],af=["value"],sf={class:"col-md-6"},of={class:"col-md-6"},rf={class:"col-md-6"},lf=["value"],nf={class:"col-md-6"},df=["value"],cf={class:"col-md-6"},mf={key:0,class:"mt-2"},uf=["href"],gf={class:"col-md-6 mt-2"},hf={key:0,class:"mt-2"},pf=["href"],bf={class:"col-md-6 mt-2"},ff={key:0,class:"mt-2"},kf=["href"],vf={class:"col-md-12 mt-2"};function yf(e,t,a,r,i,l){const n=(0,o.g2)("IndexComponent");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(n),(0,o.Lk)("div",$b,[t[49]||(t[49]=(0,o.Lk)("div",{class:"card-body"},null,-1)),(0,o.Lk)("div",Xb,[t[48]||(t[48]=(0,o.Lk)("h5",{class:"card-title fw-semibold mb-4",style:{color:"#E960A6"}},[(0,o.Lk)("i",{class:"ti ti-user-plus"}),(0,o.eW)(" Update Job seeker's profile ")],-1)),(0,o.Lk)("form",{onSubmit:t[19]||(t[19]=(0,s.D$)(((...e)=>l.handleSubmit&&l.handleSubmit(...e)),["prevent"])),class:"mx-4"},[(0,o.Lk)("div",Vb,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.personalFields,((e,t)=>((0,o.uX)(),(0,o.CE)("div",{class:"col-md-6",key:t},[(0,o.Lk)("label",{for:e.model,class:"form-label"},(0,L.v_)(e.label),9,Bb),(0,o.bo)((0,o.Lk)("input",{type:e.type,"onUpdate:modelValue":t=>i.form[e.model]=t,class:"form-control",id:e.model,required:""},null,8,Jb),[[s.hp,i.form[e.model]]])])))),128)),(0,o.Lk)("div",Nb,[t[21]||(t[21]=(0,o.Lk)("label",{class:"form-label"},"Gender",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>i.form.gender=e),class:"form-control",style:{height:"48px","padding-top":"8px","padding-bottom":"8px"},required:""},t[20]||(t[20]=[(0,o.Lk)("option",null,"Male",-1),(0,o.Lk)("option",null,"Female",-1),(0,o.Lk)("option",null,"Other",-1)]),512),[[s.u1,i.form.gender]])]),(0,o.Lk)("div",Qb,[t[23]||(t[23]=(0,o.Lk)("label",{class:"form-label"},"Province",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>i.form.province=e),onChange:t[2]||(t[2]=(...e)=>l.loadDistricts&&l.loadDistricts(...e)),class:"form-control",style:{height:"48px","padding-top":"8px","padding-bottom":"8px"},required:""},[t[22]||(t[22]=(0,o.Lk)("option",{disabled:"",value:""},"Select Province",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.provinces,(e=>((0,o.uX)(),(0,o.CE)("option",{key:e,value:e},(0,L.v_)(e),9,zb)))),128))],544),[[s.u1,i.form.province]])]),(0,o.Lk)("div",Rb,[t[25]||(t[25]=(0,o.Lk)("label",{class:"form-label"},"District",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>i.form.district=e),onChange:t[4]||(t[4]=(...e)=>l.loadSectors&&l.loadSectors(...e)),disabled:!i.form.province,class:"form-control",style:{height:"48px","padding-top":"8px","padding-bottom":"8px"},required:""},[t[24]||(t[24]=(0,o.Lk)("option",{disabled:"",value:""},"Select District",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.districts,(e=>((0,o.uX)(),(0,o.CE)("option",{key:e,value:e},(0,L.v_)(e),9,Ob)))),128))],40,Wb),[[s.u1,i.form.district]])]),(0,o.Lk)("div",Hb,[t[27]||(t[27]=(0,o.Lk)("label",{class:"form-label"},"Sector",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>i.form.sector=e),onChange:t[6]||(t[6]=(...e)=>l.loadCells&&l.loadCells(...e)),disabled:!i.form.district,class:"form-control",style:{height:"48px","padding-top":"8px","padding-bottom":"8px"},required:""},[t[26]||(t[26]=(0,o.Lk)("option",{disabled:"",value:""},"Select Sector",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.sectors,(e=>((0,o.uX)(),(0,o.CE)("option",{key:e,value:e},(0,L.v_)(e),9,Kb)))),128))],40,Zb),[[s.u1,i.form.sector]])]),(0,o.Lk)("div",qb,[t[29]||(t[29]=(0,o.Lk)("label",{class:"form-label"},"Cell",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[7]||(t[7]=e=>i.form.cell=e),onChange:t[8]||(t[8]=(...e)=>l.loadVillages&&l.loadVillages(...e)),disabled:!i.form.sector,class:"form-control",style:{height:"48px","padding-top":"8px","padding-bottom":"8px"},required:""},[t[28]||(t[28]=(0,o.Lk)("option",{disabled:"",value:""},"Select Cell",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.cells,(e=>((0,o.uX)(),(0,o.CE)("option",{key:e,value:e},(0,L.v_)(e),9,Yb)))),128))],40,Gb),[[s.u1,i.form.cell]])]),(0,o.Lk)("div",ef,[t[31]||(t[31]=(0,o.Lk)("label",{class:"form-label"},"Village",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[9]||(t[9]=e=>i.form.village=e),disabled:!i.form.cell,class:"form-control",style:{height:"48px","padding-top":"8px","padding-bottom":"8px"},required:""},[t[30]||(t[30]=(0,o.Lk)("option",{disabled:"",value:""},"Select Village",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.villages,(e=>((0,o.uX)(),(0,o.CE)("option",{key:e,value:e},(0,L.v_)(e),9,af)))),128))],8,tf),[[s.u1,i.form.village]])]),(0,o.Lk)("div",sf,[t[33]||(t[33]=(0,o.Lk)("label",{class:"form-label"},"Disability",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[10]||(t[10]=e=>i.form.disability=e),class:"form-control",style:{height:"48px","padding-top":"8px","padding-bottom":"8px"},required:""},t[32]||(t[32]=[(0,o.Fv)("<option data-v-0912fe06>None</option><option data-v-0912fe06>Visual Impairment</option><option data-v-0912fe06>Hearing Impairment</option><option data-v-0912fe06>Physical Disability</option><option data-v-0912fe06>Intellectual Disability</option><option data-v-0912fe06>Mental Health Condition</option><option data-v-0912fe06>Learning Disability</option><option data-v-0912fe06>Speech and Language Disorder</option><option data-v-0912fe06>Autism Spectrum Disorder</option><option data-v-0912fe06>Chronic Illness (e.g. epilepsy, diabetes)</option><option data-v-0912fe06>Neurological Disorder (e.g. cerebral palsy)</option><option data-v-0912fe06>Albinism</option><option data-v-0912fe06>Multiple Disabilities</option><option data-v-0912fe06>Other</option>",14)]),512),[[s.u1,i.form.disability]])]),(0,o.Lk)("div",of,[t[35]||(t[35]=(0,o.Lk)("label",{class:"form-label"},"Expected Salary",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[11]||(t[11]=e=>i.form.salary=e),class:"form-control",style:{height:"48px","padding-top":"8px","padding-bottom":"8px"},required:""},t[34]||(t[34]=[(0,o.Lk)("option",{disabled:"",value:""},"Select Salary",-1),(0,o.Lk)("option",null,"35,000 Frw - 50,000 Frw",-1),(0,o.Lk)("option",null,"51,000 Frw - 80,000 Frw",-1),(0,o.Lk)("option",null,"81,000 Frw - 100,000 Frw",-1),(0,o.Lk)("option",null,"101,000 Frw - 150,000 Frw",-1),(0,o.Lk)("option",null,"150,001+ Frw",-1)]),512),[[s.u1,i.form.salary]])]),(0,o.Lk)("div",rf,[t[37]||(t[37]=(0,o.Lk)("label",{class:"form-label"},"Category Type",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[12]||(t[12]=e=>i.selectedCategoryType=e),onChange:t[13]||(t[13]=(...e)=>l.onCategoryTypeChange&&l.onCategoryTypeChange(...e)),class:"form-control",style:{height:"48px","padding-top":"8px","padding-bottom":"8px"},required:""},[t[36]||(t[36]=(0,o.Lk)("option",{disabled:"",value:""},"Select Category Type",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.categoryTypes,(e=>((0,o.uX)(),(0,o.CE)("option",{key:e.id,value:e.id},(0,L.v_)(e.name),9,lf)))),128))],544),[[s.u1,i.selectedCategoryType]])]),(0,o.Lk)("div",nf,[t[39]||(t[39]=(0,o.Lk)("label",{class:"form-label"},"Category",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[14]||(t[14]=e=>i.form.categories_id=e),class:"form-control",style:{height:"48px","padding-top":"8px","padding-bottom":"8px"},required:""},[t[38]||(t[38]=(0,o.Lk)("option",{disabled:"",value:""},"Select Category",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.categories,(e=>((0,o.uX)(),(0,o.CE)("option",{key:e.id,value:e.id},(0,L.v_)(e.name),9,df)))),128))],512),[[s.u1,i.form.categories_id]])]),(0,o.Lk)("div",cf,[t[40]||(t[40]=(0,o.Lk)("label",{class:"form-label"},"Upload ID Card",-1)),(0,o.Lk)("input",{type:"file",onChange:t[15]||(t[15]=e=>l.handleFileChange("id",e)),class:"form-control"},null,32),t[41]||(t[41]=(0,o.Lk)("small",{class:"form-text text-muted"},"Maximum file size: 1MB",-1)),i.form.id_url?((0,o.uX)(),(0,o.CE)("div",mf,[(0,o.Lk)("a",{href:i.form.id_url,target:"_blank",class:"btn btn-primary btn-sm"},"View Current ID",8,uf)])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",gf,[t[42]||(t[42]=(0,o.Lk)("label",{class:"form-label"},"Upload Profile Image",-1)),(0,o.Lk)("input",{type:"file",onChange:t[16]||(t[16]=e=>l.handleFileChange("image",e)),class:"form-control"},null,32),t[43]||(t[43]=(0,o.Lk)("small",{class:"form-text text-muted"},"Maximum file size: 1MB",-1)),i.form.image_url?((0,o.uX)(),(0,o.CE)("div",hf,[(0,o.Lk)("a",{href:i.form.image_url,target:"_blank",class:"btn btn-primary btn-sm"},"View Current Profile",8,pf)])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",bf,[t[44]||(t[44]=(0,o.Lk)("label",{class:"form-label"},"Upload CV(Optional)",-1)),(0,o.Lk)("input",{type:"file",onChange:t[17]||(t[17]=e=>l.handleFileChange("cv",e)),class:"form-control"},null,32),t[45]||(t[45]=(0,o.Lk)("small",{class:"form-text text-muted"},"Maximum file size: 1MB",-1)),i.form.cv_url?((0,o.uX)(),(0,o.CE)("div",ff,[(0,o.Lk)("a",{href:i.form.cv_url,target:"_blank",class:"btn btn-primary btn-sm"},"View Current CV",8,kf)])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",vf,[t[46]||(t[46]=(0,o.Lk)("label",{class:"form-label"},"Skills and capabilities",-1)),(0,o.bo)((0,o.Lk)("textarea",{"onUpdate:modelValue":t[18]||(t[18]=e=>i.form.bio=e),class:"form-control",required:"",style:{height:"100px"}},null,512),[[s.Jo,i.form.bio]])])]),i.message?((0,o.uX)(),(0,o.CE)("div",{key:0,class:(0,L.C4)(["alert",i.messageType])},(0,L.v_)(i.message),3)):(0,o.Q3)("",!0),t[47]||(t[47]=(0,o.Lk)("button",{type:"submit",class:"btn btn-primary mb-3"},"Update Profile",-1))],32)])])],64)}var Lf={name:"ProfileComponent",components:{IndexComponent:Tb},data(){return{form:{first_name:"",last_name:"",fathers_name:"",mothers_name:"",telephone:"",email:"",province:"",district:"",sector:"",cell:"",village:"",bio:"",date_of_birth:"",disability:"",created_at:"",cv:null,id:null,image:null,categories_id:"",id_url:null,userIdurl:null,users_id:null,cv_url:null,image_url:null,salary:"",gender:""},selectedCategoryType:"",userId:"",userEmail:"",message:null,messageType:null,categoryTypes:[],categories:[],provinces:[],districts:[],sectors:[],cells:[],villages:[],personalFields:[{label:"First Name",model:"first_name",type:"text"},{label:"Last Name",model:"last_name",type:"text"},{label:"Father's Name",model:"fathers_name",type:"text"},{label:"Mother's Name",model:"mothers_name",type:"text"},{label:"Telephone",model:"telephone",type:"text"},{label:"Email",model:"email",type:"text"},{label:"Date of Birth",model:"date_of_birth",type:"date"}]}},mounted(){this.loadProvinces(),this.getUserIdFromEmail(),this.loadCategoryTypes(),this.userIdurl=this.$route.params.id},methods:{loadProvinces(){try{this.provinces=(0,gr.getProvinces)()}catch(e){console.error("Error loading provinces:",e),this.message="Failed to load provinces.",this.messageType="alert-warning"}},loadDistricts(){try{this.form.province&&(this.districts=(0,gr.getDistrictsByProvince)(this.form.province),this.isInitialLoad||(this.sectors=[],this.cells=[],this.villages=[],this.form.district="",this.form.sector="",this.form.cell="",this.form.village=""))}catch(e){console.error("Error loading districts:",e),this.message="Failed to load districts.",this.messageType="alert-warning"}},loadSectors(){try{this.form.province&&this.form.district&&(this.sectors=(0,gr.getSectorsByDistrict)(this.form.province,this.form.district),this.isInitialLoad||(this.cells=[],this.villages=[],this.form.sector="",this.form.cell="",this.form.village=""))}catch(e){console.error("Error loading sectors:",e),this.message="Failed to load sectors.",this.messageType="alert-warning"}},loadCells(){try{this.form.province&&this.form.district&&this.form.sector&&(this.cells=(0,gr.getCellsBySector)(this.form.province,this.form.district,this.form.sector),this.isInitialLoad||(this.villages=[],this.form.cell="",this.form.village=""))}catch(e){console.error("Error loading cells:",e),this.message="Failed to load cells.",this.messageType="alert-warning"}},loadVillages(){try{this.form.province&&this.form.district&&this.form.sector&&this.form.cell&&(this.villages=(0,gr.getVillagesByCell)(this.form.province,this.form.district,this.form.sector,this.form.cell),this.isInitialLoad||(this.form.village=""))}catch(e){console.error("Error loading villages:",e),this.message="Failed to load villages.",this.messageType="alert-warning"}},async loadLocationHierarchy(){this.isInitialLoad=!0,this.form.province&&(this.districts=(0,gr.getDistrictsByProvince)(this.form.province),this.form.district&&(this.sectors=(0,gr.getSectorsByDistrict)(this.form.province,this.form.district),this.form.sector&&(this.cells=(0,gr.getCellsBySector)(this.form.province,this.form.district,this.form.sector),this.form.cell&&(this.villages=(0,gr.getVillagesByCell)(this.form.province,this.form.district,this.form.sector,this.form.cell))))),this.isInitialLoad=!1},async getUserIdFromEmail(){const e=localStorage.getItem("adminToken");if(e)try{const t=JSON.parse(atob(e.split(".")[1]));this.userEmail=t.email;const a=await fetch(`${de}/get_user_id_by_email/${this.userEmail}`,{headers:{Authorization:`Bearer ${e}`}}),s=await a.json();a.ok?(this.userId=s.users_id,this.fetchProfile()):(this.message=s.message||"Unable to get user ID.",this.messageType="alert-danger")}catch(t){console.error("Error getting users_id:",t),this.message="Failed to fetch user ID.",this.messageType="alert-danger"}},async fetchProfile(){try{const e=await fetch(`${de}/seeker/view_profile/${this.userIdurl}`,{headers:{Authorization:`Bearer ${localStorage.getItem("adminToken")}`}}),t=await e.json();e.ok?(this.form.date_of_birth=t.date_of_birth?t.date_of_birth.split("T")[0]:"",this.form.salary=t.salary||"",this.form.gender=t.gender||"",this.form.disability=t.disability||"",Object.keys(this.form).forEach((e=>{["date_of_birth","salary","gender","disability"].includes(e)||(this.form[e]=t[e]||this.form[e])})),this.form.id_url=t.id?`${de}/uploads/profile/${t.id}`:null,this.form.cv_url=t.cv?`${de}/uploads/profile/${t.cv}`:null,this.form.image_url=t.image?`${de}/uploads/profile/${t.image}`:null,await this.loadLocationHierarchy(),await this.loadCurrentCategoryInfo()):(this.message=t.message||"Failed to fetch profile",this.messageType="alert-danger")}catch(e){console.error("Error fetching profile:",e),this.message="Error loading profile.",this.messageType="alert-danger"}},async loadCurrentCategoryInfo(){try{const e=await fetch(`${de}/categoryandtype/${this.userIdurl}`),t=await e.json();e.ok?(this.selectedCategoryType=t.category_types_id,await this.loadCategories(),this.form.categories_id=t.category_id):console.error("Failed to load current category info:",t.message)}catch(e){console.error("Error loading current category info:",e)}},async loadCategoryTypes(){try{const e=await fetch(`${de}/category-types`),t=await e.json();this.categoryTypes=t}catch(e){console.error("Failed to load category types:",e)}},async loadCategories(){if(this.selectedCategoryType)try{const e=await fetch(`${de}/categories/${this.selectedCategoryType}`),t=await e.json();this.categories=t}catch(e){console.error("Failed to load categories:",e)}},async onCategoryTypeChange(){await this.loadCategories(),this.form.categories_id=""},handleFileChange(e,t){this.form[e]=t.target.files[0]},async handleSubmit(){const e=new FormData;for(const a of["first_name","last_name","gender","fathers_name","mothers_name","telephone","province","district","sector","cell","village","bio","salary","date_of_birth","disability","categories_id"])e.append(a,this.form[a]);this.form.image&&e.append("image",this.form.image),this.form.id&&e.append("id",this.form.id),this.form.cv&&e.append("cv",this.form.cv),e.append("is_editable",0);try{const t=await fetch(`${de}/seeker/update_profile/${this.userIdurl}`,{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("adminToken")}`},body:e}),a=await t.json();t.ok?(this.message="Profile updated successfully.",this.messageType="alert-success",await this.fetchProfile()):(this.message=a.message||"Failed to update profile.",this.messageType="alert-danger")}catch(t){console.error("Error updating profile:",t),this.message="An error occurred during update.",this.messageType="alert-danger"}}}};const Cf=(0,n.A)(Lf,[["render",yf],["__scopeId","data-v-0912fe06"]]);var wf=Cf;const _f={class:"page-wrapper",id:"main-wrapper","data-layout":"vertical","data-navbarbg":"skin6","data-sidebartype":"full","data-sidebar-description":"fixed","data-header-description":"fixed"},Af={class:"body-wrapper"},Ef={class:"mx-4"},If={class:"form-group row"},xf={class:"form-label"},Pf={class:"form-control-plaintext"},Sf={class:"col-md-6"},Ff=["href"],Mf={class:"col-md-6"},Tf=["href"],jf=["src"],Df={class:"col-md-6"},Uf=["href"],$f=["src"],Xf={class:"col-md-6"},Vf=["disabled"],Bf=["disabled"];function Jf(e,t,a,s,r,i){const l=(0,o.g2)("IndexComponent");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(l),(0,o.Lk)("div",_f,[(0,o.Lk)("div",Af,[t[9]||(t[9]=(0,o.Lk)("h5",{class:"card-title fw-semibold mb-4",style:{color:"#E960A6"}},[(0,o.Lk)("i",{class:"ti ti-user-plus"}),(0,o.eW)(" My profile ")],-1)),(0,o.Lk)("div",Ef,[r.message?((0,o.uX)(),(0,o.CE)("div",{key:0,class:(0,L.C4)(["alert",r.messageType])},(0,L.v_)(r.message),3)):(0,o.Q3)("",!0),(0,o.Lk)("div",If,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(r.personalFields,((e,t)=>((0,o.uX)(),(0,o.CE)("div",{class:(0,L.C4)("bio"===e.model?"col-md-12":"col-md-6"),key:t},[(0,o.Lk)("label",xf,(0,L.v_)(e.label),1),(0,o.Lk)("p",Pf,(0,L.v_)("category"===e.model?r.categoryName:"date_of_birth"===e.model?i.formatDate(r.form[e.model]):"created_at"===e.model?i.formatDateTime(r.form[e.model]):r.form[e.model]),1)],2)))),128)),(0,o.Lk)("div",Sf,[t[2]||(t[2]=(0,o.Lk)("strong",null,"Cv",-1)),t[3]||(t[3]=(0,o.Lk)("br",null,null,-1)),r.form.cv?((0,o.uX)(),(0,o.CE)("a",{key:0,href:r.uploadsUrl+r.form.cv,target:"_blank",rel:"noopener noreferrer",class:"btn btn-primary btn-sm mt-2"}," View Current Cv ",8,Ff)):(0,o.Q3)("",!0),t[4]||(t[4]=(0,o.Lk)("hr",null,null,-1))]),(0,o.Lk)("div",Mf,[t[5]||(t[5]=(0,o.Lk)("strong",null,"Profile Image",-1)),t[6]||(t[6]=(0,o.Lk)("br",null,null,-1)),(0,o.Lk)("a",{href:r.uploadsUrl+r.form.image,target:"_blank"},[(0,o.Lk)("img",{src:r.uploadsUrl+r.form.image,alt:"Profile",class:"img-thumbnail",width:"100"},null,8,jf)],8,Tf)]),(0,o.Lk)("div",Df,[t[7]||(t[7]=(0,o.Lk)("strong",null,"ID card",-1)),t[8]||(t[8]=(0,o.Lk)("br",null,null,-1)),(0,o.Lk)("a",{href:r.uploadsUrl+r.form.id,target:"_blank"},[(0,o.Lk)("img",{src:r.uploadsUrl+r.form.id,alt:"ID",class:"img-thumbnail",width:"100"},null,8,$f)],8,Uf)]),(0,o.Lk)("div",Xf,[(0,o.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>i.toggleAccess&&i.toggleAccess(...e)),class:(0,L.C4)(["btn mt-3",0===r.form.is_editable?"btn-primary":"btn-warning"]),disabled:!i.isAdmin||r.isLoading},(0,L.v_)(0===r.form.is_editable?"Give Access":"Remove Access"),11,Vf),(0,o.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>i.toggleApproval&&i.toggleApproval(...e)),class:(0,L.C4)(["btn mt-3 ms-2",0===r.form.verification_badge?"btn-success":"btn-danger"]),disabled:!i.isAdmin||r.isLoading},(0,L.v_)(0===r.form.verification_badge?"Approve User":"Unapprove User"),11,Bf)])])])])]),t[10]||(t[10]=(0,o.Lk)("br",null,null,-1)),t[11]||(t[11]=(0,o.Lk)("br",null,null,-1)),t[12]||(t[12]=(0,o.Lk)("br",null,null,-1)),t[13]||(t[13]=(0,o.Lk)("br",null,null,-1))],64)}var Nf={name:"ProfileComponent",components:{IndexComponent:Tb},data(){return{form:{first_name:"",last_name:"",email:"",gender:"",fathers_name:"",mothers_name:"",telephone:"",province:"",district:"",sector:"",cell:"",village:"",bio:"",created_at:"",salary:"",category:"",date_of_birth:"",disability:"",cv:null,id:null,image:null,categories_id:"",job_seeker_id:"",userIdurl:null,is_editable:0,verification_badge:0},uploadsUrl:`${de}/uploads/profile/`,selectedCategoryType:"",userId:"",userEmail:"",message:null,messageType:null,categoryTypes:[],categories:[],categoryName:"Unknown",isLoading:!1,personalFields:[{label:"First Name",model:"first_name"},{label:"Last Name",model:"last_name"},{label:"Email",model:"email"},{label:"Father's Name",model:"fathers_name"},{label:"Mother's Name",model:"mothers_name"},{label:"Date of Birth",model:"date_of_birth"},{label:"Gender",model:"gender"},{label:"Province",model:"province"},{label:"District",model:"district"},{label:"Sector",model:"sector"},{label:"Cell",model:"cell"},{label:"Village",model:"village"},{label:"Telephone",model:"telephone"},{label:"Disability",model:"disability"},{label:"Salary",model:"salary"},{label:"Category",model:"category"},{label:"Skills and capabilities",model:"bio"},{label:"Registered on",model:"created_at"}]}},computed:{isAdmin(){return"admin@kozi.rw"===this.userEmail?.toLowerCase()}},mounted(){this.userIdurl=this.$route.params.id,this.getUserIdFromEmail(),this.loadCategoryTypes()},methods:{formatDate(e){if(!e)return"";const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),o=String(t.getDate()).padStart(2,"0");return`${a}-${s}-${o}`},formatDateTime(e){if(!e)return"";const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),o=String(t.getDate()).padStart(2,"0"),r=String(t.getHours()).padStart(2,"0"),i=String(t.getMinutes()).padStart(2,"0"),l=String(t.getSeconds()).padStart(2,"0");return`${a}-${s}-${o} ${r}:${i}:${l}`},async getUserIdFromEmail(){const e=localStorage.getItem("adminToken");if(e)try{const t=JSON.parse(atob(e.split(".")[1]));this.userEmail=t.email;const a=await fetch(`${de}/get_user_id_by_email/${this.userEmail}`,{headers:{Authorization:`Bearer ${e}`}}),s=await a.json();a.ok?(this.userId=s.users_id,this.fetchProfile(),this.fetchCategoryNameByUserId()):(this.message=s.message||"Unable to get user ID.",this.messageType="alert-danger")}catch(t){console.error("Error getting users_id:",t),this.message="Failed to fetch user ID.",this.messageType="alert-danger"}},async fetchProfile(){try{const e=await fetch(`${de}/seeker/view_profile/${this.userIdurl}`,{headers:{Authorization:`Bearer ${localStorage.getItem("adminToken")}`}}),t=await e.json();e.ok?(this.form={...this.form,...t},t.categories_id&&await this.determineCategoryType(t.categories_id)):(this.message=t.message||"Failed to fetch profile",this.messageType="alert-danger")}catch(e){console.error("Error fetching profile:",e),this.message="Error loading profile.",this.messageType="alert-danger"}},async fetchCategoryNameByUserId(){try{const e=await fetch(`${de}/category/${this.userIdurl}`),t=await e.json();e.ok&&t.name?this.categoryName=t.name:this.categoryName="Unknown"}catch(e){console.error("Failed to fetch category name:",e),this.categoryName="Error fetching category"}},async determineCategoryType(e){try{const t=await fetch(`${de}/category-details/${e}`),a=await t.json();t.ok&&(this.selectedCategoryType=a.type_id,await this.loadCategories(),this.form.categories_id=e)}catch(t){console.error("Error determining category type:",t)}},async loadCategoryTypes(){try{const e=await fetch(`${de}/category-types`),t=await e.json();this.categoryTypes=t}catch(e){console.error("Failed to load category types:",e)}},async loadCategories(){try{const e=await fetch(`${de}/categories/${this.selectedCategoryType}`),t=await e.json();this.categories=t}catch(e){console.error("Failed to load categories:",e)}},async toggleAccess(){0===this.form.is_editable?await this.giveAccess():await this.unGiveAccess()},async toggleApproval(){0===this.form.verification_badge?await this.approveUser():await this.unApproveUser()},async approveUser(){if(!this.form.job_seeker_id)return this.message="Job seeker ID is missing!",void(this.messageType="alert-danger");this.isLoading=!0;try{const e=await fetch(`${de}/admin/approve_job_seeker/${this.form.job_seeker_id}`,{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("adminToken")}`,"Content-Type":"application/json"}}),t=await e.json();e.ok?(this.form.verification_badge=1,this.message="User approved successfully.",this.messageType="alert-success"):(this.message=t.message||"Failed to approve user.",this.messageType="alert-danger")}catch(e){console.error("Error approving user:",e),this.message="An error occurred while approving user.",this.messageType="alert-danger"}finally{this.isLoading=!1}},async unApproveUser(){if(!this.form.job_seeker_id)return this.message="Job seeker ID is missing!",void(this.messageType="alert-danger");this.isLoading=!0;try{const e=await fetch(`${de}/admin/unapprove_job_seeker/${this.form.job_seeker_id}`,{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("adminToken")}`,"Content-Type":"application/json"}}),t=await e.json();e.ok?(this.form.verification_badge=0,this.message="User unapproved successfully.",this.messageType="alert-success"):(this.message=t.message||"Failed to unapprove user.",this.messageType="alert-danger")}catch(e){console.error("Error unapproving user:",e),this.message="An error occurred while unapproving user.",this.messageType="alert-danger"}finally{this.isLoading=!1}},async giveAccess(){if(!this.form.job_seeker_id)return this.message="Job seeker ID is missing!",void(this.messageType="alert-danger");this.isLoading=!0;try{const e=await fetch(`${de}/admin/giveaccess/${this.form.job_seeker_id}`,{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("adminToken")}`,"Content-Type":"application/json"}}),t=await e.json();e.ok?(this.form.is_editable=1,this.message="Access granted successfully.",this.messageType="alert-success"):(this.message=t.message||"Failed to grant access.",this.messageType="alert-danger")}catch(e){console.error("Error granting access:",e),this.message="An error occurred while granting access.",this.messageType="alert-danger"}finally{this.isLoading=!1}},async unGiveAccess(){if(!this.form.job_seeker_id)return this.message="Job seeker ID is missing!",void(this.messageType="alert-danger");this.isLoading=!0;try{const e=await fetch(`${de}/admin/ungiveaccess/${this.form.job_seeker_id}`,{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("adminToken")}`,"Content-Type":"application/json"}}),t=await e.json();e.ok?(this.form.is_editable=0,this.message=t.message,this.messageType="alert-success"):(this.message=t.message||"Failed to remove access.",this.messageType="alert-danger")}catch(e){console.error("Error removing access:",e),this.message="An error occurred while removing access.",this.messageType="alert-danger"}finally{this.isLoading=!1}}}};const Qf=(0,n.A)(Nf,[["render",Jf],["__scopeId","data-v-0146a65d"]]);var zf=Qf;const Rf={class:"page-wrapper",id:"main-wrapper","data-layout":"vertical","data-navbarbg":"skin6","data-sidebartype":"full"},Wf={class:"body-wrapper"},Of={class:"form-group row"},Hf=["for"],Zf=["type","onUpdate:modelValue","id"],Kf={class:"col-md-6"},qf=["max"],Gf={class:"col-md-6"},Yf={class:"col-md-6"},ek=["value"],tk={class:"col-md-6"},ak=["disabled"],sk=["value"],ok={class:"col-md-6"},rk=["disabled"],ik=["value"],lk={class:"col-md-6"},nk=["disabled"],dk=["value"],ck={class:"col-md-6"},mk=["disabled"],uk=["value"],gk={class:"col-md-6"},hk={class:"col-md-6"},pk={class:"col-md-6"},bk=["value"],fk={class:"col-md-6"},kk=["value"],vk={class:"col-md-6"},yk={key:0,class:"mt-2"},Lk=["href"],Ck={class:"col-md-6"},wk={key:0,class:"mt-2"},_k=["src"],Ak={class:"col-md-6"},Ek={key:0,class:"mt-2"},Ik=["href"],xk={class:"col-md-12"},Pk={class:"d-flex gap-2 mt-3"},Sk=["disabled"];function Fk(e,t,a,r,i,l){const n=(0,o.g2)("IndexComponent");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(n),(0,o.Lk)("div",Rf,[(0,o.Lk)("div",Wf,[t[46]||(t[46]=(0,o.Lk)("h5",{class:"card-title fw-semibold mb-4",style:{color:"#E960A6"}},[(0,o.Lk)("i",{class:"ti ti-user-plus"}),(0,o.eW)(" Register New seekers")],-1)),(0,o.Lk)("form",{onSubmit:t[20]||(t[20]=(0,s.D$)(((...e)=>l.handleSubmit&&l.handleSubmit(...e)),["prevent"])),class:"mx-4"},[(0,o.Lk)("div",Of,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.personalFields,((e,t)=>((0,o.uX)(),(0,o.CE)("div",{class:"col-md-6",key:t},[(0,o.Lk)("label",{for:e.model,class:"form-label"},(0,L.v_)(e.label),9,Hf),(0,o.bo)((0,o.Lk)("input",{type:e.type,"onUpdate:modelValue":t=>i.form[e.model]=t,class:"form-control",id:e.model,required:""},null,8,Zf),[[s.hp,i.form[e.model]]])])))),128)),(0,o.Lk)("div",Kf,[t[21]||(t[21]=(0,o.Lk)("label",{class:"form-label"},"Date of Birth",-1)),(0,o.bo)((0,o.Lk)("input",{type:"date","onUpdate:modelValue":t[0]||(t[0]=e=>i.form.date_of_birth=e),class:"form-control",max:l.maxDateOfBirth,required:""},null,8,qf),[[s.Jo,i.form.date_of_birth]])]),(0,o.Lk)("div",Gf,[t[23]||(t[23]=(0,o.Lk)("label",{class:"form-label"},"Gender",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>i.form.gender=e),class:"form-control",style:{height:"48px","padding-top":"8px","padding-bottom":"8px"},required:""},t[22]||(t[22]=[(0,o.Lk)("option",{disabled:"",value:""},"Select Gender",-1),(0,o.Lk)("option",{value:"Male"},"Male",-1),(0,o.Lk)("option",{value:"Female"},"Female",-1),(0,o.Lk)("option",{value:"Other"},"Other",-1)]),512),[[s.u1,i.form.gender]])]),(0,o.Lk)("div",Yf,[t[25]||(t[25]=(0,o.Lk)("label",{class:"form-label"},"Province",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>i.form.province=e),onChange:t[3]||(t[3]=(...e)=>l.loadDistricts&&l.loadDistricts(...e)),class:"form-control",style:{height:"48px","padding-top":"8px","padding-bottom":"8px"},required:""},[t[24]||(t[24]=(0,o.Lk)("option",{disabled:"",value:""},"Select Province",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.provinces,(e=>((0,o.uX)(),(0,o.CE)("option",{key:e,value:e},(0,L.v_)(e),9,ek)))),128))],544),[[s.u1,i.form.province]])]),(0,o.Lk)("div",tk,[t[27]||(t[27]=(0,o.Lk)("label",{class:"form-label"},"District",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>i.form.district=e),onChange:t[5]||(t[5]=(...e)=>l.loadSectors&&l.loadSectors(...e)),disabled:!i.form.province,class:"form-control",style:{height:"48px","padding-top":"8px","padding-bottom":"8px"},required:""},[t[26]||(t[26]=(0,o.Lk)("option",{disabled:"",value:""},"Select District",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.districts,(e=>((0,o.uX)(),(0,o.CE)("option",{key:e,value:e},(0,L.v_)(e),9,sk)))),128))],40,ak),[[s.u1,i.form.district]])]),(0,o.Lk)("div",ok,[t[29]||(t[29]=(0,o.Lk)("label",{class:"form-label"},"Sector",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[6]||(t[6]=e=>i.form.sector=e),onChange:t[7]||(t[7]=(...e)=>l.loadCells&&l.loadCells(...e)),disabled:!i.form.district,class:"form-control",style:{height:"48px","padding-top":"8px","padding-bottom":"8px"},required:""},[t[28]||(t[28]=(0,o.Lk)("option",{disabled:"",value:""},"Select Sector",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.sectors,(e=>((0,o.uX)(),(0,o.CE)("option",{key:e,value:e},(0,L.v_)(e),9,ik)))),128))],40,rk),[[s.u1,i.form.sector]])]),(0,o.Lk)("div",lk,[t[31]||(t[31]=(0,o.Lk)("label",{class:"form-label"},"Cell",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[8]||(t[8]=e=>i.form.cell=e),onChange:t[9]||(t[9]=(...e)=>l.loadVillages&&l.loadVillages(...e)),disabled:!i.form.sector,class:"form-control",style:{height:"48px","padding-top":"8px","padding-bottom":"8px"},required:""},[t[30]||(t[30]=(0,o.Lk)("option",{disabled:"",value:""},"Select Cell",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.cells,(e=>((0,o.uX)(),(0,o.CE)("option",{key:e,value:e},(0,L.v_)(e),9,dk)))),128))],40,nk),[[s.u1,i.form.cell]])]),(0,o.Lk)("div",ck,[t[33]||(t[33]=(0,o.Lk)("label",{class:"form-label"},"Village",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[10]||(t[10]=e=>i.form.village=e),disabled:!i.form.cell,class:"form-control",style:{height:"48px","padding-top":"8px","padding-bottom":"8px"},required:""},[t[32]||(t[32]=(0,o.Lk)("option",{disabled:"",value:""},"Select Village",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.villages,(e=>((0,o.uX)(),(0,o.CE)("option",{key:e,value:e},(0,L.v_)(e),9,uk)))),128))],8,mk),[[s.u1,i.form.village]])]),(0,o.Lk)("div",gk,[t[35]||(t[35]=(0,o.Lk)("label",{class:"form-label"},"Disability",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[11]||(t[11]=e=>i.form.disability=e),class:"form-control",style:{height:"48px","padding-top":"8px","padding-bottom":"8px"},required:""},t[34]||(t[34]=[(0,o.Fv)('<option disabled value="" data-v-3c06c22c>Select Disability</option><option value="None" data-v-3c06c22c>None</option><option value="Visual Impairment" data-v-3c06c22c>Visual Impairment</option><option value="Hearing Impairment" data-v-3c06c22c>Hearing Impairment</option><option value="Physical Disability" data-v-3c06c22c>Physical Disability</option><option value="Intellectual Disability" data-v-3c06c22c>Intellectual Disability</option><option value="Mental Health Condition" data-v-3c06c22c>Mental Health Condition</option><option value="Learning Disability" data-v-3c06c22c>Learning Disability</option><option value="Speech and Language Disorder" data-v-3c06c22c>Speech and Language Disorder</option><option value="Other" data-v-3c06c22c>Other</option>',10)]),512),[[s.u1,i.form.disability]])]),(0,o.Lk)("div",hk,[t[37]||(t[37]=(0,o.Lk)("label",{class:"form-label"},"Expected Salary",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[12]||(t[12]=e=>i.form.salary=e),class:"form-control",style:{height:"48px","padding-top":"8px","padding-bottom":"8px"},required:""},t[36]||(t[36]=[(0,o.Lk)("option",{disabled:"",value:""},"Select Salary",-1),(0,o.Lk)("option",null,"35,000 Frw - 50,000 Frw",-1),(0,o.Lk)("option",null,"51,000 Frw - 80,000 Frw",-1),(0,o.Lk)("option",null,"81,000 Frw - 100,000 Frw",-1),(0,o.Lk)("option",null,"101,000 Frw - 150,000 Frw",-1),(0,o.Lk)("option",null,"150,001+ Frw",-1)]),512),[[s.u1,i.form.salary]])]),(0,o.Lk)("div",pk,[t[39]||(t[39]=(0,o.Lk)("label",{class:"form-label"},"Category Type",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[13]||(t[13]=e=>i.selectedCategoryType=e),onChange:t[14]||(t[14]=(...e)=>l.loadCategories&&l.loadCategories(...e)),class:"form-control",style:{height:"48px","padding-top":"8px","padding-bottom":"8px"},required:""},[t[38]||(t[38]=(0,o.Lk)("option",{disabled:"",value:""},"Select Category Type",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.categoryTypes,(e=>((0,o.uX)(),(0,o.CE)("option",{key:e.id,value:e.id},(0,L.v_)(e.name),9,bk)))),128))],544),[[s.u1,i.selectedCategoryType]])]),(0,o.Lk)("div",fk,[t[41]||(t[41]=(0,o.Lk)("label",{class:"form-label"},"Category",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[15]||(t[15]=e=>i.form.categories_id=e),class:"form-control",style:{height:"48px","padding-top":"8px","padding-bottom":"8px"},required:""},[t[40]||(t[40]=(0,o.Lk)("option",{disabled:"",value:""},"Select Category",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.categories,(e=>((0,o.uX)(),(0,o.CE)("option",{key:e.id,value:e.id},(0,L.v_)(e.name),9,kk)))),128))],512),[[s.u1,i.form.categories_id]])]),(0,o.Lk)("div",vk,[t[42]||(t[42]=(0,o.Lk)("label",{class:"form-label"},"Upload ID Card",-1)),(0,o.Lk)("input",{type:"file",onChange:t[16]||(t[16]=e=>l.handleFileChange("id",e)),class:"form-control",accept:".pdf,.jpg,.jpeg,.png"},null,32),i.form.id_url?((0,o.uX)(),(0,o.CE)("div",yk,[(0,o.Lk)("a",{href:i.form.id_url,target:"_blank",class:"btn btn-outline-primary btn-sm"},"View Current ID",8,Lk)])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",Ck,[t[43]||(t[43]=(0,o.Lk)("label",{class:"form-label"},"Upload Profile Image",-1)),(0,o.Lk)("input",{type:"file",onChange:t[17]||(t[17]=e=>l.handleFileChange("image",e)),class:"form-control",accept:"image/*"},null,32),i.form.image_url?((0,o.uX)(),(0,o.CE)("div",wk,[(0,o.Lk)("img",{src:i.form.image_url,alt:"Profile",class:"img-thumbnail",style:{"max-height":"150px"}},null,8,_k)])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",Ak,[t[44]||(t[44]=(0,o.Lk)("label",{class:"form-label"},"Upload CV(Optional)",-1)),(0,o.Lk)("input",{type:"file",onChange:t[18]||(t[18]=e=>l.handleFileChange("cv",e)),class:"form-control",accept:".pdf,.doc,.docx"},null,32),i.form.cv_url?((0,o.uX)(),(0,o.CE)("div",Ek,[(0,o.Lk)("a",{href:i.form.cv_url,target:"_blank",class:"btn btn-outline-secondary btn-sm"},"View Current CV",8,Ik)])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",xk,[t[45]||(t[45]=(0,o.Lk)("label",{class:"form-label"},"Skills and Capabilities",-1)),(0,o.bo)((0,o.Lk)("textarea",{"onUpdate:modelValue":t[19]||(t[19]=e=>i.form.bio=e),class:"form-control",style:{height:"100px"},required:""},null,512),[[s.Jo,i.form.bio]])])]),i.message?((0,o.uX)(),(0,o.CE)("div",{key:0,class:(0,L.C4)(["alert",i.messageType])},(0,L.v_)(i.message),3)):(0,o.Q3)("",!0),(0,o.Lk)("div",Pk,[(0,o.Lk)("button",{type:"submit",class:"btn btn-primary mb-3",disabled:i.isSubmitting},(0,L.v_)(i.isSubmitting?"Saving...":"Add User"),9,Sk)])],32)])])],64)}var Mk={components:{IndexComponent:Tb},data(){return{userEmail:"",userId:"",message:"",messageType:"",categoryTypes:[],categories:[],selectedCategoryType:"",isSubmitting:!1,provinces:[],districts:[],sectors:[],cells:[],villages:[],form:{email:"",first_name:"",last_name:"",gender:"",password:"",fathers_name:"",mothers_name:"",telephone:"",province:"",district:"",sector:"",cell:"",village:"",date_of_birth:"",bio:"",salary:"",disability:"",categories_id:"",role_id:"",picture:"",verifiedEmail:!0,token:"",verification_code:"",job_seeker_id:"js-"+Date.now(),created_at:(new Date).toISOString().slice(0,19).replace("T"," "),created_by:"admin",is_editable:!0,id:null,image:null,cv:null,id_url:"",image_url:"",cv_url:""},personalFields:[{label:"First Name",model:"first_name",type:"text"},{label:"Last Name",model:"last_name",type:"text"},{label:"Email",model:"email",type:"email"},{label:"Password",model:"password",type:"password"},{label:"Father's Name",model:"fathers_name",type:"text"},{label:"Mother's Name",model:"mothers_name",type:"text"},{label:"Telephone",model:"telephone",type:"text"}]}},computed:{maxDateOfBirth(){const e=new Date;return e.setFullYear(e.getFullYear()-18),e.toISOString().split("T")[0]}},mounted(){this.loadCategoryTypes(),this.loadRoleId(),this.loadProvinces(),this.userEmail=localStorage.getItem("userEmail")||"",this.userEmail&&this.getUserIdFromEmail()},methods:{loadProvinces(){try{this.provinces=(0,gr.getProvinces)()}catch(e){console.error("Error loading provinces:",e),this.message="Failed to load provinces.",this.messageType="alert-warning"}},loadDistricts(){try{this.form.province&&(this.districts=(0,gr.getDistrictsByProvince)(this.form.province),this.sectors=[],this.cells=[],this.villages=[],this.form.district="",this.form.sector="",this.form.cell="",this.form.village="")}catch(e){console.error("Error loading districts:",e),this.message="Failed to load districts.",this.messageType="alert-warning"}},loadSectors(){try{this.form.province&&this.form.district&&(this.sectors=(0,gr.getSectorsByDistrict)(this.form.province,this.form.district),this.cells=[],this.villages=[],this.form.sector="",this.form.cell="",this.form.village="")}catch(e){console.error("Error loading sectors:",e),this.message="Failed to load sectors.",this.messageType="alert-warning"}},loadCells(){try{this.form.province&&this.form.district&&this.form.sector&&(this.cells=(0,gr.getCellsBySector)(this.form.province,this.form.district,this.form.sector),this.villages=[],this.form.cell="",this.form.village="")}catch(e){console.error("Error loading cells:",e),this.message="Failed to load cells.",this.messageType="alert-warning"}},loadVillages(){try{this.form.province&&this.form.district&&this.form.sector&&this.form.cell&&(this.villages=(0,gr.getVillagesByCell)(this.form.province,this.form.district,this.form.sector,this.form.cell),this.form.village="")}catch(e){console.error("Error loading villages:",e),this.message="Failed to load villages.",this.messageType="alert-warning"}},async loadCategoryTypes(){try{console.log("Loading category types from:",`${de}/category-types`);const e=await ne.A.get(`${de}/category-types`);this.categoryTypes=e.data,console.log("Category types loaded:",this.categoryTypes)}catch(e){console.error("Error loading category types:",e),this.handleError(e,"Failed to load category types.")}},async loadCategories(){if(this.selectedCategoryType)try{console.log("Loading categories for type:",this.selectedCategoryType);const e=await ne.A.get(`${de}/categories/${this.selectedCategoryType}`);this.categories=e.data,console.log("Categories loaded:",this.categories)}catch(e){console.error("Failed to load categories:",e),this.message="Failed to load categories.",this.messageType="alert-warning"}},async loadRoleId(){try{const e=localStorage.getItem("adminToken");if(!e)return console.error("No token found in localStorage"),this.message="Authentication token not found. Please log in again.",void(this.messageType="alert-danger");console.log("Loading role ID...");const t=await ne.A.get(`${de}/admin/role/job_seekers`,{headers:{Authorization:`Bearer ${e}`}});console.log("API role_id response:",t.data),this.form.role_id=t.data.role_id||1,console.log("Role ID set to:",this.form.role_id)}catch(e){console.error("Failed to fetch role_id:",e),this.form.role_id=1,this.message="Could not load role ID, using default.",this.messageType="alert-warning"}},handleFileChange(e,t){const a=t.target.files[0];if(a){if(console.log(`File selected for ${e}:`,a.name,a.size,"bytes"),a.size>10485760)return this.message=`File ${a.name} is too large. Maximum size is 10MB.`,void(this.messageType="alert-danger");"id"===e?(this.form.id=a,this.form.id_url=URL.createObjectURL(a)):"image"===e?(this.form.image=a,this.form.image_url=URL.createObjectURL(a),this.form.picture=this.form.image_url):"cv"===e&&(this.form.cv=a,this.form.cv_url=URL.createObjectURL(a))}},async getUserIdFromEmail(){const e=localStorage.getItem("adminToken");if(e)try{const t=JSON.parse(atob(e.split(".")[1]));this.userEmail||(this.userEmail=t.email);const a=await fetch(`${de}/get_user_id_by_email/${this.userEmail}`,{headers:{Authorization:`Bearer ${e}`}}),s=await a.json();a.ok?this.userId=s.users_id:this.message=s.message||"Unable to get user ID."}catch(t){console.error("Error getting users_id:",t)}},handleError(e,t){console.error("API Error:",e),e.response?(console.error("Response data:",e.response.data),console.error("Response status:",e.response.status),this.message=e.response.data.message||e.response.data.error||t):e.request?(console.error("No response received:",e.request),this.message="No response from server. Please check your connection."):(console.error("Error setting up request:",e.message),this.message=e.message||t),this.messageType="alert-danger"},validateForm(){const e=["role_id","email","first_name","last_name","gender","password","fathers_name","mothers_name","telephone","province","district","sector","cell","village","bio","salary","date_of_birth","disability","categories_id"],t=[];for(const s of e)this.form[s]&&""!==this.form[s]||t.push(s);if(t.length>0)return this.message=`Missing required fields: ${t.join(", ")}`,this.messageType="alert-danger",!1;const a=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return!!a.test(this.form.email)||(this.message="Please enter a valid email address",this.messageType="alert-danger",!1)},async handleSubmit(){if(!this.isSubmitting){this.isSubmitting=!0,this.message="";try{if(!this.validateForm())return;this.form.role_id||await this.loadRoleId(),console.log("Form data before submit:",{...this.form,id:this.form.id?this.form.id.name:null,image:this.form.image?this.form.image.name:null,cv:this.form.cv?this.form.cv.name:null});const e=new FormData;e.append("role_id",this.form.role_id),e.append("email",this.form.email),e.append("first_name",this.form.first_name),e.append("last_name",this.form.last_name),e.append("gender",this.form.gender),e.append("password",this.form.password),e.append("full_name",`${this.form.first_name} ${this.form.last_name}`),e.append("verifiedEmail",this.form.verifiedEmail),e.append("token",this.form.token||""),e.append("verification_code",this.form.verification_code||""),e.append("fathers_name",this.form.fathers_name),e.append("mothers_name",this.form.mothers_name),e.append("telephone",this.form.telephone),e.append("province",this.form.province),e.append("district",this.form.district),e.append("sector",this.form.sector),e.append("cell",this.form.cell),e.append("village",this.form.village),e.append("bio",this.form.bio),e.append("salary",this.form.salary),e.append("date_of_birth",this.form.date_of_birth),e.append("disability",this.form.disability),e.append("categories_id",this.form.categories_id),e.append("created_at",this.form.created_at),e.append("created_by",this.form.created_by),e.append("is_editable",this.form.is_editable),this.form.image&&e.append("image",this.form.image),this.form.id&&e.append("id",this.form.id),this.form.cv&&e.append("cv",this.form.cv);const t=localStorage.getItem("adminToken");if(!t)return this.message="Authentication token not found. Please log in again.",void(this.messageType="alert-danger");console.log("Submitting to:",`${de}/admin/add_job_seekers`);const a=await ne.A.post(`${de}/admin/add_job_seekers`,e,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${t}`}});console.log("Success response:",a.data),this.message=a.data.message||"Job seeker saved successfully!",this.messageType="alert-success",this.resetForm()}catch(e){this.handleError(e,"Failed to save job seeker.")}finally{this.isSubmitting=!1}}},resetForm(){for(const e in this.form)"role_id"!==e&&("string"===typeof this.form[e]?this.form[e]="":null!==this.form[e]&&void 0!==this.form[e]||(this.form[e]=null));this.form.id=null,this.form.image=null,this.form.cv=null,this.form.id_url="",this.form.image_url="",this.form.cv_url="",this.selectedCategoryType="",this.categories=[],this.districts=[],this.sectors=[],this.cells=[],this.villages=[],this.form.job_seeker_id="js-"+Date.now(),this.form.created_at=(new Date).toISOString().slice(0,19).replace("T"," ")}}};const Tk=(0,n.A)(Mk,[["render",Fk],["__scopeId","data-v-3c06c22c"]]);var jk=Tk;const Dk={class:"page-wrapper",id:"main-wrapper","data-layout":"vertical","data-navbarbg":"skin6","data-sidebartype":"full","data-sidebar-description":"fixed","data-header-description":"fixed"},Uk={class:"body-wrapper"},$k={class:"row mb-3"},Xk={class:"d-flex justify-content-center mb-3"},Vk={class:"col-md-6"},Bk={key:0,class:"d-flex justify-content-center my-5"},Jk={key:1,class:"d-flex justify-content-center my-4"},Nk={key:2,class:"table-responsive"},Qk={class:"table table-bordered"},zk={key:0},Rk=["onClick"],Wk={key:1},Ok={key:0},Hk=["onClick"],Zk={key:3,class:"d-flex justify-content-center mt-4"},Kk={class:"pagination"},qk=["onClick"];function Gk(e,t,a,r,i,l){const n=(0,o.g2)("IndexComponent");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(n),(0,o.Lk)("div",Dk,[(0,o.Lk)("div",Uk,[t[6]||(t[6]=(0,o.Lk)("h5",{class:"card-title fw-semibold mb-4",style:{color:"#E960A6"}},[(0,o.Lk)("i",{class:"ti ti-user-plus"}),(0,o.eW)(" Hired Seekers ")],-1)),(0,o.Lk)("div",$k,[(0,o.Lk)("div",Xk,[(0,o.Lk)("div",Vk,[(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>i.searchQuery=e),class:"form-control",placeholder:"Search by seeker or provider name"},null,512),[[s.Jo,i.searchQuery]])])])]),i.isLoading?((0,o.uX)(),(0,o.CE)("div",Bk,t[3]||(t[3]=[(0,o.Lk)("div",{class:"text-center"},[(0,o.Lk)("div",{class:"spinner-border text-primary",role:"status",style:{width:"3rem",height:"3rem"}},[(0,o.Lk)("span",{class:"visually-hidden"},"Loading...")]),(0,o.Lk)("div",{class:"mt-2"},[(0,o.Lk)("p",{class:"text-muted"},"Loading hired seekers...")])],-1)]))):0===l.filteredJobs.length?((0,o.uX)(),(0,o.CE)("div",Jk,t[4]||(t[4]=[(0,o.Lk)("div",{class:"alert alert-danger text-center",style:{width:"40rem"}}," No Hired Seeker ",-1)]))):(0,o.Q3)("",!0),!i.isLoading&&l.filteredJobs.length>0?((0,o.uX)(),(0,o.CE)("div",Nk,[(0,o.Lk)("table",Qk,[t[5]||(t[5]=(0,o.Lk)("thead",{class:"table-light"},[(0,o.Lk)("tr",null,[(0,o.Lk)("th",null,"ID"),(0,o.Lk)("th",null,"SEEKER'S NAME"),(0,o.Lk)("th",null,"PROVIDER'S NAME"),(0,o.Lk)("th",null,"WHEN NEED WORKER"),(0,o.Lk)("th",null,"WORKING MODE"),(0,o.Lk)("th",null,"ACCOMMODATION PREFERENCES"),(0,o.Lk)("th",null,"JOB DESCRIPTIONS"),(0,o.Lk)("th",null,"DATE")])],-1)),(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.paginatedJobs,((e,t)=>((0,o.uX)(),(0,o.CE)("tr",{key:e.hired_id},[(0,o.Lk)("td",null,(0,L.v_)((i.currentPage-1)*i.itemsPerPage+t+1),1),(0,o.Lk)("td",null,(0,L.v_)(e.seeker_first_name)+" "+(0,L.v_)(e.seeker_last_name),1),(0,o.Lk)("td",null,(0,L.v_)(e.provider_first_name)+" "+(0,L.v_)(e.provider_last_name),1),(0,o.Lk)("td",null,(0,L.v_)(e.when_need_worker),1),(0,o.Lk)("td",null,(0,L.v_)(e.working_mode),1),(0,o.Lk)("td",null,(0,L.v_)(e.accommodation_preference),1),(0,o.Lk)("td",null,[i.expandedRows.has(e.hired_id)?((0,o.uX)(),(0,o.CE)("span",zk,[(0,o.eW)((0,L.v_)(e.job_description)+" ",1),(0,o.Lk)("button",{class:"btn btn-link btn-sm p-0",onClick:t=>l.toggleDescription(e.hired_id)},"Less",8,Rk)])):((0,o.uX)(),(0,o.CE)("span",Wk,[(0,o.eW)((0,L.v_)(e.job_description.slice(0,50)),1),e.job_description.length>50?((0,o.uX)(),(0,o.CE)("span",Ok,"...")):(0,o.Q3)("",!0),e.job_description.length>50?((0,o.uX)(),(0,o.CE)("button",{key:1,class:"btn btn-link btn-sm p-0",onClick:t=>l.toggleDescription(e.hired_id)}," More ",8,Hk)):(0,o.Q3)("",!0)]))]),(0,o.Lk)("td",null,(0,L.v_)(e.date?e.date.substring(0,10):""),1)])))),128))])])])):(0,o.Q3)("",!0),!i.isLoading&&l.totalPages>1?((0,o.uX)(),(0,o.CE)("div",Zk,[(0,o.Lk)("nav",null,[(0,o.Lk)("ul",Kk,[(0,o.Lk)("li",{class:(0,L.C4)(["page-item",{disabled:1===i.currentPage}])},[(0,o.Lk)("button",{class:"page-link",onClick:t[1]||(t[1]=e=>l.goToPage(i.currentPage-1))},"Previous")],2),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.visiblePageNumbers,(e=>((0,o.uX)(),(0,o.CE)("li",{key:e,class:(0,L.C4)(["page-item",{active:e===i.currentPage}])},[(0,o.Lk)("button",{class:"page-link",onClick:t=>l.goToPage(e)},(0,L.v_)(e),9,qk)],2)))),128)),(0,o.Lk)("li",{class:(0,L.C4)(["page-item",{disabled:i.currentPage===l.totalPages}])},[(0,o.Lk)("button",{class:"page-link",onClick:t[2]||(t[2]=e=>l.goToPage(i.currentPage+1))},"Next")],2)])])])):(0,o.Q3)("",!0)])])],64)}var Yk={name:"MainWrapper",components:{IndexComponent:Tb},data(){return{jobs:[],searchQuery:"",currentPage:1,itemsPerPage:20,userEmail:"",userId:"",isLoading:!0,status:{success:!1,message:""},expandedRows:new Set}},computed:{filteredJobs(){const e=this.searchQuery.toLowerCase();return this.jobs.filter((t=>{const a=`${t.seeker_first_name} ${t.seeker_last_name}`.toLowerCase(),s=`${t.provider_first_name} ${t.provider_last_name}`.toLowerCase(),o=(t.when_need_worker||"").toLowerCase(),r=(t.working_mode||"").toLowerCase(),i=(t.accommodation_preference||"").toLowerCase();return a.includes(e)||s.includes(e)||o.includes(e)||r.includes(e)||i.includes(e)}))},paginatedJobs(){const e=(this.currentPage-1)*this.itemsPerPage,t=e+this.itemsPerPage;return this.filteredJobs.slice(e,t)},totalPages(){return Math.ceil(this.filteredJobs.length/this.itemsPerPage)},visiblePageNumbers(){const e=5,t=[];let a=Math.max(this.currentPage-Math.floor(e/2),1),s=a+e-1;s>this.totalPages&&(s=this.totalPages,a=Math.max(s-e+1,1));for(let o=a;o<=s;o++)t.push(o);return t}},watch:{searchQuery(){this.currentPage=1}},async mounted(){this.userEmail=localStorage.getItem("userEmail")||"";try{this.userEmail&&await this.getUserIdFromEmail()}catch(e){console.error("Error during initialization:",e)}finally{this.isLoading=!1}},methods:{goToPage(e){e>=1&&e<=this.totalPages&&(this.currentPage=e)},async fetchJobsByUser(){try{this.isLoading=!0;const e=localStorage.getItem("adminToken");if(!this.userId)return;const t=await fetch(`${de}/admin/hired_seekers`,{headers:{Authorization:`Bearer ${e}`}});if(!t.ok)throw new Error("Failed to fetch jobs");const a=await t.json();this.jobs=a}catch(e){console.error("Error fetching jobs for user:",e),this.status={success:!1,message:"Failed to load hired seekers. Please try again."}}finally{this.isLoading=!1}},async getUserIdFromEmail(){const e=localStorage.getItem("adminToken");if(e)try{const t=JSON.parse(atob(e.split(".")[1]));this.userEmail||(this.userEmail=t.email);const a=await fetch(`${de}/get_user_id_by_email/${this.userEmail}`,{headers:{Authorization:`Bearer ${e}`}}),s=await a.json();a.ok?(this.userId=s.users_id,await this.fetchJobsByUser()):this.status={success:!1,message:s.message||"Unable to get user ID."}}catch(t){console.error("Error getting users_id:",t),this.status={success:!1,message:"Failed to fetch user ID."}}},toggleDescription(e){this.expandedRows.has(e)?this.expandedRows.delete(e):this.expandedRows.add(e)}}};const ev=(0,n.A)(Yk,[["render",Gk],["__scopeId","data-v-148ca088"]]);var tv=ev;const av={class:"page-wrapper",id:"main-wrapper","data-layout":"vertical","data-navbarbg":"skin6","data-sidebartype":"full","data-sidebar-description":"fixed","data-header-description":"fixed"},sv={class:"body-wrapper"},ov={key:0,class:"d-flex justify-content-center my-5"},rv={key:1,class:"d-flex justify-content-center mb-3"},iv={key:2,class:"d-flex justify-content-center my-4"},lv={key:3,class:"table-responsive"},nv={class:"table table-bordered"},dv=["onClick"],cv={key:4,class:"d-flex flex-column align-items-center my-3"},mv={"aria-label":"Page navigation"},uv={class:"pagination"},gv=["onClick"];function hv(e,t,a,r,i,l){const n=(0,o.g2)("IndexComponent");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(n),(0,o.Lk)("div",av,[(0,o.Lk)("div",sv,[t[6]||(t[6]=(0,o.Lk)("h5",{class:"card-title fw-semibold mb-4",style:{color:"#E960A6"}},[(0,o.Lk)("i",{class:"ti ti-user-plus"}),(0,o.eW)(" Approved seekers ")],-1)),i.isLoading?((0,o.uX)(),(0,o.CE)("div",ov,t[3]||(t[3]=[(0,o.Lk)("div",{class:"text-center"},[(0,o.Lk)("div",{class:"spinner-border text-primary",role:"status",style:{width:"3rem",height:"3rem"}},[(0,o.Lk)("span",{class:"visually-hidden"},"Loading...")]),(0,o.Lk)("div",{class:"mt-2"},[(0,o.Lk)("p",{class:"text-muted"},"Loading job seekers...")])],-1)]))):(0,o.Q3)("",!0),i.isLoading?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",rv,[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>i.searchQuery=e),type:"text",class:"form-control",style:{"max-width":"500px"},placeholder:"Search by name, bio, province..."},null,512),[[s.Jo,i.searchQuery]])])),i.isLoading||0!==i.jobs.length?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",iv,t[4]||(t[4]=[(0,o.Lk)("div",{class:"alert alert-danger text-center",style:{width:"40rem"}}," No Approved seeker found. ",-1)]))),!i.isLoading&&l.displayedJobs.length>0?((0,o.uX)(),(0,o.CE)("div",lv,[(0,o.Lk)("table",nv,[t[5]||(t[5]=(0,o.Lk)("thead",{class:"table-light"},[(0,o.Lk)("tr",null,[(0,o.Lk)("th",null,"ID"),(0,o.Lk)("th",null,"NAMES"),(0,o.Lk)("th",null,"SALARY EXPECTED"),(0,o.Lk)("th",null,"SKILLS AND CAPABILITIES"),(0,o.Lk)("th",null,"PROVINCE"),(0,o.Lk)("th",null,"ACTION")])],-1)),(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.displayedJobs,((e,t)=>((0,o.uX)(),(0,o.CE)("tr",{key:e.approved_id},[(0,o.Lk)("td",null,(0,L.v_)((i.currentPage-1)*i.perPage+t+1),1),(0,o.Lk)("td",null,(0,L.v_)(e.first_name)+" "+(0,L.v_)(e.last_name),1),(0,o.Lk)("td",null,(0,L.v_)(e.salary),1),(0,o.Lk)("td",null,(0,L.v_)(e.bio),1),(0,o.Lk)("td",null,(0,L.v_)(e.province),1),(0,o.Lk)("td",null,[(0,o.Lk)("button",{class:"btn btn-primary btn-sm",onClick:t=>l.goToMore(e.users_id)}," More ",8,dv)])])))),128))])])])):(0,o.Q3)("",!0),!i.isLoading&&l.totalPages>1?((0,o.uX)(),(0,o.CE)("div",cv,[(0,o.Lk)("nav",mv,[(0,o.Lk)("ul",uv,[(0,o.Lk)("li",{class:(0,L.C4)(["page-item",{disabled:1===i.currentPage}])},[(0,o.Lk)("button",{class:"page-link",onClick:t[1]||(t[1]=e=>l.changePage(i.currentPage-1))},"Previous")],2),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.pagesToShow,(e=>((0,o.uX)(),(0,o.CE)("li",{key:e,class:(0,L.C4)(["page-item",{active:i.currentPage===e}])},[(0,o.Lk)("button",{class:"page-link",onClick:t=>l.changePage(e)},(0,L.v_)(e),9,gv)],2)))),128)),(0,o.Lk)("li",{class:(0,L.C4)(["page-item",{disabled:i.currentPage===l.totalPages}])},[(0,o.Lk)("button",{class:"page-link",onClick:t[2]||(t[2]=e=>l.changePage(i.currentPage+1))},"Next")],2)])])])):(0,o.Q3)("",!0)])])],64)}var pv={name:"MainWrapper",components:{IndexComponent:Tb},data(){return{uploadsUrl:de+"/uploads/logo/",form:{users_id:null,job_title:"",company:"",deadline_date:"",job_description:"",logo:"",location:""},jobs:[],userEmail:"",userId:"",showModal:!1,selectedAboutId:null,isSubmitting:!1,isLoading:!0,status:{success:!1,message:""},searchQuery:"",currentPage:1,perPage:20}},computed:{displayedJobs(){const e=this.searchQuery.toLowerCase(),t=this.jobs.filter((t=>t.first_name.toLowerCase().includes(e)||t.last_name.toLowerCase().includes(e)||t.bio.toLowerCase().includes(e)||t.province.toLowerCase().includes(e))),a=(this.currentPage-1)*this.perPage;return t.slice(a,a+this.perPage)},pagesToShow(){const e=this.totalPages,t=this.currentPage,a=2,s=[];for(let o=Math.max(1,t-a);o<=Math.min(e,t+a);o++)s.push(o);return s},totalPages(){const e=this.searchQuery.toLowerCase(),t=this.jobs.filter((t=>t.first_name.toLowerCase().includes(e)||t.last_name.toLowerCase().includes(e)||t.bio.toLowerCase().includes(e)||t.province.toLowerCase().includes(e))).length;return Math.ceil(t/this.perPage)}},watch:{searchQuery(){this.currentPage=1},jobs(){this.currentPage=1}},mounted(){this.userEmail=localStorage.getItem("userEmail")||"",this.userEmail&&this.getUserIdFromEmail()},methods:{changePage(e){e>=1&&e<=this.totalPages&&(this.currentPage=e)},handleFileUpload(e){this.form.logo=e.target.files[0]},async fetchJobsByUser(){this.isLoading=!0;try{const e=localStorage.getItem("adminToken");if(!this.userId)return;const t=await fetch(`${de}/admin/approved_seekers`,{headers:{Authorization:`Bearer ${e}`}});if(!t.ok)throw new Error("Failed to fetch jobs");const a=await t.json();this.jobs=a}catch(e){console.error("Error fetching jobs for user:",e)}finally{this.isLoading=!1}},goToMore(e){this.$router.push({name:"view-seekers",params:{id:e}})},async getUserIdFromEmail(){const e=localStorage.getItem("adminToken");if(e)try{const t=JSON.parse(atob(e.split(".")[1]));this.userEmail||(this.userEmail=t.email);const a=await fetch(`${de}/get_user_id_by_email/${this.userEmail}`,{headers:{Authorization:`Bearer ${e}`}}),s=await a.json();a.ok?(this.userId=s.users_id,this.fetchJobsByUser()):this.status={success:!1,message:s.message||"Unable to get user ID."}}catch(t){console.error("Error getting users_id:",t),this.status={success:!1,message:"Failed to fetch user ID."}}}}};const bv=(0,n.A)(pv,[["render",hv],["__scopeId","data-v-25a8b658"]]);var fv=bv;const kv={class:"page-wrapper",id:"main-wrapper","data-layout":"vertical","data-navbarbg":"skin6","data-sidebartype":"full","data-sidebar-description":"fixed","data-header-description":"fixed"},vv={class:"body-wrapper"},yv={class:"row mb-3"},Lv={class:"col-md-8"},Cv={class:"col-md-3"},wv={key:0,class:"d-flex justify-content-center my-4"},_v={key:1,class:"table-responsive"},Av={class:"table table-bordered"},Ev={class:"d-flex gap-2"},Iv=["onClick"],xv={key:2,class:"d-flex flex-column align-items-center my-3"},Pv={"aria-label":"Page navigation"},Sv={class:"pagination"},Fv=["onClick"],Mv={key:0,class:"modal-overlay"},Tv={class:"modal-content"};function jv(e,t,a,r,i,l){const n=(0,o.g2)("IndexComponent");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(n),(0,o.Lk)("div",kv,[(0,o.Lk)("div",vv,[t[9]||(t[9]=(0,o.Lk)("h5",{class:"card-title fw-semibold mb-4",style:{color:"#E960A6"}},[(0,o.Lk)("i",{class:"ti ti-user-plus"}),(0,o.eW)(" All Approved Job Providers ")],-1)),(0,o.Lk)("div",yv,[(0,o.Lk)("div",Lv,[(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>i.searchQuery=e),class:"form-control",placeholder:"Search by names, province or district"},null,512),[[s.Jo,i.searchQuery]])]),(0,o.Lk)("div",Cv,[(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>i.selectedCategoryId=e),class:"form-control"},t[6]||(t[6]=[(0,o.Lk)("option",{disabled:"",value:""},"CHOOSE CATEGORY",-1),(0,o.Lk)("option",{value:""},"All Categories",-1),(0,o.Lk)("option",{value:"individual"},"Individual",-1),(0,o.Lk)("option",{value:"company"},"Company",-1)]),512),[[s.u1,i.selectedCategoryId]])])]),0===l.filteredJobs.length?((0,o.uX)(),(0,o.CE)("div",wv,t[7]||(t[7]=[(0,o.Lk)("div",{class:"alert alert-danger text-center",style:{width:"40rem"}}," No approved job providers found ",-1)]))):(0,o.Q3)("",!0),l.filteredJobs.length>0?((0,o.uX)(),(0,o.CE)("div",_v,[(0,o.Lk)("table",Av,[t[8]||(t[8]=(0,o.Lk)("thead",{class:"table-light"},[(0,o.Lk)("tr",null,[(0,o.Lk)("th",null,"ID"),(0,o.Lk)("th",null,"NAMES"),(0,o.Lk)("th",null,"PROVINCE"),(0,o.Lk)("th",null,"DISTRICT"),(0,o.Lk)("th",null,"CATEGORY"),(0,o.Lk)("th",null,"ACTION")])],-1)),(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.paginatedJobs,((e,t)=>((0,o.uX)(),(0,o.CE)("tr",{key:e.users_id},[(0,o.Lk)("td",null,(0,L.v_)((i.currentPage-1)*i.perPage+t+1),1),(0,o.Lk)("td",null,(0,L.v_)(e.first_name)+" "+(0,L.v_)(e.last_name),1),(0,o.Lk)("td",null,(0,L.v_)(e.province),1),(0,o.Lk)("td",null,(0,L.v_)(e.district),1),(0,o.Lk)("td",null,(0,L.v_)(e.category),1),(0,o.Lk)("td",null,[(0,o.Lk)("div",Ev,[(0,o.Lk)("button",{class:"btn btn-cancel btn-sm",onClick:t=>l.goToMore(e.users_id)},"More",8,Iv)])])])))),128))])])])):(0,o.Q3)("",!0),l.totalPages>1?((0,o.uX)(),(0,o.CE)("div",xv,[(0,o.Lk)("nav",Pv,[(0,o.Lk)("ul",Sv,[(0,o.Lk)("li",{class:(0,L.C4)(["page-item",{disabled:1===i.currentPage}])},[(0,o.Lk)("button",{class:"page-link",onClick:t[2]||(t[2]=e=>l.changePage(i.currentPage-1))},"Previous")],2),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.totalPages,(e=>((0,o.uX)(),(0,o.CE)("li",{key:e,class:(0,L.C4)(["page-item",{active:i.currentPage===e}])},[(0,o.Lk)("button",{class:"page-link",onClick:t=>l.changePage(e)},(0,L.v_)(e),9,Fv)],2)))),128)),(0,o.Lk)("li",{class:(0,L.C4)(["page-item",{disabled:i.currentPage===l.totalPages}])},[(0,o.Lk)("button",{class:"page-link",onClick:t[3]||(t[3]=e=>l.changePage(i.currentPage+1))},"Next")],2)])])])):(0,o.Q3)("",!0)])]),i.showModal?((0,o.uX)(),(0,o.CE)("div",Mv,[(0,o.Lk)("div",Tv,[t[10]||(t[10]=(0,o.Lk)("h5",null,"Are you sure you want to delete this job provider content?",-1)),(0,o.Lk)("div",null,[(0,o.Lk)("button",{class:"btn btn-primary mt-3",onClick:t[4]||(t[4]=e=>l.deleteAbout(i.selectedAboutId))},"Yes, Delete"),(0,o.Lk)("button",{class:"btn btn-cancel mt-3",style:{"background-color":"teal",color:"white"},onClick:t[5]||(t[5]=(...e)=>l.closeModal&&l.closeModal(...e))}," Cancel ")])])])):(0,o.Q3)("",!0)],64)}var Dv={name:"MainWrapper",components:{IndexComponent:Tb},data(){return{jobs:[],userEmail:"",userId:"",showModal:!1,selectedAboutId:null,searchQuery:"",selectedCategoryId:"",currentPage:1,perPage:10}},computed:{filteredJobs(){const e=this.searchQuery.toLowerCase();return this.jobs.filter((t=>{const a=`${t.first_name} ${t.last_name}`.toLowerCase(),s=t.province?.toLowerCase()||"",o=t.district?.toLowerCase()||"",r=!this.selectedCategoryId||t.category?.toLowerCase()===this.selectedCategoryId.toLowerCase();return r&&(a.includes(e)||s.includes(e)||o.includes(e))}))},paginatedJobs(){const e=(this.currentPage-1)*this.perPage,t=e+this.perPage;return this.filteredJobs.slice(e,t)},totalPages(){return Math.ceil(this.filteredJobs.length/this.perPage)}},watch:{searchQuery(){this.currentPage=1},selectedCategoryId(){this.currentPage=1}},mounted(){this.userEmail=localStorage.getItem("userEmail")||"",this.userEmail&&this.getUserIdFromEmail()},methods:{changePage(e){e>=1&&e<=this.totalPages&&(this.currentPage=e)},async fetchJobsByUser(){try{const e=localStorage.getItem("adminToken");if(!this.userId)return;const t=await fetch(`${de}/admin/approved_job_providers`,{headers:{Authorization:`Bearer ${e}`}});if(!t.ok)throw new Error("Failed to fetch jobs");const a=await t.json();this.jobs=a}catch(e){console.error("Error fetching jobs for user:",e)}},goToEdit(e){this.$router.push({name:"edit-providers",params:{id:e}})},goToMore(e){this.$router.push({name:"view-more",params:{id:e}})},confirmDelete(e){this.selectedAboutId=e,this.showModal=!0},closeModal(){this.showModal=!1,this.selectedAboutId=null},async deleteAbout(e){const t=localStorage.getItem("adminToken");try{const a=await fetch(`${de}/admin/delete_job_provider/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`}}),s=await a.json();a.ok?this.jobs=this.jobs.filter((t=>t.users_id!==e)):console.error("Failed to delete:",s.message)}catch(a){console.error("Error deleting job:",a)}finally{this.closeModal()}},async getUserIdFromEmail(){const e=localStorage.getItem("adminToken");if(e)try{const t=JSON.parse(atob(e.split(".")[1]));this.userEmail||(this.userEmail=t.email);const a=await fetch(`${de}/get_user_id_by_email/${this.userEmail}`,{headers:{Authorization:`Bearer ${e}`}}),s=await a.json();a.ok?(this.userId=s.users_id,this.fetchJobsByUser()):console.error("Unable to get user ID:",s.message)}catch(t){console.error("Error getting user ID:",t)}}}};const Uv=(0,n.A)(Dv,[["render",jv],["__scopeId","data-v-6964fa9a"]]);var $v=Uv;const Xv={class:"page-wrapper",id:"main-wrapper","data-layout":"vertical","data-navbarbg":"skin6","data-sidebartype":"full","data-sidebar-description":"fixed","data-header-description":"fixed"},Vv={class:"body-wrapper"},Bv={class:"d-flex justify-content-center mb-3"},Jv={key:0,class:"d-flex justify-content-center my-5"},Nv={key:1,class:"d-flex justify-content-center my-4"},Qv={key:2,class:"table-responsive"},zv={class:"table table-bordered"},Rv=["title"],Wv=["onClick"],Ov={key:3,class:"d-flex flex-column align-items-center my-3"},Hv={"aria-label":"Page navigation"},Zv={class:"pagination"},Kv=["onClick"],qv={class:"modal-header"},Gv={class:"modal-title"},Yv={class:"modal-body"},ey={key:0,class:"info-card current-feedback"},ty={class:"card-content"},ay={class:"current-feedback-text"},sy={class:"feedback-author"},oy={class:"info-card feedback-input"},ry={class:"card-content"},iy={class:"form-group"},ly=["disabled"],ny={class:"char-count"},dy={class:"attribution-info"},cy={class:"modal-footer"},my=["disabled"],uy=["disabled"],gy={key:0,class:"spinner"},hy={key:1,class:"ti ti-check"};function py(e,t,a,r,i,l){const n=(0,o.g2)("IndexComponent");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(n),(0,o.Lk)("div",Xv,[(0,o.Lk)("div",Vv,[t[21]||(t[21]=(0,o.Lk)("h5",{class:"card-title fw-semibold mb-4",style:{color:"#E960A6"}},[(0,o.Lk)("i",{class:"ti ti-user-plus"}),(0,o.eW)(" Open Ticket ")],-1)),(0,o.Lk)("div",Bv,[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>i.searchQuery=e),type:"text",class:"form-control",style:{"max-width":"550px"},placeholder:"Search by name or telephone..."},null,512),[[s.Jo,i.searchQuery]])]),i.isLoading?((0,o.uX)(),(0,o.CE)("div",Jv,t[9]||(t[9]=[(0,o.Lk)("div",{class:"text-center"},[(0,o.Lk)("div",{class:"spinner-border text-primary",role:"status",style:{width:"3rem",height:"3rem"}},[(0,o.Lk)("span",{class:"visually-hidden"},"Loading...")]),(0,o.Lk)("div",{class:"mt-2"},[(0,o.Lk)("p",{class:"text-muted"},"Loading tickets...")])],-1)]))):(0,o.Q3)("",!0),i.isLoading||0!==l.filteredJobs.length?i.isLoading?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",Qv,[(0,o.Lk)("table",zv,[t[12]||(t[12]=(0,o.Lk)("thead",{class:"table-light"},[(0,o.Lk)("tr",null,[(0,o.Lk)("th",null,"ID"),(0,o.Lk)("th",null,"NAMES"),(0,o.Lk)("th",null,"MESSAGE"),(0,o.Lk)("th",null,"TELEPHONE"),(0,o.Lk)("th",null,"MESSAGE ON"),(0,o.Lk)("th",null,"FEEDBACK"),(0,o.Lk)("th",null,"FEEDBACK MADE BY"),(0,o.Lk)("th",null,"ACTIONS")])],-1)),(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.displayedJobs,((e,a)=>((0,o.uX)(),(0,o.CE)("tr",{key:e.message_id},[(0,o.Lk)("td",null,(0,L.v_)((i.currentPage-1)*i.perPage+a+1),1),(0,o.Lk)("td",null,(0,L.v_)(e.first_name)+" "+(0,L.v_)(e.last_name),1),(0,o.Lk)("td",null,(0,L.v_)(e.message),1),(0,o.Lk)("td",null,(0,L.v_)(e.telephone),1),(0,o.Lk)("td",null,(0,L.v_)(l.formatDateTime(e.msg_created_at)),1),(0,o.Lk)("td",null,[(0,o.Lk)("div",{class:"feedback-text",title:e.feedback},(0,L.v_)(e.feedback?e.feedback.length>50?e.feedback.substring(0,50)+"...":e.feedback:"No feedback yet"),9,Rv)]),(0,o.Lk)("td",null,(0,L.v_)(e.feedback_made_by||"-"),1),(0,o.Lk)("td",null,[(0,o.Lk)("button",{onClick:t=>l.openFeedbackModal(e),class:"btn btn-primary btn-sm"},[t[11]||(t[11]=(0,o.Lk)("i",{class:"ti ti-edit"},null,-1)),(0,o.eW)(" "+(0,L.v_)(e.feedback?"Edit":"Add")+" Feedback ",1)],8,Wv)])])))),128))])])])):((0,o.uX)(),(0,o.CE)("div",Nv,t[10]||(t[10]=[(0,o.Lk)("div",{class:"alert alert-danger text-center",style:{width:"40rem"}}," No Open Ticket found. ",-1)]))),!i.isLoading&&l.totalPages>1?((0,o.uX)(),(0,o.CE)("div",Ov,[(0,o.Lk)("nav",Hv,[(0,o.Lk)("ul",Zv,[(0,o.Lk)("li",{class:(0,L.C4)(["page-item",{disabled:1===i.currentPage}])},[(0,o.Lk)("button",{class:"page-link",onClick:t[1]||(t[1]=e=>l.changePage(i.currentPage-1))},"Previous")],2),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.pagesToShow,(e=>((0,o.uX)(),(0,o.CE)("li",{key:e,class:(0,L.C4)(["page-item",{active:i.currentPage===e}])},[(0,o.Lk)("button",{class:"page-link",onClick:t=>l.changePage(e)},(0,L.v_)(e),9,Kv)],2)))),128)),(0,o.Lk)("li",{class:(0,L.C4)(["page-item",{disabled:i.currentPage===l.totalPages}])},[(0,o.Lk)("button",{class:"page-link",onClick:t[2]||(t[2]=e=>l.changePage(i.currentPage+1))},"Next")],2)])])])):(0,o.Q3)("",!0),i.feedbackStatus.message?((0,o.uX)(),(0,o.CE)("div",{key:4,class:(0,L.C4)(["alert",i.feedbackStatus.success?"alert-success":"alert-danger"])},(0,L.v_)(i.feedbackStatus.message),3)):(0,o.Q3)("",!0),i.showFeedbackModal?((0,o.uX)(),(0,o.CE)("div",{key:5,class:"modal-overlay",onClick:t[8]||(t[8]=(...e)=>l.closeFeedbackModal&&l.closeFeedbackModal(...e))},[(0,o.Lk)("div",{class:"feedback-modal",onClick:t[7]||(t[7]=(0,s.D$)((()=>{}),["stop"]))},[(0,o.Lk)("div",qv,[(0,o.Lk)("h3",Gv,[t[13]||(t[13]=(0,o.Lk)("i",{class:"ti ti-message-circle"},null,-1)),(0,o.eW)(" "+(0,L.v_)(i.selectedMessage?.feedback?"Edit Feedback":"Add Feedback"),1)]),(0,o.Lk)("button",{class:"close-btn",onClick:t[3]||(t[3]=(...e)=>l.closeFeedbackModal&&l.closeFeedbackModal(...e))},"Ã")]),(0,o.Lk)("div",Yv,[i.selectedMessage?.feedback?((0,o.uX)(),(0,o.CE)("div",ey,[t[15]||(t[15]=(0,o.Lk)("div",{class:"card-header current"},[(0,o.Lk)("h4",null,[(0,o.Lk)("i",{class:"ti ti-message-check"}),(0,o.eW)(" Current Feedback")])],-1)),(0,o.Lk)("div",ty,[(0,o.Lk)("div",ay,(0,L.v_)(i.selectedMessage.feedback),1),(0,o.Lk)("small",sy,[t[14]||(t[14]=(0,o.Lk)("i",{class:"ti ti-user"},null,-1)),(0,o.eW)(" By: "+(0,L.v_)(i.selectedMessage.feedback_made_by),1)])])])):(0,o.Q3)("",!0),(0,o.Lk)("div",oy,[(0,o.Lk)("div",{class:(0,L.C4)(["card-header",i.selectedMessage?.feedback?"update":"new"])},[(0,o.Lk)("h4",null,[t[16]||(t[16]=(0,o.Lk)("i",{class:"ti ti-edit"},null,-1)),(0,o.eW)(" "+(0,L.v_)(i.selectedMessage?.feedback?"Update Feedback":"New Feedback"),1)])],2),(0,o.Lk)("div",ry,[(0,o.Lk)("div",iy,[t[17]||(t[17]=(0,o.Lk)("label",{class:"form-label"},[(0,o.Lk)("strong",null,"Your Feedback:")],-1)),(0,o.bo)((0,o.Lk)("textarea",{"onUpdate:modelValue":t[4]||(t[4]=e=>i.feedbackForm.feedback=e),class:"feedback-textarea",rows:"6",placeholder:"Enter your feedback for this message...",disabled:i.isSubmittingFeedback},null,8,ly),[[s.Jo,i.feedbackForm.feedback]]),(0,o.Lk)("div",ny," Character count: "+(0,L.v_)(i.feedbackForm.feedback.length),1)]),(0,o.Lk)("div",dy,[(0,o.Lk)("small",null,[t[18]||(t[18]=(0,o.Lk)("i",{class:"ti ti-info-circle"},null,-1)),t[19]||(t[19]=(0,o.eW)(" Feedback will be attributed to: ")),(0,o.Lk)("strong",null,(0,L.v_)(i.userEmail),1)])])])])]),(0,o.Lk)("div",cy,[(0,o.Lk)("button",{class:"btn btn-cancel",onClick:t[5]||(t[5]=(...e)=>l.closeFeedbackModal&&l.closeFeedbackModal(...e)),disabled:i.isSubmittingFeedback},t[20]||(t[20]=[(0,o.Lk)("i",{class:"ti ti-x"},null,-1),(0,o.eW)(" Cancel ")]),8,my),(0,o.Lk)("button",{class:"btn btn-primary",onClick:t[6]||(t[6]=(...e)=>l.saveFeedback&&l.saveFeedback(...e)),disabled:i.isSubmittingFeedback||!i.feedbackForm.feedback.trim()},[i.isSubmittingFeedback?((0,o.uX)(),(0,o.CE)("span",gy)):((0,o.uX)(),(0,o.CE)("i",hy)),(0,o.eW)(" "+(0,L.v_)(i.isSubmittingFeedback?"Saving...":"Save Feedback"),1)],8,uy)])])])):(0,o.Q3)("",!0)])])],64)}var by={name:"MainWrapper",components:{IndexComponent:Tb},data(){return{uploadsUrl:de+"/uploads/logo/",form:{users_id:null,job_title:"",company:"",deadline_date:"",job_description:"",logo:"",location:""},jobs:[],isSubmitting:!1,status:{success:!1,message:""},userEmail:"",userId:"",showModal:!1,selectedAboutId:null,searchQuery:"",currentPage:1,perPage:20,isLoading:!0,selectedMessage:null,showFeedbackModal:!1,isSubmittingFeedback:!1,feedbackForm:{feedback:""},feedbackStatus:{success:!1,message:""}}},computed:{pagesToShow(){const e=this.totalPages,t=this.currentPage,a=2,s=[];for(let o=Math.max(1,t-a);o<=Math.min(e,t+a);o++)s.push(o);return s},filteredJobs(){const e=this.searchQuery.toLowerCase();return this.jobs.filter((t=>{const a=`${t.first_name} ${t.last_name}`.toLowerCase();return a.includes(e)||t.telephone.toLowerCase().includes(e)}))},displayedJobs(){const e=(this.currentPage-1)*this.perPage,t=e+this.perPage;return this.filteredJobs.slice(e,t)},totalPages(){return Math.ceil(this.filteredJobs.length/this.perPage)}},watch:{searchQuery(){this.currentPage=1}},mounted(){this.userEmail=localStorage.getItem("userEmail")||"",this.userEmail&&this.getUserIdFromEmail()},methods:{changePage(e){e>=1&&e<=this.totalPages&&(this.currentPage=e)},handleFileUpload(e){this.form.logo=e.target.files[0]},async fetchJobsByUser(){this.isLoading=!0;try{const e=localStorage.getItem("adminToken");if(!this.userId)return;const t=await fetch(`${de}/admin/seekers_messages`,{headers:{Authorization:`Bearer ${e}`}});if(!t.ok)throw new Error("Failed to fetch jobs");const a=await t.json();this.jobs=a}catch(e){console.error("Error fetching jobs for user:",e)}finally{this.isLoading=!1}},async getUserIdFromEmail(){const e=localStorage.getItem("adminToken");if(e)try{const t=JSON.parse(atob(e.split(".")[1]));this.userEmail||(this.userEmail=t.email);const a=await fetch(`${de}/get_user_id_by_email/${this.userEmail}`,{headers:{Authorization:`Bearer ${e}`}}),s=await a.json();a.ok?(this.userId=s.users_id,this.fetchJobsByUser()):this.status={success:!1,message:s.message||"Unable to get user ID."}}catch(t){console.error("Error getting users_id:",t),this.status={success:!1,message:"Failed to fetch user ID."}}},formatDateTime(e){if(!e)return"";const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),o=String(t.getDate()).padStart(2,"0");let r=t.getHours();const i=String(t.getMinutes()).padStart(2,"0"),l=String(t.getSeconds()).padStart(2,"0"),n=r>=12?"PM":"AM";return r=r%12||12,`${a}-${s}-${o} ${String(r).padStart(2,"0")}:${i}:${l} ${n}`},openFeedbackModal(e){this.selectedMessage={...e},this.feedbackForm.feedback=e.feedback||"",this.showFeedbackModal=!0,this.clearFeedbackStatus(),document.body.style.overflow="hidden"},closeFeedbackModal(){this.selectedMessage=null,this.feedbackForm.feedback="",this.showFeedbackModal=!1,this.clearFeedbackStatus(),document.body.style.overflow="auto"},async saveFeedback(){if(this.feedbackForm.feedback.trim())if(this.selectedMessage){this.isSubmittingFeedback=!0;try{const e=localStorage.getItem("adminToken"),t=await fetch(`${de}/admin/feedback_update/${this.selectedMessage.message_id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({feedback:this.feedbackForm.feedback,feedback_made_by:this.userEmail})}),a=await t.json();if(t.ok){const e=this.jobs.findIndex((e=>e.message_id===this.selectedMessage.message_id));-1!==e&&(this.jobs[e].feedback=this.feedbackForm.feedback,this.jobs[e].feedback_made_by=this.userEmail),this.feedbackStatus={success:!0,message:"Feedback saved successfully!"},setTimeout((()=>{this.closeFeedbackModal(),setTimeout((()=>{this.clearFeedbackStatus()}),3e3)}),1500)}else this.feedbackStatus={success:!1,message:a.message||"Failed to save feedback."}}catch(e){console.error("Error saving feedback:",e),this.feedbackStatus={success:!1,message:"An error occurred while saving feedback."}}finally{this.isSubmittingFeedback=!1}}else this.feedbackStatus={success:!1,message:"No message selected."};else this.feedbackStatus={success:!1,message:"Please enter feedback before saving."}},clearFeedbackStatus(){this.feedbackStatus={success:!1,message:""}}}};const fy=(0,n.A)(by,[["render",py],["__scopeId","data-v-3d71e983"]]);var ky=fy;const vy={class:"page-wrapper",id:"main-wrapper","data-layout":"vertical","data-navbarbg":"skin6","data-sidebartype":"full","data-sidebar-description":"fixed","data-header-description":"fixed"},yy={class:"body-wrapper"},Ly={class:"row mb-3"},Cy={class:"col-md-8"},wy={class:"col-md-3"},_y={key:0,class:"table-responsive"},Ay={class:"table table-bordered"},Ey={class:"d-flex gap-2"},Iy=["onClick","disabled"],xy=["onClick"],Py=["onClick","disabled"],Sy={key:1,class:"d-flex justify-content-center my-5"},Fy={key:2,class:"d-flex justify-content-center my-4"},My={key:3,class:"d-flex flex-column align-items-center my-3"},Ty={"aria-label":"Page navigation"},jy={class:"pagination"},Dy=["onClick"],Uy={key:0,class:"modal-overlay"},$y={class:"modal-content"};function Xy(e,t,a,r,i,l){const n=(0,o.g2)("IndexComponent");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(n),(0,o.Lk)("div",vy,[(0,o.Lk)("div",yy,[t[10]||(t[10]=(0,o.Lk)("h5",{class:"card-title fw-semibold mb-4",style:{color:"#E960A6"}},[(0,o.Lk)("i",{class:"ti ti-user-plus"}),(0,o.eW)(" All Job Provider ")],-1)),(0,o.Lk)("div",Ly,[(0,o.Lk)("div",Cy,[(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>i.searchQuery=e),class:"form-control",placeholder:"Search by names,email, province or district"},null,512),[[s.Jo,i.searchQuery]])]),(0,o.Lk)("div",wy,[(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>i.selectedCategoryId=e),class:"form-control",style:{height:"48px","padding-top":"8px","padding-bottom":"8px"}},t[6]||(t[6]=[(0,o.Lk)("option",{disabled:"",value:""},"CHOOSE CATEGORY",-1),(0,o.Lk)("option",{value:""},"All Categories",-1),(0,o.Lk)("option",{value:"individual"},"Individual",-1),(0,o.Lk)("option",{value:"company"},"Company",-1)]),512),[[s.u1,i.selectedCategoryId]])])]),!i.isLoading&&l.filteredJobs.length>0?((0,o.uX)(),(0,o.CE)("div",_y,[(0,o.Lk)("table",Ay,[t[7]||(t[7]=(0,o.Lk)("thead",{class:"table-light"},[(0,o.Lk)("tr",null,[(0,o.Lk)("th",null,"ID"),(0,o.Lk)("th",null,"NAMES"),(0,o.Lk)("th",null,"PROVINCE"),(0,o.Lk)("th",null,"DISTRICT"),(0,o.Lk)("th",null,"CATEGORY"),(0,o.Lk)("th",null,"ACTION")])],-1)),(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.paginatedJobs,((e,t)=>((0,o.uX)(),(0,o.CE)("tr",{key:e.users_id},[(0,o.Lk)("td",null,(0,L.v_)((i.currentPage-1)*i.perPage+t+1),1),(0,o.Lk)("td",null,(0,L.v_)(e.first_name)+" "+(0,L.v_)(e.last_name),1),(0,o.Lk)("td",null,(0,L.v_)(e.province),1),(0,o.Lk)("td",null,(0,L.v_)(e.district),1),(0,o.Lk)("td",null,(0,L.v_)(e.category),1),(0,o.Lk)("td",null,[(0,o.Lk)("div",Ey,[(0,o.Lk)("button",{class:"btn btn-primary btn-sm",onClick:t=>l.goToEdit(e.users_id),disabled:!l.isAdmin},"Edit",8,Iy),(0,o.Lk)("button",{class:"btn btn-cancel btn-sm",onClick:t=>l.goToMore(e.users_id)},"More",8,xy),(0,o.Lk)("button",{class:"btn btn-primary btn-sm",onClick:t=>l.confirmDelete(e.users_id),disabled:!l.isAdmin},"Delete",8,Py)])])])))),128))])])])):(0,o.Q3)("",!0),i.isLoading?((0,o.uX)(),(0,o.CE)("div",Sy,t[8]||(t[8]=[(0,o.Lk)("div",{class:"text-center"},[(0,o.Lk)("div",{class:"spinner-border text-primary",role:"status",style:{width:"3rem",height:"3rem"}},[(0,o.Lk)("span",{class:"visually-hidden"},"Loading...")]),(0,o.Lk)("div",{class:"mt-2"},[(0,o.Lk)("p",{class:"text-muted"},"Loading job providers...")])],-1)]))):(0,o.Q3)("",!0),i.isLoading||0!==l.filteredJobs.length?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",Fy,t[9]||(t[9]=[(0,o.Lk)("div",{class:"alert alert-danger text-center",style:{width:"40rem"}}," No job providers found. ",-1)]))),!i.isLoading&&l.totalPages>1?((0,o.uX)(),(0,o.CE)("div",My,[(0,o.Lk)("nav",Ty,[(0,o.Lk)("ul",jy,[(0,o.Lk)("li",{class:(0,L.C4)(["page-item",{disabled:1===i.currentPage}])},[(0,o.Lk)("button",{class:"page-link",onClick:t[2]||(t[2]=e=>l.changePage(i.currentPage-1))},"Previous")],2),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.pagesToShow,(e=>((0,o.uX)(),(0,o.CE)("li",{key:e,class:(0,L.C4)(["page-item",{active:i.currentPage===e}])},[(0,o.Lk)("button",{class:"page-link",onClick:t=>l.changePage(e)},(0,L.v_)(e),9,Dy)],2)))),128)),(0,o.Lk)("li",{class:(0,L.C4)(["page-item",{disabled:i.currentPage===l.totalPages}])},[(0,o.Lk)("button",{class:"page-link",onClick:t[3]||(t[3]=e=>l.changePage(i.currentPage+1))},"Next")],2)])])])):(0,o.Q3)("",!0)])]),i.showModal?((0,o.uX)(),(0,o.CE)("div",Uy,[(0,o.Lk)("div",$y,[t[11]||(t[11]=(0,o.Lk)("h5",null,"Are you sure you want to delete this job provider content?",-1)),(0,o.Lk)("div",null,[(0,o.Lk)("button",{class:"btn btn-primary mt-3",onClick:t[4]||(t[4]=e=>l.deleteAbout(i.selectedAboutId))},"Yes, Delete"),(0,o.Lk)("button",{class:"btn btn-cancel mt-3",style:{"background-color":"teal",color:"white"},onClick:t[5]||(t[5]=(...e)=>l.closeModal&&l.closeModal(...e))}," Cancel ")])])])):(0,o.Q3)("",!0)],64)}var Vy={name:"MainWrapper",components:{IndexComponent:Tb},data(){return{jobs:[],userEmail:"",userId:"",showModal:!1,selectedAboutId:null,searchQuery:"",selectedCategoryId:"",currentPage:1,perPage:10,isLoading:!0}},computed:{isAdmin(){return"admin@kozi.rw"===this.userEmail.toLowerCase()},pagesToShow(){const e=this.totalPages,t=this.currentPage,a=2,s=[];for(let o=Math.max(1,t-a);o<=Math.min(e,t+a);o++)s.push(o);return s},filteredJobs(){const e=this.searchQuery.toLowerCase();return this.jobs.filter((t=>{const a=`${t.first_name} ${t.last_name}`.toLowerCase(),s=t.province?.toLowerCase()||"",o=t.district?.toLowerCase()||"",r=t.email?.toLowerCase()||"",i=!this.selectedCategoryId||t.category?.toLowerCase()===this.selectedCategoryId.toLowerCase();return i&&(a.includes(e)||s.includes(e)||r.includes(e)||o.includes(e))}))},paginatedJobs(){const e=(this.currentPage-1)*this.perPage,t=e+this.perPage;return this.filteredJobs.slice(e,t)},totalPages(){return Math.ceil(this.filteredJobs.length/this.perPage)}},watch:{searchQuery(){this.currentPage=1},selectedCategoryId(){this.currentPage=1}},mounted(){this.userEmail=localStorage.getItem("userEmail")||"",this.userEmail&&this.getUserIdFromEmail()},methods:{changePage(e){e>=1&&e<=this.totalPages&&(this.currentPage=e)},async fetchJobsByUser(){this.isLoading=!0;try{const e=localStorage.getItem("adminToken");if(!this.userId)return;const t=await fetch(`${de}/admin/job_providers`,{headers:{Authorization:`Bearer ${e}`}});if(!t.ok)throw new Error("Failed to fetch jobs");const a=await t.json();this.jobs=a}catch(e){console.error("Error fetching jobs for user:",e)}finally{this.isLoading=!1}},goToEdit(e){this.$router.push({name:"edit-providers",params:{id:e}})},goToMore(e){this.$router.push({name:"view-more",params:{id:e}})},confirmDelete(e){this.selectedAboutId=e,this.showModal=!0},closeModal(){this.showModal=!1,this.selectedAboutId=null},async deleteAbout(e){const t=localStorage.getItem("adminToken");try{const a=await fetch(`${de}/admin/delete_job_provider/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`}}),s=await a.json();a.ok?this.jobs=this.jobs.filter((t=>t.users_id!==e)):console.error("Failed to delete:",s.message)}catch(a){console.error("Error deleting job:",a)}finally{this.closeModal()}},async getUserIdFromEmail(){const e=localStorage.getItem("adminToken");if(e)try{const t=JSON.parse(atob(e.split(".")[1]));this.userEmail||(this.userEmail=t.email);const a=await fetch(`${de}/get_user_id_by_email/${this.userEmail}`,{headers:{Authorization:`Bearer ${e}`}}),s=await a.json();a.ok?(this.userId=s.users_id,this.fetchJobsByUser()):console.error("Unable to get user ID:",s.message)}catch(t){console.error("Error getting user ID:",t)}}}};const By=(0,n.A)(Vy,[["render",Xy],["__scopeId","data-v-8cd5546a"]]);var Jy=By;const Ny={class:"page-wrapper",id:"main-wrapper","data-layout":"vertical","data-navbarbg":"skin6","data-sidebartype":"full","data-sidebar-description":"fixed","data-header-description":"fixed"},Qy={class:"body-wrapper"},zy={class:"mx-4"},Ry={class:"form-group row"},Wy={class:"form-label"},Oy={class:"form-control-plaintext"},Hy={class:"col-md-6"},Zy=["href"],Ky=["src"],qy={key:1};function Gy(e,t,a,s,r,i){const l=(0,o.g2)("IndexComponent");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(l),(0,o.Lk)("div",Ny,[(0,o.Lk)("div",Qy,[t[5]||(t[5]=(0,o.Lk)("h5",{class:"card-title fw-semibold mb-4",style:{color:"#E960A6"}},[(0,o.Lk)("i",{class:"ti ti-user-plus"}),(0,o.eW)(" Job Provider's profile ")],-1)),t[6]||(t[6]=(0,o.Lk)("div",{class:"card-body"},null,-1)),(0,o.Lk)("div",zy,[r.message?((0,o.uX)(),(0,o.CE)("div",{key:0,class:(0,L.C4)(["alert",r.messageType])},(0,L.v_)(r.message),3)):(0,o.Q3)("",!0),(0,o.Lk)("div",Ry,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(r.personalFields,((e,t)=>((0,o.uX)(),(0,o.CE)("div",{class:"col-md-6",key:t},[(0,o.Lk)("label",Wy,(0,L.v_)(e.label),1),(0,o.Lk)("p",Oy,(0,L.v_)(e.isDate?i.formatDate(r.form[e.model]):r.form[e.model]),1)])))),128)),(0,o.Lk)("div",Hy,[t[1]||(t[1]=(0,o.Lk)("strong",null,"Profile Image:",-1)),t[2]||(t[2]=(0,o.Lk)("br",null,null,-1)),(0,o.Lk)("a",{href:r.uploadsUrl+r.form.image,target:"_blank"},[(0,o.Lk)("img",{src:r.uploadsUrl+r.form.image,alt:"Profile",class:"img-thumbnail",width:"250"},null,8,Ky)],8,Zy)])]),0===r.status||1===r.status?((0,o.uX)(),(0,o.CE)("div",qy,[(0,o.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>i.handleStatusChange&&i.handleStatusChange(...e)),class:(0,L.C4)(["btn mt-3",0===r.status?"btn-primary":"btn-unpproved"])},(0,L.v_)(0===r.status?"Approve":"Unapprove"),3)])):(0,o.Q3)("",!0),t[3]||(t[3]=(0,o.Lk)("br",null,null,-1)),t[4]||(t[4]=(0,o.Lk)("br",null,null,-1))])])])],64)}var Yy={name:"ProfileComponent",components:{IndexComponent:Tb},data(){return{form:{first_name:"",email:"",category:"",last_name:"",fathers_name:"",mothers_name:"",telephone:"",province:"",district:"",sector:"",cell:"",gender:"",created_at:"",country:"",village:"",image:""},uploadsUrl:`${de}/uploads/profile/`,selectedCategoryType:"",userId:"",userIdurl:"",userEmail:"",status:null,message:null,messageType:null,categoryTypes:[],categories:[],categoryName:"Unknown",personalFields:[{label:"Category",model:"category"},{label:"Email",model:"email"},{label:"First Name",model:"first_name"},{label:"Last Name",model:"last_name"},{label:"Country",model:"country"},{label:"Province",model:"province"},{label:"District",model:"district"},{label:"Sector",model:"sector"},{label:"Cell",model:"cell"},{label:"Village",model:"village"},{label:"Telephone",model:"telephone"},{label:"Gender",model:"gender"},{label:"Registered on",model:"created_at",isDate:!0}]}},mounted(){this.userIdurl=this.$route.params.id,this.getUserIdFromEmail(),this.loadCategoryTypes()},methods:{formatDate(e){if(!e)return"";const t=new Date(e);return t.toISOString().slice(0,19).replace("T"," ")},async getUserIdFromEmail(){const e=localStorage.getItem("adminToken");if(e)try{const t=JSON.parse(atob(e.split(".")[1]));this.userEmail=t.email;const a=await fetch(`${de}/get_user_id_by_email/${this.userEmail}`,{headers:{Authorization:`Bearer ${e}`}}),s=await a.json();a.ok?(this.userId=s.users_id,this.fetchProfile(),this.fetchCategoryNameByUserId(),this.fetchStatus()):(this.message=s.message||"Unable to get user ID.",this.messageType="alert-danger")}catch(t){console.error("Error getting users_id:",t),this.message="Failed to fetch user ID.",this.messageType="alert-danger"}},async fetchProfile(){try{const e=await fetch(`${de}/admin/job_providers/${this.userIdurl}`,{headers:{Authorization:`Bearer ${localStorage.getItem("adminToken")}`}}),t=await e.json();e.ok?(this.form={...this.form,...t},t.image&&(this.form.image=t.image),t.categories_id&&await this.determineCategoryType(t.categories_id)):(this.message=t.message||"Failed to fetch profile",this.messageType="alert-danger")}catch(e){console.error("Error fetching profile:",e),this.message="Error loading profile.",this.messageType="alert-danger"}},async fetchStatus(){try{const e=await fetch(`${de}/provider/status/${this.userIdurl}`,{headers:{Authorization:`Bearer ${localStorage.getItem("adminToken")}`}}),t=await e.json();e.ok?this.status=Number(t.status):(this.status=null,console.error("Failed to fetch status:",t.message))}catch(e){console.error("Error fetching status:",e),this.status=null}},async handleStatusChange(){const e=localStorage.getItem("adminToken"),t=0===this.status?`${de}/admin/approve/${this.userIdurl}`:`${de}/admin/unapproved/${this.userIdurl}`;try{const a=await fetch(t,{method:"POST",headers:{Authorization:`Bearer ${e}`}}),s=await a.json();console.log("API Response:",a.status,s),a.ok?(this.message=s.message||"Status updated successfully.",this.messageType="alert-success",this.fetchStatus()):(this.message=s.message||"Failed to update status.",this.messageType="alert-danger")}catch(a){console.error("Error updating status:",a),this.message="Server error updating status.",this.messageType="alert-danger"}},async fetchCategoryNameByUserId(){try{const e=await fetch(`${de}/category/${this.userIdurl}`),t=await e.json();e.ok&&t.name?this.categoryName=t.name:this.categoryName="Unknown"}catch(e){console.error("Failed to fetch category name:",e),this.categoryName="Error fetching category"}},async loadCategoryTypes(){try{const e=await fetch(`${de}/category-types`),t=await e.json();this.categoryTypes=t}catch(e){console.error("Failed to load category types:",e)}},async loadCategories(){try{const e=await fetch(`${de}/categories/${this.selectedCategoryType}`),t=await e.json();this.categories=t}catch(e){console.error("Failed to load categories:",e)}},async determineCategoryType(e){console.log("Determining category type for:",e)}}};const eL=(0,n.A)(Yy,[["render",Gy],["__scopeId","data-v-6980f0c6"]]);var tL=eL;const aL={class:"page-wrapper",id:"main-wrapper","data-layout":"vertical","data-navbarbg":"skin6","data-sidebartype":"full","data-sidebar-description":"fixed","data-header-description":"fixed"},sL={class:"body-wrapper"},oL={class:"form-group row"},rL={class:"col-md-6"},iL=["for"],lL=["type","onUpdate:modelValue","id"],nL={class:"col-md-6 mt-3"},dL={class:"col-md-6 mt-3"},cL=["href"],mL=["src"];function uL(e,t,a,r,i,l){const n=(0,o.g2)("IndexComponent");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(n),(0,o.Lk)("div",aL,[(0,o.Lk)("div",sL,[t[13]||(t[13]=(0,o.Lk)("h5",{class:"card-title fw-semibold mb-4",style:{color:"#E960A6"}},[(0,o.Lk)("i",{class:"ti ti-user-plus"}),(0,o.eW)(" Update Job provider's profile ")],-1)),(0,o.Lk)("form",{onSubmit:t[3]||(t[3]=(0,s.D$)(((...e)=>l.handleSubmit&&l.handleSubmit(...e)),["prevent"])),class:"mx-4",enctype:"multipart/form-data"},[(0,o.Lk)("div",oL,[(0,o.Lk)("div",rL,[t[5]||(t[5]=(0,o.Lk)("label",{class:"form-label"},"Select Category",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>i.form.category=e),class:"form-control",required:""},t[4]||(t[4]=[(0,o.Lk)("option",{value:"Individual"},"Individual",-1),(0,o.Lk)("option",{value:"Company"},"Company",-1)]),512),[[s.u1,i.form.category]])]),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.personalFields,((e,t)=>((0,o.uX)(),(0,o.CE)("div",{class:"col-md-6",key:t},[(0,o.Lk)("label",{for:e.model,class:"form-label"},(0,L.v_)(e.label),9,iL),(0,o.bo)((0,o.Lk)("input",{type:e.type,"onUpdate:modelValue":t=>i.form[e.model]=t,class:"form-control",id:e.model,required:""},null,8,lL),[[s.hp,i.form[e.model]]])])))),128)),(0,o.Lk)("div",nL,[t[7]||(t[7]=(0,o.Lk)("label",{class:"form-label"},"Gender",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>i.form.gender=e),class:"form-control",required:""},t[6]||(t[6]=[(0,o.Lk)("option",{value:"Male"},"Male",-1),(0,o.Lk)("option",{value:"Female"},"Female",-1),(0,o.Lk)("option",{value:"Other"},"Other",-1)]),512),[[s.u1,i.form.gender]])]),(0,o.Lk)("div",dL,[t[8]||(t[8]=(0,o.Lk)("label",{class:"form-label"},"Upload New Profile Image/Logo (optional)",-1)),(0,o.Lk)("input",{type:"file",onChange:t[2]||(t[2]=e=>l.handleFileChange("image",e)),class:"form-control"},null,32),t[9]||(t[9]=(0,o.Lk)("small",{class:"form-text text-muted"},"Maximum file size: 1MB",-1)),t[10]||(t[10]=(0,o.Lk)("strong",null,"Current image:",-1)),t[11]||(t[11]=(0,o.Lk)("br",null,null,-1)),(0,o.Lk)("a",{href:i.uploadsUrl+i.form.image,target:"_blank"},[(0,o.Lk)("img",{src:i.uploadsUrl+i.form.image,alt:"Profile",class:"img-thumbnail",width:"250"},null,8,mL)],8,cL)])]),i.message?((0,o.uX)(),(0,o.CE)("div",{key:0,class:(0,L.C4)(["alert",i.messageType])},(0,L.v_)(i.message),3)):(0,o.Q3)("",!0),t[12]||(t[12]=(0,o.Lk)("button",{type:"submit",class:"btn btn-primary mb-5"},"Update Profile",-1))],32)])])],64)}var gL={name:"ProfileComponent",components:{IndexComponent:Tb},data(){return{form:{first_name:"",last_name:"",country:"",category:"",telephone:"",province:"",district:"",sector:"",cell:"",village:"",gender:"",image:null,image_url:""},uploadsUrl:`${de}/uploads/profile/`,userId:"",userIdurl:null,userEmail:"",message:null,messageType:null,personalFields:[{label:"First Name",model:"first_name",type:"text"},{label:"Last Name",model:"last_name",type:"text"},{label:"Country",model:"country",type:"text"},{label:"Province",model:"province",type:"text"},{label:"District",model:"district",type:"text"},{label:"Sector",model:"sector",type:"text"},{label:"Cell",model:"cell",type:"text"},{label:"Village",model:"village",type:"text"},{label:"Telephone",model:"telephone",type:"text"}]}},mounted(){this.getUserIdFromEmail(),this.userIdurl=this.$route.params.id},methods:{async getUserIdFromEmail(){const e=localStorage.getItem("adminToken");if(e)try{const t=JSON.parse(atob(e.split(".")[1]));this.userEmail=t.email;const a=await fetch(`${de}/get_user_id_by_email/${this.userEmail}`,{headers:{Authorization:`Bearer ${e}`}}),s=await a.json();a.ok?(this.userId=s.users_id,this.fetchProfile()):(this.message=s.message||"Unable to get user ID.",this.messageType="alert-danger")}catch(t){console.error("Error getting users_id:",t),this.message="Failed to fetch user ID.",this.messageType="alert-danger"}},async fetchProfile(){try{const e=await fetch(`${de}/admin/job_providers/${this.userIdurl}`,{headers:{Authorization:`Bearer ${localStorage.getItem("adminToken")}`}}),t=await e.json();e.ok?(this.form={...this.form,...t},t.image&&(this.form.image=t.image,this.form.image_url=this.uploadsUrl+t.image)):(this.message=t.message||"Failed to fetch profile",this.messageType="alert-danger")}catch(e){console.error("Error fetching profile:",e),this.message="Error loading profile.",this.messageType="alert-danger"}},handleFileChange(e,t){const a=t.target.files[0];a&&(this.form[e]=a,this.form.image_url=URL.createObjectURL(a))},async handleSubmit(){const e=new FormData;for(const a in this.form)"image"===a&&"string"===typeof this.form.image?e.append("existing_image",this.form.image):null!==this.form[a]&&e.append(a,this.form[a]);try{const t=await fetch(`${de}/provider/update_profile/${this.userIdurl}`,{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("adminToken")}`},body:e}),a=await t.json();t.ok?(this.message=a.message,this.messageType="alert-success",this.fetchProfile()):(this.message=a.message||"Failed to update profile.",this.messageType="alert-danger")}catch(t){console.error("Error updating profile:",t),this.message="An error occurred while updating profile.",this.messageType="alert-danger"}}}};const hL=(0,n.A)(gL,[["render",uL],["__scopeId","data-v-21dcf538"]]);var pL=hL;const bL={class:"page-wrapper",id:"main-wrapper","data-layout":"vertical","data-navbarbg":"skin6","data-sidebartype":"full","data-sidebar-description":"fixed","data-header-description":"fixed"},fL={class:"body-wrapper"},kL={class:"d-flex justify-content-center mb-3"},vL={key:0,class:"d-flex justify-content-center my-4"},yL={key:1,class:"table-responsive"},LL={class:"table table-bordered"},CL={class:"d-flex gap-2"},wL=["onClick","disabled"],_L=["onClick"],AL=["onClick","disabled"],EL={key:2,class:"d-flex flex-column align-items-center my-3"},IL={class:"pagination"},xL=["onClick"],PL={key:0,class:"modal-overlay"},SL={class:"modal-content"};function FL(e,t,a,r,i,l){const n=(0,o.g2)("IndexComponent");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(n),(0,o.Lk)("div",bL,[(0,o.Lk)("div",fL,[t[7]||(t[7]=(0,o.Lk)("h5",{class:"card-title fw-semibold mb-4",style:{color:"#E960A6"}},[(0,o.Lk)("i",{class:"ti ti-user-plus"}),(0,o.eW)(" View agent ")],-1)),(0,o.Lk)("div",kL,[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>i.searchQuery=e),type:"text",class:"form-control",placeholder:"Search by names, province or district",style:{"max-width":"450px"}},null,512),[[s.Jo,i.searchQuery]])]),0===l.filteredAgents.length?((0,o.uX)(),(0,o.CE)("div",vL,t[5]||(t[5]=[(0,o.Lk)("div",{class:"alert alert-danger text-center",style:{width:"40rem"}}," No agent found. ",-1)]))):((0,o.uX)(),(0,o.CE)("div",yL,[(0,o.Lk)("table",LL,[t[6]||(t[6]=(0,o.Lk)("thead",{class:"table-light"},[(0,o.Lk)("tr",null,[(0,o.Lk)("th",null,"ID"),(0,o.Lk)("th",null,"NAMES"),(0,o.Lk)("th",null,"COUNTRY"),(0,o.Lk)("th",null,"PROVINCE"),(0,o.Lk)("th",null,"DISTRICT"),(0,o.Lk)("th",null,"ACTION")])],-1)),(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.paginatedAgents,((e,t)=>((0,o.uX)(),(0,o.CE)("tr",{key:e.users_id},[(0,o.Lk)("td",null,(0,L.v_)((i.currentPage-1)*i.perPage+t+1),1),(0,o.Lk)("td",null,(0,L.v_)(e.first_name)+" "+(0,L.v_)(e.last_name),1),(0,o.Lk)("td",null,(0,L.v_)(e.country),1),(0,o.Lk)("td",null,(0,L.v_)(e.province),1),(0,o.Lk)("td",null,(0,L.v_)(e.district),1),(0,o.Lk)("td",null,[(0,o.Lk)("div",CL,[(0,o.Lk)("button",{class:"btn btn-primary btn-sm",onClick:t=>l.goToEdit(e.users_id),disabled:!l.isAdmin},"Edit",8,wL),(0,o.Lk)("button",{class:"btn btn-cancel btn-sm",onClick:t=>l.goToMore(e.users_id)},"More",8,_L),(0,o.Lk)("button",{class:"btn btn-primary btn-sm",onClick:t=>l.confirmDelete(e.users_id),disabled:!l.isAdmin},"Delete",8,AL)])])])))),128))])])])),l.totalPages>1?((0,o.uX)(),(0,o.CE)("div",EL,[(0,o.Lk)("nav",null,[(0,o.Lk)("ul",IL,[(0,o.Lk)("li",{class:(0,L.C4)(["page-item",{disabled:1===i.currentPage}])},[(0,o.Lk)("button",{class:"page-link",onClick:t[1]||(t[1]=e=>l.changePage(i.currentPage-1))},"Previous")],2),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.totalPages,(e=>((0,o.uX)(),(0,o.CE)("li",{key:e,class:(0,L.C4)(["page-item",{active:i.currentPage===e}])},[(0,o.Lk)("button",{class:"page-link",onClick:t=>l.changePage(e)},(0,L.v_)(e),9,xL)],2)))),128)),(0,o.Lk)("li",{class:(0,L.C4)(["page-item",{disabled:i.currentPage===l.totalPages}])},[(0,o.Lk)("button",{class:"page-link",onClick:t[2]||(t[2]=e=>l.changePage(i.currentPage+1))},"Next")],2)])])])):(0,o.Q3)("",!0)])]),i.showModal?((0,o.uX)(),(0,o.CE)("div",PL,[(0,o.Lk)("div",SL,[t[8]||(t[8]=(0,o.Lk)("h5",null,"Are you sure you want to delete this view agent content?",-1)),(0,o.Lk)("div",null,[(0,o.Lk)("button",{class:"btn btn-primary mt-3",onClick:t[3]||(t[3]=e=>l.deleteAbout(i.selectedAboutId))},"Yes, Delete"),(0,o.Lk)("button",{class:"btn btn-cancel mt-3",style:{"background-color":"teal",color:"white"},onClick:t[4]||(t[4]=(...e)=>l.closeModal&&l.closeModal(...e))}," Cancel ")])])])):(0,o.Q3)("",!0)],64)}var ML={name:"MainWrapper",components:{IndexComponent:Tb},data(){return{jobs:[],searchQuery:"",currentPage:1,perPage:20,userEmail:"",userId:"",showModal:!1,selectedAboutId:null}},computed:{isAdmin(){return"admin@kozi.rw"===this.userEmail.toLowerCase()},filteredAgents(){const e=this.searchQuery.toLowerCase();return this.jobs.filter((t=>{const a=`${t.first_name} ${t.last_name}`.toLowerCase(),s=t.province?.toLowerCase()||"",o=t.district?.toLowerCase()||"";return a.includes(e)||s.includes(e)||o.includes(e)}))},paginatedAgents(){const e=(this.currentPage-1)*this.perPage,t=e+this.perPage;return this.filteredAgents.slice(e,t)},totalPages(){return Math.ceil(this.filteredAgents.length/this.perPage)}},watch:{searchQuery(){this.currentPage=1}},mounted(){this.userEmail=localStorage.getItem("userEmail")||"",this.userEmail&&this.getUserIdFromEmail()},methods:{changePage(e){e>=1&&e<=this.totalPages&&(this.currentPage=e)},async fetchJobsByUser(){try{const e=localStorage.getItem("adminToken");if(!this.userId)return;const t=await fetch(`${de}/admin/select_agent`,{headers:{Authorization:`Bearer ${e}`}});if(!t.ok)throw new Error("Failed to fetch agents");const a=await t.json();this.jobs=a}catch(e){console.error("Error fetching agents:",e)}},goToEdit(e){this.$router.push({name:"edit-agent",params:{id:e}})},goToMore(e){this.$router.push({name:"more-agent",params:{id:e}})},confirmDelete(e){this.selectedAboutId=e,this.showModal=!0},closeModal(){this.showModal=!1,this.selectedAboutId=null},async deleteAbout(e){const t=localStorage.getItem("adminToken");try{const a=await fetch(`${de}/admin/delete_agent/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`}}),s=await a.json();a.ok?this.jobs=this.jobs.filter((t=>t.users_id!==e)):console.error("Failed to delete:",s.message)}catch(a){console.error("Error deleting agent:",a)}finally{this.closeModal()}},async getUserIdFromEmail(){const e=localStorage.getItem("adminToken");if(e)try{const t=JSON.parse(atob(e.split(".")[1]));this.userEmail||(this.userEmail=t.email);const a=await fetch(`${de}/get_user_id_by_email/${this.userEmail}`,{headers:{Authorization:`Bearer ${e}`}}),s=await a.json();a.ok?(this.userId=s.users_id,this.fetchJobsByUser()):console.error("Unable to get user ID:",s.message)}catch(t){console.error("Error getting user ID:",t)}}}};const TL=(0,n.A)(ML,[["render",FL],["__scopeId","data-v-53c72e54"]]);var jL=TL;const DL={class:"page-wrapper",id:"main-wrapper","data-layout":"vertical","data-navbarbg":"skin6","data-sidebartype":"full"},UL={class:"body-wrapper"},$L={class:"form-group row"},XL=["for"],VL=["type","onUpdate:modelValue","id"],BL={class:"col-md-6"};function JL(e,t,a,r,i,l){const n=(0,o.g2)("IndexComponent");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(n),(0,o.Lk)("div",DL,[(0,o.Lk)("div",UL,[t[5]||(t[5]=(0,o.Lk)("h5",{class:"card-title fw-semibold mb-4",style:{color:"#E960A6"}},[(0,o.Lk)("i",{class:"ti ti-user-plus"}),(0,o.eW)(" Register New Job Provider")],-1)),(0,o.Lk)("form",{onSubmit:t[1]||(t[1]=(0,s.D$)(((...e)=>l.handleSubmit&&l.handleSubmit(...e)),["prevent"])),class:"mx-4",enctype:"multipart/form-data"},[(0,o.Lk)("div",$L,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.personalFields,((e,t)=>((0,o.uX)(),(0,o.CE)("div",{class:"col-md-6",key:t},[(0,o.Lk)("label",{for:e.model,class:"form-label"},(0,L.v_)(e.label),9,XL),(0,o.bo)((0,o.Lk)("input",{type:e.type,"onUpdate:modelValue":t=>i.form[e.model]=t,class:"form-control",id:e.model,required:""},null,8,VL),[[s.hp,i.form[e.model]]])])))),128)),(0,o.Lk)("div",BL,[t[3]||(t[3]=(0,o.Lk)("label",{class:"form-label"},"Gender",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>i.form.gender=e),class:"form-control",required:""},t[2]||(t[2]=[(0,o.Lk)("option",{value:"",disabled:""},"Select Gender",-1),(0,o.Lk)("option",{value:"Male"},"Male",-1),(0,o.Lk)("option",{value:"Female"},"Female",-1),(0,o.Lk)("option",{value:"Other"},"Other",-1)]),512),[[s.u1,i.form.gender]])])]),i.message?((0,o.uX)(),(0,o.CE)("div",{key:0,class:(0,L.C4)(["alert",i.messageType])},(0,L.v_)(i.message),3)):(0,o.Q3)("",!0),t[4]||(t[4]=(0,o.Lk)("button",{type:"submit",class:"btn btn-primary mb-3"},"Register",-1))],32)])])],64)}var NL={name:"RegisterJobProviderComponent",components:{IndexComponent:Tb},data(){return{form:{role_id:null,email:"",password:"",first_name:"",last_name:"",country:"",telephone:"",province:"",district:"",sector:"",cell:"",village:"",gender:""},message:null,messageType:null,personalFields:[{label:"Email",model:"email",type:"text"},{label:"Password",model:"password",type:"password"},{label:"First Name",model:"first_name",type:"text"},{label:"Last Name",model:"last_name",type:"text"},{label:"Country",model:"country",type:"text"},{label:"Province",model:"province",type:"text"},{label:"District",model:"district",type:"text"},{label:"Sector",model:"sector",type:"text"},{label:"Cell",model:"cell",type:"text"},{label:"Village",model:"village",type:"text"},{label:"Telephone",model:"telephone",type:"text"}]}},methods:{async handleSubmit(){const e=new FormData;Object.entries(this.form).forEach((([t,a])=>{e.append(t,a)}));try{const t=await fetch(`${de}/admin/add_agent`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("adminToken")}`},body:e}),a=await t.json();t.ok?(this.message=a.message||"Agent registered successfully.",this.messageType="alert-success"):(this.message=a.message||"Failed to register job provider.",this.messageType="alert-danger")}catch(t){console.error("Error registering job provider:",t),this.message="An error occurred while submitting the form.",this.messageType="alert-danger"}},async loadRoleId(){try{const e=localStorage.getItem("adminToken"),t=await ne.A.get(`${de}/admin/role/agent`,{headers:{Authorization:`Bearer ${e}`}});this.form.role_id=t.data.role_id||3}catch(e){console.error("Failed to fetch role_id:",e),this.form.role_id=3}}},mounted(){this.loadRoleId()}};const QL=(0,n.A)(NL,[["render",JL],["__scopeId","data-v-b48346cc"]]);var zL=QL;const RL={class:"page-wrapper",id:"main-wrapper","data-layout":"vertical","data-navbarbg":"skin6","data-sidebartype":"full","data-sidebar-description":"fixed","data-header-description":"fixed"},WL={class:"body-wrapper"},OL={class:"form-group row"},HL=["for"],ZL=["type","onUpdate:modelValue","id"],KL={class:"col-md-6"};function qL(e,t,a,r,i,l){const n=(0,o.g2)("IndexComponent");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(n),(0,o.Lk)("div",RL,[(0,o.Lk)("div",WL,[t[5]||(t[5]=(0,o.Lk)("h5",{class:"card-title fw-semibold mb-4"},"Update Agent Profile",-1)),(0,o.Lk)("form",{onSubmit:t[1]||(t[1]=(0,s.D$)(((...e)=>l.handleSubmit&&l.handleSubmit(...e)),["prevent"])),class:"mx-4",enctype:"multipart/form-data"},[i.message?((0,o.uX)(),(0,o.CE)("div",{key:0,class:(0,L.C4)(["alert",i.messageType])},(0,L.v_)(i.message),3)):(0,o.Q3)("",!0),(0,o.Lk)("div",OL,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.personalFields,((e,t)=>((0,o.uX)(),(0,o.CE)("div",{class:"col-md-6",key:t},[(0,o.Lk)("label",{for:e.model,class:"form-label"},(0,L.v_)(e.label),9,HL),(0,o.bo)((0,o.Lk)("input",{type:e.type,"onUpdate:modelValue":t=>i.form[e.model]=t,class:"form-control",id:e.model,required:""},null,8,ZL),[[s.hp,i.form[e.model]]])])))),128)),(0,o.Lk)("div",KL,[t[3]||(t[3]=(0,o.Lk)("label",{class:"form-label"},"Gender",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>i.form.gender=e),class:"form-control",required:""},t[2]||(t[2]=[(0,o.Lk)("option",{value:"Male"},"Male",-1),(0,o.Lk)("option",{value:"Female"},"Female",-1),(0,o.Lk)("option",{value:"Other"},"Other",-1)]),512),[[s.u1,i.form.gender]])])]),t[4]||(t[4]=(0,o.Lk)("button",{type:"submit",class:"btn btn-primary mb-3"},"Update Profile",-1))],32)])])],64)}var GL={name:"ProfileComponent",components:{IndexComponent:Tb},data(){return{form:{first_name:"",last_name:"",country:"",category:"",telephone:"",province:"",district:"",sector:"",cell:"",village:"",gender:"",image:null,image_url:""},uploadsUrl:`${de}/uploads/profile/`,userId:"",userIdurl:null,userEmail:"",message:null,messageType:null,personalFields:[{label:"Email",model:"email",type:"text"},{label:"First Name",model:"first_name",type:"text"},{label:"Last Name",model:"last_name",type:"text"},{label:"Country",model:"country",type:"text"},{label:"Province",model:"province",type:"text"},{label:"District",model:"district",type:"text"},{label:"Sector",model:"sector",type:"text"},{label:"Cell",model:"cell",type:"text"},{label:"Village",model:"village",type:"text"},{label:"Telephone",model:"telephone",type:"text"}]}},mounted(){this.getUserIdFromEmail(),this.userIdurl=this.$route.params.id},methods:{async getUserIdFromEmail(){const e=localStorage.getItem("adminToken");if(e)try{const t=JSON.parse(atob(e.split(".")[1]));this.userEmail=t.email;const a=await fetch(`${de}/get_user_id_by_email/${this.userEmail}`,{headers:{Authorization:`Bearer ${e}`}}),s=await a.json();a.ok?(this.userId=s.users_id,this.fetchProfile()):(this.message=s.message||"Unable to get user ID.",this.messageType="alert-danger")}catch(t){console.error("Error getting users_id:",t),this.message="Failed to fetch user ID.",this.messageType="alert-danger"}},async fetchProfile(){try{const e=await fetch(`${de}/admin/select_agent/${this.userIdurl}`,{headers:{Authorization:`Bearer ${localStorage.getItem("adminToken")}`}}),t=await e.json();e.ok?(this.form={...this.form,...t},t.image&&(this.form.image=t.image,this.form.image_url=this.uploadsUrl+t.image)):(this.message=t.message||"Failed to fetch profile",this.messageType="alert-danger")}catch(e){console.error("Error fetching profile:",e),this.message="Error loading profile.",this.messageType="alert-danger"}},async handleSubmit(){const e=new FormData;for(const a in this.form)"image"===a&&"string"===typeof this.form.image?e.append("existing_image",this.form.image):null!==this.form[a]&&e.append(a,this.form[a]);try{const t=await fetch(`${de}/admin/update_agent/${this.userIdurl}`,{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("adminToken")}`},body:e}),a=await t.json();t.ok?(this.message=a.message,this.messageType="alert-success",this.fetchProfile()):(this.message=a.message||"Failed to update profile.",this.messageType="alert-danger")}catch(t){console.error("Error updating profile:",t),this.message="An error occurred while updating profile.",this.messageType="alert-danger"}}}};const YL=(0,n.A)(GL,[["render",qL],["__scopeId","data-v-35d3e423"]]);var eC=YL;const tC={class:"page-wrapper",id:"main-wrapper","data-layout":"vertical","data-navbarbg":"skin6","data-sidebartype":"full","data-sidebar-description":"fixed","data-header-description":"fixed"},aC={class:"body-wrapper"},sC={class:"container-fluid"},oC={class:"row"},rC={class:"col-xl-6 col-md-6 mb-4"},iC={class:"card border-left-primary py-3 shadow-lg"},lC={class:"card-body"},nC={class:"row no-gutters align-items-center"},dC={class:"col mr-2"},cC={class:"h5 mb-0 font-weight-bold text-gray-800"},mC={class:"col-xl-6 col-md-6 mb-4"},uC={class:"card border-right-success py-3",style:{"box-shadow":"rgba(0, 0, 0, 0.2) 0px 5px 15px"}},gC={class:"card-body"},hC={class:"row no-gutters align-items-center"},pC={class:"col mr-2"},bC={class:"h5 mb-0 font-weight-bold text-gray-800"};function fC(e,t,a,s,r,i){const l=(0,o.g2)("IndexComponent");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(l),(0,o.Lk)("div",tC,[(0,o.Lk)("div",aC,[(0,o.Lk)("div",sC,[(0,o.Lk)("div",oC,[(0,o.Lk)("div",rC,[(0,o.Lk)("div",iC,[(0,o.Lk)("div",lC,[(0,o.Lk)("div",nC,[(0,o.Lk)("div",dC,[t[0]||(t[0]=(0,o.Lk)("div",{class:"text-xs font-weight-bold text-primary text-uppercase mb-1"}," My seekers ",-1)),(0,o.Lk)("div",cC,(0,L.v_)(r.jobs.length),1)]),t[1]||(t[1]=(0,o.Lk)("div",{class:"col-auto"},[(0,o.Lk)("i",{class:"ti ti-notebook fa-2x",style:{color:"#FFE338"}})],-1))])])])]),(0,o.Lk)("div",mC,[(0,o.Lk)("div",uC,[(0,o.Lk)("div",gC,[(0,o.Lk)("div",hC,[(0,o.Lk)("div",pC,[t[2]||(t[2]=(0,o.Lk)("div",{class:"text-xs font-weight-bold text-success text-uppercase mb-1"}," All job Seekers ",-1)),(0,o.Lk)("div",bC,(0,L.v_)(r.blogsCount),1)]),t[3]||(t[3]=(0,o.Lk)("div",{class:"col-auto"},[(0,o.Lk)("i",{class:"ti ti-archive fa-2x",style:{color:"#FFE338"}})],-1))])])])])]),t[4]||(t[4]=(0,o.Fv)('<div class="row" data-v-a5303f1a><h3 style="text-align:center;color:#5F9EA0;font-family:&#39;Michroma&#39;, sans-serif;" data-v-a5303f1a> Benefits of Kozi Caretakers </h3><hr style="margin:20px auto;border:0;height:1px;width:60%;background:#EA60A7;" data-v-a5303f1a><div class="col-md-6 other-div3" data-v-a5303f1a><h3 style="color:#5F9EA0;margin-left:60px;" data-v-a5303f1a>Benefits of Kozi Caretakers</h3><hr style="margin:20px auto;border:0;height:1px;width:60%;background:#EA60A7;" data-v-a5303f1a><br data-v-a5303f1a> Wide Range of Opportunities: Discover diverse job listings tailored to your skills, spanning from housekeeping to specialized services.<br data-v-a5303f1a><br data-v-a5303f1a> Continuous Skill Enhancement: Engage in our comprehensive training programs and workshops to sharpen your professional skills.<br data-v-a5303f1a><br data-v-a5303f1a> Community Support: Connect with a supportive community of fellow job seekers to share experiences and gain valuable advice.<br data-v-a5303f1a><br data-v-a5303f1a> Exclusive Access: Gain access to exclusive job listings available only to Kozi Caretaker members, enhancing your employment opportunities.<br data-v-a5303f1a><br data-v-a5303f1a> Thank you for choosing Kozi Caretakers. Together, we&#39;re transforming homes and empowering lives. </div><div class="col-md-6 other-div3" data-v-a5303f1a><h3 style="color:#5F9EA0;margin-left:60px;" data-v-a5303f1a>Benefits of registering seeker</h3><hr style="margin:20px auto;border:0;height:1px;width:60%;background:#EA60A7;" data-v-a5303f1a><br data-v-a5303f1a><strong data-v-a5303f1a>Flexibility:</strong> Agents can work at their own pace and choose their working hours, providing flexibility that can be appealing to a wide range of individuals, including students, part-time workers, and stay-at-home parents.<br data-v-a5303f1a><br data-v-a5303f1a><strong data-v-a5303f1a>Skill Development:</strong> Agents gain experience in communication, sales, and marketing, which can enhance their professional skills and future career prospects.<br data-v-a5303f1a><br data-v-a5303f1a><strong data-v-a5303f1a>Networking Opportunities:</strong> Agents can expand their professional network by interacting with job seekers and potential employers.<br data-v-a5303f1a><br data-v-a5303f1a><strong data-v-a5303f1a>Recognition and Rewards:</strong> Top-performing agents can be recognized and rewarded with additional bonuses, certificates, or public acknowledgment, boosting their morale and motivation. </div></div>',1))])])])],64)}const kC={id:"main-wrapper"};function vC(e,t,a,s,r,i){const l=(0,o.g2)("SidebarComponent"),n=(0,o.g2)("HeaderComponent");return(0,o.uX)(),(0,o.CE)("div",kC,[(0,o.bF)(l,{visible:r.sidebarVisible,onCloseSidebar:t[0]||(t[0]=e=>r.sidebarVisible=!1)},null,8,["visible"]),(0,o.Lk)("div",{class:(0,L.C4)(["body-wrapper",{hidden:r.isMobile&&r.sidebarVisible}])},[(0,o.bF)(n,{onToggleSidebar:i.toggleSidebar},null,8,["onToggleSidebar"])],2)])}const yC={class:"app-header"},LC={class:"navbar navbar-expand-lg navbar-light px-3 fixed-top",style:{"background-color":"white"}},CC={class:"navbar-nav"},wC={class:"nav-item d-block d-xl-none"},_C={class:"navbar-collapse justify-content-end px-0",id:"navbarNav"},AC={class:"navbar-nav flex-row ms-auto align-items-center justify-content-end"},EC={class:"nav-item dropdown"},IC={class:"nav-link nav-icon-hover",href:"javascript:void(0)",id:"userDropdown","data-bs-toggle":"dropdown","aria-expanded":"false"},xC=["src"],PC={class:"dropdown-menu dropdown-menu-end dropdown-menu-animate-up","aria-labelledby":"userDropdown"};function SC(e,t,a,s,r,i){const l=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("header",yC,[(0,o.Lk)("nav",LC,[(0,o.Lk)("ul",CC,[(0,o.Lk)("li",wC,[(0,o.Lk)("a",{class:"nav-link sidebartoggler nav-icon-hover",href:"javascript:void(0)",onClick:t[0]||(t[0]=t=>e.$emit("toggle-sidebar")),title:"Toggle Sidebar"},t[2]||(t[2]=[(0,o.Lk)("i",{class:"ti ti-menu-2"},null,-1)]))])]),(0,o.Lk)("div",_C,[(0,o.Lk)("ul",AC,[(0,o.Lk)("li",EC,[(0,o.Lk)("a",IC,[(0,o.Lk)("img",{src:r.profileImage,width:"35",height:"35",class:"rounded-circle",alt:"User profile"},null,8,xC)]),(0,o.Lk)("ul",PC,[(0,o.Lk)("li",null,[(0,o.bF)(l,{to:"My-profile",class:"dropdown-item d-flex align-items-center"},{default:(0,o.k6)((()=>t[3]||(t[3]=[(0,o.Lk)("i",{class:"ti ti-user fs-6 me-2"},null,-1),(0,o.eW)(" My Profile ")]))),_:1})]),(0,o.Lk)("li",null,[(0,o.bF)(l,{to:"change-password",class:"dropdown-item d-flex align-items-center"},{default:(0,o.k6)((()=>t[4]||(t[4]=[(0,o.Lk)("i",{class:"fa-solid fa-key me-2"},null,-1),(0,o.eW)(" Credentials ")]))),_:1})]),(0,o.Lk)("li",null,[(0,o.Lk)("a",{href:"javascript:void(0)",class:"dropdown-item",onClick:t[1]||(t[1]=(...e)=>i.logout&&i.logout(...e))},t[5]||(t[5]=[(0,o.Lk)("i",{class:"ti ti-square-arrow-left me-2",style:{width:"2rem"}},null,-1),(0,o.eW)(" Logout ")]))])])])])])])])}var FC={name:"HeaderComponent",data(){return{profileImage:a(2231)}},methods:{logout(){localStorage.removeItem("agentToken"),this.$router.push("/agent")}}};const MC=(0,n.A)(FC,[["render",SC],["__scopeId","data-v-4b439e02"]]);var TC=MC;const jC={class:"sidebar-header"},DC={class:"brand-logo"},UC={href:"dashboard",class:"text-nowrap logo-img"},$C=["src"],XC={class:"sidebar-nav"},VC=["href"];function BC(e,t,s,r,i,l){const n=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("aside",{class:(0,L.C4)(["sidebar",{visible:s.visible}])},[(0,o.Lk)("div",jC,[(0,o.Lk)("div",DC,[(0,o.Lk)("a",UC,[(0,o.Lk)("img",{src:a(5549),alt:"Logo",style:{width:"10rem"}},null,8,$C)])]),(0,o.Lk)("button",{class:"close-btn",onClick:t[0]||(t[0]=t=>e.$emit("close-sidebar"))},"Ã")]),(0,o.Lk)("nav",XC,[(0,o.Lk)("ul",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(r.menuItems,(a=>((0,o.uX)(),(0,o.CE)("li",{key:a.link},[a.external?((0,o.uX)(),(0,o.CE)("a",{key:0,href:a.link,target:"_blank",rel:"noopener noreferrer",class:"sidebar-nav-link"},[(0,o.Lk)("i",{class:(0,L.C4)(a.icon),style:{"margin-right":"8px","font-size":"1.25rem"}},null,2),(0,o.eW)(" "+(0,L.v_)(a.name),1)],8,VC)):((0,o.uX)(),(0,o.Wv)(n,{key:1,to:a.link,onClick:t[1]||(t[1]=t=>e.$emit("close-sidebar")),class:(0,L.C4)({"router-link-active":r.isActive(a.matchPrefix)})},{default:(0,o.k6)((()=>[(0,o.Lk)("i",{class:(0,L.C4)(a.icon),style:{"margin-right":"8px","font-size":"1.25rem"}},null,2),(0,o.eW)(" "+(0,L.v_)(a.name),1)])),_:2},1032,["to","class"]))])))),128))])])],2)}var JC={props:{visible:Boolean},emits:["close-sidebar"],setup(){const e=(0,m.lq)(),t=[{name:"Dashboard",link:"/agent/dashboard",icon:"ti ti-layout-dashboard",matchPrefix:["/agent/dashboard","/agent/index"]},{name:"View Seekers",link:"/agent/view-seekers",matchPrefix:["/agent/view-seekers","/agent/agent-edit-seekers","/agent/agent-view-seekers"],icon:"ti ti-user-check"},{name:"Register Seeker",link:"/agent/register-seeker",icon:"ti ti-user-search",matchPrefix:["/agent/register-seeker"]},{name:"Terms of services",link:"https://kozi.rw/terms-of-service",icon:"ti ti-hotel-service",external:!0}],a=t=>t.some((t=>e.path.startsWith(t)));return{route:e,menuItems:t,isActive:a}}};const NC=(0,n.A)(JC,[["render",BC],["__scopeId","data-v-4a63c4da"]]);var QC=NC,zC={components:{HeaderComponent:TC,SidebarComponent:QC},data(){return{sidebarVisible:!1,isMobile:window.innerWidth<=768}},mounted(){window.addEventListener("resize",this.checkMobile)},beforeUnmount(){window.removeEventListener("resize",this.checkMobile)},methods:{toggleSidebar(){this.sidebarVisible=!this.sidebarVisible},checkMobile(){this.isMobile=window.innerWidth<=768,this.isMobile||(this.sidebarVisible=!0)}}};const RC=(0,n.A)(zC,[["render",vC],["__scopeId","data-v-340001e8"]]);var WC=RC,OC={name:"WelcomeComponent",components:{IndexComponent:WC},data(){return{productsCount:0,blogsCount:0,jobs:[],userEmail:""}},mounted(){this.userEmail=localStorage.getItem("userEmail")||"",ne.A.get(`${de}/providers/count`).then((e=>{void 0!==e.data.count?this.productsCount=e.data.count:console.error("Error fetching product count:",e.data.error||"Unknown error")})).catch((e=>{console.error("Error fetching product count:",e)})),ne.A.get(`${de}/seekers/count`).then((e=>{void 0!==e.data.count?this.blogsCount=e.data.count:console.error("Error fetching blogs count:",e.data.error||"Unknown error")})).catch((e=>{console.error("Error fetching blogs count:",e)})),this.fetchJobsByUser()},methods:{async fetchJobsByUser(){try{const e=localStorage.getItem("agentToken");if(!this.userEmail)return;const t=await fetch(`${de}/admin/registered-seekers/${this.userEmail}`,{headers:{Authorization:`Bearer ${e}`}}),a=await t.json();t.ok?this.jobs=a:console.error("Failed to fetch jobs:",a.message)}catch(e){console.error("Error fetching jobs for user:",e)}}}};const HC=(0,n.A)(OC,[["render",fC],["__scopeId","data-v-a5303f1a"]]);var ZC=HC;const KC={class:"page-wrapper",id:"main-wrapper","data-layout":"vertical","data-navbarbg":"skin6","data-sidebartype":"full","data-sidebar-description":"fixed","data-header-description":"fixed"},qC={class:"body-wrapper"},GC={class:"row mb-3"},YC={class:"col-md-8"},ew={class:"col-md-3"},tw=["value"],aw={key:0,class:"d-flex justify-content-center my-5"},sw={key:1,class:"d-flex justify-content-center my-4"},ow={key:2,class:"table-responsive"},rw={class:"table table-bordered"},iw={class:"d-flex gap-2"},lw=["onClick","disabled"],nw=["onClick"],dw=["onClick","disabled"],cw={key:0,class:"spinner-border spinner-border-sm me-1",role:"status"},mw={key:3,class:"d-flex justify-content-center mt-4"},uw={class:"pagination"},gw=["onClick"],hw={key:0,class:"modal-overlay"},pw={class:"modal-content"},bw=["disabled"],fw={key:0,class:"spinner-border spinner-border-sm me-1",role:"status"},kw=["disabled"];function vw(e,t,a,r,i,l){const n=(0,o.g2)("IndexComponent");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(n),(0,o.Lk)("div",KC,[(0,o.Lk)("div",qC,[t[11]||(t[11]=(0,o.Lk)("h5",{class:"card-title fw-semibold mb-4",style:{color:"#E960A6"}},[(0,o.Lk)("i",{class:"ti ti-user-plus"}),(0,o.eW)(" View Seekers ")],-1)),(0,o.Lk)("div",GC,[(0,o.Lk)("div",YC,[(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>i.searchQuery=e),class:"form-control",placeholder:"Search by name,email, skills , province or  district"},null,512),[[s.Jo,i.searchQuery]])]),(0,o.Lk)("div",ew,[(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>i.selectedCategoryId=e),class:"form-control",style:{height:"48px","padding-top":"8px","padding-bottom":"8px"}},[t[6]||(t[6]=(0,o.Lk)("option",{disabled:"",value:""},"CHOOSE CATEGORY",-1)),t[7]||(t[7]=(0,o.Lk)("option",{value:""},"All Categories",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.categories,(e=>((0,o.uX)(),(0,o.CE)("option",{key:e.id,value:e.id},(0,L.v_)(e.name),9,tw)))),128))],512),[[s.u1,i.selectedCategoryId]])])]),i.isLoading?((0,o.uX)(),(0,o.CE)("div",aw,t[8]||(t[8]=[(0,o.Lk)("div",{class:"text-center"},[(0,o.Lk)("div",{class:"spinner-border text-primary",role:"status",style:{width:"3rem",height:"3rem"}},[(0,o.Lk)("span",{class:"visually-hidden"},"Loading...")]),(0,o.Lk)("div",{class:"mt-2"},[(0,o.Lk)("p",{class:"text-muted"},"Loading job seekers...")])],-1)]))):0===l.filteredJobs.length?((0,o.uX)(),(0,o.CE)("div",sw,t[9]||(t[9]=[(0,o.Lk)("div",{class:"alert alert-danger text-center",style:{width:"40rem"}}," No job seekers found. ",-1)]))):(0,o.Q3)("",!0),!i.isLoading&&l.filteredJobs.length>0?((0,o.uX)(),(0,o.CE)("div",ow,[(0,o.Lk)("table",rw,[t[10]||(t[10]=(0,o.Lk)("thead",{class:"table-light"},[(0,o.Lk)("tr",null,[(0,o.Lk)("th",null,"Ids"),(0,o.Lk)("th",null,"NAMES"),(0,o.Lk)("th",null,"PROVINCE"),(0,o.Lk)("th",null,"CATEGORY"),(0,o.Lk)("th",null,"SKILLS"),(0,o.Lk)("th",null,"SALARY"),(0,o.Lk)("th",null,"ACTION")])],-1)),(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.paginatedJobs,((e,t)=>((0,o.uX)(),(0,o.CE)("tr",{key:e.users_id},[(0,o.Lk)("td",null,(0,L.v_)((i.currentPage-1)*i.itemsPerPage+t+1),1),(0,o.Lk)("td",null,(0,L.v_)(e.first_name)+" "+(0,L.v_)(e.last_name),1),(0,o.Lk)("td",null,(0,L.v_)(e.province),1),(0,o.Lk)("td",null,(0,L.v_)(l.getCategoryName(e.categories_id)),1),(0,o.Lk)("td",null,(0,L.v_)(e.bio&&e.bio.length>40?e.bio.substring(0,40)+"...":e.bio||"N/A"),1),(0,o.Lk)("td",null,(0,L.v_)(e.salary),1),(0,o.Lk)("td",null,[(0,o.Lk)("div",iw,[(0,o.Lk)("button",{class:"btn btn-primary btn-sm",onClick:t=>l.goToEdit(e.users_id),disabled:!l.isAdmin||i.isDeletingId===e.users_id}," Edit ",8,lw),(0,o.Lk)("button",{class:"btn btn-cancel btn-sm",onClick:t=>l.goToMore(e.users_id)},"More",8,nw),(0,o.Lk)("button",{class:"btn btn-primary btn-sm",onClick:t=>l.confirmDelete(e.users_id),disabled:!l.isAdmin||i.isDeletingId===e.users_id},[i.isDeletingId===e.users_id?((0,o.uX)(),(0,o.CE)("span",cw)):(0,o.Q3)("",!0),(0,o.eW)((0,L.v_)(i.isDeletingId===e.users_id?"Deleting...":"Delete"),1)],8,dw)])])])))),128))])])])):(0,o.Q3)("",!0),!i.isLoading&&l.totalPages>1?((0,o.uX)(),(0,o.CE)("div",mw,[(0,o.Lk)("nav",null,[(0,o.Lk)("ul",uw,[(0,o.Lk)("li",{class:(0,L.C4)(["page-item",{disabled:1===i.currentPage}])},[(0,o.Lk)("button",{class:"page-link",onClick:t[2]||(t[2]=e=>l.goToPage(i.currentPage-1))},"Previous")],2),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.visiblePageNumbers,(e=>((0,o.uX)(),(0,o.CE)("li",{key:e,class:(0,L.C4)(["page-item",{active:e===i.currentPage}])},[(0,o.Lk)("button",{class:"page-link",onClick:t=>l.goToPage(e)},(0,L.v_)(e),9,gw)],2)))),128)),(0,o.Lk)("li",{class:(0,L.C4)(["page-item",{disabled:i.currentPage===l.totalPages}])},[(0,o.Lk)("button",{class:"page-link",onClick:t[3]||(t[3]=e=>l.goToPage(i.currentPage+1))},"Next")],2)])])])):(0,o.Q3)("",!0)])]),i.showModal?((0,o.uX)(),(0,o.CE)("div",hw,[(0,o.Lk)("div",pw,[t[13]||(t[13]=(0,o.Lk)("h5",null,"Are you sure you want to delete this job seeker content?",-1)),(0,o.Lk)("div",null,[(0,o.Lk)("button",{class:"btn btn-primary mt-3",onClick:t[4]||(t[4]=e=>l.deleteAbout(i.selectedAboutId)),disabled:i.isDeleting},[i.isDeleting?((0,o.uX)(),(0,o.CE)("span",fw)):(0,o.Q3)("",!0),(0,o.eW)(" "+(0,L.v_)(i.isDeleting?"Deleting...":"Yes, Delete"),1)],8,bw),t[12]||(t[12]=(0,o.eW)("Â  ")),(0,o.Lk)("button",{class:"btn btn-cancel mt-3",style:{"background-color":"teal",color:"white"},onClick:t[5]||(t[5]=(...e)=>l.closeModal&&l.closeModal(...e)),disabled:i.isDeleting}," Cancel ",8,kw)])])])):(0,o.Q3)("",!0)],64)}var yw={name:"MainWrapper",components:{IndexComponent:Tb},data(){return{uploadsUrl:de+"/uploads/logo/",searchQuery:localStorage.getItem("seekers_search_query")||"",selectedCategoryId:localStorage.getItem("seekers_selected_category")||"",currentPage:parseInt(localStorage.getItem("seekers_current_page"))||1,itemsPerPage:20,form:{users_id:null,job_title:"",company:"",deadline_date:"",job_description:"",logo:"",location:""},jobs:[],categories:[],categoryNames:{},isSubmitting:!1,isLoading:!0,isDeleting:!1,isDeletingId:null,status:{success:!1,message:""},userEmail:"",userId:"",showModal:!1,selectedAboutId:null}},computed:{isAdmin(){return"admin@kozi.rw"===this.userEmail.toLowerCase()},filteredJobs(){const e=this.searchQuery.toLowerCase();return this.jobs.filter((t=>{const a=`${t.first_name} ${t.last_name}`.toLowerCase(),s=(t.province||"").toLowerCase(),o=(t.bio||"").toLowerCase(),r=(t.district||"").toLowerCase(),i=(t.email||"").toLowerCase(),l=!e||a.includes(e)||s.includes(e)||o.includes(e)||i.includes(e)||r.includes(e),n=!this.selectedCategoryId||t.categories_id==this.selectedCategoryId;return l&&n}))},paginatedJobs(){const e=(this.currentPage-1)*this.itemsPerPage,t=e+this.itemsPerPage;return this.filteredJobs.slice(e,t)},totalPages(){return Math.ceil(this.filteredJobs.length/this.itemsPerPage)},visiblePageNumbers(){const e=5,t=[];let a=Math.max(this.currentPage-Math.floor(e/2),1),s=a+e-1;s>this.totalPages&&(s=this.totalPages,a=Math.max(s-e+1,1));for(let o=a;o<=s;o++)t.push(o);return t}},watch:{searchQuery(){this.currentPage=1,localStorage.setItem("seekers_search_query",this.searchQuery),localStorage.setItem("seekers_current_page","1")},selectedCategoryId(){this.currentPage=1,localStorage.setItem("seekers_selected_category",this.selectedCategoryId),localStorage.setItem("seekers_current_page","1")},currentPage(){localStorage.setItem("seekers_current_page",this.currentPage.toString())}},async mounted(){this.userEmail=localStorage.getItem("userEmail")||"";try{await this.fetchCategories(),this.userEmail&&await this.getUserIdFromEmail()}catch(e){console.error("Error during initialization:",e)}finally{this.isLoading=!1}},methods:{handleFileUpload(e){this.form.logo=e.target.files[0]},async fetchJobsByUser(){try{this.isLoading=!0;const e=localStorage.getItem("adminToken");if(!this.userId)return;const t=await fetch(`${de}/admin/job_seekers`,{headers:{Authorization:`Bearer ${e}`}});if(!t.ok)throw new Error("Failed to fetch jobs");const a=await t.json();this.jobs=a;const s=[...new Set(a.map((e=>e.categories_id)).filter((e=>e)))];for(const o of s)await this.fetchCategoryName(o)}catch(e){console.error("Error fetching jobs for user:",e),this.status={success:!1,message:"Failed to load job seekers. Please try again."}}finally{this.isLoading=!1}},async fetchCategories(){try{const e=localStorage.getItem("adminToken"),t=await fetch(`${de}/name_and_id`,{headers:{Authorization:`Bearer ${e}`}}),a=await t.json();t.ok?(this.categories=a,a.forEach((e=>{this.categoryNames[e.id]=e.name}))):console.error("Failed to load categories:",a.message)}catch(e){console.error("Error fetching categories:",e)}},async fetchCategoryName(e){if(!this.categoryNames[e])try{const t=await fetch(`${de}/category_name/${e}`),a=await t.json();t.ok&&a&&a.name?this.categoryNames[e]=a.name:this.categoryNames[e]="Unknown"}catch(t){console.error(`Error fetching category name for ID ${e}:`,t),this.categoryNames[e]="Unknown"}},getCategoryName(e){return this.categoryNames[e]||"Loading..."},goToEdit(e){localStorage.setItem("seekers_search_query",this.searchQuery),localStorage.setItem("seekers_selected_category",this.selectedCategoryId),localStorage.setItem("seekers_current_page",this.currentPage.toString()),this.$router.push({name:"edit-seekers",params:{id:e}})},goToMore(e){localStorage.setItem("seekers_search_query",this.searchQuery),localStorage.setItem("seekers_selected_category",this.selectedCategoryId),localStorage.setItem("seekers_current_page",this.currentPage.toString()),this.$router.push({name:"view-seekers",params:{id:e}})},goToPage(e){e>=1&&e<=this.totalPages&&(this.currentPage=e)},clearFilters(){this.searchQuery="",this.selectedCategoryId="",this.currentPage=1,localStorage.removeItem("seekers_search_query"),localStorage.removeItem("seekers_selected_category"),localStorage.removeItem("seekers_current_page")},confirmDelete(e){this.selectedAboutId=e,this.showModal=!0},closeModal(){this.isDeleting||(this.showModal=!1,this.selectedAboutId=null)},async deleteAbout(e){const t=localStorage.getItem("adminToken");try{this.isDeleting=!0,this.isDeletingId=e;const a=await fetch(`${de}/admin/delete_job_seeker/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`}}),s=await a.json();a.ok?(this.jobs=this.jobs.filter((t=>t.users_id!==e)),this.status={success:!0,message:"Job seeker deleted successfully."}):this.status={success:!1,message:s.message||"Failed to delete job seeker."}}catch(a){console.error("Error deleting job seeker:",a),this.status={success:!1,message:"An error occurred while deleting."}}finally{this.isDeleting=!1,this.isDeletingId=null,this.closeModal()}},async getUserIdFromEmail(){const e=localStorage.getItem("adminToken");if(e)try{const t=JSON.parse(atob(e.split(".")[1]));this.userEmail||(this.userEmail=t.email);const a=await fetch(`${de}/get_user_id_by_email/${this.userEmail}`,{headers:{Authorization:`Bearer ${e}`}}),s=await a.json();a.ok?(this.userId=s.users_id,await this.fetchJobsByUser()):this.status={success:!1,message:s.message||"Unable to get user ID."}}catch(t){console.error("Error getting users_id:",t),this.status={success:!1,message:"Failed to fetch user ID."}}}},beforeUnmount(){}};const Lw=(0,n.A)(yw,[["render",vw],["__scopeId","data-v-4c95ad37"]]);var Cw=Lw;const ww={class:"page-wrapper",id:"main-wrapper","data-layout":"vertical","data-navbarbg":"skin6","data-sidebartype":"full","data-sidebar-description":"fixed","data-header-description":"fixed"},_w={class:"body-wrapper"},Aw={key:0,class:"card-body"},Ew={class:"card-title fw-semibold mb-4",style:{color:"#E960A6"}},Iw={class:"form-group row"},xw={class:"col-md-6"},Pw={key:0,class:"mb-2"},Sw=["src"],Fw=["required"],Mw={class:"col-md-6"},Tw={key:0,class:"mb-2"},jw=["src"],Dw=["required"],Uw={class:"form-group row"},$w={class:"col-md-12"},Xw=["disabled"],Vw={key:0,class:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"},Bw={key:1,class:"modal-overlay"},Jw={class:"modal-content"},Nw={key:2,class:"text-muted px-4"},Qw={class:"table-responsive"},zw={class:"table table-bordered"},Rw=["src"],Ww=["src"],Ow={style:{padding:"10px"}},Hw=["onClick","disabled"],Zw=["onClick","disabled"],Kw={class:"mt-3"},qw={class:"pagination justify-content-center"},Gw=["onClick"];function Yw(e,t,a,r,i,l){const n=(0,o.g2)("IndexComponent");return(0,o.uX)(),(0,o.CE)("div",null,[(0,o.bF)(n),(0,o.Lk)("div",ww,[(0,o.Lk)("div",_w,[i.userEmail?((0,o.uX)(),(0,o.CE)("div",Aw)):(0,o.Q3)("",!0),(0,o.Lk)("h5",Ew,[t[8]||(t[8]=(0,o.Lk)("i",{class:"ti ti-briefcase"},null,-1)),(0,o.eW)(" "+(0,L.v_)(i.form.id?"Update Advert":"Add Advert"),1)]),(0,o.Lk)("form",{class:"mx-4",onSubmit:t[3]||(t[3]=(0,s.D$)(((...e)=>l.submitForm&&l.submitForm(...e)),["prevent"]))},[i.status.message?((0,o.uX)(),(0,o.CE)("div",{key:0,class:(0,L.C4)(["alert mt-3",i.status.success?"alert-success":"alert-danger"])},(0,L.v_)(i.status.message),3)):(0,o.Q3)("",!0),(0,o.Lk)("div",Iw,[(0,o.Lk)("div",xw,[t[9]||(t[9]=(0,o.Lk)("label",{class:"form-label"},"Logo",-1)),i.form.logo&&"string"===typeof i.form.logo?((0,o.uX)(),(0,o.CE)("div",Pw,[(0,o.Lk)("img",{src:i.uploadsUrl+i.form.logo,alt:"Current Logo",class:"custom-job-logo",width:"150"},null,8,Sw)])):(0,o.Q3)("",!0),(0,o.Lk)("input",{type:"file",onChange:t[0]||(t[0]=e=>l.handleFileUpload(e,"logo")),class:"form-control",required:!i.form.id},null,40,Fw)]),(0,o.Lk)("div",Mw,[t[10]||(t[10]=(0,o.Lk)("label",{class:"form-label"},"Mobile Ad",-1)),i.form.mobile_ad&&"string"===typeof i.form.mobile_ad?((0,o.uX)(),(0,o.CE)("div",Tw,[(0,o.Lk)("img",{src:i.uploadsUrl+i.form.mobile_ad,alt:"Current Mobile Ad",class:"custom-job-logo",width:"150"},null,8,jw)])):(0,o.Q3)("",!0),(0,o.Lk)("input",{type:"file",onChange:t[1]||(t[1]=e=>l.handleFileUpload(e,"mobile_ad")),class:"form-control",required:!i.form.id},null,40,Dw)])]),(0,o.Lk)("div",Uw,[(0,o.Lk)("div",$w,[t[11]||(t[11]=(0,o.Lk)("label",{class:"form-label"},"Link",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=e=>i.form.link=e),class:"form-control"},null,512),[[s.Jo,i.form.link]])])]),(0,o.Lk)("button",{type:"submit",class:"btn btn-primary mt-3",disabled:!l.isAdmin||i.isSubmitting},[i.isSubmitting?((0,o.uX)(),(0,o.CE)("span",Vw)):(0,o.Q3)("",!0),(0,o.eW)(" "+(0,L.v_)(i.isSubmitting?"Submitting...":i.form.id?"Update Advert":"Submit Advert"),1)],8,Xw)],32),i.showModal?((0,o.uX)(),(0,o.CE)("div",Bw,[(0,o.Lk)("div",Jw,[t[13]||(t[13]=(0,o.Lk)("h5",null,"Are you sure you want to delete this advert?",-1)),(0,o.Lk)("div",null,[(0,o.Lk)("button",{class:"btn btn-danger mt-3",onClick:t[4]||(t[4]=(...e)=>l.confirmDeleteJob&&l.confirmDeleteJob(...e))},"Yes, Delete"),t[12]||(t[12]=(0,o.eW)(" Â  ")),(0,o.Lk)("button",{class:"btn btn-cancel mt-3",style:{"background-color":"teal",color:"white"},onClick:t[5]||(t[5]=(...e)=>l.closeModal&&l.closeModal(...e))}," Cancel ")])])])):(0,o.Q3)("",!0),t[15]||(t[15]=(0,o.Lk)("hr",{class:"my-4"},null,-1)),t[16]||(t[16]=(0,o.Lk)("h5",{class:"fw-semibold mb-3"},"Your Adverts",-1)),0===l.filteredJobs.length?((0,o.uX)(),(0,o.CE)("div",Nw,"No adverts available yet.")):(0,o.Q3)("",!0),(0,o.Lk)("div",Qw,[(0,o.Lk)("table",zw,[t[14]||(t[14]=(0,o.Lk)("thead",{class:"table-light"},[(0,o.Lk)("tr",null,[(0,o.Lk)("th",null,"Id"),(0,o.Lk)("th",null,"Description"),(0,o.Lk)("th",null,"Logo"),(0,o.Lk)("th",null,"Mobile Ad"),(0,o.Lk)("th",null,"Action")])],-1)),(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.paginatedJobs,((e,t)=>((0,o.uX)(),(0,o.CE)("tr",{key:e.id},[(0,o.Lk)("td",null,(0,L.v_)((i.currentPage-1)*i.itemsPerPage+t+1),1),(0,o.Lk)("td",null,(0,L.v_)(e.link),1),(0,o.Lk)("td",null,[(0,o.Lk)("img",{src:i.uploadsUrl+e.logo,alt:"Logo",class:"custom-job-logo",width:"100"},null,8,Rw)]),(0,o.Lk)("td",null,[(0,o.Lk)("img",{src:i.uploadsUrl+e.mobile_ad,alt:"Mobile Ad",class:"custom-job-logo",width:"100"},null,8,Ww)]),(0,o.Lk)("td",Ow,[(0,o.Lk)("button",{class:"btn btn-primary btn-sm me-2",onClick:t=>l.editJob(e),disabled:!l.isAdmin},"Edit",8,Hw),(0,o.Lk)("button",{class:"btn btn-cancel btn-sm",onClick:t=>l.openModal(e.id),disabled:!l.isAdmin},"Delete",8,Zw)])])))),128))])])]),(0,o.Lk)("nav",Kw,[(0,o.Lk)("ul",qw,[(0,o.Lk)("li",{class:(0,L.C4)(["page-item",{disabled:1===i.currentPage}])},[(0,o.Lk)("button",{class:"page-link",onClick:t[6]||(t[6]=e=>l.changePage(i.currentPage-1))},"Previous")],2),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.totalPages,(e=>((0,o.uX)(),(0,o.CE)("li",{key:e,class:(0,L.C4)(["page-item",{active:i.currentPage===e}])},[(0,o.Lk)("button",{class:"page-link",onClick:t=>l.changePage(e)},(0,L.v_)(e),9,Gw)],2)))),128)),(0,o.Lk)("li",{class:(0,L.C4)(["page-item",{disabled:i.currentPage===l.totalPages}])},[(0,o.Lk)("button",{class:"page-link",onClick:t[7]||(t[7]=e=>l.changePage(i.currentPage+1))},"Next")],2)])])])])])}var e_={name:"MainWrapper",components:{IndexComponent:Tb},data(){return{uploadsUrl:de+"/uploads/logo/",form:{id:null,link:"",logo:"",mobile_ad:""},jobs:[],isSubmitting:!1,status:{success:!1,message:""},userEmail:"",userId:"",showModal:!1,selectedJobId:null,searchQuery:"",currentPage:1,itemsPerPage:10}},computed:{isAdmin(){return"admin@kozi.rw"===this.userEmail.toLowerCase()},filteredJobs(){return this.jobs.filter((e=>e.link?.toLowerCase().includes(this.searchQuery.toLowerCase())))},totalPages(){return Math.ceil(this.filteredJobs.length/this.itemsPerPage)},paginatedJobs(){const e=(this.currentPage-1)*this.itemsPerPage;return this.filteredJobs.slice(e,e+this.itemsPerPage)}},mounted(){this.userEmail=localStorage.getItem("userEmail")||"",this.userEmail&&this.getUserIdFromEmail()},methods:{handleFileUpload(e,t){this.form[t]=e.target.files[0]},openModal(e){this.selectedJobId=e,this.showModal=!0},closeModal(){this.showModal=!1,this.selectedJobId=null},changePage(e){e>=1&&e<=this.totalPages&&(this.currentPage=e)},async confirmDeleteJob(){const e=localStorage.getItem("adminToken");try{const t=await fetch(`${de}/admin/advert_delete/${this.selectedJobId}`,{method:"DELETE",headers:{Authorization:`Bearer ${e}`}}),a=await t.json();t.ok?(this.status={success:!0,message:a.message||"Advert deleted successfully."},this.fetchJobsByUser()):this.status={success:!1,message:a.message||"Failed to delete advert."}}catch(t){console.error("Delete error:",t),this.status={success:!1,message:"Unexpected error occurred while deleting."}}finally{this.closeModal()}},async fetchJobsByUser(){try{const e=localStorage.getItem("adminToken"),t=await fetch(`${de}/admin/select_advert`,{headers:{Authorization:`Bearer ${e}`}});if(!t.ok)throw new Error("Failed to fetch adverts");const a=await t.json();this.jobs=a}catch(e){console.error("Error fetching adverts:",e)}},async submitForm(){this.isSubmitting=!0,this.status.message="";try{const e=new FormData;e.append("link",this.form.link),this.form.logo&&"string"!==typeof this.form.logo&&e.append("logo",this.form.logo),this.form.mobile_ad&&"string"!==typeof this.form.mobile_ad&&e.append("mobile_ad",this.form.mobile_ad);const t=localStorage.getItem("adminToken"),a=this.form.id?`${de}/admin/update_advert/${this.form.id}`:`${de}/admin/add_advert`,s=this.form.id?"PUT":"POST",o=await fetch(a,{method:s,headers:{Authorization:`Bearer ${t}`},body:e}),r=await o.json();o.ok?(this.status={success:!0,message:r.message||(this.form.id?"Advert updated!":"Advert added!")},this.form={id:null,link:"",logo:"",mobile_ad:""},this.fetchJobsByUser()):this.status={success:!1,message:r.message||"Failed to submit advert."}}catch(e){console.error("Error submitting advert:",e),this.status={success:!1,message:"Unexpected error occurred."}}finally{this.isSubmitting=!1}},editJob(e){this.form={id:e.id,link:e.link,logo:e.logo,mobile_ad:e.mobile_ad},window.scrollTo({top:0,behavior:"smooth"})},async getUserIdFromEmail(){const e=localStorage.getItem("adminToken");if(e)try{const t=JSON.parse(atob(e.split(".")[1]));this.userEmail||(this.userEmail=t.email);const a=await fetch(`${de}/get_user_id_by_email/${this.userEmail}`,{headers:{Authorization:`Bearer ${e}`}}),s=await a.json();a.ok?(this.userId=s.users_id,this.fetchJobsByUser()):this.status={success:!1,message:s.message||"Unable to get user ID."}}catch(t){console.error("Error getting users_id:",t),this.status={success:!1,message:"Failed to fetch user ID."}}}}};const t_=(0,n.A)(e_,[["render",Yw],["__scopeId","data-v-a3f5e9f6"]]);var a_=t_;const s_={class:"page-wrapper",id:"main-wrapper","data-layout":"vertical","data-navbarbg":"skin6","data-sidebartype":"full","data-sidebar-description":"fixed","data-header-description":"fixed"},o_={class:"body-wrapper"},r_={key:0,class:"card-body"},i_={class:"card-title fw-semibold mb-4",style:{color:"#E960A6"}},l_={class:"form-group row"},n_={class:"col-md-12"},d_={class:"position-relative"},c_=["value"],m_={key:0,class:"spinner-overlay"},u_={class:"form-group row"},g_={class:"col-md-12"},h_={class:"form-group row"},p_={class:"col-md-12"},b_={key:0,class:"mb-2"},f_=["src"],k_=["required"],v_=["disabled"],y_={key:0,class:"red-spinner-inline me-2"},L_={key:1,class:"modal-overlay"},C_={class:"modal-content"},w_=["disabled"],__={key:0,class:"red-spinner-inline me-2"},A_={key:2,class:"text-center py-4"},E_={key:3,class:"text-muted px-4"},I_={class:"fw-bold text-primary"},x_={key:0,class:"text-muted px-3 mb-3"},P_={key:1,class:"table-responsive"},S_={class:"table table-bordered"},F_=["src"],M_={key:1,class:"text-muted"},T_={style:{padding:"10px"}},j_=["onClick","disabled"],D_=["onClick","disabled"];function U_(e,t,a,r,i,l){const n=(0,o.g2)("IndexComponent");return(0,o.uX)(),(0,o.CE)("div",null,[(0,o.bF)(n),(0,o.Lk)("div",s_,[(0,o.Lk)("div",o_,[i.userEmail?((0,o.uX)(),(0,o.CE)("div",r_)):(0,o.Q3)("",!0),(0,o.Lk)("h5",i_,[t[6]||(t[6]=(0,o.Lk)("i",{class:"ti ti-briefcase"},null,-1)),(0,o.eW)(" "+(0,L.v_)(i.form.id?"Update Category":"Add Category"),1)]),(0,o.Lk)("form",{class:"mx-4",onSubmit:t[3]||(t[3]=(0,s.D$)(((...e)=>l.submitForm&&l.submitForm(...e)),["prevent"]))},[i.status.message?((0,o.uX)(),(0,o.CE)("div",{key:0,class:(0,L.C4)(["alert mt-3",i.status.success?"alert-success":"alert-danger"])},(0,L.v_)(i.status.message),3)):(0,o.Q3)("",!0),(0,o.Lk)("div",l_,[(0,o.Lk)("div",n_,[t[9]||(t[9]=(0,o.Lk)("label",{class:"form-label"},"Category Type",-1)),(0,o.Lk)("div",d_,[(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>i.form.category_type=e),style:{height:"54px"},class:"form-control",required:""},[t[7]||(t[7]=(0,o.Lk)("option",{value:""},"Select Category Type",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.categoryTypes,(e=>((0,o.uX)(),(0,o.CE)("option",{key:e.id,value:e.id},(0,L.v_)(e.name),9,c_)))),128))],512),[[s.u1,i.form.category_type]]),i.loadingCategoryTypes?((0,o.uX)(),(0,o.CE)("div",m_,t[8]||(t[8]=[(0,o.Lk)("div",{class:"red-spinner"},null,-1)]))):(0,o.Q3)("",!0)])])]),(0,o.Lk)("div",u_,[(0,o.Lk)("div",g_,[t[10]||(t[10]=(0,o.Lk)("label",{class:"form-label"},"Category Name",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>i.form.name=e),type:"text",class:"form-control",placeholder:"Enter category name",required:""},null,512),[[s.Jo,i.form.name]])])]),(0,o.Lk)("div",h_,[(0,o.Lk)("div",p_,[t[11]||(t[11]=(0,o.Lk)("label",{class:"form-label"},"Logo",-1)),i.form.logo&&"string"===typeof i.form.logo?((0,o.uX)(),(0,o.CE)("div",b_,[(0,o.Lk)("img",{src:i.uploadsUrl+i.form.logo,alt:"Current Logo",class:"custom-job-logo",width:"150"},null,8,f_)])):(0,o.Q3)("",!0),(0,o.Lk)("input",{type:"file",onChange:t[2]||(t[2]=(...e)=>l.handleFileUpload&&l.handleFileUpload(...e)),class:"form-control",required:!i.form.id},null,40,k_)])]),(0,o.Lk)("button",{type:"submit",class:"btn btn-primary mt-3",disabled:!l.isAdmin||i.isSubmitting},[i.isSubmitting?((0,o.uX)(),(0,o.CE)("span",y_)):(0,o.Q3)("",!0),(0,o.eW)(" "+(0,L.v_)(i.isSubmitting?"Submitting...":i.form.id?"Update Category":"Submit Category"),1)],8,v_)],32),i.showModal?((0,o.uX)(),(0,o.CE)("div",L_,[(0,o.Lk)("div",C_,[t[13]||(t[13]=(0,o.Lk)("h5",null,"Are you sure you want to delete this category?",-1)),(0,o.Lk)("div",null,[(0,o.Lk)("button",{class:"btn btn-danger mt-3",onClick:t[4]||(t[4]=(...e)=>l.confirmDeleteCategory&&l.confirmDeleteCategory(...e)),disabled:i.isDeletingCategory},[i.isDeletingCategory?((0,o.uX)(),(0,o.CE)("span",__)):(0,o.Q3)("",!0),(0,o.eW)(" "+(0,L.v_)(i.isDeletingCategory?"Deleting...":"Yes, Delete"),1)],8,w_),t[12]||(t[12]=(0,o.eW)(" Â  ")),(0,o.Lk)("button",{class:"btn btn-cancel mt-3",style:{"background-color":"teal",color:"white"},onClick:t[5]||(t[5]=(...e)=>l.closeModal&&l.closeModal(...e))}," Cancel ")])])])):(0,o.Q3)("",!0),t[16]||(t[16]=(0,o.Lk)("hr",{class:"my-4"},null,-1)),t[17]||(t[17]=(0,o.Lk)("h5",{class:"fw-semibold mb-3"},"Categories by Type",-1)),i.loadingCategories?((0,o.uX)(),(0,o.CE)("div",A_,t[14]||(t[14]=[(0,o.Lk)("div",{class:"red-spinner-large"},null,-1),(0,o.Lk)("p",{class:"text-muted mt-2"},"Loading categories...",-1)]))):0===i.categoriesWithTypes.length?((0,o.uX)(),(0,o.CE)("div",E_,"No categories available yet.")):((0,o.uX)(!0),(0,o.CE)(o.FK,{key:4},(0,o.pI)(i.categoriesWithTypes,(e=>((0,o.uX)(),(0,o.CE)("div",{key:e.type_id,class:"mb-4"},[(0,o.Lk)("h6",I_,(0,L.v_)(e.type_name),1),0===e.categories.length?((0,o.uX)(),(0,o.CE)("div",x_," No categories in this type yet. ")):((0,o.uX)(),(0,o.CE)("div",P_,[(0,o.Lk)("table",S_,[t[15]||(t[15]=(0,o.Lk)("thead",{class:"table-light"},[(0,o.Lk)("tr",null,[(0,o.Lk)("th",null,"Id"),(0,o.Lk)("th",null,"Category Name"),(0,o.Lk)("th",null,"Logo"),(0,o.Lk)("th",null,"Action")])],-1)),(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.categories,((t,a)=>((0,o.uX)(),(0,o.CE)("tr",{key:t.id},[(0,o.Lk)("td",null,(0,L.v_)(a+1),1),(0,o.Lk)("td",null,(0,L.v_)(t.name),1),(0,o.Lk)("td",null,[t.logo?((0,o.uX)(),(0,o.CE)("img",{key:0,src:i.uploadsUrl+t.logo,alt:"Logo",class:"custom-job-logo",width:"100"},null,8,F_)):((0,o.uX)(),(0,o.CE)("span",M_,"No logo"))]),(0,o.Lk)("td",T_,[(0,o.Lk)("button",{class:"btn btn-primary btn-sm me-2",onClick:a=>l.editCategory(t,e.type_id),disabled:!l.isAdmin},"Edit",8,j_),(0,o.Lk)("button",{class:"btn btn-danger btn-sm",onClick:e=>l.openModal(t.id),disabled:!l.isAdmin},"Delete",8,D_)])])))),128))])])]))])))),128))])])])}var $_={name:"CategoryWrapper",components:{IndexComponent:Tb},data(){return{uploadsUrl:de+"/uploads/logo/",form:{id:null,category_type:"",name:"",logo:""},categoryTypes:[],categoriesWithTypes:[],isSubmitting:!1,loadingCategoryTypes:!1,loadingCategories:!1,isDeletingCategory:!1,status:{success:!1,message:""},userEmail:"",userId:"",showModal:!1,selectedCategoryId:null}},computed:{isAdmin(){return"admin@kozi.rw"===this.userEmail.toLowerCase()}},mounted(){this.userEmail=localStorage.getItem("userEmail")||"",this.userEmail&&this.getUserIdFromEmail(),this.fetchCategoryTypes(),this.fetchCategoriesWithTypes()},methods:{handleFileUpload(e){this.form.logo=e.target.files[0]},openModal(e){this.selectedCategoryId=e,this.showModal=!0},closeModal(){this.showModal=!1,this.selectedCategoryId=null},async fetchCategoryTypes(){this.loadingCategoryTypes=!0;try{const e=await fetch(`${de}/category-types`);if(!e.ok)throw new Error("Failed to fetch category types");const t=await e.json();this.categoryTypes=t}catch(e){console.error("Error fetching category types:",e),this.status={success:!1,message:"Failed to fetch category types."}}finally{this.loadingCategoryTypes=!1}},async fetchCategoriesWithTypes(){this.loadingCategories=!0;try{const e=await fetch(`${de}/category-types-with-categories`);if(!e.ok)throw new Error("Failed to fetch categories with types");const t=await e.json();this.categoriesWithTypes=t}catch(e){console.error("Error fetching categories with types:",e),this.status={success:!1,message:"Failed to fetch categories."}}finally{this.loadingCategories=!1}},async confirmDeleteCategory(){this.isDeletingCategory=!0;const e=localStorage.getItem("adminToken");try{const t=await fetch(`${de}/admin/category_delete/${this.selectedCategoryId}`,{method:"DELETE",headers:{Authorization:`Bearer ${e}`}}),a=await t.json();t.ok?(this.status={success:!0,message:a.message||"Category deleted successfully."},this.fetchCategoriesWithTypes()):this.status={success:!1,message:a.message||"Failed to delete category."}}catch(t){console.error("Delete error:",t),this.status={success:!1,message:"Unexpected error occurred while deleting."}}finally{this.isDeletingCategory=!1,this.closeModal()}},async submitForm(){this.isSubmitting=!0,this.status.message="";try{const e=new FormData;e.append("category_type",this.form.category_type),e.append("name",this.form.name),this.form.logo&&"string"!==typeof this.form.logo&&e.append("logo",this.form.logo);const t=localStorage.getItem("adminToken"),a=this.form.id?`${de}/admin/update_category/${this.form.id}`:`${de}/admin/add_category`,s=this.form.id?"PUT":"POST",o=await fetch(a,{method:s,headers:{Authorization:`Bearer ${t}`},body:e}),r=await o.json();o.ok?(this.status={success:!0,message:r.message||(this.form.id?"Category updated!":"Category added!")},this.form={id:null,category_type:"",name:"",logo:""},this.fetchCategoriesWithTypes()):this.status={success:!1,message:r.message||"Failed to submit category."}}catch(e){console.error("Error submitting category:",e),this.status={success:!1,message:"Unexpected error occurred."}}finally{this.isSubmitting=!1}},editCategory(e,t){this.form={id:e.id,category_type:t,name:e.name,logo:e.logo},window.scrollTo({top:0,behavior:"smooth"})},async getUserIdFromEmail(){const e=localStorage.getItem("adminToken");if(e)try{const t=JSON.parse(atob(e.split(".")[1]));this.userEmail||(this.userEmail=t.email);const a=await fetch(`${de}/get_user_id_by_email/${this.userEmail}`,{headers:{Authorization:`Bearer ${e}`}}),s=await a.json();a.ok?this.userId=s.users_id:this.status={success:!1,message:s.message||"Unable to get user ID."}}catch(t){console.error("Error getting users_id:",t),this.status={success:!1,message:"Failed to fetch user ID."}}}}};const X_=(0,n.A)($_,[["render",U_],["__scopeId","data-v-fca1d482"]]);var V_=X_;const B_={key:0,class:"d-flex justify-content-center align-items-center",style:{height:"50vh"}},J_={key:1,class:"d-flex justify-content-center align-items-center",style:{height:"50vh"}},N_={key:2,class:"page-wrapper",id:"main-wrapper","data-layout":"vertical","data-navbarbg":"skin6","data-sidebartype":"full","data-sidebar-description":"fixed","data-header-description":"fixed"},Q_={class:"body-wrapper"},z_={class:"card-title fw-semibold mb-4",style:{color:"#E960A6"}},R_={class:"form-group row"},W_={class:"col-md-6"},O_={class:"col-md-6"},H_={class:"col-md-12"},Z_={class:"form-group row"},K_={class:"col-md-6"},q_={class:"col-md-6"},G_={class:"form-group row"},Y_={class:"col-md-6"},eA={class:"col-md-6"},tA={class:"form-group row"},aA={class:"col-md-6"},sA={class:"col-md-6"},oA=["min"],rA={key:0,class:"text-danger"},iA={class:"d-flex gap-2"},lA=["disabled"],nA={key:0,class:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"},dA={key:0,class:"modal-overlay"},cA={class:"modal-content"},mA={class:"row mb-3 mx-4"},uA={class:"col-md-8"},gA={class:"col-md-4"},hA={key:1,class:"text-muted px-4"},pA={key:2,class:"d-flex justify-content-center my-4"},bA={key:3,class:"table-responsive"},fA={class:"table table-bordered",style:{"min-width":"1200px"}},kA=["innerHTML"],vA=["innerHTML"],yA=["innerHTML"],LA=["innerHTML"],CA=["innerHTML"],wA=["innerHTML"],_A=["innerHTML"],AA=["innerHTML"],EA=["innerHTML"],IA=["innerHTML"],xA=["onClick"],PA=["onClick"],SA={key:4,class:"mt-3"},FA={class:"pagination justify-content-center"},MA=["onClick"];function TA(e,t,a,r,i,l){const n=(0,o.g2)("IndexComponent");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(n),!l.isAdmin&&i.userEmail?((0,o.uX)(),(0,o.CE)("div",B_,t[19]||(t[19]=[(0,o.Lk)("div",{class:"text-center"},[(0,o.Lk)("i",{class:"ti ti-lock",style:{"font-size":"4rem",color:"#E960A6","margin-bottom":"1rem"}}),(0,o.Lk)("h3",{class:"text",style:{color:"#E960A6"}},"Access Denied"),(0,o.Lk)("p",{class:"text-muted"},"You don't have permission to access this page.")],-1)]))):i.userEmail?((0,o.uX)(),(0,o.CE)("div",N_,[(0,o.Lk)("div",Q_,[(0,o.Lk)("h5",z_,[t[21]||(t[21]=(0,o.Lk)("i",{class:"ti ti-user-plus"},null,-1)),(0,o.eW)(" "+(0,L.v_)(i.form.id?"Update Payroll":"Register New Payroll"),1)]),(0,o.Lk)("form",{class:"mx-4",onSubmit:t[12]||(t[12]=(0,s.D$)(((...e)=>l.submitForm&&l.submitForm(...e)),["prevent"]))},[i.status.message?((0,o.uX)(),(0,o.CE)("div",{key:0,class:(0,L.C4)(["alert mt-3",i.status.success?"alert-success":"alert-danger"])},(0,L.v_)(i.status.message),3)):(0,o.Q3)("",!0),(0,o.Lk)("div",R_,[(0,o.Lk)("div",W_,[t[22]||(t[22]=(0,o.Lk)("label",{class:"form-label"},"Seeker's name",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>i.form.seekers_name=e),class:"form-control",required:""},null,512),[[s.Jo,i.form.seekers_name]])]),(0,o.Lk)("div",O_,[t[23]||(t[23]=(0,o.Lk)("label",{class:"form-label"},"Provider's name",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>i.form.providers_name=e),class:"form-control",required:""},null,512),[[s.Jo,i.form.providers_name]])]),(0,o.Lk)("div",H_,[t[24]||(t[24]=(0,o.Lk)("label",{class:"form-label"},"Provider's email",-1)),(0,o.bo)((0,o.Lk)("input",{type:"email","onUpdate:modelValue":t[2]||(t[2]=e=>i.form.providers_email=e),class:"form-control",required:""},null,512),[[s.Jo,i.form.providers_email]])])]),(0,o.Lk)("div",Z_,[(0,o.Lk)("div",K_,[t[25]||(t[25]=(0,o.Lk)("label",{class:"form-label"},"Job Title",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=e=>i.form.title=e),class:"form-control",required:""},null,512),[[s.Jo,i.form.title]])]),(0,o.Lk)("div",q_,[t[27]||(t[27]=(0,o.Lk)("label",{class:"form-label"},"Accommodation Preference",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>i.form.accommodation=e),class:"form-control",style:{height:"48px","padding-top":"8px","padding-bottom":"8px"},required:""},t[26]||(t[26]=[(0,o.Lk)("option",{value:"",disabled:""},"Choose Mode",-1),(0,o.Lk)("option",{value:"Stay in"},"Stay In",-1),(0,o.Lk)("option",{value:"Stay out"},"Stay out",-1)]),512),[[s.u1,i.form.accommodation]])])]),(0,o.Lk)("div",G_,[(0,o.Lk)("div",Y_,[t[28]||(t[28]=(0,o.Lk)("label",{class:"form-label"},"Address",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[5]||(t[5]=e=>i.form.address=e),class:"form-control",required:""},null,512),[[s.Jo,i.form.address]])]),(0,o.Lk)("div",eA,[t[29]||(t[29]=(0,o.Lk)("label",{class:"form-label"},"Salary(RWF)",-1)),(0,o.bo)((0,o.Lk)("input",{type:"number","onUpdate:modelValue":t[6]||(t[6]=e=>i.form.salary=e),class:"form-control",required:""},null,512),[[s.Jo,i.form.salary]])])]),(0,o.Lk)("div",tA,[(0,o.Lk)("div",aA,[t[30]||(t[30]=(0,o.Lk)("label",{class:"form-label"},"Starting Date",-1)),(0,o.bo)((0,o.Lk)("input",{type:"date","onUpdate:modelValue":t[7]||(t[7]=e=>i.form.starting_date=e),class:"form-control",required:"",onChange:t[8]||(t[8]=(...e)=>l.validateDates&&l.validateDates(...e))},null,544),[[s.Jo,i.form.starting_date]])]),(0,o.Lk)("div",sA,[t[31]||(t[31]=(0,o.Lk)("label",{class:"form-label"},"Payment Date (Day of Month)",-1)),(0,o.bo)((0,o.Lk)("input",{type:"date","onUpdate:modelValue":t[9]||(t[9]=e=>i.form.salary_date=e),class:"form-control",required:"",min:i.form.starting_date,onChange:t[10]||(t[10]=(...e)=>l.validateDates&&l.validateDates(...e))},null,40,oA),[[s.Jo,i.form.salary_date]]),i.validationErrors.salary_date?((0,o.uX)(),(0,o.CE)("small",rA,(0,L.v_)(i.validationErrors.salary_date),1)):(0,o.Q3)("",!0)])]),(0,o.Lk)("div",iA,[(0,o.Lk)("button",{type:"submit",class:"btn btn-primary mt-3",disabled:i.isSubmitting},[i.isSubmitting?((0,o.uX)(),(0,o.CE)("span",nA)):(0,o.Q3)("",!0),(0,o.eW)(" "+(0,L.v_)(i.isSubmitting?"Processing...":i.form.id?"Update Payroll":"Submit Payroll"),1)],8,lA),i.form.id?((0,o.uX)(),(0,o.CE)("button",{key:0,type:"button",class:"btn btn-secondary mt-3",onClick:t[11]||(t[11]=(...e)=>l.cancelEdit&&l.cancelEdit(...e))}," Cancel ")):(0,o.Q3)("",!0)])],32),i.showModal?((0,o.uX)(),(0,o.CE)("div",dA,[(0,o.Lk)("div",cA,[t[33]||(t[33]=(0,o.Lk)("h5",null,"Are you sure you want to delete this payroll record?",-1)),(0,o.Lk)("div",null,[(0,o.Lk)("button",{class:"btn btn-danger mt-3",onClick:t[13]||(t[13]=(...e)=>l.confirmDeletePayroll&&l.confirmDeletePayroll(...e))},"Yes, Delete"),t[32]||(t[32]=(0,o.eW)(" Â  ")),(0,o.Lk)("button",{class:"btn btn-cancel mt-3",style:{"background-color":"teal",color:"white"},onClick:t[14]||(t[14]=(...e)=>l.closeModal&&l.closeModal(...e))}," Cancel ")])])])):(0,o.Q3)("",!0),t[37]||(t[37]=(0,o.Lk)("hr",{class:"my-4"},null,-1)),(0,o.Lk)("div",mA,[(0,o.Lk)("div",uA,[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[15]||(t[15]=e=>i.searchQuery=e),class:"form-control",placeholder:"Search by seekers, provider, job title or address"},null,512),[[s.Jo,i.searchQuery]])]),(0,o.Lk)("div",gA,[(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[16]||(t[16]=e=>i.filterStatus=e),style:{height:"48px","padding-top":"8px","padding-bottom":"8px"},class:"form-control"},t[34]||(t[34]=[(0,o.Lk)("option",{value:""},"Accommodation Preference",-1),(0,o.Lk)("option",{value:"Stay in"},"Stay in",-1),(0,o.Lk)("option",{value:"Stay out"},"Stay out",-1)]),512),[[s.u1,i.filterStatus]])])]),0===l.filteredPayrolls.length?((0,o.uX)(),(0,o.CE)("div",hA,".")):(0,o.Q3)("",!0),0===l.filteredPayrolls.length?((0,o.uX)(),(0,o.CE)("div",pA,t[35]||(t[35]=[(0,o.Lk)("div",{class:"btn btn-danger text-center",style:{width:"40rem"}}," No payroll records available yet. ",-1)]))):((0,o.uX)(),(0,o.CE)("div",bA,[(0,o.Lk)("table",fA,[t[36]||(t[36]=(0,o.Lk)("thead",{class:"table-light"},[(0,o.Lk)("tr",null,[(0,o.Lk)("th",{style:{width:"50px"}},"Id"),(0,o.Lk)("th",{style:{"min-width":"120px"}},"S.name"),(0,o.Lk)("th",{style:{"min-width":"120px"}},"P.name"),(0,o.Lk)("th",{style:{"min-width":"180px"}},"P.email"),(0,o.Lk)("th",{style:{"min-width":"100px"}},"Job title"),(0,o.Lk)("th",{style:{"min-width":"100px"}},"Accommodation"),(0,o.Lk)("th",{style:{"min-width":"150px"}},"Address"),(0,o.Lk)("th",{style:{"min-width":"80px"}},"Salary"),(0,o.Lk)("th",{style:{"min-width":"100px"}},"Revenue Share"),(0,o.Lk)("th",{style:{"min-width":"100px"}},"Starting Date"),(0,o.Lk)("th",{style:{"min-width":"100px"}},"Payment Day"),(0,o.Lk)("th",{style:{"min-width":"120px"}},"Action")])],-1)),(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.paginatedPayrolls,((e,t)=>((0,o.uX)(),(0,o.CE)("tr",{key:e.id},[(0,o.Lk)("td",null,(0,L.v_)((i.currentPage-1)*i.itemsPerPage+t+1),1),(0,o.Lk)("td",{innerHTML:l.highlightMatch(e.seekers_name)},null,8,kA),(0,o.Lk)("td",{innerHTML:l.highlightMatch(e.providers_name)},null,8,vA),(0,o.Lk)("td",{innerHTML:l.highlightMatch(e.providers_email)},null,8,yA),(0,o.Lk)("td",{innerHTML:l.highlightMatch(e.title)},null,8,LA),(0,o.Lk)("td",{innerHTML:l.highlightMatch(e.accommodation)},null,8,CA),(0,o.Lk)("td",{innerHTML:l.highlightMatch(e.address)},null,8,wA),(0,o.Lk)("td",{innerHTML:l.highlightMatch(e.salary)},null,8,_A),(0,o.Lk)("td",{innerHTML:l.highlightMatch(Math.round(.18*Number(e.salary)))},null,8,AA),(0,o.Lk)("td",{innerHTML:l.highlightMatch(l.formatDate(e.starting_date))},null,8,EA),(0,o.Lk)("td",{innerHTML:l.highlightMatch(l.formatSalaryDateOrdinal(e.salary_date))},null,8,IA),(0,o.Lk)("td",null,[(0,o.Lk)("button",{class:"btn btn-primary btn-sm",onClick:t=>l.editPayroll(e)}," Edit ",8,xA),(0,o.Lk)("button",{class:"btn btn-primary btn-sm",onClick:t=>l.openModal(e.id)}," Delete ",8,PA)])])))),128))])])])),l.totalPages>1?((0,o.uX)(),(0,o.CE)("nav",SA,[(0,o.Lk)("ul",FA,[(0,o.Lk)("li",{class:(0,L.C4)(["page-item",{disabled:1===i.currentPage}])},[(0,o.Lk)("button",{class:"page-link",onClick:t[17]||(t[17]=e=>l.changePage(i.currentPage-1))},"Previous")],2),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.pagesToShow,(e=>((0,o.uX)(),(0,o.CE)("li",{key:e,class:(0,L.C4)(["page-item",{active:i.currentPage===e}])},[(0,o.Lk)("button",{class:"page-link",onClick:t=>l.changePage(e)},(0,L.v_)(e),9,MA)],2)))),128)),(0,o.Lk)("li",{class:(0,L.C4)(["page-item",{disabled:i.currentPage===l.totalPages}])},[(0,o.Lk)("button",{class:"page-link",onClick:t[18]||(t[18]=e=>l.changePage(i.currentPage+1))},"Next")],2)])])):(0,o.Q3)("",!0)])])):((0,o.uX)(),(0,o.CE)("div",J_,t[20]||(t[20]=[(0,o.Lk)("div",{class:"text-center"},[(0,o.Lk)("div",{class:"spinner-border text-primary",role:"status"},[(0,o.Lk)("span",{class:"sr-only"},"Loading...")]),(0,o.Lk)("p",{class:"mt-3 text-muted"},"Checking permissions...")],-1)])))],64)}var jA={name:"PayrollWrapper",components:{IndexComponent:Tb},data(){return{form:{id:null,seekers_name:"",providers_name:"",providers_email:"",title:"",accommodation:"",address:"",salary:"",starting_date:"",salary_date:""},payrolls:[],isSubmitting:!1,status:{success:!1,message:""},userEmail:"",userId:"",showModal:!1,selectedPayrollId:null,searchQuery:"",filterStatus:"",currentPage:1,itemsPerPage:10,validationErrors:{salary_date:""}}},computed:{isAdmin(){return"admin@kozi.rw"===this.userEmail.toLowerCase()},pagesToShow(){const e=this.totalPages,t=this.currentPage,a=2,s=[];for(let o=Math.max(1,t-a);o<=Math.min(e,t+a);o++)s.push(o);return s},filteredPayrolls(){const e=this.searchQuery.toLowerCase();return this.payrolls.filter((t=>{const a=(t.seekers_name||"").toLowerCase(),s=(t.providers_name||"").toLowerCase(),o=(t.providers_email||"").toLowerCase(),r=(t.title||"").toLowerCase(),i=(t.address||"").toLowerCase(),l=this.formatSalaryDateOrdinal(t.salary_date).toLowerCase(),n=a.includes(e)||s.includes(e)||o.includes(e)||r.includes(e)||i.includes(e)||l.includes(e),d=""===this.filterStatus||t.accommodation===this.filterStatus;return n&&d}))},totalPages(){return Math.ceil(this.filteredPayrolls.length/this.itemsPerPage)},paginatedPayrolls(){const e=(this.currentPage-1)*this.itemsPerPage;return this.filteredPayrolls.slice(e,e+this.itemsPerPage)}},mounted(){this.userEmail=localStorage.getItem("userEmail")||"",this.userEmail&&(this.getUserIdFromEmail(),this.isAdmin&&this.fetchPayrolls())},methods:{cancelEdit(){this.resetForm(),this.status.message=""},resetForm(){this.form={id:null,seekers_name:"",providers_name:"",providers_email:"",title:"",accommodation:"",address:"",salary:"",starting_date:"",salary_date:""},this.validationErrors={salary_date:""}},validateDates(){if(this.validationErrors.salary_date="",this.form.starting_date&&this.form.salary_date){const e=new Date(this.form.starting_date),t=new Date(this.form.salary_date);if(t<e)return this.validationErrors.salary_date="Payment date cannot be earlier than starting date",!1}return!0},formatDate(e){if(!e)return"";const t=new Date(e);return t.toISOString().split("T")[0]},formatSalaryDate(e){if(!e)return"";const t=new Date(e),a=t.getDate().toString().padStart(2,"0"),s=(t.getMonth()+1).toString().padStart(2,"0");return`${a}/${s}`},formatSalaryDateFull(e){if(!e)return"";const t=new Date(e),a=t.getDate().toString().padStart(2,"0"),s=(t.getMonth()+1).toString().padStart(2,"0"),o=t.getFullYear();return`${a}/${s}/${o}`},formatSalaryDateOrdinal(e){if(!e)return"";const t=new Date(e),a=t.getDate(),s=e=>{const t=["th","st","nd","rd"],a=e%100;return e+(t[(a-20)%10]||t[a]||t[0])};return`${s(a)} /month`},openModal(e){this.selectedPayrollId=e,this.showModal=!0},closeModal(){this.showModal=!1,this.selectedPayrollId=null},changePage(e){e>=1&&e<=this.totalPages&&(this.currentPage=e)},async confirmDeletePayroll(){const e=localStorage.getItem("adminToken");try{const t=await fetch(`${de}/admin/payroll/delete/${this.selectedPayrollId}`,{method:"DELETE",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}}),a=await t.json();t.ok?(this.status={success:!0,message:a.message||"Payroll record deleted successfully."},this.fetchPayrolls()):this.status={success:!1,message:a.message||"Failed to delete payroll record."}}catch(t){console.error("Delete error:",t),this.status={success:!1,message:"Unexpected error occurred while deleting."}}finally{this.closeModal()}},async fetchPayrolls(){if(this.isAdmin)try{const e=localStorage.getItem("adminToken"),t=await fetch(`${de}/admin/payroll`,{headers:{Authorization:`Bearer ${e}`}});if(!t.ok)throw new Error("Failed to fetch payrolls");const a=await t.json();this.payrolls=a,console.log("Payrolls loaded:",this.payrolls)}catch(e){console.error("Error fetching payrolls:",e)}},async submitForm(){if(this.isAdmin)if(console.log("Form data before submission:",this.form),this.validateDates()){this.isSubmitting=!0,this.status.message="";try{const e=localStorage.getItem("adminToken"),t={seekers_name:this.form.seekers_name,providers_name:this.form.providers_name,providers_email:this.form.providers_email,title:this.form.title,accommodation:this.form.accommodation,address:this.form.address,salary:this.form.salary,starting_date:this.form.starting_date,salary_date:this.form.salary_date};this.form.id&&(t.id=this.form.id);const a=this.form.id?`${de}/admin/payroll/${this.form.id}`:`${de}/admin/payroll`,s=this.form.id?"PUT":"POST";console.log("API Call:",{method:s,url:a,payload:t});const o=await fetch(a,{method:s,headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify(t)});if(o.ok){const e=await o.json();this.status={success:!0,message:e.message||(this.form.id?"Payroll updated successfully!":"Payroll added successfully!")},this.resetForm(),this.fetchPayrolls()}else{const e=await o.text();this.status={success:!1,message:"Failed: "+e}}}catch(e){console.error("Error:",e),this.status={success:!1,message:"Unexpected error occurred."}}finally{this.isSubmitting=!1}}else this.status={success:!1,message:"Please correct the validation errors before submitting."};else this.status={success:!1,message:"Access denied: Admin privileges required."}},editPayroll(e){console.log("Editing payroll:",e);const t=e.starting_date?new Date(e.starting_date).toISOString().split("T")[0]:"",a=e.salary_date?new Date(e.salary_date).toISOString().split("T")[0]:"";this.form={id:e.id,seekers_name:e.seekers_name||"",providers_name:e.providers_name||"",providers_email:e.providers_email||"",title:e.title||"",accommodation:e.accommodation||"",address:e.address||"",salary:e.salary||"",starting_date:t,salary_date:a},this.validationErrors={salary_date:""},console.log("Form after edit:",this.form),window.scrollTo({top:0,behavior:"smooth"})},goToMore(e){this.$router.push({name:"admin/payroll-details",params:{id:e}})},async getUserIdFromEmail(){const e=localStorage.getItem("adminToken");if(e)try{const t=JSON.parse(atob(e.split(".")[1]));this.userEmail||(this.userEmail=t.email);const a=await fetch(`${de}/get_user_id_by_email/${this.userEmail}`,{headers:{Authorization:`Bearer ${e}`}}),s=await a.json();a.ok?this.userId=s.users_id:this.status={success:!1,message:s.message||"Unable to get user ID."}}catch(t){console.error("Error getting users_id:",t),this.status={success:!1,message:"Failed to fetch user ID."}}},highlightMatch(e){if(null===e||void 0===e)return"";const t=String(e);if(!this.searchQuery)return t;const a=new RegExp(`(${this.searchQuery})`,"gi");return t.replace(a,'<span class="highlight-teal">$1</span>')}}};const DA=(0,n.A)(jA,[["render",TA],["__scopeId","data-v-07b96d14"]]);var UA=DA;const $A={class:"page-wrapper",id:"main-wrapper"},XA={class:"login-container"},VA={class:"form-section"},BA={class:"form-container"},JA={key:0,class:"error-container"},NA={class:"alert alert-danger"},QA={class:"form-group"},zA={class:"input-wrapper"},RA={class:"form-group"},WA={class:"input-wrapper"},OA=["type"],HA={key:0,width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ZA={key:1,width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},KA=["disabled"],qA={key:0,class:"spinner"},GA={key:1};function YA(e,t,a,r,i,l){return(0,o.uX)(),(0,o.CE)("div",$A,[(0,o.Lk)("div",XA,[t[13]||(t[13]=(0,o.Fv)('<div class="image-section" data-v-95125bda><div class="image-overlay" data-v-95125bda></div><div class="brand-content" data-v-95125bda><div class="brand-logo" data-v-95125bda><div class="logo-icon" data-v-95125bda><svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-95125bda><path d="M24 4L44 14V34L24 44L4 34V14L24 4Z" fill="white" fill-opacity="0.9" data-v-95125bda></path><path d="M24 12L36 18V30L24 36L12 30V18L24 12Z" fill="#EA60A7" data-v-95125bda></path></svg></div><h1 class="brand-name" data-v-95125bda>AgentPortal</h1></div><div class="brand-description" data-v-95125bda><h2 data-v-95125bda>Agent Access</h2><p data-v-95125bda>Connect with your job seekers and manage your dashboard with powerful tools and insights.</p></div><div class="floating-elements" data-v-95125bda><div class="floating-element" style="--delay:0s;" data-v-95125bda></div><div class="floating-element" style="--delay:2s;" data-v-95125bda></div><div class="floating-element" style="--delay:4s;" data-v-95125bda></div></div></div></div>',1)),(0,o.Lk)("div",VA,[(0,o.Lk)("div",BA,[t[12]||(t[12]=(0,o.Lk)("div",{class:"form-header"},[(0,o.Lk)("h1",{class:"form-title"},"Agent Login"),(0,o.Lk)("p",{class:"form-subtitle"},"Sign in to your agent portal")],-1)),(0,o.Lk)("form",{onSubmit:t[3]||(t[3]=(0,s.D$)(((...e)=>l.login&&l.login(...e)),["prevent"])),class:"login-form"},[i.errorMessage?((0,o.uX)(),(0,o.CE)("div",JA,[(0,o.Lk)("div",NA,[t[4]||(t[4]=(0,o.Lk)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,o.Lk)("path",{d:"M8 1L15 15H1L8 1Z",stroke:"currentColor","stroke-width":"2","stroke-linejoin":"round"}),(0,o.Lk)("path",{d:"M8 6V9",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"}),(0,o.Lk)("path",{d:"M8 12H8.01",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"})],-1)),(0,o.eW)(" "+(0,L.v_)(i.errorMessage),1)])])):(0,o.Q3)("",!0),(0,o.Lk)("div",QA,[t[6]||(t[6]=(0,o.Lk)("label",{for:"email",class:"form-label"},"Email Address",-1)),(0,o.Lk)("div",zA,[t[5]||(t[5]=(0,o.Lk)("svg",{class:"input-icon",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,o.Lk)("path",{d:"M3.33334 3.33334H16.6667C17.5833 3.33334 18.3333 4.08334 18.3333 5.00001V15C18.3333 15.9167 17.5833 16.6667 16.6667 16.6667H3.33334C2.41668 16.6667 1.66668 15.9167 1.66668 15V5.00001C1.66668 4.08334 2.41668 3.33334 3.33334 3.33334Z",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),(0,o.Lk)("path",{d:"M18.3333 5L10 10.8333L1.66668 5",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),(0,o.bo)((0,o.Lk)("input",{type:"email","onUpdate:modelValue":t[0]||(t[0]=e=>i.email=e),class:"form-control",id:"email",required:"",placeholder:"Enter your email"},null,512),[[s.Jo,i.email]])])]),(0,o.Lk)("div",RA,[t[10]||(t[10]=(0,o.Lk)("label",{for:"password",class:"form-label"},"Password",-1)),(0,o.Lk)("div",WA,[t[9]||(t[9]=(0,o.Lk)("svg",{class:"input-icon",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,o.Lk)("path",{d:"M15.8333 9.16667H4.16667C3.24619 9.16667 2.5 9.91286 2.5 10.8333V16.6667C2.5 17.5871 3.24619 18.3333 4.16667 18.3333H15.8333C16.7538 18.3333 17.5 17.5871 17.5 16.6667V10.8333C17.5 9.91286 16.7538 9.16667 15.8333 9.16667Z",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),(0,o.Lk)("path",{d:"M5.83334 9.16667V5.83333C5.83334 4.72826 6.27233 3.66846 7.05373 2.88705C7.83513 2.10565 8.89494 1.66667 10 1.66667C11.1051 1.66667 12.1649 2.10565 12.9463 2.88705C13.7277 3.66846 14.1667 4.72826 14.1667 5.83333V9.16667",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),(0,o.bo)((0,o.Lk)("input",{class:"form-control","onUpdate:modelValue":t[1]||(t[1]=e=>i.password=e),type:i.showPassword?"text":"password",id:"password",required:"",placeholder:"Enter your password"},null,8,OA),[[s.hp,i.password]]),(0,o.Lk)("button",{type:"button",class:"password-toggle",onClick:t[2]||(t[2]=e=>i.showPassword=!i.showPassword)},[i.showPassword?((0,o.uX)(),(0,o.CE)("svg",HA,t[7]||(t[7]=[(0,o.Lk)("path",{d:"M1.66668 10S4.16668 4.16667 10 4.16667 18.3333 10 18.3333 10 15.8333 15.8333 10 15.8333 1.66668 10 1.66668 10Z",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),(0,o.Lk)("path",{d:"M10 12.5C11.3807 12.5 12.5 11.3807 12.5 10C12.5 8.61929 11.3807 7.5 10 7.5C8.61929 7.5 7.5 8.61929 7.5 10C7.5 11.3807 8.61929 12.5 10 12.5Z",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)]))):((0,o.uX)(),(0,o.CE)("svg",ZA,t[8]||(t[8]=[(0,o.Lk)("path",{d:"M14.95 14.95C13.4805 16.0188 11.7668 16.6014 10 16.6667C4.16668 16.6667 1.66668 10 1.66668 10C2.98461 7.35556 4.80722 5.06927 7.05001 3.35",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),(0,o.Lk)("path",{d:"M7.70834 6.66667C8.47337 6.22544 9.33044 5.99464 10.2 6C11.0696 6.00536 11.9262 6.23627 12.6917 6.67733C13.4572 7.11838 14.1076 7.75352 14.5833 8.525C14.5833 8.525 15.425 9.80833 15.8333 10.8333",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),(0,o.Lk)("path",{d:"M10.8333 10.8333C10.6423 11.3235 10.3149 11.7381 9.89499 12.0273C9.47507 12.3166 8.98326 12.4678 8.48334 12.4608C7.98342 12.4538 7.49566 12.2889 7.08334 11.9875C6.67102 11.686 6.35372 11.2618 6.17501 10.775",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),(0,o.Lk)("path",{d:"M1.66668 1.66667L18.3333 18.3333",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])))])])]),(0,o.Lk)("button",{type:"submit",class:"btn-primary",disabled:i.loginInProgress},[i.loginInProgress?((0,o.uX)(),(0,o.CE)("span",qA)):((0,o.uX)(),(0,o.CE)("span",GA,t[11]||(t[11]=[(0,o.Lk)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,o.Lk)("path",{d:"M7.5 2.5H2.5V17.5H7.5",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),(0,o.Lk)("path",{d:"M13.75 6.25L17.5 10L13.75 13.75",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),(0,o.Lk)("path",{d:"M17.5 10H7.5",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]))),(0,o.eW)(" "+(0,L.v_)(i.loginInProgress?"Signing In...":"Sign In"),1)],8,KA)],32)])])])])}var eE={data(){return{email:"",password:"",errorMessage:"",showPassword:!1,loginInProgress:!1,role_id:"4"}},methods:{async login(){this.loginInProgress=!0,this.errorMessage="";try{const e=await ne.A.post(`${de}/login`,{email:this.email,password:this.password,role_id:this.role_id});console.log("Login response:",e.data),e.data.token?(localStorage.setItem("agentToken",e.data.token),localStorage.setItem("userEmail",this.email),localStorage.setItem("roleId",this.role_id),this.$nextTick((()=>{console.log("Redirecting to /agent/index..."),this.$router.push("/agent/index")}))):this.errorMessage="Login failed."}catch(e){this.errorMessage=e.response?.data?.message||"Login failed."}finally{this.loginInProgress=!1}}}};const tE=(0,n.A)(eE,[["render",YA],["__scopeId","data-v-95125bda"]]);var aE=tE;const sE={class:"page-wrapper",id:"main-wrapper","data-layout":"vertical","data-navbarbg":"skin6","data-sidebartype":"full","data-sidebar-description":"fixed","data-header-description":"fixed"},oE={class:"body-wrapper"},rE={key:0,class:"text-muted"},iE={class:"row mb-3"},lE={class:"col-md-10"},nE={class:"table-responsive"},dE={class:"table table-bordered"},cE={class:"d-flex gap-2"},mE=["onClick"],uE=["onClick"],gE={key:1,class:"d-flex justify-content-center mt-4"},hE={class:"pagination"},pE=["onClick"],bE={key:0,class:"modal-overlay"},fE={class:"modal-content"};function kE(e,t,a,r,i,l){const n=(0,o.g2)("IndexComponent");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(n),(0,o.Lk)("div",sE,[(0,o.Lk)("div",oE,[t[6]||(t[6]=(0,o.Lk)("h5",{class:"fw-semibold mb-3"},"My job seekers",-1)),0===i.jobs.length?((0,o.uX)(),(0,o.CE)("div",rE,"no seekers yet.")):(0,o.Q3)("",!0),(0,o.Lk)("div",iE,[(0,o.Lk)("div",lE,[(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>i.searchQuery=e),class:"form-control",placeholder:"Search by name"},null,512),[[s.Jo,i.searchQuery]])])]),(0,o.Lk)("div",nE,[(0,o.Lk)("table",dE,[t[5]||(t[5]=(0,o.Lk)("thead",{class:"table-light"},[(0,o.Lk)("tr",null,[(0,o.Lk)("th",null,"ID"),(0,o.Lk)("th",null,"NAMES"),(0,o.Lk)("th",null,"SALARY"),(0,o.Lk)("th",null,"SKILLS AND CAPABILITIES"),(0,o.Lk)("th",null,"PROVINCE"),(0,o.Lk)("th",null,"ACTION")])],-1)),(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.paginatedJobs,((e,t)=>((0,o.uX)(),(0,o.CE)("tr",{key:e.users_id},[(0,o.Lk)("td",null,(0,L.v_)((i.currentPage-1)*i.pageSize+t+1),1),(0,o.Lk)("td",null,(0,L.v_)(e.first_name)+" "+(0,L.v_)(e.last_name),1),(0,o.Lk)("td",null,(0,L.v_)(e.salary),1),(0,o.Lk)("td",null,(0,L.v_)(e.bio.length>40?e.bio.substring(0,40)+"...":e.bio),1),(0,o.Lk)("td",null,(0,L.v_)(e.province),1),(0,o.Lk)("td",null,[(0,o.Lk)("div",cE,[(0,o.Lk)("button",{class:"btn btn-primary btn-sm",onClick:t=>l.goToEdit(e.users_id)},"Edit",8,mE),(0,o.Lk)("button",{class:"btn btn-cancel btn-sm",onClick:t=>l.goToMore(e.users_id)},"More",8,uE)])])])))),128))])])]),l.totalPages>1?((0,o.uX)(),(0,o.CE)("div",gE,[(0,o.Lk)("nav",null,[(0,o.Lk)("ul",hE,[(0,o.Lk)("li",{class:(0,L.C4)(["page-item",{disabled:1===i.currentPage}])},[(0,o.Lk)("button",{class:"page-link",onClick:t[1]||(t[1]=e=>l.goToPage(i.currentPage-1))},"Previous")],2),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.totalPages,(e=>((0,o.uX)(),(0,o.CE)("li",{key:e,class:(0,L.C4)(["page-item",{active:e===i.currentPage}])},[(0,o.Lk)("button",{class:"page-link",onClick:t=>l.goToPage(e)},(0,L.v_)(e),9,pE)],2)))),128)),(0,o.Lk)("li",{class:(0,L.C4)(["page-item",{disabled:i.currentPage===l.totalPages}])},[(0,o.Lk)("button",{class:"page-link",onClick:t[2]||(t[2]=e=>l.goToPage(i.currentPage+1))},"Next")],2)])])])):(0,o.Q3)("",!0)])]),i.showModal?((0,o.uX)(),(0,o.CE)("div",bE,[(0,o.Lk)("div",fE,[t[8]||(t[8]=(0,o.Lk)("h5",null,"Are you sure you want to delete this job seeker content?",-1)),(0,o.Lk)("div",null,[(0,o.Lk)("button",{class:"btn btn-primary mt-3",onClick:t[3]||(t[3]=e=>l.deleteAbout(i.selectedAboutId))},"Yes, Delete"),t[7]||(t[7]=(0,o.eW)("Â  ")),(0,o.Lk)("button",{class:"btn btn-cancel mt-3",style:{"background-color":"teal",color:"white"},onClick:t[4]||(t[4]=(...e)=>l.closeModal&&l.closeModal(...e))},"Cancel")])])])):(0,o.Q3)("",!0)],64)}var vE={name:"MainWrapper",components:{IndexComponent:WC},data(){return{uploadsUrl:de+"/uploads/logo/",form:{},jobs:[],currentPage:1,pageSize:10,searchQuery:"",selectedCategoryId:"",categories:[],isSubmitting:!1,status:{success:!1,message:""},userEmail:"",userId:"",showModal:!1,selectedAboutId:null}},computed:{paginatedJobs(){let e=this.jobs;if(this.searchQuery){const t=this.searchQuery.toLowerCase();e=e.filter((e=>(e.first_name+" "+e.last_name).toLowerCase().includes(t)))}this.selectedCategoryId&&(e=e.filter((e=>e.categories_id==this.selectedCategoryId)));const t=(this.currentPage-1)*this.pageSize;return e.slice(t,t+this.pageSize)},totalPages(){let e=this.jobs;if(this.searchQuery){const t=this.searchQuery.toLowerCase();e=e.filter((e=>(e.first_name+" "+e.last_name).toLowerCase().includes(t)))}return this.selectedCategoryId&&(e=e.filter((e=>e.categories_id==this.selectedCategoryId))),Math.ceil(e.length/this.pageSize)}},watch:{searchQuery(){this.currentPage=1},selectedCategoryId(){this.currentPage=1}},mounted(){this.userEmail=localStorage.getItem("userEmail")||"",this.fetchCategories(),this.userEmail&&this.getUserIdFromEmail()},methods:{goToPage(e){e>=1&&e<=this.totalPages&&(this.currentPage=e)},async fetchJobsByUser(){try{const e=localStorage.getItem("agentToken");if(!this.userId)return;const t=await fetch(`${de}/admin/registered-seekers/${this.userEmail}`,{headers:{Authorization:`Bearer ${e}`}}),a=await t.json();t.ok?this.jobs=a:console.error("Failed to fetch jobs:",a.message)}catch(e){console.error("Error fetching jobs for user:",e)}},goToEdit(e){this.$router.push({name:"agent/agent-edit-seekers",params:{id:e}})},goToMore(e){this.$router.push({name:"agent/agent-view-seekers",params:{id:e}})},confirmDelete(e){this.selectedAboutId=e,this.showModal=!0},closeModal(){this.showModal=!1,this.selectedAboutId=null},async deleteAbout(e){const t=localStorage.getItem("agentToken");try{const a=await fetch(`${de}/admin/delete_job_seeker/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`}}),s=await a.json();a.ok?(this.jobs=this.jobs.filter((t=>t.users_id!==e)),this.status={success:!0,message:"Job deleted successfully."}):this.status={success:!1,message:s.message||"Failed to delete job."}}catch(a){console.error("Error deleting job:",a),this.status={success:!1,message:"An error occurred while deleting."}}finally{this.closeModal()}},async fetchCategories(){try{const e=localStorage.getItem("authToken"),t=await fetch(`${de}/name_and_id`,{headers:{Authorization:`Bearer ${e}`}}),a=await t.json();t.ok?this.categories=a:console.error("Failed to fetch categories:",a.message)}catch(e){console.error("Error fetching categories:",e)}},async getUserIdFromEmail(){const e=localStorage.getItem("agentToken");if(e)try{const t=JSON.parse(atob(e.split(".")[1]));this.userEmail||(this.userEmail=t.email);const a=await fetch(`${de}/get_user_id_by_email/${this.userEmail}`,{headers:{Authorization:`Bearer ${e}`}}),s=await a.json();a.ok?(this.userId=s.users_id,this.fetchJobsByUser()):this.status={success:!1,message:s.message||"Unable to get user ID."}}catch(t){console.error("Error getting users_id:",t),this.status={success:!1,message:"Failed to fetch user ID."}}}}};const yE=(0,n.A)(vE,[["render",kE],["__scopeId","data-v-22086102"]]);var LE=yE;const CE={class:"page-wrapper",id:"main-wrapper","data-layout":"vertical","data-navbarbg":"skin6","data-sidebartype":"full","data-sidebar-description":"fixed","data-header-description":"fixed"},wE={class:"body-wrapper"},_E={class:"form-group row"},AE=["for"],EE=["type","onUpdate:modelValue","id"],IE={class:"col-md-6"},xE={class:"col-md-6"},PE={class:"col-md-6"},SE={class:"col-md-6"},FE=["value"],ME={class:"col-md-6"},TE=["disabled"],jE=["value"],DE={class:"col-md-6"},UE=["disabled"],$E=["value"],XE={class:"col-md-6"},VE=["disabled"],BE=["value"],JE={class:"col-md-6"},NE=["disabled"],QE=["value"],zE={class:"col-md-6"},RE=["value"],WE={class:"col-md-6"},OE=["value"],HE={class:"col-md-6"},ZE={key:0,class:"mt-2"},KE=["href"],qE={class:"col-md-6"},GE={key:0,class:"mt-2"},YE=["src"],eI={class:"col-md-6"},tI={key:0,class:"mt-2"},aI=["href"],sI={class:"col-md-12"};function oI(e,t,a,r,i,l){const n=(0,o.g2)("IndexComponent");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(n),(0,o.Lk)("div",CE,[(0,o.Lk)("div",wE,[t[45]||(t[45]=(0,o.Lk)("h5",{class:"card-title fw-semibold mb-4"},"Update seeker",-1)),(0,o.Lk)("form",{onSubmit:t[19]||(t[19]=(0,s.D$)(((...e)=>l.handleSubmit&&l.handleSubmit(...e)),["prevent"])),class:"mx-4"},[(0,o.Lk)("div",_E,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.personalFields,((e,t)=>((0,o.uX)(),(0,o.CE)("div",{class:"col-md-6",key:t},[(0,o.Lk)("label",{for:e.model,class:"form-label"},(0,L.v_)(e.label),9,AE),(0,o.bo)((0,o.Lk)("input",{type:e.type,"onUpdate:modelValue":t=>i.form[e.model]=t,class:"form-control",id:e.model,required:""},null,8,EE),[[s.hp,i.form[e.model]]])])))),128)),(0,o.Lk)("div",IE,[t[21]||(t[21]=(0,o.Lk)("label",{class:"form-label"},"Gender",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>i.form.gender=e),class:"form-control",required:"",style:{height:"48px","padding-top":"8px","padding-bottom":"8px"}},t[20]||(t[20]=[(0,o.Lk)("option",{disabled:"",value:""},"Select Gender",-1),(0,o.Lk)("option",{value:"Male"},"Male",-1),(0,o.Lk)("option",{value:"Female"},"Female",-1),(0,o.Lk)("option",{value:"Other"},"Other",-1)]),512),[[s.u1,i.form.gender]])]),(0,o.Lk)("div",xE,[t[23]||(t[23]=(0,o.Lk)("label",{class:"form-label"},"Disability",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>i.form.disability=e),class:"form-control",required:"",style:{height:"48px","padding-top":"8px","padding-bottom":"8px"}},t[22]||(t[22]=[(0,o.Fv)('<option disabled value="" data-v-02b06126>Select Disability</option><option value="None" data-v-02b06126>None</option><option value="Visual Impairment" data-v-02b06126>Visual Impairment</option><option value="Hearing Impairment" data-v-02b06126>Hearing Impairment</option><option value="Physical Disability" data-v-02b06126>Physical Disability</option><option value="Intellectual Disability" data-v-02b06126>Intellectual Disability</option><option value="Mental Health Condition" data-v-02b06126>Mental Health Condition</option><option value="Learning Disability" data-v-02b06126>Learning Disability</option><option value="Speech and Language Disorder" data-v-02b06126>Speech and Language Disorder</option><option value="Other" data-v-02b06126>Other</option>',10)]),512),[[s.u1,i.form.disability]])]),(0,o.Lk)("div",PE,[t[25]||(t[25]=(0,o.Lk)("label",{class:"form-label"},"Expected Salary",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>i.form.salary=e),class:"form-control",style:{height:"48px","padding-top":"8px","padding-bottom":"8px"},required:""},t[24]||(t[24]=[(0,o.Lk)("option",{disabled:"",value:""},"Select Salary",-1),(0,o.Lk)("option",null,"35,000 Frw - 50,000 Frw",-1),(0,o.Lk)("option",null,"51,000 Frw - 80,000 Frw",-1),(0,o.Lk)("option",null,"81,000 Frw - 100,000 Frw",-1),(0,o.Lk)("option",null,"101,000 Frw - 150,000 Frw",-1),(0,o.Lk)("option",null,"150,001+ Frw",-1)]),512),[[s.u1,i.form.salary]])]),(0,o.Lk)("div",SE,[t[27]||(t[27]=(0,o.Lk)("label",{class:"form-label"},"Province",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>i.form.province=e),onChange:t[4]||(t[4]=(...e)=>l.loadDistricts&&l.loadDistricts(...e)),class:"form-control",required:"",style:{height:"48px","padding-top":"8px","padding-bottom":"8px"}},[t[26]||(t[26]=(0,o.Lk)("option",{disabled:"",value:""},"Select Province",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.provinces,(e=>((0,o.uX)(),(0,o.CE)("option",{key:e,value:e},(0,L.v_)(e),9,FE)))),128))],544),[[s.u1,i.form.province]])]),(0,o.Lk)("div",ME,[t[29]||(t[29]=(0,o.Lk)("label",{class:"form-label"},"District",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>i.form.district=e),onChange:t[6]||(t[6]=(...e)=>l.loadSectors&&l.loadSectors(...e)),class:"form-control",required:"",style:{height:"48px","padding-top":"8px","padding-bottom":"8px"},disabled:!i.form.province},[t[28]||(t[28]=(0,o.Lk)("option",{disabled:"",value:""},"Select District",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.districts,(e=>((0,o.uX)(),(0,o.CE)("option",{key:e,value:e},(0,L.v_)(e),9,jE)))),128))],40,TE),[[s.u1,i.form.district]])]),(0,o.Lk)("div",DE,[t[31]||(t[31]=(0,o.Lk)("label",{class:"form-label"},"Sector",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[7]||(t[7]=e=>i.form.sector=e),onChange:t[8]||(t[8]=(...e)=>l.loadCells&&l.loadCells(...e)),class:"form-control",required:"",style:{height:"48px","padding-top":"8px","padding-bottom":"8px"},disabled:!i.form.district},[t[30]||(t[30]=(0,o.Lk)("option",{disabled:"",value:""},"Select Sector",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.sectors,(e=>((0,o.uX)(),(0,o.CE)("option",{key:e,value:e},(0,L.v_)(e),9,$E)))),128))],40,UE),[[s.u1,i.form.sector]])]),(0,o.Lk)("div",XE,[t[33]||(t[33]=(0,o.Lk)("label",{class:"form-label"},"Cell",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[9]||(t[9]=e=>i.form.cell=e),onChange:t[10]||(t[10]=(...e)=>l.loadVillages&&l.loadVillages(...e)),class:"form-control",required:"",style:{height:"48px","padding-top":"8px","padding-bottom":"8px"},disabled:!i.form.sector},[t[32]||(t[32]=(0,o.Lk)("option",{disabled:"",value:""},"Select Cell",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.cells,(e=>((0,o.uX)(),(0,o.CE)("option",{key:e,value:e},(0,L.v_)(e),9,BE)))),128))],40,VE),[[s.u1,i.form.cell]])]),(0,o.Lk)("div",JE,[t[35]||(t[35]=(0,o.Lk)("label",{class:"form-label"},"Village",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[11]||(t[11]=e=>i.form.village=e),class:"form-control",required:"",style:{height:"48px","padding-top":"8px","padding-bottom":"8px"},disabled:!i.form.cell},[t[34]||(t[34]=(0,o.Lk)("option",{disabled:"",value:""},"Select Village",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.villages,(e=>((0,o.uX)(),(0,o.CE)("option",{key:e,value:e},(0,L.v_)(e),9,QE)))),128))],8,NE),[[s.u1,i.form.village]])]),(0,o.Lk)("div",zE,[t[37]||(t[37]=(0,o.Lk)("label",{class:"form-label"},"Category Type",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[12]||(t[12]=e=>i.selectedCategoryType=e),onChange:t[13]||(t[13]=(...e)=>l.onCategoryTypeChange&&l.onCategoryTypeChange(...e)),class:"form-control",required:"",style:{height:"48px","padding-top":"8px","padding-bottom":"8px"}},[t[36]||(t[36]=(0,o.Lk)("option",{disabled:"",value:""},"Select Category Type",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.categoryTypes,(e=>((0,o.uX)(),(0,o.CE)("option",{key:e.id,value:e.id},(0,L.v_)(e.name),9,RE)))),128))],544),[[s.u1,i.selectedCategoryType]])]),(0,o.Lk)("div",WE,[t[39]||(t[39]=(0,o.Lk)("label",{class:"form-label"},"Category",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[14]||(t[14]=e=>i.form.categories_id=e),style:{height:"48px","padding-top":"8px","padding-bottom":"8px"},class:"form-control",required:""},[t[38]||(t[38]=(0,o.Lk)("option",{disabled:"",value:""},"Select Category",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.categories,(e=>((0,o.uX)(),(0,o.CE)("option",{key:e.id,value:e.id},(0,L.v_)(e.name),9,OE)))),128))],512),[[s.u1,i.form.categories_id]])]),(0,o.Lk)("div",HE,[t[40]||(t[40]=(0,o.Lk)("label",{class:"form-label"},"Upload ID Card",-1)),(0,o.Lk)("input",{type:"file",onChange:t[15]||(t[15]=e=>l.handleFileChange("id",e)),class:"form-control",accept:".pdf,.jpg,.jpeg,.png"},null,32),i.form.id_url?((0,o.uX)(),(0,o.CE)("div",ZE,[(0,o.Lk)("a",{href:i.form.id_url,target:"_blank",class:"btn btn-outline-primary btn-sm"},"View Current ID",8,KE)])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",qE,[t[41]||(t[41]=(0,o.Lk)("label",{class:"form-label"},"Upload Profile Image",-1)),(0,o.Lk)("input",{type:"file",onChange:t[16]||(t[16]=e=>l.handleFileChange("image",e)),class:"form-control",accept:"image/*"},null,32),i.form.image_url?((0,o.uX)(),(0,o.CE)("div",GE,[(0,o.Lk)("img",{src:i.form.image_url,alt:"Profile",class:"img-thumbnail",style:{"max-height":"150px"}},null,8,YE)])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",eI,[t[42]||(t[42]=(0,o.Lk)("label",{class:"form-label"},"Upload CV",-1)),(0,o.Lk)("input",{type:"file",onChange:t[17]||(t[17]=e=>l.handleFileChange("cv",e)),class:"form-control",accept:".pdf,.doc,.docx"},null,32),i.form.cv_url?((0,o.uX)(),(0,o.CE)("div",tI,[(0,o.Lk)("a",{href:i.form.cv_url,target:"_blank",class:"btn btn-outline-secondary btn-sm"},"View Current CV",8,aI)])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",sI,[t[43]||(t[43]=(0,o.Lk)("label",{class:"form-label"},"Bio",-1)),(0,o.bo)((0,o.Lk)("textarea",{"onUpdate:modelValue":t[18]||(t[18]=e=>i.form.bio=e),class:"form-control",rows:"10",required:""},null,512),[[s.Jo,i.form.bio]])])]),t[44]||(t[44]=(0,o.Lk)("button",{type:"submit",class:"btn btn-primary mb-3"},"Update",-1)),i.message?((0,o.uX)(),(0,o.CE)("div",{key:0,class:(0,L.C4)(["alert",i.messageType])},(0,L.v_)(i.message),3)):(0,o.Q3)("",!0)],32)])])],64)}var rI={name:"ProfileComponent",components:{IndexComponent:WC},data(){return{form:{first_name:"",last_name:"",gender:"",fathers_name:"",mothers_name:"",telephone:"",email:"",province:"",district:"",sector:"",cell:"",village:"",bio:"",salary:"",date_of_birth:"",disability:"",created_at:"",cv:null,id:null,image:null,categories_id:"",id_url:null,userIdurl:null,users_id:null,cv_url:null,image_url:null},selectedCategoryType:"",userId:"",userEmail:"",message:null,messageType:null,categoryTypes:[],categories:[],provinces:[],districts:[],sectors:[],cells:[],villages:[],personalFields:[{label:"First Name",model:"first_name",type:"text"},{label:"Last Name",model:"last_name",type:"text"},{label:"Father's Name",model:"fathers_name",type:"text"},{label:"Mother's Name",model:"mothers_name",type:"text"},{label:"Telephone",model:"telephone",type:"text"},{label:"Email",model:"email",type:"text"},{label:"Date of Birth",model:"date_of_birth",type:"date"}]}},mounted(){this.loadProvinces(),this.getUserIdFromEmail(),this.loadCategoryTypes(),this.userIdurl=this.$route.params.id},methods:{loadProvinces(){try{this.provinces=(0,gr.getProvinces)()}catch(e){console.error("Error loading provinces:",e),this.message="Failed to load provinces.",this.messageType="alert-warning"}},loadDistricts(){try{this.form.province&&(this.districts=(0,gr.getDistrictsByProvince)(this.form.province),this.districts.length>0&&!this.districts.includes(this.form.district)&&(this.sectors=[],this.cells=[],this.villages=[],this.form.district="",this.form.sector="",this.form.cell="",this.form.village=""))}catch(e){console.error("Error loading districts:",e),this.message="Failed to load districts.",this.messageType="alert-warning"}},loadSectors(){try{this.form.province&&this.form.district&&(this.sectors=(0,gr.getSectorsByDistrict)(this.form.province,this.form.district),this.sectors.length>0&&!this.sectors.includes(this.form.sector)&&(this.cells=[],this.villages=[],this.form.sector="",this.form.cell="",this.form.village=""))}catch(e){console.error("Error loading sectors:",e),this.message="Failed to load sectors.",this.messageType="alert-warning"}},loadCells(){try{this.form.province&&this.form.district&&this.form.sector&&(this.cells=(0,gr.getCellsBySector)(this.form.province,this.form.district,this.form.sector),this.cells.length>0&&!this.cells.includes(this.form.cell)&&(this.villages=[],this.form.cell="",this.form.village=""))}catch(e){console.error("Error loading cells:",e),this.message="Failed to load cells.",this.messageType="alert-warning"}},loadVillages(){try{this.form.province&&this.form.district&&this.form.sector&&this.form.cell&&(this.villages=(0,gr.getVillagesByCell)(this.form.province,this.form.district,this.form.sector,this.form.cell),this.villages.length>0&&!this.villages.includes(this.form.village)&&(this.form.village=""))}catch(e){console.error("Error loading villages:",e),this.message="Failed to load villages.",this.messageType="alert-warning"}},async populateGeographicHierarchy(){try{this.form.province&&(this.loadDistricts(),this.form.district&&setTimeout((()=>{this.loadSectors(),this.form.sector&&setTimeout((()=>{this.loadCells(),this.form.cell&&setTimeout((()=>{this.loadVillages()}),100)}),100)}),100))}catch(e){console.error("Error populating geographic hierarchy:",e)}},async getUserIdFromEmail(){const e=localStorage.getItem("agentToken");if(e)try{const t=JSON.parse(atob(e.split(".")[1]));this.userEmail=t.email;const a=await fetch(`${de}/get_user_id_by_email/${this.userEmail}`,{headers:{Authorization:`Bearer ${e}`}}),s=await a.json();a.ok?(this.userId=s.users_id,this.fetchProfile()):(this.message=s.message||"Unable to get user ID.",this.messageType="alert-danger")}catch(t){console.error("Error getting users_id:",t),this.message="Failed to fetch user ID.",this.messageType="alert-danger"}},async fetchProfile(){try{const e=await fetch(`${de}/seeker/view_profile/${this.userIdurl}`,{headers:{Authorization:`Bearer ${localStorage.getItem("agentToken")}`}}),t=await e.json();e.ok?(this.form.date_of_birth=t.date_of_birth?t.date_of_birth.split("T")[0]:"",this.form.salary=t.salary||"",Object.keys(this.form).forEach((e=>{"date_of_birth"!==e&&"salary"!==e&&(this.form[e]=t[e]||this.form[e])})),this.form.id_url=t.ID?`${de}/uploads/profile/${t.ID}`:null,this.form.cv_url=t.cv?`${de}/uploads/profile/${t.cv}`:null,this.form.image_url=t.image?`${de}/uploads/profile/${t.image}`:null,await this.populateGeographicHierarchy(),await this.loadCurrentCategoryInfo()):(this.message=t.message||"Failed to fetch profile",this.messageType="alert-danger")}catch(e){console.error("Error fetching profile:",e),this.message="Error loading profile.",this.messageType="alert-danger"}},async loadCurrentCategoryInfo(){try{const e=await fetch(`${de}/categoryandtype/${this.userIdurl}`),t=await e.json();e.ok?(this.selectedCategoryType=t.category_types_id,await this.loadCategories(),this.form.categories_id=t.category_id):console.error("Failed to load current category info:",t.message)}catch(e){console.error("Error loading current category info:",e)}},async loadCategoryTypes(){try{const e=await fetch(`${de}/category-types`),t=await e.json();this.categoryTypes=t}catch(e){console.error("Failed to load category types:",e)}},async loadCategories(){if(this.selectedCategoryType)try{const e=await fetch(`${de}/categories/${this.selectedCategoryType}`),t=await e.json();this.categories=t}catch(e){console.error("Failed to load categories:",e)}},async onCategoryTypeChange(){await this.loadCategories(),this.form.categories_id=""},handleFileChange(e,t){const a=t.target.files[0];if(a){if(a.size>10485760)return this.message=`File ${a.name} is too large. Maximum size is 10MB.`,void(this.messageType="alert-danger");this.form[e]=a,"image"===e&&a.type.startsWith("image/")&&(this.form.image_url=URL.createObjectURL(a))}},async handleSubmit(){const e=new FormData;for(const a of["first_name","last_name","gender","fathers_name","mothers_name","telephone","province","district","sector","cell","village","bio","salary","date_of_birth","disability","categories_id"])e.append(a,this.form[a]);this.form.image&&e.append("image",this.form.image),this.form.id&&e.append("id",this.form.id),this.form.cv&&e.append("cv",this.form.cv),e.append("is_editable",0);try{const t=await fetch(`${de}/seeker/update_profile/${this.userIdurl}`,{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("agentToken")}`},body:e}),a=await t.json();t.ok?(this.message="Profile updated successfully.",this.messageType="alert-success",await this.fetchProfile()):(this.message=a.message||"Failed to update profile.",this.messageType="alert-danger")}catch(t){console.error("Error updating profile:",t),this.message="An error occurred during update.",this.messageType="alert-danger"}}}};const iI=(0,n.A)(rI,[["render",oI],["__scopeId","data-v-02b06126"]]);var lI=iI;const nI={class:"page-wrapper",id:"main-wrapper","data-layout":"vertical","data-navbarbg":"skin6","data-sidebartype":"full","data-sidebar-description":"fixed","data-header-description":"fixed"},dI={class:"body-wrapper"},cI={class:"mx-4"},mI={class:"form-group row"},uI={class:"form-label"},gI={class:"form-control-plaintext"},hI={class:"col-md-6"},pI=["href"],bI=["src"],fI={class:"col-md-6"},kI=["href"],vI=["src"],yI={class:"col-md-6"},LI=["href"];function CI(e,t,a,s,r,i){const l=(0,o.g2)("IndexComponent");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(l),(0,o.Lk)("div",nI,[(0,o.Lk)("div",dI,[t[7]||(t[7]=(0,o.Lk)("h5",{class:"card-title fw-semibold mb-4"},"Seeker's more information",-1)),(0,o.Lk)("div",cI,[r.message?((0,o.uX)(),(0,o.CE)("div",{key:0,class:(0,L.C4)(["alert",r.messageType])},(0,L.v_)(r.message),3)):(0,o.Q3)("",!0),(0,o.Lk)("div",mI,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(r.personalFields,((e,t)=>((0,o.uX)(),(0,o.CE)("div",{class:"col-md-6",key:t},[(0,o.Lk)("label",uI,(0,L.v_)(e.label),1),(0,o.Lk)("p",gI,(0,L.v_)("category"===e.model?r.categoryName:r.form[e.model]),1)])))),128)),(0,o.Lk)("div",hI,[t[0]||(t[0]=(0,o.Lk)("strong",null,"Profile Image:",-1)),t[1]||(t[1]=(0,o.Lk)("br",null,null,-1)),(0,o.Lk)("a",{href:r.uploadsUrl+r.form.image,target:"_blank"},[(0,o.Lk)("img",{src:r.uploadsUrl+r.form.image,alt:"Profile",class:"img-thumbnail",width:"250"},null,8,bI)],8,pI)]),(0,o.Lk)("div",fI,[t[2]||(t[2]=(0,o.Lk)("strong",null,"ID card:",-1)),t[3]||(t[3]=(0,o.Lk)("br",null,null,-1)),(0,o.Lk)("a",{href:r.uploadsUrl+r.form.id,target:"_blank"},[(0,o.Lk)("img",{src:r.uploadsUrl+r.form.id,alt:"ID",class:"img-thumbnail",width:"250"},null,8,vI)],8,kI)]),(0,o.Lk)("div",yI,[t[4]||(t[4]=(0,o.Lk)("strong",null,"CV:",-1)),t[5]||(t[5]=(0,o.Lk)("br",null,null,-1)),r.form.cv?((0,o.uX)(),(0,o.CE)("a",{key:0,href:r.uploadsUrl+r.form.cv,target:"_blank",rel:"noopener noreferrer",class:"btn btn-outline-primary mt-2"}," View CV ",8,LI)):(0,o.Q3)("",!0)]),t[6]||(t[6]=(0,o.Lk)("div",{class:"col-md-6"},null,-1))])])])]),t[8]||(t[8]=(0,o.Lk)("br",null,null,-1)),t[9]||(t[9]=(0,o.Lk)("br",null,null,-1)),t[10]||(t[10]=(0,o.Lk)("br",null,null,-1)),t[11]||(t[11]=(0,o.Lk)("br",null,null,-1))],64)}var wI={name:"ProfileComponent",components:{IndexComponent:WC},data(){return{form:{first_name:"",last_name:"",email:"",gender:"",fathers_name:"",mothers_name:"",telephone:"",province:"",district:"",sector:"",cell:"",village:"",bio:"",salary:"",category:"",date_of_birth:"",disability:"",cv:null,id:null,image:null,categories_id:"",job_seeker_id:"",userIdurl:null},uploadsUrl:`${de}/uploads/profile/`,selectedCategoryType:"",userId:"",userEmail:"",message:null,messageType:null,categoryTypes:[],categories:[],categoryName:"Unknown",personalFields:[{label:"First Name",model:"first_name"},{label:"Last Name",model:"last_name"},{label:"Last Name",model:"email"},{label:"Father's Name",model:"fathers_name"},{label:"Mother's Name",model:"mothers_name"},{label:"Date of Birth",model:"date_of_birth"},{label:"Gender",model:"gender"},{label:"Province",model:"province"},{label:"District",model:"district"},{label:"Sector",model:"sector"},{label:"Cell",model:"cell"},{label:"Village",model:"village"},{label:"Telephone",model:"telephone"},{label:"Disability",model:"disability"},{label:"Salary",model:"salary"},{label:"Category",model:"category"},{label:"Skills and capabilities",model:"bio"}]}},mounted(){this.userIdurl=this.$route.params.id,this.getUserIdFromEmail(),this.loadCategoryTypes()},methods:{async getUserIdFromEmail(){const e=localStorage.getItem("agentToken");if(e)try{const t=JSON.parse(atob(e.split(".")[1]));this.userEmail=t.email;const a=await fetch(`${de}/get_user_id_by_email/${this.userEmail}`,{headers:{Authorization:`Bearer ${e}`}}),s=await a.json();a.ok?(this.userId=s.users_id,this.fetchProfile(),this.fetchCategoryNameByUserId()):(this.message=s.message||"Unable to get user ID.",this.messageType="alert-danger")}catch(t){console.error("Error getting users_id:",t),this.message="Failed to fetch user ID.",this.messageType="alert-danger"}},async fetchProfile(){try{const e=await fetch(`${de}/seeker/view_profile/${this.userIdurl}`,{headers:{Authorization:`Bearer ${localStorage.getItem("agentToken")}`}}),t=await e.json();e.ok?(this.form={...this.form,...t},t.categories_id&&await this.determineCategoryType(t.categories_id)):(this.message=t.message||"Failed to fetch profile",this.messageType="alert-danger")}catch(e){console.error("Error fetching profile:",e),this.message="Error loading profile.",this.messageType="alert-danger"}},async fetchCategoryNameByUserId(){try{const e=await fetch(`${de}/category/${this.userIdurl}`),t=await e.json();e.ok&&t.name?this.categoryName=t.name:this.categoryName="Unknown"}catch(e){console.error("Failed to fetch category name:",e),this.categoryName="Error fetching category"}},async determineCategoryType(e){try{const t=await fetch(`${de}/category-details/${e}`),a=await t.json();t.ok&&(this.selectedCategoryType=a.type_id,await this.loadCategories(),this.form.categories_id=e)}catch(t){console.error("Error determining category type:",t)}},async loadCategoryTypes(){try{const e=await fetch(`${de}/category-types`),t=await e.json();this.categoryTypes=t}catch(e){console.error("Failed to load category types:",e)}},async loadCategories(){try{const e=await fetch(`${de}/categories/${this.selectedCategoryType}`),t=await e.json();this.categories=t}catch(e){console.error("Failed to load categories:",e)}},async ApproveUser(){if(console.log("ApproveUser called with job_seeker_id:",this.form.job_seeker_id),!this.form.job_seeker_id)return this.message="Job seeker ID is missing!",void(this.messageType="alert-danger");try{const e=await fetch(`${de}/admin/approve_job_seeker/${this.form.job_seeker_id}`,{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("agentToken")}`,"Content-Type":"application/json"}}),t=await e.json();e.ok?(this.message=" Approved successfully.",this.messageType="alert-success"):(this.message=t.message||"Failed to grant access.",this.messageType="alert-danger")}catch(e){console.error("Error approving access:",e),this.message="An error occurred while  approving access.",this.messageType="alert-danger"}},async GiveAccess(){if(console.log("giveaccess called with job_seeker_id:",this.form.job_seeker_id),!this.form.job_seeker_id)return this.message="Job seeker ID is missing!",void(this.messageType="alert-danger");try{const e=await fetch(`${de}/admin/giveaccess/${this.form.job_seeker_id}`,{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("agentToken")}`,"Content-Type":"application/json"}}),t=await e.json();e.ok?(this.message="Access granted.",this.messageType="alert-success"):(this.message=t.message||"Failed to grant access.",this.messageType="alert-danger")}catch(e){console.error("Error granting access:",e),this.message="An error occurred while granting access.",this.messageType="alert-danger"}}}};const _I=(0,n.A)(wI,[["render",CI],["__scopeId","data-v-83511b32"]]);var AI=_I;const EI={class:"page-wrapper",id:"main-wrapper","data-layout":"vertical","data-navbarbg":"skin6","data-sidebartype":"full"},II={class:"body-wrapper"},xI={class:"form-group row"},PI=["for"],SI=["type","onUpdate:modelValue","id"],FI={class:"col-md-6"},MI={class:"col-md-6"},TI={class:"col-md-6"},jI={class:"col-md-6"},DI=["value"],UI={class:"col-md-6"},$I=["disabled"],XI=["value"],VI={class:"col-md-6"},BI=["disabled"],JI=["value"],NI={class:"col-md-6"},QI=["disabled"],zI=["value"],RI={class:"col-md-6"},WI=["disabled"],OI=["value"],HI={class:"col-md-6"},ZI=["value"],KI={class:"col-md-6"},qI=["value"],GI={class:"col-md-6"},YI={key:0,class:"mt-2"},ex=["href"],tx={class:"col-md-6"},ax={key:0,class:"mt-2"},sx=["src"],ox={class:"col-md-6"},rx={key:0,class:"mt-2"},ix=["href"],lx={class:"col-md-12"},nx={class:"d-flex gap-2 mt-3 mb-5"},dx=["disabled"];function cx(e,t,a,r,i,l){const n=(0,o.g2)("IndexComponent");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(n),(0,o.Lk)("div",EI,[(0,o.Lk)("div",II,[t[44]||(t[44]=(0,o.Lk)("h5",{class:"card-title fw-semibold mb-4"},"Register New seeker",-1)),(0,o.Lk)("form",{onSubmit:t[19]||(t[19]=(0,s.D$)(((...e)=>l.handleSubmit&&l.handleSubmit(...e)),["prevent"])),class:"mx-4"},[i.message?((0,o.uX)(),(0,o.CE)("div",{key:0,class:(0,L.C4)(["alert",i.messageType])},(0,L.v_)(i.message),3)):(0,o.Q3)("",!0),(0,o.Lk)("div",xI,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.personalFields,((e,t)=>((0,o.uX)(),(0,o.CE)("div",{class:"col-md-6",key:t},[(0,o.Lk)("label",{for:e.model,class:"form-label"},(0,L.v_)(e.label),9,PI),(0,o.bo)((0,o.Lk)("input",{type:e.type,"onUpdate:modelValue":t=>i.form[e.model]=t,class:"form-control",id:e.model,required:""},null,8,SI),[[s.hp,i.form[e.model]]])])))),128)),(0,o.Lk)("div",FI,[t[21]||(t[21]=(0,o.Lk)("label",{class:"form-label"},"Gender",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>i.form.gender=e),class:"form-control",style:{height:"48px","padding-top":"8px","padding-bottom":"8px"},required:""},t[20]||(t[20]=[(0,o.Lk)("option",{disabled:"",value:""},"Select Gender",-1),(0,o.Lk)("option",{value:"Male"},"Male",-1),(0,o.Lk)("option",{value:"Female"},"Female",-1),(0,o.Lk)("option",{value:"Other"},"Other",-1)]),512),[[s.u1,i.form.gender]])]),(0,o.Lk)("div",MI,[t[23]||(t[23]=(0,o.Lk)("label",{class:"form-label"},"Disability",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>i.form.disability=e),class:"form-control",style:{height:"48px","padding-top":"8px","padding-bottom":"8px"},required:""},t[22]||(t[22]=[(0,o.Fv)('<option disabled value="" data-v-08c992da>Select Disability</option><option value="None" data-v-08c992da>None</option><option value="Visual Impairment" data-v-08c992da>Visual Impairment</option><option value="Hearing Impairment" data-v-08c992da>Hearing Impairment</option><option value="Physical Disability" data-v-08c992da>Physical Disability</option><option value="Intellectual Disability" data-v-08c992da>Intellectual Disability</option><option value="Mental Health Condition" data-v-08c992da>Mental Health Condition</option><option value="Learning Disability" data-v-08c992da>Learning Disability</option><option value="Speech and Language Disorder" data-v-08c992da>Speech and Language Disorder</option><option value="Other" data-v-08c992da>Other</option>',10)]),512),[[s.u1,i.form.disability]])]),(0,o.Lk)("div",TI,[t[25]||(t[25]=(0,o.Lk)("label",{class:"form-label"},"Expected Salary",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>i.form.salary=e),class:"form-control",style:{height:"48px","padding-top":"8px","padding-bottom":"8px"},required:""},t[24]||(t[24]=[(0,o.Lk)("option",{disabled:"",value:""},"Select Salary",-1),(0,o.Lk)("option",null,"35,000 Frw - 50,000 Frw",-1),(0,o.Lk)("option",null,"51,000 Frw - 80,000 Frw",-1),(0,o.Lk)("option",null,"81,000 Frw - 100,000 Frw",-1),(0,o.Lk)("option",null,"101,000 Frw - 150,000 Frw",-1),(0,o.Lk)("option",null,"150,001+ Frw",-1)]),512),[[s.u1,i.form.salary]])]),(0,o.Lk)("div",jI,[t[27]||(t[27]=(0,o.Lk)("label",{class:"form-label"},"Province",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>i.form.province=e),onChange:t[4]||(t[4]=(...e)=>l.loadDistricts&&l.loadDistricts(...e)),class:"form-control",required:"",style:{height:"48px","padding-top":"8px","padding-bottom":"8px"}},[t[26]||(t[26]=(0,o.Lk)("option",{disabled:"",value:""},"Select Province",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.provinces,(e=>((0,o.uX)(),(0,o.CE)("option",{key:e,value:e},(0,L.v_)(e),9,DI)))),128))],544),[[s.u1,i.form.province]])]),(0,o.Lk)("div",UI,[t[29]||(t[29]=(0,o.Lk)("label",{class:"form-label"},"District",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>i.form.district=e),onChange:t[6]||(t[6]=(...e)=>l.loadSectors&&l.loadSectors(...e)),class:"form-control",required:"",disabled:!i.form.province,style:{height:"48px","padding-top":"8px","padding-bottom":"8px"}},[t[28]||(t[28]=(0,o.Lk)("option",{disabled:"",value:""},"Select District",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.districts,(e=>((0,o.uX)(),(0,o.CE)("option",{key:e,value:e},(0,L.v_)(e),9,XI)))),128))],40,$I),[[s.u1,i.form.district]])]),(0,o.Lk)("div",VI,[t[31]||(t[31]=(0,o.Lk)("label",{class:"form-label"},"Sector",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[7]||(t[7]=e=>i.form.sector=e),onChange:t[8]||(t[8]=(...e)=>l.loadCells&&l.loadCells(...e)),class:"form-control",required:"",disabled:!i.form.district,style:{height:"48px","padding-top":"8px","padding-bottom":"8px"}},[t[30]||(t[30]=(0,o.Lk)("option",{disabled:"",value:""},"Select Sector",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.sectors,(e=>((0,o.uX)(),(0,o.CE)("option",{key:e,value:e},(0,L.v_)(e),9,JI)))),128))],40,BI),[[s.u1,i.form.sector]])]),(0,o.Lk)("div",NI,[t[33]||(t[33]=(0,o.Lk)("label",{class:"form-label"},"Cell",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[9]||(t[9]=e=>i.form.cell=e),onChange:t[10]||(t[10]=(...e)=>l.loadVillages&&l.loadVillages(...e)),class:"form-control",required:"",disabled:!i.form.sector,style:{height:"48px","padding-top":"8px","padding-bottom":"8px"}},[t[32]||(t[32]=(0,o.Lk)("option",{disabled:"",value:""},"Select Cell",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.cells,(e=>((0,o.uX)(),(0,o.CE)("option",{key:e,value:e},(0,L.v_)(e),9,zI)))),128))],40,QI),[[s.u1,i.form.cell]])]),(0,o.Lk)("div",RI,[t[35]||(t[35]=(0,o.Lk)("label",{class:"form-label"},"Village",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[11]||(t[11]=e=>i.form.village=e),class:"form-control",required:"",disabled:!i.form.cell,style:{height:"48px","padding-top":"8px","padding-bottom":"8px"}},[t[34]||(t[34]=(0,o.Lk)("option",{disabled:"",value:""},"Select Village",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.villages,(e=>((0,o.uX)(),(0,o.CE)("option",{key:e,value:e},(0,L.v_)(e),9,OI)))),128))],8,WI),[[s.u1,i.form.village]])]),(0,o.Lk)("div",HI,[t[37]||(t[37]=(0,o.Lk)("label",{class:"form-label"},"Category Type",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[12]||(t[12]=e=>i.selectedCategoryType=e),onChange:t[13]||(t[13]=(...e)=>l.loadCategories&&l.loadCategories(...e)),class:"form-control",required:"",style:{height:"48px","padding-top":"8px","padding-bottom":"8px"}},[t[36]||(t[36]=(0,o.Lk)("option",{disabled:"",value:""},"Select Category Type",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.categoryTypes,(e=>((0,o.uX)(),(0,o.CE)("option",{key:e.id,value:e.id},(0,L.v_)(e.name),9,ZI)))),128))],544),[[s.u1,i.selectedCategoryType]])]),(0,o.Lk)("div",KI,[t[39]||(t[39]=(0,o.Lk)("label",{class:"form-label"},"Category",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[14]||(t[14]=e=>i.form.categories_id=e),class:"form-control",required:"",style:{height:"48px","padding-top":"8px","padding-bottom":"8px"}},[t[38]||(t[38]=(0,o.Lk)("option",{disabled:"",value:""},"Select Category",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.categories,(e=>((0,o.uX)(),(0,o.CE)("option",{key:e.id,value:e.id},(0,L.v_)(e.name),9,qI)))),128))],512),[[s.u1,i.form.categories_id]])]),(0,o.Lk)("div",GI,[t[40]||(t[40]=(0,o.Lk)("label",{class:"form-label"},"Upload ID Card",-1)),(0,o.Lk)("input",{type:"file",onChange:t[15]||(t[15]=e=>l.handleFileChange("id",e)),class:"form-control",accept:".pdf,.jpg,.jpeg,.png",required:""},null,32),i.form.id_url?((0,o.uX)(),(0,o.CE)("div",YI,[(0,o.Lk)("a",{href:i.form.id_url,target:"_blank",class:"btn btn-outline-primary btn-sm"},"View Current ID",8,ex)])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",tx,[t[41]||(t[41]=(0,o.Lk)("label",{class:"form-label"},"Upload Profile Image",-1)),(0,o.Lk)("input",{type:"file",onChange:t[16]||(t[16]=e=>l.handleFileChange("image",e)),class:"form-control",accept:"image/*",required:""},null,32),i.form.image_url?((0,o.uX)(),(0,o.CE)("div",ax,[(0,o.Lk)("img",{src:i.form.image_url,alt:"Profile",class:"img-thumbnail",style:{"max-height":"150px"}},null,8,sx)])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",ox,[t[42]||(t[42]=(0,o.Lk)("label",{class:"form-label"},"Upload CV",-1)),(0,o.Lk)("input",{type:"file",onChange:t[17]||(t[17]=e=>l.handleFileChange("cv",e)),class:"form-control",accept:".pdf,.doc,.docx"},null,32),i.form.cv_url?((0,o.uX)(),(0,o.CE)("div",rx,[(0,o.Lk)("a",{href:i.form.cv_url,target:"_blank",class:"btn btn-outline-secondary btn-sm"},"View Current CV",8,ix)])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",lx,[t[43]||(t[43]=(0,o.Lk)("label",{class:"form-label"},"Skills and capabilities",-1)),(0,o.bo)((0,o.Lk)("textarea",{"onUpdate:modelValue":t[18]||(t[18]=e=>i.form.bio=e),class:"form-control",style:{height:"100px"},required:""},null,512),[[s.Jo,i.form.bio]])])]),(0,o.Lk)("div",nx,[(0,o.Lk)("button",{type:"submit",class:"btn btn-primary",disabled:i.isSubmitting},(0,L.v_)(i.isSubmitting?"Saving...":"Add User"),9,dx)])],32)])])],64)}var mx={components:{IndexComponent:WC},data(){return{userEmail:"",userId:"",message:"",messageType:"",categoryTypes:[],categories:[],selectedCategoryType:"",provinces:[],districts:[],sectors:[],cells:[],villages:[],isSubmitting:!1,form:{email:"",first_name:"",last_name:"",gender:"",password:"",fathers_name:"",mothers_name:"",telephone:"",province:"",district:"",sector:"",cell:"",village:"",date_of_birth:"",bio:"",salary:"",disability:"",categories_id:"",role_id:"",picture:"",verifiedEmail:!0,token:"",verification_code:"",job_seeker_id:"js-"+Date.now(),created_at:(new Date).toISOString().slice(0,19).replace("T"," "),created_by:"",is_editable:!0,id:null,image:null,cv:null,id_url:"",image_url:"",cv_url:""},personalFields:[{label:"First Name",model:"first_name",type:"text"},{label:"Last Name",model:"last_name",type:"text"},{label:"Email",model:"email",type:"email"},{label:"Password",model:"password",type:"password"},{label:"Father's Name",model:"fathers_name",type:"text"},{label:"Mother's Name",model:"mothers_name",type:"text"},{label:"Telephone",model:"telephone",type:"text"},{label:"Date of Birth",model:"date_of_birth",type:"date"}]}},mounted(){this.loadProvinces(),this.loadCategoryTypes(),this.loadRoleId(),this.userEmail=localStorage.getItem("userEmail")||"",this.form.created_by=this.userEmail,this.userEmail&&this.getUserIdFromEmail()},methods:{loadProvinces(){try{this.provinces=(0,gr.getProvinces)()}catch(e){console.error("Error loading provinces:",e),this.message="Failed to load provinces.",this.messageType="alert-warning"}},loadDistricts(){try{this.form.province&&(this.districts=(0,gr.getDistrictsByProvince)(this.form.province),this.sectors=[],this.cells=[],this.villages=[],this.form.district="",this.form.sector="",this.form.cell="",this.form.village="")}catch(e){console.error("Error loading districts:",e),this.message="Failed to load districts.",this.messageType="alert-warning"}},loadSectors(){try{this.form.province&&this.form.district&&(this.sectors=(0,gr.getSectorsByDistrict)(this.form.province,this.form.district),this.cells=[],this.villages=[],this.form.sector="",this.form.cell="",this.form.village="")}catch(e){console.error("Error loading sectors:",e),this.message="Failed to load sectors.",this.messageType="alert-warning"}},loadCells(){try{this.form.province&&this.form.district&&this.form.sector&&(this.cells=(0,gr.getCellsBySector)(this.form.province,this.form.district,this.form.sector),this.villages=[],this.form.cell="",this.form.village="")}catch(e){console.error("Error loading cells:",e),this.message="Failed to load cells.",this.messageType="alert-warning"}},loadVillages(){try{this.form.province&&this.form.district&&this.form.sector&&this.form.cell&&(this.villages=(0,gr.getVillagesByCell)(this.form.province,this.form.district,this.form.sector,this.form.cell),this.form.village="")}catch(e){console.error("Error loading villages:",e),this.message="Failed to load villages.",this.messageType="alert-warning"}},async loadCategoryTypes(){try{console.log("Loading category types from:",`${de}/category-types`);const e=await ne.A.get(`${de}/category-types`);this.categoryTypes=e.data,console.log("Category types loaded:",this.categoryTypes)}catch(e){console.error("Error loading category types:",e),this.handleError(e,"Failed to load category types.")}},async loadCategories(){if(this.selectedCategoryType)try{console.log("Loading categories for type:",this.selectedCategoryType);const e=await ne.A.get(`${de}/categories/${this.selectedCategoryType}`);this.categories=e.data,console.log("Categories loaded:",this.categories)}catch(e){console.error("Failed to load categories:",e),this.message="Failed to load categories.",this.messageType="alert-warning"}},async loadRoleId(){try{const e=localStorage.getItem("agentToken");if(!e)return console.error("No token found in localStorage"),this.message="Authentication token not found. Please log in again.",void(this.messageType="alert-danger");console.log("Loading role ID...");const t=await ne.A.get(`${de}/admin/role/job_seekers`,{headers:{Authorization:`Bearer ${e}`}});console.log("API role_id response:",t.data),this.form.role_id=t.data.role_id||1,console.log("Role ID set to:",this.form.role_id)}catch(e){console.error("Failed to fetch role_id:",e),this.form.role_id=1,this.message="Could not load role ID, using default.",this.messageType="alert-warning"}},handleFileChange(e,t){const a=t.target.files[0];if(a){if(console.log(`File selected for ${e}:`,a.name,a.size,"bytes"),a.size>10485760)return this.message=`File ${a.name} is too large. Maximum size is 10MB.`,void(this.messageType="alert-danger");"id"===e?(this.form.id=a,this.form.id_url=URL.createObjectURL(a)):"image"===e?(this.form.image=a,this.form.image_url=URL.createObjectURL(a),this.form.picture=this.form.image_url):"cv"===e&&(this.form.cv=a,this.form.cv_url=URL.createObjectURL(a))}},async getUserIdFromEmail(){const e=localStorage.getItem("agentToken");if(e)try{const t=JSON.parse(atob(e.split(".")[1]));this.userEmail||(this.userEmail=t.email);const a=await fetch(`${de}/get_user_id_by_email/${this.userEmail}`,{headers:{Authorization:`Bearer ${e}`}}),s=await a.json();a.ok?this.userId=s.users_id:this.message=s.message||"Unable to get user ID."}catch(t){console.error("Error getting users_id:",t)}},handleError(e,t){console.error("API Error:",e),e.response?(console.error("Response data:",e.response.data),console.error("Response status:",e.response.status),this.message=e.response.data.message||e.response.data.error||t):e.request?(console.error("No response received:",e.request),this.message="No response from server. Please check your connection."):(console.error("Error setting up request:",e.message),this.message=e.message||t),this.messageType="alert-danger"},validateForm(){const e=["role_id","email","first_name","last_name","gender","password","fathers_name","mothers_name","telephone","province","district","sector","cell","village","bio","salary","date_of_birth","disability","categories_id"],t=[];for(const s of e)this.form[s]&&""!==this.form[s]||t.push(s);if(t.length>0)return this.message=`Missing required fields: ${t.join(", ")}`,this.messageType="alert-danger",!1;const a=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return!!a.test(this.form.email)||(this.message="Please enter a valid email address",this.messageType="alert-danger",!1)},async handleSubmit(){if(!this.isSubmitting){this.isSubmitting=!0,this.message="";try{if(!this.validateForm())return;this.form.role_id||await this.loadRoleId(),console.log("Form data before submit:",{...this.form,id:this.form.id?this.form.id.name:null,image:this.form.image?this.form.image.name:null,cv:this.form.cv?this.form.cv.name:null});const e=new FormData;e.append("role_id",this.form.role_id),e.append("email",this.form.email),e.append("first_name",this.form.first_name),e.append("last_name",this.form.last_name),e.append("gender",this.form.gender),e.append("password",this.form.password),e.append("full_name",`${this.form.first_name} ${this.form.last_name}`),e.append("verifiedEmail",this.form.verifiedEmail),e.append("token",this.form.token||""),e.append("verification_code",this.form.verification_code||""),e.append("fathers_name",this.form.fathers_name),e.append("mothers_name",this.form.mothers_name),e.append("telephone",this.form.telephone),e.append("province",this.form.province),e.append("district",this.form.district),e.append("sector",this.form.sector),e.append("cell",this.form.cell),e.append("village",this.form.village),e.append("bio",this.form.bio),e.append("salary",this.form.salary),e.append("date_of_birth",this.form.date_of_birth),e.append("disability",this.form.disability),e.append("categories_id",this.form.categories_id),e.append("created_at",this.form.created_at),e.append("created_by",this.form.created_by),e.append("is_editable",this.form.is_editable),this.form.image&&e.append("image",this.form.image),this.form.id&&e.append("id",this.form.id),this.form.cv&&e.append("cv",this.form.cv),console.log("FormData contents:");for(let s of e.entries())console.log(s[0]+": "+s[1]);const t=localStorage.getItem("agentToken");if(!t)return this.message="Authentication token not found. Please log in again.",void(this.messageType="alert-danger");console.log("Submitting to:",`${de}/admin/add_job_seekers`);const a=await ne.A.post(`${de}/admin/add_job_seekers`,e,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${t}`}});console.log("Success response:",a.data),this.$router.push("/agent/view-seekers"),this.messageType="alert-success",this.resetForm()}catch(e){this.handleError(e,"Failed to save job seeker.")}finally{this.isSubmitting=!1}}},resetForm(){for(const e in this.form)"role_id"!==e&&("string"===typeof this.form[e]?this.form[e]="":null!==this.form[e]&&void 0!==this.form[e]||(this.form[e]=null));this.form.id=null,this.form.image=null,this.form.cv=null,this.form.id_url="",this.form.image_url="",this.form.cv_url="",this.selectedCategoryType="",this.categories=[],this.districts=[],this.sectors=[],this.cells=[],this.villages=[],this.form.job_seeker_id="js-"+Date.now(),this.form.created_at=(new Date).toISOString().slice(0,19).replace("T"," ")}}};const ux=(0,n.A)(mx,[["render",cx],["__scopeId","data-v-08c992da"]]);var gx=ux;const hx={class:"page-wrapper",id:"main-wrapper","data-layout":"vertical","data-navbarbg":"skin6","data-sidebartype":"full","data-sidebar-position":"fixed","data-header-position":"fixed"},px={class:"body-wrapper",style:{"margin-top":"-3rem"}},bx={class:"form-group"},fx={class:"form-group"},kx={class:"form-group"},vx=["disabled"];function yx(e,t,a,r,i,l){const n=(0,o.g2)("IndexComponent");return(0,o.uX)(),(0,o.CE)("div",hx,[(0,o.bF)(n),(0,o.Lk)("div",px,[t[9]||(t[9]=(0,o.Lk)("h2",{style:{"margin-left":"2rem","margin-right":"2rem"}},"Change Password",-1)),(0,o.Lk)("form",{onSubmit:t[3]||(t[3]=(0,s.D$)(((...e)=>l.changePassword&&l.changePassword(...e)),["prevent"])),style:{"margin-left":"2rem","margin-right":"2rem"}},[(0,o.Lk)("div",bx,[t[4]||(t[4]=(0,o.Lk)("label",{for:"current_password",class:"form-label"},"Current password:",-1)),(0,o.bo)((0,o.Lk)("input",{type:"password","onUpdate:modelValue":t[0]||(t[0]=e=>i.currentPassword=e),class:"form-control",id:"current_password",required:""},null,512),[[s.Jo,i.currentPassword]])]),(0,o.Lk)("div",fx,[t[5]||(t[5]=(0,o.Lk)("label",{for:"new_password",class:"form-label"},"New password:",-1)),(0,o.bo)((0,o.Lk)("input",{type:"password","onUpdate:modelValue":t[1]||(t[1]=e=>i.newPassword=e),class:"form-control",id:"new_password",required:""},null,512),[[s.Jo,i.newPassword]])]),(0,o.Lk)("div",kx,[t[6]||(t[6]=(0,o.Lk)("label",{for:"confirm_password",class:"form-label"},"Confirm New Password:",-1)),(0,o.bo)((0,o.Lk)("input",{type:"password","onUpdate:modelValue":t[2]||(t[2]=e=>i.confirmPassword=e),class:"form-control",id:"confirm_password",required:""},null,512),[[s.Jo,i.confirmPassword]])]),(0,o.Lk)("button",{type:"submit",class:"btn btn-primary",disabled:i.loading},(0,L.v_)(i.loading?"Changing...":"Change"),9,vx),t[7]||(t[7]=(0,o.Lk)("br",null,null,-1)),t[8]||(t[8]=(0,o.Lk)("br",null,null,-1)),i.passwordMessage?((0,o.uX)(),(0,o.CE)("p",{key:0,class:(0,L.C4)(["alert alert-danger",i.passwordMessageClass]),style:{"margin-left":"5rem"}},(0,L.v_)(i.passwordMessage),3)):(0,o.Q3)("",!0)],32)])])}var Lx={name:"MainWrapper",components:{IndexComponent:WC},data(){return{userEmail:null,users_id:null,currentPassword:"",newPassword:"",confirmPassword:"",passwordMessage:"",passwordMessageClass:"",feedback:"",feedbackColor:"green",loading:!1}},computed:{applyStatusClass(){return"green"===this.feedbackColor?"alert-success":"alert-danger"}},mounted(){const e=localStorage.getItem("agentToken");if(e)try{const t=JSON.parse(atob(e.split(".")[1]));this.userEmail=t.email,this.getUserIdFromEmail()}catch(t){console.error("Invalid JWT token:",t)}},methods:{async getUserIdFromEmail(){const e=localStorage.getItem("agentToken");if(e&&this.userEmail)try{const t=await fetch(`${de}/get_user_id_by_email/${this.userEmail}`,{headers:{Authorization:`Bearer ${e}`}}),a=await t.json();t.ok?this.users_id=a.users_id:(this.feedback=a.message||"Unable to get user ID.",this.feedbackColor="red")}catch(t){console.error("Error getting users_id:",t),this.feedback="Failed to fetch user ID.",this.feedbackColor="red"}},async changePassword(){if(this.newPassword!==this.confirmPassword)return this.passwordMessage="New password and comfirm password doesn't match.",void(this.passwordMessageClass="text-danger");this.loading=!0;try{const e=localStorage.getItem("agentToken"),t=await ne.A.post(`${de}/change-password`,{current_password:this.currentPassword,new_password:this.newPassword,confirm_password:this.confirmPassword},{headers:{Authorization:`Bearer ${e}`}});t.data.success?(this.passwordMessage=t.data.message,this.passwordMessageClass="text-success",this.currentPassword="",this.newPassword="",this.confirmPassword=""):(this.passwordMessage=t.data.message,this.passwordMessageClass="text-danger")}catch(e){console.error("Error:",e),this.passwordMessage=e.response?.data?.message||"An error occurred.",this.passwordMessageClass="text-danger"}finally{this.loading=!1}}}};const Cx=(0,n.A)(Lx,[["render",yx],["__scopeId","data-v-64b0ef14"]]);var wx=Cx;const _x={class:"page-wrapper",id:"main-wrapper","data-layout":"vertical","data-navbarbg":"skin6","data-sidebartype":"full","data-sidebar-description":"fixed","data-header-description":"fixed"},Ax={class:"body-wrapper",style:{"margin-top":"-3rem"}},Ex={class:"mx-4"},Ix={class:"form-group row"},xx={class:"form-label"},Px={class:"form-control-plaintext"},Sx={class:"col-md-6"},Fx=["href"],Mx={class:"col-md-6"},Tx=["href"],jx=["src"],Dx={class:"col-md-6"},Ux=["href"],$x=["src"],Xx={class:"col-md-12"};function Vx(e,t,a,r,i,l){const n=(0,o.g2)("IndexComponent");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(n),(0,o.Lk)("div",_x,[(0,o.Lk)("div",Ax,[t[11]||(t[11]=(0,o.Lk)("h5",{class:"card-title fw-semibold mb-4",style:{color:"#E960A6"}},[(0,o.Lk)("i",{class:"ti ti-user-plus"}),(0,o.eW)(" My Profile")],-1)),t[12]||(t[12]=(0,o.Lk)("div",{class:"card-body"},null,-1)),(0,o.Lk)("div",Ex,[i.message?((0,o.uX)(),(0,o.CE)("div",{key:0,class:(0,L.C4)(["alert",i.messageType])},(0,L.v_)(i.message),3)):(0,o.Q3)("",!0),(0,o.Lk)("div",Ix,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.personalFields,((e,t)=>((0,o.uX)(),(0,o.CE)("div",{class:"col-md-6",key:t},[(0,o.Lk)("label",xx,(0,L.v_)(e.label),1),(0,o.Lk)("p",Px,(0,L.v_)("category"===e.model?i.categoryName:"date_of_birth"===e.model?l.formatDate(i.form[e.model]):i.form[e.model]),1)])))),128)),(0,o.Lk)("div",Sx,[t[1]||(t[1]=(0,o.Lk)("strong",null,"CV",-1)),t[2]||(t[2]=(0,o.Lk)("br",null,null,-1)),i.form.cv?((0,o.uX)(),(0,o.CE)("a",{key:0,href:i.uploadsUrl+i.form.cv,target:"_blank",rel:"noopener noreferrer",class:"btn btn-outline-primary btn-sm mt-2"}," View CV ",8,Fx)):(0,o.Q3)("",!0),t[3]||(t[3]=(0,o.Lk)("hr",null,null,-1))]),(0,o.Lk)("div",Mx,[t[4]||(t[4]=(0,o.Lk)("strong",null,"Profile Image:",-1)),t[5]||(t[5]=(0,o.Lk)("br",null,null,-1)),(0,o.Lk)("a",{href:i.uploadsUrl+i.form.image,target:"_blank"},[(0,o.Lk)("img",{src:i.uploadsUrl+i.form.image,alt:"Profile",class:"img-thumbnail",width:"100"},null,8,jx)],8,Tx),t[6]||(t[6]=(0,o.Lk)("hr",null,null,-1))]),(0,o.Lk)("div",Dx,[t[7]||(t[7]=(0,o.Lk)("strong",null,"ID card:",-1)),t[8]||(t[8]=(0,o.Lk)("br",null,null,-1)),(0,o.Lk)("a",{href:i.uploadsUrl+i.form.id,target:"_blank"},[(0,o.Lk)("img",{src:i.uploadsUrl+i.form.id,alt:"ID",class:"img-thumbnail",width:"100"},null,8,$x)],8,Ux),t[9]||(t[9]=(0,o.Lk)("hr",null,null,-1))]),(0,o.Lk)("div",Xx,[t[10]||(t[10]=(0,o.Lk)("label",{class:"form-label"},"Skill and capabilities",-1)),(0,o.bo)((0,o.Lk)("textarea",{"onUpdate:modelValue":t[0]||(t[0]=e=>i.form.bio=e),class:"form-control",style:{height:"150px"},required:"",readonly:""},null,512),[[s.Jo,i.form.bio]])])])])])]),t[13]||(t[13]=(0,o.Lk)("br",null,null,-1)),t[14]||(t[14]=(0,o.Lk)("br",null,null,-1)),t[15]||(t[15]=(0,o.Lk)("br",null,null,-1)),t[16]||(t[16]=(0,o.Lk)("br",null,null,-1))],64)}var Bx={name:"ProfileComponent",components:{IndexComponent:WC},data(){return{form:{first_name:"",last_name:"",gender:"",fathers_name:"",mothers_name:"",telephone:"",province:"",district:"",sector:"",cell:"",village:"",bio:"",salary:"",category:"",date_of_birth:"",disability:"",cv:null,id:null,image:null,categories_id:""},uploadsUrl:`${de}/uploads/profile/`,selectedCategoryType:"",userId:"",userEmail:"",message:null,messageType:null,categoryTypes:[],categories:[],categoryName:"Unknown",personalFields:[{label:"First Name",model:"first_name"},{label:"Last Name",model:"last_name"},{label:"Father's Name",model:"fathers_name"},{label:"Mother's Name",model:"mothers_name"},{label:"Date of Birth",model:"date_of_birth"},{label:"Gender",model:"gender"},{label:"Province",model:"province"},{label:"District",model:"district"},{label:"Sector",model:"sector"},{label:"Cell",model:"cell"},{label:"Village",model:"village"},{label:"Telephone",model:"telephone"},{label:"Disability",model:"disability"},{label:"Salary",model:"salary"},{label:"Category",model:"category"}]}},mounted(){this.getUserIdFromEmail(),this.loadCategoryTypes()},methods:{formatDate(e){if(!e)return"";const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),o=String(t.getDate()).padStart(2,"0");return`${a}-${s}-${o}`},async getUserIdFromEmail(){const e=localStorage.getItem("agentToken");if(e)try{const t=JSON.parse(atob(e.split(".")[1]));this.userEmail=t.email;const a=await fetch(`${de}/get_user_id_by_email/${this.userEmail}`,{headers:{Authorization:`Bearer ${e}`}}),s=await a.json();a.ok?(this.userId=s.users_id,this.fetchProfile(),this.fetchCategoryNameByUserId()):(this.message=s.message||"Unable to get user ID.",this.messageType="alert-danger")}catch(t){console.error("Error getting users_id:",t),this.message="Failed to fetch user ID.",this.messageType="alert-danger"}},async fetchProfile(){try{const e=await fetch(`${de}/seeker/view_profile/${this.userId}`,{headers:{Authorization:`Bearer ${localStorage.getItem("agentToken")}`}}),t=await e.json();e.ok?(this.form={...this.form,...t},t.categories_id&&await this.determineCategoryType(t.categories_id)):(this.message=t.message||"Failed to fetch profile",this.messageType="alert-danger")}catch(e){console.error("Error fetching profile:",e),this.message="Error loading profile.",this.messageType="alert-danger"}},async fetchCategoryNameByUserId(){try{const e=await fetch(`${de}/category/${this.userId}`),t=await e.json();e.ok&&t.name?this.categoryName=t.name:this.categoryName="Unknown"}catch(e){console.error("Failed to fetch category name:",e),this.categoryName="Error fetching category"}},async determineCategoryType(e){try{const t=await fetch(`${de}/category-details/${e}`),a=await t.json();t.ok&&(this.selectedCategoryType=a.type_id,await this.loadCategories(),this.form.categories_id=e)}catch(t){console.error("Error determining category type:",t)}},async loadCategoryTypes(){try{const e=await fetch(`${de}/category-types`),t=await e.json();this.categoryTypes=t}catch(e){console.error("Failed to load category types:",e)}},async loadCategories(){try{const e=await fetch(`${de}/categories/${this.selectedCategoryType}`),t=await e.json();this.categories=t}catch(e){console.error("Failed to load categories:",e)}}}};const Jx=(0,n.A)(Bx,[["render",Vx],["__scopeId","data-v-83794768"]]);var Nx=Jx;const Qx={class:"page-wrapper",id:"main-wrapper","data-layout":"vertical","data-navbarbg":"skin6","data-sidebartype":"full","data-sidebar-description":"fixed","data-header-description":"fixed"},zx={class:"body-wrapper"},Rx={class:"form-group row"},Wx={class:"col-md-6"},Ox=["for"],Hx=["type","onUpdate:modelValue","id"],Zx={class:"col-md-6"},Kx=["value"],qx={class:"col-md-6"},Gx=["disabled"],Yx=["value"],eP={class:"col-md-6"},tP=["disabled"],aP=["value"],sP={class:"col-md-6"},oP=["disabled"],rP=["value"],iP={class:"col-md-6"},lP=["disabled"],nP=["value"],dP={class:"col-md-6"},cP={class:"col-md-6"},mP={key:0,class:"mt-3"},uP=["src"];function gP(e,t,a,r,i,l){const n=(0,o.g2)("IndexComponent");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(n),(0,o.Lk)("div",Qx,[(0,o.Lk)("div",zx,[t[29]||(t[29]=(0,o.Lk)("h5",{class:"card-title fw-semibold mb-4",style:{color:"#E960A6"}},[(0,o.Lk)("i",{class:"ti ti-user-plus"}),(0,o.eW)(" Register New Job Provider")],-1)),(0,o.Lk)("form",{onSubmit:t[12]||(t[12]=(0,s.D$)(((...e)=>l.handleSubmit&&l.handleSubmit(...e)),["prevent"])),class:"mx-4",enctype:"multipart/form-data"},[(0,o.Lk)("div",Rx,[(0,o.Lk)("div",Wx,[t[14]||(t[14]=(0,o.Lk)("label",{class:"form-label"},"Select Category",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>i.form.category=e),class:"form-control",style:{height:"54px"},required:""},t[13]||(t[13]=[(0,o.Lk)("option",{value:"Individual"},"Individual",-1),(0,o.Lk)("option",{value:"Company"},"Company",-1)]),512),[[s.u1,i.form.category]])]),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.basicFields,((e,t)=>((0,o.uX)(),(0,o.CE)("div",{class:"col-md-6",key:t},[(0,o.Lk)("label",{for:e.model,class:"form-label"},(0,L.v_)(e.label),9,Ox),(0,o.bo)((0,o.Lk)("input",{type:e.type,"onUpdate:modelValue":t=>i.form[e.model]=t,class:"form-control",id:e.model,required:""},null,8,Hx),[[s.hp,i.form[e.model]]])])))),128)),(0,o.Lk)("div",Zx,[t[16]||(t[16]=(0,o.Lk)("label",{class:"form-label"},"Province",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>i.form.province=e),onChange:t[2]||(t[2]=(...e)=>l.loadDistricts&&l.loadDistricts(...e)),class:"form-control",style:{height:"48px","padding-top":"8px","padding-bottom":"8px"},required:""},[t[15]||(t[15]=(0,o.Lk)("option",{value:""},"Select Province",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.provinces,(e=>((0,o.uX)(),(0,o.CE)("option",{key:e,value:e},(0,L.v_)(e),9,Kx)))),128))],544),[[s.u1,i.form.province]])]),(0,o.Lk)("div",qx,[t[18]||(t[18]=(0,o.Lk)("label",{class:"form-label"},"District",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>i.form.district=e),onChange:t[4]||(t[4]=(...e)=>l.loadSectors&&l.loadSectors(...e)),class:"form-control",style:{height:"48px","padding-top":"8px","padding-bottom":"8px"},required:"",disabled:!i.form.province},[t[17]||(t[17]=(0,o.Lk)("option",{value:""},"Select District",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.districts,(e=>((0,o.uX)(),(0,o.CE)("option",{key:e,value:e},(0,L.v_)(e),9,Yx)))),128))],40,Gx),[[s.u1,i.form.district]])]),(0,o.Lk)("div",eP,[t[20]||(t[20]=(0,o.Lk)("label",{class:"form-label"},"Sector",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>i.form.sector=e),onChange:t[6]||(t[6]=(...e)=>l.loadCells&&l.loadCells(...e)),class:"form-control",style:{height:"48px","padding-top":"8px","padding-bottom":"8px"},required:"",disabled:!i.form.district},[t[19]||(t[19]=(0,o.Lk)("option",{value:""},"Select Sector",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.sectors,(e=>((0,o.uX)(),(0,o.CE)("option",{key:e,value:e},(0,L.v_)(e),9,aP)))),128))],40,tP),[[s.u1,i.form.sector]])]),(0,o.Lk)("div",sP,[t[22]||(t[22]=(0,o.Lk)("label",{class:"form-label"},"Cell",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[7]||(t[7]=e=>i.form.cell=e),onChange:t[8]||(t[8]=(...e)=>l.loadVillages&&l.loadVillages(...e)),class:"form-control",style:{height:"48px","padding-top":"8px","padding-bottom":"8px"},required:"",disabled:!i.form.sector},[t[21]||(t[21]=(0,o.Lk)("option",{value:""},"Select Cell",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.cells,(e=>((0,o.uX)(),(0,o.CE)("option",{key:e,value:e},(0,L.v_)(e),9,rP)))),128))],40,oP),[[s.u1,i.form.cell]])]),(0,o.Lk)("div",iP,[t[24]||(t[24]=(0,o.Lk)("label",{class:"form-label"},"Village",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[9]||(t[9]=e=>i.form.village=e),class:"form-control",style:{height:"48px","padding-top":"8px","padding-bottom":"8px"},required:"",disabled:!i.form.cell},[t[23]||(t[23]=(0,o.Lk)("option",{value:""},"Select Village",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.villages,(e=>((0,o.uX)(),(0,o.CE)("option",{key:e,value:e},(0,L.v_)(e),9,nP)))),128))],8,lP),[[s.u1,i.form.village]])]),(0,o.Lk)("div",dP,[t[26]||(t[26]=(0,o.Lk)("label",{class:"form-label"},"Gender",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[10]||(t[10]=e=>i.form.gender=e),class:"form-control",style:{height:"54px"},required:""},t[25]||(t[25]=[(0,o.Lk)("option",{value:""},"Select Gender",-1),(0,o.Lk)("option",{value:"Male"},"Male",-1),(0,o.Lk)("option",{value:"Female"},"Female",-1),(0,o.Lk)("option",{value:"Other"},"Other",-1)]),512),[[s.u1,i.form.gender]])]),(0,o.Lk)("div",cP,[t[27]||(t[27]=(0,o.Lk)("label",{class:"form-label"},"Upload Profile Image/Logo (optional)",-1)),(0,o.Lk)("input",{type:"file",onChange:t[11]||(t[11]=e=>l.handleFileChange("image",e)),class:"form-control",accept:"image/*"},null,32),i.form.image_url?((0,o.uX)(),(0,o.CE)("div",mP,[(0,o.Lk)("img",{src:i.form.image_url,alt:"Profile",class:"img-thumbnail",style:{"max-height":"150px"}},null,8,uP)])):(0,o.Q3)("",!0)])]),i.message?((0,o.uX)(),(0,o.CE)("div",{key:0,class:(0,L.C4)(["alert",i.messageType])},(0,L.v_)(i.message),3)):(0,o.Q3)("",!0),t[28]||(t[28]=(0,o.Lk)("button",{type:"submit",class:"btn btn-primary mb-5"},"Register",-1))],32)])])],64)}var hP={name:"RegisterJobProviderComponent",components:{IndexComponent:Tb},data(){return{form:{role_id:null,email:"",password:"",first_name:"",last_name:"",country:"",category:"",telephone:"",province:"",district:"",sector:"",cell:"",village:"",gender:"",image:null,image_url:null},uploadsUrl:`${de}/uploads/profile/`,message:null,messageType:null,provinces:[],districts:[],sectors:[],cells:[],villages:[],basicFields:[{label:"Email",model:"email",type:"email"},{label:"Password",model:"password",type:"password"},{label:"First Name",model:"first_name",type:"text"},{label:"Last Name",model:"last_name",type:"text"},{label:"Country",model:"country",type:"text"},{label:"Telephone",model:"telephone",type:"tel"}]}},methods:{handleFileChange(e,t){const a=t.target.files[0];a&&(this.form[e]=a,"image"===e&&(this.form.image_url=URL.createObjectURL(a)))},async handleSubmit(){const e=new FormData;for(const a in this.form)null!==this.form[a]&&"image_url"!==a&&e.append(a,this.form[a]);try{const t=await fetch(`${de}/admin/add_job_provider`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("adminToken")}`},body:e}),a=await t.json();t.ok?(this.message=a.message||"Job provider registered successfully.",this.messageType="alert-success",this.resetForm()):(this.message=a.message||"Failed to register job provider.",this.messageType="alert-danger")}catch(t){console.error("Error registering job provider:",t),this.message="An error occurred while submitting the form.",this.messageType="alert-danger"}},resetForm(){this.form={role_id:this.form.role_id,email:"",password:"",first_name:"",last_name:"",country:"",category:"",telephone:"",province:"",district:"",sector:"",cell:"",village:"",gender:"",image:null,image_url:null},this.districts=[],this.sectors=[],this.cells=[],this.villages=[]},async loadRoleId(){try{const e=localStorage.getItem("adminToken");if(!e)return void console.error("No token found in localStorage");const t=await ne.A.get(`${de}/admin/role/provider`,{headers:{Authorization:`Bearer ${e}`}});this.form.role_id=t.data.role_id||2,console.log("Role ID set to:",this.form.role_id)}catch(e){console.error("Failed to fetch role_id:",e),this.form.role_id=2}},loadProvinces(){try{this.provinces=(0,gr.getProvinces)()}catch(e){console.error("Error loading provinces:",e),this.message="Failed to load provinces.",this.messageType="alert-warning"}},loadDistricts(){try{this.form.province&&(this.districts=(0,gr.getDistrictsByProvince)(this.form.province),this.sectors=[],this.cells=[],this.villages=[],this.form.district="",this.form.sector="",this.form.cell="",this.form.village="")}catch(e){console.error("Error loading districts:",e),this.message="Failed to load districts.",this.messageType="alert-warning"}},loadSectors(){try{this.form.province&&this.form.district&&(this.sectors=(0,gr.getSectorsByDistrict)(this.form.province,this.form.district),this.cells=[],this.villages=[],this.form.sector="",this.form.cell="",this.form.village="")}catch(e){console.error("Error loading sectors:",e),this.message="Failed to load sectors.",this.messageType="alert-warning"}},loadCells(){try{this.form.province&&this.form.district&&this.form.sector&&(this.cells=(0,gr.getCellsBySector)(this.form.province,this.form.district,this.form.sector),this.villages=[],this.form.cell="",this.form.village="")}catch(e){console.error("Error loading cells:",e),this.message="Failed to load cells.",this.messageType="alert-warning"}},loadVillages(){try{this.form.province&&this.form.district&&this.form.sector&&this.form.cell&&(this.villages=(0,gr.getVillagesByCell)(this.form.province,this.form.district,this.form.sector,this.form.cell),this.form.village="")}catch(e){console.error("Error loading villages:",e),this.message="Failed to load villages.",this.messageType="alert-warning"}}},mounted(){this.loadRoleId(),this.loadProvinces()}};const pP=(0,n.A)(hP,[["render",gP],["__scopeId","data-v-2329f3f5"]]);var bP=pP;const fP={class:"page-wrapper",id:"main-wrapper","data-layout":"vertical","data-navbarbg":"skin6","data-sidebartype":"full","data-sidebar-description":"fixed","data-header-description":"fixed"},kP={class:"body-wrapper"},vP={class:"form-group row"},yP={class:"col-md-6"},LP={class:"col-md-6"},CP={class:"form-group row"},wP={class:"col-md-6"},_P={class:"col-md-6"},AP={class:"form-group row"},EP={class:"col-md-6"},IP=["value"],xP={class:"col-md-6"},PP={key:0,class:"mb-2"},SP=["src"],FP={class:"form-group row"},MP={class:"col-md-12"},TP={class:"form-group row"},jP={class:"col-md-12"},DP={class:"form-group row"},UP={class:"col-md-12"},$P={class:"form-group row"},XP={class:"col-md-6"},VP={class:"col-md-6"},BP={class:"form-group row"},JP={class:"col-md-12"},NP=["disabled"],QP={key:0,class:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"},zP={key:0,class:"modal-overlay"},RP={class:"modal-content"},WP={class:"row mb-3 mx-4"},OP={class:"col-md-8"},HP={class:"col-md-4"},ZP={key:1,class:"text-muted px-4"},KP={key:2,class:"d-flex justify-content-center my-4"},qP={key:3,class:"table-responsive"},GP={class:"table table-bordered"},YP=["innerHTML"],eS=["innerHTML"],tS=["innerHTML"],aS=["innerHTML"],sS=["innerHTML"],oS=["src"],rS=["onClick","disabled"],iS=["onClick"],lS=["onClick","disabled"],nS={key:4,class:"mt-3"},dS={class:"pagination justify-content-center"},cS=["onClick"];function mS(e,t,a,r,i,l){const n=(0,o.g2)("IndexComponent");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(n),(0,o.Lk)("div",fP,[(0,o.Lk)("div",kP,[t[38]||(t[38]=(0,o.Lk)("h5",{class:"card-title fw-semibold mb-4",style:{color:"#E960A6"}},[(0,o.Lk)("i",{class:"ti ti-user-plus"}),(0,o.eW)(" Register New Job ")],-1)),(0,o.Lk)("form",{class:"mx-4",onSubmit:t[12]||(t[12]=(0,s.D$)(((...e)=>l.submitForm&&l.submitForm(...e)),["prevent"]))},[i.status.message?((0,o.uX)(),(0,o.CE)("div",{key:0,class:(0,L.C4)(["alert mt-3",i.status.success?"alert-success":"alert-danger"])},(0,L.v_)(i.status.message),3)):(0,o.Q3)("",!0),(0,o.Lk)("div",vP,[(0,o.Lk)("div",yP,[t[19]||(t[19]=(0,o.Lk)("label",{class:"form-label"},"Job Title",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>i.form.job_title=e),class:"form-control",required:""},null,512),[[s.Jo,i.form.job_title]])]),(0,o.Lk)("div",LP,[t[20]||(t[20]=(0,o.Lk)("label",{class:"form-label"},"Company Name",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>i.form.company=e),class:"form-control",required:""},null,512),[[s.Jo,i.form.company]])])]),(0,o.Lk)("div",CP,[(0,o.Lk)("div",wP,[t[22]||(t[22]=(0,o.Lk)("label",{class:"form-label"},"Working Mode",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>i.form.location=e),class:"form-control",required:""},t[21]||(t[21]=[(0,o.Lk)("option",{value:"",disabled:""},"Choose Mode",-1),(0,o.Lk)("option",{value:"Remote"},"Remote",-1),(0,o.Lk)("option",{value:"Full Time"},"Full Time",-1)]),512),[[s.u1,i.form.location]])]),(0,o.Lk)("div",_P,[t[23]||(t[23]=(0,o.Lk)("label",{class:"form-label"},"Deadline Date",-1)),(0,o.bo)((0,o.Lk)("input",{type:"date","onUpdate:modelValue":t[3]||(t[3]=e=>i.form.deadline_date=e),class:"form-control",required:""},null,512),[[s.Jo,i.form.deadline_date]])])]),(0,o.Lk)("div",AP,[(0,o.Lk)("div",EP,[t[25]||(t[25]=(0,o.Lk)("label",{class:"form-label"},"Category",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>i.selectedCategoryId=e),class:"form-control",style:{height:"48px","padding-top":"8px","padding-bottom":"8px"},required:""},[t[24]||(t[24]=(0,o.Lk)("option",{value:""},"Select a category",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.categories,(e=>((0,o.uX)(),(0,o.CE)("option",{key:e.id,value:e.id},(0,L.v_)(e.name),9,IP)))),128))],512),[[s.u1,i.selectedCategoryId]])]),(0,o.Lk)("div",xP,[t[26]||(t[26]=(0,o.Lk)("label",{class:"form-label"},"Logo",-1)),i.form.logo&&"string"===typeof i.form.logo?((0,o.uX)(),(0,o.CE)("div",PP,[(0,o.Lk)("img",{src:i.uploadsUrl+i.form.logo,alt:"Current Logo",class:"custom-job-logo",width:"150"},null,8,SP)])):(0,o.Q3)("",!0),(0,o.Lk)("input",{type:"file",onChange:t[5]||(t[5]=(...e)=>l.handleFileUpload&&l.handleFileUpload(...e)),class:"form-control"},null,32)])]),(0,o.Lk)("div",FP,[(0,o.Lk)("div",MP,[t[27]||(t[27]=(0,o.Lk)("label",{class:"form-label"},"Job Description",-1)),(0,o.bo)((0,o.Lk)("textarea",{"onUpdate:modelValue":t[6]||(t[6]=e=>i.form.job_description=e),class:"form-control",style:{height:"100px"},required:""},null,512),[[s.Jo,i.form.job_description]])])]),(0,o.Lk)("div",TP,[(0,o.Lk)("div",jP,[t[28]||(t[28]=(0,o.Lk)("label",{class:"form-label"},"Requirements",-1)),(0,o.bo)((0,o.Lk)("textarea",{"onUpdate:modelValue":t[7]||(t[7]=e=>i.form.requirements=e),class:"form-control",style:{height:"100px"},required:""},null,512),[[s.Jo,i.form.requirements]])])]),(0,o.Lk)("div",DP,[(0,o.Lk)("div",UP,[t[29]||(t[29]=(0,o.Lk)("label",{class:"form-label"},"Responsability",-1)),(0,o.bo)((0,o.Lk)("textarea",{"onUpdate:modelValue":t[8]||(t[8]=e=>i.form.responsability=e),class:"form-control",style:{height:"100px"},required:""},null,512),[[s.Jo,i.form.responsability]])])]),(0,o.Lk)("div",$P,[(0,o.Lk)("div",XP,[t[30]||(t[30]=(0,o.Lk)("label",{class:"form-label"},"Salary-Min",-1)),(0,o.bo)((0,o.Lk)("input",{type:"number","onUpdate:modelValue":t[9]||(t[9]=e=>i.form.salary_min=e),class:"form-control",required:""},null,512),[[s.Jo,i.form.salary_min]])]),(0,o.Lk)("div",VP,[t[31]||(t[31]=(0,o.Lk)("label",{class:"form-label"},"Salary-max",-1)),(0,o.bo)((0,o.Lk)("input",{type:"number","onUpdate:modelValue":t[10]||(t[10]=e=>i.form.salary_max=e),class:"form-control",required:""},null,512),[[s.Jo,i.form.salary_max]])])]),(0,o.Lk)("div",BP,[(0,o.Lk)("div",JP,[t[32]||(t[32]=(0,o.Lk)("label",{class:"form-label"},"Conclusion",-1)),(0,o.bo)((0,o.Lk)("textarea",{"onUpdate:modelValue":t[11]||(t[11]=e=>i.form.conclusion=e),class:"form-control",style:{height:"100px"},required:""},null,512),[[s.Jo,i.form.conclusion]])])]),(0,o.Lk)("button",{type:"submit",class:"btn btn-primary mt-3",disabled:i.isSubmitting},[i.isSubmitting?((0,o.uX)(),(0,o.CE)("span",QP)):(0,o.Q3)("",!0),(0,o.eW)(" "+(0,L.v_)(i.isSubmitting?"Submitting...":i.form.job_id?"Update Job":"Submit Job"),1)],8,NP)],32),i.showModal?((0,o.uX)(),(0,o.CE)("div",zP,[(0,o.Lk)("div",RP,[t[34]||(t[34]=(0,o.Lk)("h5",null,"Are you sure you want to delete this job?",-1)),(0,o.Lk)("div",null,[(0,o.Lk)("button",{class:"btn btn-danger mt-3",onClick:t[13]||(t[13]=(...e)=>l.confirmDeleteJob&&l.confirmDeleteJob(...e))},"Yes, Delete"),t[33]||(t[33]=(0,o.eW)(" Â  ")),(0,o.Lk)("button",{class:"btn btn-cancel mt-3",style:{"background-color":"teal",color:"white"},onClick:t[14]||(t[14]=(...e)=>l.closeModal&&l.closeModal(...e))}," Cancel ")])])])):(0,o.Q3)("",!0),t[39]||(t[39]=(0,o.Lk)("hr",{class:"my-4"},null,-1)),t[40]||(t[40]=(0,o.Lk)("h5",{class:"fw-semibold mb-3"},"Your Jobs",-1)),(0,o.Lk)("div",WP,[(0,o.Lk)("div",OP,[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[15]||(t[15]=e=>i.searchQuery=e),class:"form-control",placeholder:"Search by title, company or location"},null,512),[[s.Jo,i.searchQuery]])]),(0,o.Lk)("div",HP,[(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[16]||(t[16]=e=>i.filterStatus=e),class:"form-control"},t[35]||(t[35]=[(0,o.Lk)("option",{value:""},"All Statuses",-1),(0,o.Lk)("option",{value:"1"},"Approved",-1),(0,o.Lk)("option",{value:"0"},"Pending",-1)]),512),[[s.u1,i.filterStatus]])])]),0===l.filteredJobs.length?((0,o.uX)(),(0,o.CE)("div",ZP,".")):(0,o.Q3)("",!0),0===l.filteredJobs.length?((0,o.uX)(),(0,o.CE)("div",KP,t[36]||(t[36]=[(0,o.Lk)("div",{class:"btn btn-danger text-center",style:{width:"40rem"}}," No jobs available yet. ",-1)]))):((0,o.uX)(),(0,o.CE)("div",qP,[(0,o.Lk)("table",GP,[t[37]||(t[37]=(0,o.Lk)("thead",{class:"table-light"},[(0,o.Lk)("tr",null,[(0,o.Lk)("th",null,"Id"),(0,o.Lk)("th",null,"Title"),(0,o.Lk)("th",null,"Description"),(0,o.Lk)("th",null,"Requirements"),(0,o.Lk)("th",null,"Responsability"),(0,o.Lk)("th",null,"salary-min"),(0,o.Lk)("th",null,"salary-max"),(0,o.Lk)("th",null,"Company"),(0,o.Lk)("th",null,"Location"),(0,o.Lk)("th",null,"Category"),(0,o.Lk)("th",null,"Published"),(0,o.Lk)("th",null,"Deadline"),(0,o.Lk)("th",null,"Conclusion"),(0,o.Lk)("th",null,"Logo"),(0,o.Lk)("th",null,"Publisher"),(0,o.Lk)("th",null,"Status"),(0,o.Lk)("th",null,"Action")])],-1)),(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.paginatedJobs,((e,t)=>((0,o.uX)(),(0,o.CE)("tr",{key:e.job_id},[(0,o.Lk)("td",null,(0,L.v_)((i.currentPage-1)*i.itemsPerPage+t+1),1),(0,o.Lk)("td",{innerHTML:l.highlightMatch(e.job_title)},null,8,YP),(0,o.Lk)("td",null,(0,L.v_)(e.job_description.length>100?e.job_description.substring(0,100)+"...":e.job_description),1),(0,o.Lk)("td",null,(0,L.v_)(e.requirements.length>100?e.requirements.substring(0,100)+"...":e.requirements),1),(0,o.Lk)("td",null,(0,L.v_)(e.responsability.length>100?e.responsability.substring(0,100)+"...":e.responsability),1),(0,o.Lk)("td",{innerHTML:l.highlightMatch(e.salary_min)},null,8,eS),(0,o.Lk)("td",{innerHTML:l.highlightMatch(e.salary_max)},null,8,tS),(0,o.Lk)("td",{innerHTML:l.highlightMatch(e.company)},null,8,aS),(0,o.Lk)("td",{innerHTML:l.highlightMatch(e.location)},null,8,sS),(0,o.Lk)("td",null,(0,L.v_)(l.getCategoryName(e.category_id)),1),(0,o.Lk)("td",null,(0,L.v_)(e.published_date?e.published_date.substring(0,10):""),1),(0,o.Lk)("td",null,(0,L.v_)(e.deadline_date?e.deadline_date.substring(0,10):""),1),(0,o.Lk)("td",null,(0,L.v_)(e.conclusion.length>100?e.conclusion.substring(0,100)+"...":e.conclusion),1),(0,o.Lk)("td",null,[(0,o.Lk)("img",{src:i.uploadsUrl+e.logo,alt:"Logo",class:"custom-job-logo",width:"100"},null,8,oS)]),(0,o.Lk)("td",null,(0,L.v_)(e.first_name)+" "+(0,L.v_)(e.last_name),1),(0,o.Lk)("td",null,[(0,o.Lk)("span",{class:(0,L.C4)([l.getStatusLabel(e.status).colorClass,"fw-bold"])},(0,L.v_)(l.getStatusLabel(e.status).text),3)]),(0,o.Lk)("td",null,[(0,o.Lk)("button",{class:"btn btn-primary btn-sm",onClick:t=>l.editJob(e),disabled:!l.isAdmin},"Edit",8,rS),(0,o.Lk)("button",{class:"btn btn-cancel btn-sm",onClick:t=>l.goToMore(e.job_id)},"More",8,iS),(0,o.Lk)("button",{class:"btn btn-primary btn-sm",onClick:t=>l.openModal(e.job_id),disabled:!l.isAdmin},"Delete",8,lS)])])))),128))])])])),l.totalPages>1?((0,o.uX)(),(0,o.CE)("nav",nS,[(0,o.Lk)("ul",dS,[(0,o.Lk)("li",{class:(0,L.C4)(["page-item",{disabled:1===i.currentPage}])},[(0,o.Lk)("button",{class:"page-link",onClick:t[17]||(t[17]=e=>l.changePage(i.currentPage-1))},"Previous")],2),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.pagesToShow,(e=>((0,o.uX)(),(0,o.CE)("li",{key:e,class:(0,L.C4)(["page-item",{active:i.currentPage===e}])},[(0,o.Lk)("button",{class:"page-link",onClick:t=>l.changePage(e)},(0,L.v_)(e),9,cS)],2)))),128)),(0,o.Lk)("li",{class:(0,L.C4)(["page-item",{disabled:i.currentPage===l.totalPages}])},[(0,o.Lk)("button",{class:"page-link",onClick:t[18]||(t[18]=e=>l.changePage(i.currentPage+1))},"Next")],2)])])):(0,o.Q3)("",!0)])])],64)}var uS={name:"MainWrapper",components:{IndexComponent:Tb},data(){return{uploadsUrl:de+"/uploads/logo/",form:{job_id:null,job_title:"",company:"",deadline_date:"",job_description:"",requirements:"",responsability:"",salary_min:"",salary_max:"",conclusion:"",logo:"",location:"",category_id:null},jobs:[],isSubmitting:!1,categories:[],categoryNames:{},selectedCategoryId:null,status:{success:!1,message:""},userEmail:"",userId:"",showModal:!1,selectedJobId:null,searchQuery:"",filterStatus:"",currentPage:1,itemsPerPage:10}},computed:{isAdmin(){return"admin@kozi.rw"===this.userEmail.toLowerCase()},pagesToShow(){const e=this.totalPages,t=this.currentPage,a=2,s=[];for(let o=Math.max(1,t-a);o<=Math.min(e,t+a);o++)s.push(o);return s},filteredJobs(){const e=this.searchQuery.toLowerCase();return this.jobs.filter((t=>{const a=(t.job_title||"").toLowerCase(),s=(t.company||"").toLowerCase(),o=(t.location||"").toLowerCase(),r=a.includes(e)||s.includes(e)||o.includes(e),i=""===this.filterStatus||String(t.status)===String(this.filterStatus);return r&&i}))},totalPages(){return Math.ceil(this.filteredJobs.length/this.itemsPerPage)},paginatedJobs(){const e=(this.currentPage-1)*this.itemsPerPage;return this.filteredJobs.slice(e,e+this.itemsPerPage)}},mounted(){this.userEmail=localStorage.getItem("userEmail")||"",this.userEmail&&this.getUserIdFromEmail(),this.fetchCategories()},methods:{handleFileUpload(e){this.form.logo=e.target.files[0]},openModal(e){this.selectedJobId=e,this.showModal=!0},closeModal(){this.showModal=!1,this.selectedJobId=null},changePage(e){e>=1&&e<=this.totalPages&&(this.currentPage=e)},async fetchCategories(){try{const e=localStorage.getItem("adminToken"),t=await fetch(`${de}/name_and_id`,{headers:{Authorization:`Bearer ${e}`}}),a=await t.json();t.ok?(this.categories=a,a.forEach((e=>{this.categoryNames[e.id]=e.name}))):console.error("Failed to load categories:",a.message)}catch(e){console.error("Error fetching categories:",e)}},async fetchCategoryNameByUserId(){try{const e=await fetch(`${de}/category/${this.userId}`),t=await e.json();e.ok&&t.name?this.categoryName=t.name:this.categoryName="Unknown"}catch(e){console.error("Failed to fetch category name:",e),this.categoryName="Error fetching category"}},getCategoryName(e){return this.categoryNames[e]||"Unknown"},async confirmDeleteJob(){const e=localStorage.getItem("adminToken");try{const t=await fetch(`${de}/admin/delete_job/${this.selectedJobId}`,{method:"DELETE",headers:{Authorization:`Bearer ${e}`}}),a=await t.json();t.ok?(this.status={success:!0,message:a.message||"Job deleted successfully."},this.fetchJobsByUser()):this.status={success:!1,message:a.message||"Failed to delete job."}}catch(t){console.error("Delete error:",t),this.status={success:!1,message:"Unexpected error occurred while deleting."}}finally{this.closeModal()}},async fetchJobsByUser(){try{const e=localStorage.getItem("adminToken");if(!this.userId)return;const t=await fetch(`${de}/admin/select_jobs`,{headers:{Authorization:`Bearer ${e}`}});if(!t.ok)throw new Error("Failed to fetch jobs");const a=await t.json();this.jobs=a,console.log("Jobs loaded:",this.jobs)}catch(e){console.error("Error fetching jobs for user:",e)}},async submitForm(){this.isSubmitting=!0,this.status.message="";try{const e=new FormData,t=(new Date).toISOString().split("T")[0];e.append("job_title",this.form.job_title),e.append("company",this.form.company),e.append("location",this.form.location),e.append("job_description",this.form.job_description),e.append("requirements",this.form.requirements),e.append("responsability",this.form.responsability),e.append("salary_min",this.form.salary_min),e.append("salary_max",this.form.salary_max),e.append("conclusion",this.form.conclusion),e.append("published_date",t),e.append("deadline_date",this.form.deadline_date),e.append("users_id",this.userId),e.append("category_id",this.selectedCategoryId),this.form.logo&&"string"!==typeof this.form.logo&&e.append("logo",this.form.logo);const a=localStorage.getItem("adminToken"),s=this.form.job_id?`${de}/admin/update_job/${this.form.job_id}`:`${de}/admin/add_jobs`,o=this.form.job_id?"PUT":"POST",r=await fetch(s,{method:o,headers:{Authorization:`Bearer ${a}`},body:e});if(r.ok){const e=await r.json();this.status={success:!0,message:e.message||(this.form.job_id?"Job updated!":"Job added!")},this.form={job_id:null,job_title:"",company:"",deadline_date:"",job_description:"",requirements:"",responsability:"",salary_max:"",salary_min:"",conclusion:"",logo:"",location:"",category_id:null},this.selectedCategoryId=null,this.fetchJobsByUser()}else{const e=await r.text();this.status={success:!1,message:"Failed: "+e}}}catch(e){console.error("Error:",e),this.status={success:!1,message:"Unexpected error occurred."}}finally{this.isSubmitting=!1}},editJob(e){const t=e.deadline_date?new Date(e.deadline_date).toISOString().split("T")[0]:"";this.form={job_id:e.job_id,job_title:e.job_title,company:e.company,deadline_date:t,job_description:e.job_description,requirements:e.requirements,responsability:e.responsability,salary_min:e.salary_min,salary_max:e.salary_max,conclusion:e.conclusion,logo:e.logo,location:e.location,category_id:e.category_id},this.selectedCategoryId=e.category_id,window.scrollTo({top:0,behavior:"smooth"})},goToMore(e){this.$router.push({name:"admin/job-details",params:{id:e}})},async getUserIdFromEmail(){const e=localStorage.getItem("adminToken");if(e)try{const t=JSON.parse(atob(e.split(".")[1]));this.userEmail||(this.userEmail=t.email);const a=await fetch(`${de}/get_user_id_by_email/${this.userEmail}`,{headers:{Authorization:`Bearer ${e}`}}),s=await a.json();a.ok?(this.userId=s.users_id,this.fetchJobsByUser()):this.status={success:!1,message:s.message||"Unable to get user ID."}}catch(t){console.error("Error getting users_id:",t),this.status={success:!1,message:"Failed to fetch user ID."}}},getStatusLabel(e){return 0===e?{text:"Pending",colorClass:"text-danger"}:1===e?{text:"Approved",colorClass:"text-success"}:{text:"Unknown",colorClass:"text-muted"}},highlightMatch(e){if(null===e||void 0===e)return"";const t=String(e);if(!this.searchQuery)return t;const a=new RegExp(`(${this.searchQuery})`,"gi");return t.replace(a,'<span class="highlight-teal">$1</span>')}}};const gS=(0,n.A)(uS,[["render",mS],["__scopeId","data-v-267cbfab"]]);var hS=gS;const pS={class:"page-wrapper",id:"main-wrapper","data-layout":"vertical","data-navbarbg":"skin6","data-sidebartype":"full","data-sidebar-description":"fixed","data-header-description":"fixed"},bS={class:"body-wrapper",style:{"margin-top":"-3rem"}},fS={class:"container-fluid"},kS={class:"row"},vS={id:"about",class:"section wb"},yS={class:"container"},LS={key:0,class:"job-details"},CS={class:"section-title text-center"},wS={style:{"font-family":"'Michroma'"}},_S={class:"lead",style:{color:"darkblue"}},AS={class:"job-details"},ES=["innerHTML"],IS=["innerHTML"],xS=["innerHTML"],PS=["innerHTML"],SS={key:0,class:"text-center mt-4"};function FS(e,t,a,s,r,i){const l=(0,o.g2)("IndexComponent");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(l),(0,o.Lk)("div",pS,[(0,o.Lk)("div",bS,[(0,o.Lk)("div",fS,[(0,o.Lk)("div",kS,[(0,o.Lk)("div",vS,[(0,o.Lk)("div",yS,[r.job?((0,o.uX)(),(0,o.CE)("div",LS,[(0,o.Lk)("div",CS,[(0,o.Lk)("h2",wS,(0,L.v_)(r.job.job_title)+" - "+(0,L.v_)(r.job.location),1),(0,o.Lk)("p",_S,[(0,o.Lk)("strong",null,"Job Opportunity at: "+(0,L.v_)(r.job.company),1),t[2]||(t[2]=(0,o.eW)()),t[3]||(t[3]=(0,o.Lk)("br",null,null,-1)),(0,o.Lk)("strong",null,"Published Date: "+(0,L.v_)(i.formatDate(r.job.published_date)),1),t[4]||(t[4]=(0,o.Lk)("br",null,null,-1)),(0,o.eW)(" Salary Range: "+(0,L.v_)(r.job.salary_min)+" Rwf - "+(0,L.v_)(r.job.salary_max)+" Rwf Monthly ",1)])]),(0,o.Lk)("div",AS,[t[5]||(t[5]=(0,o.Lk)("h4",null,[(0,o.Lk)("strong",null,"Company Overview")],-1)),(0,o.Lk)("p",{innerHTML:r.job.job_description},null,8,ES),t[6]||(t[6]=(0,o.Lk)("h4",null,[(0,o.Lk)("strong",null,"Requirements")],-1)),(0,o.Lk)("p",{innerHTML:r.job.requirements,style:{"margin-left":"2rem"}},null,8,IS),t[7]||(t[7]=(0,o.Lk)("h4",null,[(0,o.Lk)("strong",null,"Responsabilities")],-1)),(0,o.Lk)("p",{innerHTML:r.job.responsability,style:{"margin-left":"2rem"}},null,8,xS),t[8]||(t[8]=(0,o.Lk)("h4",null,[(0,o.Lk)("strong",null,"conclusion")],-1)),(0,o.Lk)("p",{innerHTML:r.job.conclusion},null,8,PS)]),r.job?((0,o.uX)(),(0,o.CE)("div",SS,[0===r.job.status?((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:t[0]||(t[0]=(...e)=>i.publishJob&&i.publishJob(...e)),class:"btn btn-primary"}," Publish ")):1===r.job.status?((0,o.uX)(),(0,o.CE)("button",{key:1,onClick:t[1]||(t[1]=(...e)=>i.unpublishJob&&i.unpublishJob(...e)),class:"btn btn-cancel"}," Unpublish ")):(0,o.Q3)("",!0)])):(0,o.Q3)("",!0),r.applyMessage?((0,o.uX)(),(0,o.CE)("div",{key:1,class:(0,L.C4)(["alert",r.applyStatusClass]),role:"alert"},(0,L.v_)(r.applyMessage),3)):(0,o.Q3)("",!0)])):(0,o.Q3)("",!0)])])])])])])],64)}var MS={components:{IndexComponent:Tb},data(){return{job:null,isApplying:!1,applyMessage:null,applyStatusClass:"",userEmail:null,userId:null,jobIdurl:null}},async mounted(){this.jobIdurl=this.$route.params.id,this.fetchJobDetails(),this.getUserEmail(),await this.fetchUserId()},methods:{async fetchJobDetails(){try{const e=localStorage.getItem("adminToken"),t=await fetch(`${de}/admin/select_job/${this.jobIdurl}`,{headers:{Authorization:`Bearer ${e}`}}),a=await t.json();t.ok?this.job=a:console.error("Failed to fetch job:",a.message)}catch(e){console.error("Error fetching job:",e)}},formatDate(e){const t=new Date(e);return t.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})},getUserEmail(){const e=localStorage.getItem("adminToken");if(e){const t=e.split(".")[1],a=atob(t),s=JSON.parse(a);this.userEmail=s.email}},async fetchUserId(){const e=this.userEmail,t=localStorage.getItem("adminToken");if(e&&t)try{const a=await fetch(`${de}/get_user_id_by_email/${e}`,{headers:{Authorization:`Bearer ${t}`}}),s=await a.json();a.ok?this.userId=s.users_id:console.error("Error fetching user ID:",s.message)}catch(a){console.error("Error fetching user ID:",a)}},async publishJob(){try{const e=localStorage.getItem("adminToken"),t=await fetch(`${de}/admin/publish/${this.jobIdurl}`,{method:"POST",headers:{Authorization:`Bearer ${e}`}}),a=await t.json();t.ok?(this.job.status=1,this.applyMessage="Job published successfully.",this.applyStatusClass="alert-success"):(this.applyMessage=a.message||"Failed to publish job.",this.applyStatusClass="alert-danger")}catch(e){this.applyMessage="An error occurred while publishing the job.",this.applyStatusClass="alert-danger",console.error("Error publishing job:",e)}},async unpublishJob(){try{const e=localStorage.getItem("adminToken"),t=await fetch(`${de}/admin/unpublish/${this.jobIdurl}`,{method:"POST",headers:{Authorization:`Bearer ${e}`}}),a=await t.json();t.ok?(this.job.status=0,this.applyMessage="Job unpublished successfully.",this.applyStatusClass="alert-warning"):(this.applyMessage=a.message||"Failed to unpublish job.",this.applyStatusClass="alert-danger")}catch(e){this.applyMessage="An error occurred while unpublishing the job.",this.applyStatusClass="alert-danger",console.error("Error unpublishing job:",e)}}}};const TS=(0,n.A)(MS,[["render",FS],["__scopeId","data-v-149a92dc"]]);var jS=TS;const DS={class:"page-wrapper",id:"main-wrapper","data-layout":"vertical","data-navbarbg":"skin6","data-sidebartype":"full","data-sidebar-description":"fixed","data-header-description":"fixed"},US={class:"body-wrapper"},$S={key:0,class:"modal-overlay"},XS={class:"modal-content"},VS={class:"d-flex justify-content-center mb-3"},BS={class:"col-md-8"},JS={key:1,class:"d-flex justify-content-center my-4"},NS={key:2},QS={class:"table-responsive"},zS={class:"table table-bordered"},RS=["src"],WS=["onClick"],OS=["onClick","disabled"],HS={class:"mt-3"},ZS={class:"pagination justify-content-center"},KS=["onClick"];function qS(e,t,a,r,i,l){const n=(0,o.g2)("IndexComponent");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(n),(0,o.Lk)("div",DS,[(0,o.Lk)("div",US,[i.showModal?((0,o.uX)(),(0,o.CE)("div",$S,[(0,o.Lk)("div",XS,[t[6]||(t[6]=(0,o.Lk)("h5",null,"Are you sure you want to delete this job?",-1)),(0,o.Lk)("div",null,[(0,o.Lk)("button",{class:"btn btn-danger mt-3",onClick:t[0]||(t[0]=(...e)=>l.confirmDeleteJob&&l.confirmDeleteJob(...e))},"Yes, Delete"),t[5]||(t[5]=(0,o.eW)(" Â  ")),(0,o.Lk)("button",{class:"btn btn-cancel mt-3",style:{"background-color":"teal",color:"white"},onClick:t[1]||(t[1]=(...e)=>l.closeModal&&l.closeModal(...e))}," Cancel ")])])])):(0,o.Q3)("",!0),t[9]||(t[9]=(0,o.Lk)("h5",{class:"card-title fw-semibold mb-4",style:{color:"#E960A6"}},[(0,o.Lk)("i",{class:"ti ti-user-plus"}),(0,o.eW)(" Unpublished job ")],-1)),t[10]||(t[10]=(0,o.Lk)("hr",{class:"my-4"},null,-1)),(0,o.Lk)("div",VS,[(0,o.Lk)("div",BS,[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>i.searchQuery=e),class:"form-control",placeholder:"Search by title or company"},null,512),[[s.Jo,i.searchQuery]])])]),0===l.filteredJobs.length?((0,o.uX)(),(0,o.CE)("div",JS,t[7]||(t[7]=[(0,o.Lk)("div",{class:"alert alert-danger text-center",style:{width:"40rem"}}," No jobs available yet. ",-1)]))):((0,o.uX)(),(0,o.CE)("div",NS,[(0,o.Lk)("div",QS,[(0,o.Lk)("table",zS,[t[8]||(t[8]=(0,o.Lk)("thead",{class:"table-light"},[(0,o.Lk)("tr",null,[(0,o.Lk)("th",null,"Id"),(0,o.Lk)("th",null,"Title"),(0,o.Lk)("th",null,"Description"),(0,o.Lk)("th",null,"Company"),(0,o.Lk)("th",null,"Location"),(0,o.Lk)("th",null,"Published"),(0,o.Lk)("th",null,"Deadline"),(0,o.Lk)("th",null,"Logo"),(0,o.Lk)("th",null,"Publisher"),(0,o.Lk)("th",null,"Status"),(0,o.Lk)("th",null,"Action")])],-1)),(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.paginatedJobs,((e,t)=>((0,o.uX)(),(0,o.CE)("tr",{key:e.job_id},[(0,o.Lk)("td",null,(0,L.v_)((i.currentPage-1)*i.itemsPerPage+t+1),1),(0,o.Lk)("td",null,(0,L.v_)(e.job_title),1),(0,o.Lk)("td",null,(0,L.v_)(e.job_description.length>100?e.job_description.substring(0,100)+"...":e.job_description),1),(0,o.Lk)("td",null,(0,L.v_)(e.company),1),(0,o.Lk)("td",null,(0,L.v_)(e.location),1),(0,o.Lk)("td",null,(0,L.v_)(e.published_date?e.published_date.substring(0,10):""),1),(0,o.Lk)("td",null,(0,L.v_)(e.deadline_date?e.deadline_date.substring(0,10):""),1),(0,o.Lk)("td",null,[(0,o.Lk)("img",{src:i.uploadsUrl+e.logo,alt:"Logo",class:"custom-job-logo",width:"100"},null,8,RS)]),(0,o.Lk)("td",null,(0,L.v_)(e.first_name)+" "+(0,L.v_)(e.last_name),1),(0,o.Lk)("td",null,[(0,o.Lk)("span",{class:(0,L.C4)([l.getStatusLabel(e.status).colorClass,"fw-bold"])},(0,L.v_)(l.getStatusLabel(e.status).text),3)]),(0,o.Lk)("td",null,[(0,o.Lk)("button",{class:"btn btn-primary btn-sm",onClick:t=>l.goToMore(e.job_id)}," More ",8,WS),(0,o.Lk)("button",{class:"btn btn-cancel btn-sm",onClick:t=>l.openModal(e.job_id),disabled:!l.isAdmin}," Delete ",8,OS)])])))),128))])])]),(0,o.Lk)("nav",HS,[(0,o.Lk)("ul",ZS,[(0,o.Lk)("li",{class:(0,L.C4)(["page-item",{disabled:1===i.currentPage}])},[(0,o.Lk)("button",{class:"page-link",onClick:t[3]||(t[3]=e=>l.changePage(i.currentPage-1))}," Previous ")],2),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.pagesToShow,(e=>((0,o.uX)(),(0,o.CE)("li",{key:e,class:(0,L.C4)(["page-item",{active:i.currentPage===e}])},[(0,o.Lk)("button",{class:"page-link",onClick:t=>l.changePage(e)},(0,L.v_)(e),9,KS)],2)))),128)),(0,o.Lk)("li",{class:(0,L.C4)(["page-item",{disabled:i.currentPage===l.totalPages}])},[(0,o.Lk)("button",{class:"page-link",onClick:t[4]||(t[4]=e=>l.changePage(i.currentPage+1))}," Next ")],2)])])]))])])],64)}var GS={name:"MainWrapper",components:{IndexComponent:Tb},data(){return{uploadsUrl:de+"/uploads/logo/",form:{job_id:null,job_title:"",company:"",deadline_date:"",job_description:"",logo:"",location:""},jobs:[],isSubmitting:!1,status:{success:!1,message:""},userEmail:"",userId:"",showModal:!1,selectedJobId:null,searchQuery:"",filterStatus:"",currentPage:1,itemsPerPage:20}},computed:{isAdmin(){return"admin@kozi.rw"===this.userEmail.toLowerCase()},pagesToShow(){const e=this.totalPages,t=this.currentPage,a=2,s=[];for(let o=Math.max(1,t-a);o<=Math.min(e,t+a);o++)s.push(o);return s},filteredJobs(){return this.jobs.filter((e=>{const t=this.searchQuery.toLowerCase(),a=e.job_title.toLowerCase().includes(t)||e.company.toLowerCase().includes(t)||e.location.toLowerCase().includes(t),s=""===this.filterStatus||String(e.status)===String(this.filterStatus);return a&&s}))},totalPages(){return Math.ceil(this.filteredJobs.length/this.itemsPerPage)||1},paginatedJobs(){const e=(this.currentPage-1)*this.itemsPerPage;return this.filteredJobs.slice(e,e+this.itemsPerPage)}},mounted(){this.userEmail=localStorage.getItem("userEmail")||"",this.userEmail&&this.getUserIdFromEmail()},methods:{handleFileUpload(e){this.form.logo=e.target.files[0]},openModal(e){this.selectedJobId=e,this.showModal=!0},closeModal(){this.showModal=!1,this.selectedJobId=null},changePage(e){e>=1&&e<=this.totalPages&&(this.currentPage=e)},async confirmDeleteJob(){const e=localStorage.getItem("adminToken");try{const t=await fetch(`${de}/admin/delete_job/${this.selectedJobId}`,{method:"DELETE",headers:{Authorization:`Bearer ${e}`}}),a=await t.json();t.ok?(this.status={success:!0,message:a.message||"Job deleted successfully."},this.fetchJobsByUser()):this.status={success:!1,message:a.message||"Failed to delete job."}}catch(t){console.error("Delete error:",t),this.status={success:!1,message:"Unexpected error occurred while deleting."}}finally{this.closeModal()}},async fetchJobsByUser(){try{const e=localStorage.getItem("adminToken");if(!this.userId)return;const t=await fetch(`${de}/admin/unpublished_jobs`,{headers:{Authorization:`Bearer ${e}`}});if(!t.ok)throw new Error("Failed to fetch jobs");const a=await t.json();this.jobs=a}catch(e){console.error("Error fetching jobs for user:",e)}},async submitForm(){this.isSubmitting=!0,this.status.message="";try{const e=new FormData,t=(new Date).toISOString().split("T")[0];e.append("job_title",this.form.job_title),e.append("company",this.form.company),e.append("location",this.form.location),e.append("job_description",this.form.job_description),e.append("published_date",t),e.append("deadline_date",this.form.deadline_date),e.append("users_id",this.userId),this.form.logo&&"string"!==typeof this.form.logo&&e.append("logo",this.form.logo);const a=localStorage.getItem("adminToken"),s=this.form.job_id?`${de}/admin/update_job/${this.form.job_id}`:`${de}/admin/add_jobs`,o=this.form.job_id?"PUT":"POST",r=await fetch(s,{method:o,headers:{Authorization:`Bearer ${a}`},body:e});if(r.ok){const e=await r.json();this.status={success:!0,message:e.message||(this.form.job_id?"Job updated!":"Job added!")},this.form={job_id:null,job_title:"",company:"",deadline_date:"",job_description:"",logo:"",location:""},this.fetchJobsByUser()}else{const e=await r.text();this.status={success:!1,message:"Failed: "+e}}}catch(e){console.error("Error:",e),this.status={success:!1,message:"Unexpected error occurred."}}finally{this.isSubmitting=!1}},goToMore(e){this.$router.push({name:"admin/job-details",params:{id:e}})},async getUserIdFromEmail(){const e=localStorage.getItem("adminToken");if(e)try{const t=JSON.parse(atob(e.split(".")[1]));this.userEmail||(this.userEmail=t.email);const a=await fetch(`${de}/get_user_id_by_email/${this.userEmail}`,{headers:{Authorization:`Bearer ${e}`}}),s=await a.json();a.ok?(this.userId=s.users_id,this.fetchJobsByUser()):this.status={success:!1,message:s.message||"Unable to get user ID."}}catch(t){console.error("Error getting users_id:",t),this.status={success:!1,message:"Failed to fetch user ID."}}},getStatusLabel(e){return 0===e?{text:"Pending",colorClass:"text-danger"}:1===e?{text:"Approved",colorClass:"text-success"}:{text:"Unknown",colorClass:"text-muted"}},highlightMatch(e){if(!this.searchQuery)return e;const t=new RegExp(`(${this.searchQuery})`,"gi");return e.replace(t,'<span class="highlight-teal">$1</span>')}}};const YS=(0,n.A)(GS,[["render",qS],["__scopeId","data-v-7b55161a"]]);var eF=YS;const tF={class:"page-wrapper",id:"main-wrapper","data-layout":"vertical","data-navbarbg":"skin6","data-sidebartype":"full","data-sidebar-description":"fixed","data-header-description":"fixed"},aF={class:"body-wrapper"},sF={key:0,class:"modal-overlay"},oF={class:"modal-content"},rF={class:"d-flex justify-content-center mb-3"},iF={key:1,class:"d-flex justify-content-center my-4"},lF={key:2,class:"table-responsive"},nF={class:"table table-bordered"},dF=["innerHTML"],cF=["innerHTML"],mF=["innerHTML"],uF={key:3,class:"mt-3"},gF={class:"pagination justify-content-center"},hF=["onClick"];function pF(e,t,a,r,i,l){const n=(0,o.g2)("IndexComponent");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(n),(0,o.Lk)("div",tF,[(0,o.Lk)("div",aF,[i.showModal?((0,o.uX)(),(0,o.CE)("div",sF,[(0,o.Lk)("div",oF,[t[5]||(t[5]=(0,o.Lk)("h5",null,"Are you sure you want to delete this job?",-1)),(0,o.Lk)("div",null,[(0,o.Lk)("button",{class:"btn btn-danger mt-3",onClick:t[0]||(t[0]=(...t)=>e.confirmDeleteJob&&e.confirmDeleteJob(...t))},"Yes, Delete"),(0,o.Lk)("button",{class:"btn btn-cancel mt-3",style:{"background-color":"teal",color:"white"},onClick:t[1]||(t[1]=(...e)=>l.closeModal&&l.closeModal(...e))},"Cancel")])])])):(0,o.Q3)("",!0),t[8]||(t[8]=(0,o.Lk)("h5",{class:"card-title fw-semibold mb-4",style:{color:"#E960A6"}},[(0,o.Lk)("i",{class:"ti ti-user-plus"}),(0,o.eW)(" Job Applicant ")],-1)),(0,o.Lk)("div",rF,[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>i.searchQuery=e),class:"form-control",type:"text",style:{"max-width":"400px"},placeholder:"Search by name, telephone or job title"},null,512),[[s.Jo,i.searchQuery]])]),0===l.filteredJobs.length?((0,o.uX)(),(0,o.CE)("div",iF,t[6]||(t[6]=[(0,o.Lk)("div",{class:"alert alert-danger text-center",style:{width:"40rem"}}," No Applicant. ",-1)]))):((0,o.uX)(),(0,o.CE)("div",lF,[(0,o.Lk)("table",nF,[t[7]||(t[7]=(0,o.Lk)("thead",{class:"table-light"},[(0,o.Lk)("tr",null,[(0,o.Lk)("th",null,"Id"),(0,o.Lk)("th",null,"Names"),(0,o.Lk)("th",null,"Telephone"),(0,o.Lk)("th",null,"Job Title"),(0,o.Lk)("th",null,"Applied On")])],-1)),(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.paginatedJobs,((e,t)=>((0,o.uX)(),(0,o.CE)("tr",{key:e.job_id},[(0,o.Lk)("td",null,(0,L.v_)((i.currentPage-1)*i.itemsPerPage+t+1),1),(0,o.Lk)("td",{innerHTML:l.highlightMatch(e.first_name+" "+e.last_name)},null,8,dF),(0,o.Lk)("td",{innerHTML:l.highlightMatch(e.telephone)},null,8,cF),(0,o.Lk)("td",{innerHTML:l.highlightMatch(e.job_title)},null,8,mF),(0,o.Lk)("td",null,(0,L.v_)(l.formatDateTime(e.created_at)),1)])))),128))])])])),l.filteredJobs.length>0?((0,o.uX)(),(0,o.CE)("nav",uF,[(0,o.Lk)("ul",gF,[(0,o.Lk)("li",{class:(0,L.C4)(["page-item",{disabled:1===i.currentPage}])},[(0,o.Lk)("button",{class:"page-link",onClick:t[3]||(t[3]=e=>l.changePage(i.currentPage-1))},"Previous")],2),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.totalPages,(e=>((0,o.uX)(),(0,o.CE)("li",{key:e,class:(0,L.C4)(["page-item",{active:i.currentPage===e}])},[(0,o.Lk)("button",{class:"page-link",onClick:t=>l.changePage(e)},(0,L.v_)(e),9,hF)],2)))),128)),(0,o.Lk)("li",{class:(0,L.C4)(["page-item",{disabled:i.currentPage===l.totalPages}])},[(0,o.Lk)("button",{class:"page-link",onClick:t[4]||(t[4]=e=>l.changePage(i.currentPage+1))},"Next")],2)])])):(0,o.Q3)("",!0)])])],64)}var bF={name:"MainWrapper",components:{IndexComponent:Tb},data(){return{jobs:[],userEmail:"",userId:"",showModal:!1,selectedJobId:null,searchQuery:"",currentPage:1,itemsPerPage:20}},computed:{filteredJobs(){const e=this.searchQuery.toLowerCase();return this.jobs.filter((t=>{const a=`${t.first_name} ${t.last_name}`.toLowerCase(),s=t.telephone?.toLowerCase()||"",o=t.job_title?.toLowerCase()||"";return a.includes(e)||s.includes(e)||o.includes(e)}))},totalPages(){return Math.ceil(this.filteredJobs.length/this.itemsPerPage)},paginatedJobs(){const e=(this.currentPage-1)*this.itemsPerPage;return this.filteredJobs.slice(e,e+this.itemsPerPage)}},mounted(){this.userEmail=localStorage.getItem("userEmail")||"",this.userEmail&&this.getUserIdFromEmail()},methods:{formatDateTime(e){if(!e)return"";const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),o=String(t.getDate()).padStart(2,"0");let r=t.getHours();const i=String(t.getMinutes()).padStart(2,"0"),l=String(t.getSeconds()).padStart(2,"0"),n=r>=12?"PM":"AM";return r%=12,r=r||12,`${a}-${s}-${o} ${String(r).padStart(2,"0")}:${i}:${l} ${n}`},changePage(e){e>=1&&e<=this.totalPages&&(this.currentPage=e)},highlightMatch(e){if(!this.searchQuery)return e;const t=new RegExp(`(${this.searchQuery})`,"gi");return e.replace(t,'<span class="bg-warning text-dark">$1</span>')},openModal(e){this.selectedJobId=e,this.showModal=!0},closeModal(){this.showModal=!1,this.selectedJobId=null},async fetchJobsByUser(){try{const e=localStorage.getItem("adminToken");if(!this.userId)return;const t=await fetch(`${de}/admin/Applicants`,{headers:{Authorization:`Bearer ${e}`}});if(!t.ok)throw new Error("Failed to fetch jobs");const a=await t.json();this.jobs=a}catch(e){console.error("Error fetching jobs:",e)}},async getUserIdFromEmail(){const e=localStorage.getItem("adminToken");if(e)try{const t=JSON.parse(atob(e.split(".")[1]));this.userEmail=this.userEmail||t.email;const a=await fetch(`${de}/get_user_id_by_email/${this.userEmail}`,{headers:{Authorization:`Bearer ${e}`}}),s=await a.json();a.ok?(this.userId=s.users_id,this.fetchJobsByUser()):console.error("Error: ",s.message)}catch(t){console.error("Error getting user ID:",t)}}}};const fF=(0,n.A)(bF,[["render",pF],["__scopeId","data-v-118f9b31"]]);var kF=fF;const vF={class:"page-wrapper",id:"main-wrapper","data-layout":"vertical","data-navbarbg":"skin6","data-sidebartype":"full","data-sidebar-description":"fixed","data-header-description":"fixed"},yF={class:"body-wrapper"},LF={class:"mx-4"},CF={class:"form-group row"},wF={class:"form-label"},_F={class:"form-control-plaintext"},AF={key:1},EF={class:"table-responsive"},IF={style:{color:"#E960A6"}},xF={class:"table table-bordered"},PF={class:"d-flex gap-2"},SF=["onClick"],FF=["onClick"],MF={class:"mt-3 d-flex justify-content-center gap-2"},TF=["disabled"],jF=["onClick"],DF=["disabled"];function UF(e,t,a,s,r,i){const l=(0,o.g2)("IndexComponent");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(l),(0,o.Lk)("div",vF,[(0,o.Lk)("div",yF,[t[6]||(t[6]=(0,o.Lk)("h5",{class:"card-title fw-semibold mb-4"},"AGENT PROFILE",-1)),(0,o.Lk)("div",LF,[r.message?((0,o.uX)(),(0,o.CE)("div",{key:0,class:(0,L.C4)(["alert",r.messageType])},(0,L.v_)(r.message),3)):(0,o.Q3)("",!0),(0,o.Lk)("div",CF,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(r.personalFields,((e,t)=>((0,o.uX)(),(0,o.CE)("div",{class:"col-md-6",key:t},[(0,o.Lk)("label",wF,(0,L.v_)(e.label),1),(0,o.Lk)("p",_F,(0,L.v_)(r.form[e.model]),1)])))),128))]),0===r.status||1===r.status?((0,o.uX)(),(0,o.CE)("div",AF,[(0,o.Lk)("button",{onClick:t[0]||(t[0]=(...t)=>e.handleStatusChange&&e.handleStatusChange(...t)),class:(0,L.C4)(["btn mt-3",0===r.status?"btn-primary":"btn-unpproved"])},(0,L.v_)(0===r.status?"Approve":"Unapprove"),3)])):(0,o.Q3)("",!0),t[3]||(t[3]=(0,o.Lk)("br",null,null,-1)),t[4]||(t[4]=(0,o.Lk)("br",null,null,-1))]),(0,o.Lk)("div",EF,[(0,o.Lk)("h5",IF,"All Seekers Registered by Agent "+(0,L.v_)(r.form.first_name)+" "+(0,L.v_)(r.form.last_name),1),(0,o.Lk)("table",xF,[t[5]||(t[5]=(0,o.Lk)("thead",{class:"table-light"},[(0,o.Lk)("tr",null,[(0,o.Lk)("th",null,"#"),(0,o.Lk)("th",null,"NAMES"),(0,o.Lk)("th",null,"SALARY"),(0,o.Lk)("th",null,"SKILLS AND CAPABILITIES"),(0,o.Lk)("th",null,"PROVINCE"),(0,o.Lk)("th",null,"ACTION")])],-1)),(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.paginatedJobs,((e,t)=>((0,o.uX)(),(0,o.CE)("tr",{key:e.users_id},[(0,o.Lk)("td",null,(0,L.v_)((r.currentPage-1)*r.perPage+t+1),1),(0,o.Lk)("td",null,(0,L.v_)(e.first_name||"N/A")+" "+(0,L.v_)(e.last_name||""),1),(0,o.Lk)("td",null,(0,L.v_)(e.salary||"N/A"),1),(0,o.Lk)("td",null,(0,L.v_)(e.bio?e.bio.length>40?e.bio.substring(0,40)+"...":e.bio:"N/A"),1),(0,o.Lk)("td",null,(0,L.v_)(e.province||"N/A"),1),(0,o.Lk)("td",null,[(0,o.Lk)("div",PF,[(0,o.Lk)("button",{class:"btn btn-primary btn-sm",onClick:t=>i.goToEdit(e.users_id)},"Edit",8,SF),(0,o.Lk)("button",{class:"btn btn-primary btn-sm",onClick:t=>i.goToMore(e.users_id)},"More",8,FF)])])])))),128))])]),(0,o.Lk)("div",MF,[(0,o.Lk)("button",{class:"btn btn-sm btn-outline-primary",disabled:1===r.currentPage,onClick:t[1]||(t[1]=e=>r.currentPage--)},"Previous",8,TF),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.totalPages,(e=>((0,o.uX)(),(0,o.CE)("button",{key:e,onClick:t=>r.currentPage=e,class:(0,L.C4)(["btn btn-sm",e===r.currentPage?"btn-primary":"btn-outline-primary"])},(0,L.v_)(e),11,jF)))),128)),(0,o.Lk)("button",{class:"btn btn-sm btn-outline-primary",disabled:r.currentPage===i.totalPages,onClick:t[2]||(t[2]=e=>r.currentPage++)},"Next",8,DF)])])])])],64)}var $F={name:"ProfileComponent",components:{IndexComponent:Tb},data(){return{form:{email:"",first_name:"",last_name:"",fathers_name:"",mothers_name:"",telephone:"",province:"",district:"",sector:"",cell:"",gender:"",country:"",village:"",image:""},uploadsUrl:`${de}/uploads/profile/`,selectedCategoryType:"",userId:"",userIdurl:"",userEmail:"",status:null,message:null,messageType:null,categoryTypes:[],categories:[],categoryName:"Unknown",jobs:[],currentPage:1,perPage:10,personalFields:[{label:"Email",model:"email"},{label:"ID",model:"id"},{label:"First Name",model:"first_name"},{label:"Last Name",model:"last_name"},{label:"Country",model:"country"},{label:"Province",model:"province"},{label:"District",model:"district"},{label:"Sector",model:"sector"},{label:"Cell",model:"cell"},{label:"Village",model:"village"},{label:"Telephone",model:"telephone"},{label:"Gender",model:"gender"}]}},computed:{validJobs(){return this.jobs.filter((e=>e&&"object"===typeof e))},paginatedJobs(){const e=(this.currentPage-1)*this.perPage,t=e+this.perPage;return this.validJobs.slice(e,t)},totalPages(){return Math.ceil(this.validJobs.length/this.perPage)}},mounted(){this.userIdurl=this.$route.params.id,this.getUserIdFromEmail()},methods:{async getUserIdFromEmail(){const e=localStorage.getItem("adminToken");if(e)try{const t=JSON.parse(atob(e.split(".")[1]));this.userEmail=t.email;const a=await fetch(`${de}/get_user_id_by_email/${this.userEmail}`,{headers:{Authorization:`Bearer ${e}`}}),s=await a.json();a.ok?(this.userId=s.users_id,this.fetchProfile(),this.fetchCategoryNameByUserId(),this.fetchStatus()):(this.message=s.message||"Unable to get user ID.",this.messageType="alert-danger")}catch(t){console.error("Error getting users_id:",t),this.message="Failed to fetch user ID.",this.messageType="alert-danger"}},async fetchProfile(){try{const e=await fetch(`${de}/admin/select_agent/${this.userIdurl}`,{headers:{Authorization:`Bearer ${localStorage.getItem("adminToken")}`}}),t=await e.json();e.ok?(this.form={...this.form,...t},t.image&&(this.form.image=t.image),t.categories_id&&await this.determineCategoryType(t.categories_id),this.fetchJobsByUser()):(this.message=t.message||"Failed to fetch profile",this.messageType="alert-danger")}catch(e){console.error("Error fetching profile:",e),this.message="Error loading profile.",this.messageType="alert-danger"}},async fetchJobsByUser(){try{const e=localStorage.getItem("adminToken"),t=this.form.email;if(!t)return;const a=await fetch(`${de}/admin/registered-seekers/${t}`,{headers:{Authorization:`Bearer ${e}`}}),s=await a.json();a.ok&&Array.isArray(s)?this.jobs=s.filter((e=>e&&"object"===typeof e)):(this.jobs=[],console.error("Invalid data from server:",s.message))}catch(e){console.error("Error fetching seekers:",e),this.jobs=[]}},async fetchStatus(){try{const e=await fetch(`${de}/provider/status/${this.userIdurl}`,{headers:{Authorization:`Bearer ${localStorage.getItem("adminToken")}`}}),t=await e.json();e.ok?this.status=Number(t.status):(this.status=null,console.error("Failed to fetch status:",t.message))}catch(e){console.error("Error fetching status:",e),this.status=null}},async fetchCategoryNameByUserId(){try{const e=await fetch(`${de}/category/${this.userIdurl}`),t=await e.json();e.ok&&t.name?this.categoryName=t.name:this.categoryName="Unknown"}catch(e){console.error("Failed to fetch category name:",e),this.categoryName="Error fetching category"}},goToEdit(e){this.$router.push({name:"edit-seekers",params:{id:e}})},goToMore(e){this.$router.push({name:"view-seekers",params:{id:e}})},confirmDelete(e){confirm("Are you sure you want to delete this job seeker?")&&console.log("Delete seeker:",e)}}};const XF=(0,n.A)($F,[["render",UF],["__scopeId","data-v-bd05f8ce"]]);var VF=XF;const BF={class:"page-wrapper",id:"main-wrapper","data-layout":"vertical","data-navbarbg":"skin6","data-sidebartype":"full","data-sidebar-description":"fixed","data-header-description":"fixed"},JF={class:"cv-builder"},NF={class:"card mb-4"},QF={class:"card-body"},zF={class:"card mb-4"},RF={class:"card-header d-flex justify-content-between"},WF={class:"card-body"},OF={key:0,class:"border p-3 mb-3 rounded"},HF={class:"row"},ZF={class:"col-md-6"},KF={class:"col-md-6"},qF={class:"col-md-6"},GF={class:"col-md-3"},YF={class:"col-md-3"},eM={class:"d-flex justify-content-between"},tM=["onClick"],aM={class:"card mb-4"},sM={class:"card-header d-flex justify-content-between"},oM={class:"card-body"},rM={key:0,class:"border p-3 mb-3 rounded"},iM={class:"row"},lM={class:"col-md-6"},nM={class:"col-md-6"},dM={class:"col-md-6"},cM={class:"col-md-6"},mM={class:"col-md-12"},uM={class:"d-flex justify-content-between"},gM={class:"mt-2 mb-0"},hM=["onClick"],pM={class:"card mb-4"},bM={class:"card-header d-flex justify-content-between"},fM={class:"card-body"},kM={key:0,class:"border p-3 mb-3 rounded"},vM={class:"row"},yM={class:"col-md-6"},LM={class:"col-md-6"},CM={class:"col-md-12"},wM={class:"col-md-12"},_M={class:"d-flex justify-content-between"},AM={class:"mt-2 mb-1"},EM=["href"],IM=["onClick"],xM={class:"card mb-4"},PM={class:"card-header d-flex justify-content-between"},SM={class:"card-body"},FM={key:0,class:"border p-3 mb-3 rounded"},MM={class:"row"},TM={class:"col-md-6"},jM={class:"col-md-6"},DM=["onClick"],UM={class:"text-center"};function $M(e,t,a,r,i,l){return(0,o.uX)(),(0,o.CE)("div",BF,[(0,o.Lk)("div",JF,[t[43]||(t[43]=(0,o.Lk)("h5",{class:"card-title fw-semibold mb-4",style:{color:"#E960A6"}},[(0,o.Lk)("i",{class:"ti ti-file-text"}),(0,o.eW)(" Generate CV ")],-1)),i.message?((0,o.uX)(),(0,o.CE)("div",{key:0,class:(0,L.C4)(["alert",i.messageType])},(0,L.v_)(i.message),3)):(0,o.Q3)("",!0),(0,o.Lk)("div",NF,[t[31]||(t[31]=(0,o.Lk)("div",{class:"card-header"},[(0,o.Lk)("h6",null,[(0,o.Lk)("i",{class:"ti ti-user"}),(0,o.eW)(" Professional Summary")])],-1)),(0,o.Lk)("div",QF,[(0,o.bo)((0,o.Lk)("textarea",{"onUpdate:modelValue":t[0]||(t[0]=e=>i.cvData.summary=e),class:"form-control",placeholder:"Write your professional summary...",rows:"4"},null,512),[[s.Jo,i.cvData.summary]]),(0,o.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>l.saveSummary&&l.saveSummary(...e)),class:"btn btn-primary btn-sm mt-2"},"Save Summary")])]),(0,o.Lk)("div",zF,[(0,o.Lk)("div",RF,[t[32]||(t[32]=(0,o.Lk)("h6",null,[(0,o.Lk)("i",{class:"ti ti-school"}),(0,o.eW)(" Education")],-1)),(0,o.Lk)("button",{onClick:t[2]||(t[2]=e=>i.showEducationForm=!i.showEducationForm),class:"btn btn-outline-primary btn-sm"}," Add Education ")]),(0,o.Lk)("div",WF,[i.showEducationForm?((0,o.uX)(),(0,o.CE)("div",OF,[(0,o.Lk)("div",HF,[(0,o.Lk)("div",ZF,[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>i.newEducation.institution=e),class:"form-control mb-2",placeholder:"Institution"},null,512),[[s.Jo,i.newEducation.institution]])]),(0,o.Lk)("div",KF,[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>i.newEducation.degree=e),class:"form-control mb-2",placeholder:"Degree"},null,512),[[s.Jo,i.newEducation.degree]])]),(0,o.Lk)("div",qF,[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>i.newEducation.field_of_study=e),class:"form-control mb-2",placeholder:"Field of Study"},null,512),[[s.Jo,i.newEducation.field_of_study]])]),(0,o.Lk)("div",GF,[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>i.newEducation.start_year=e),class:"form-control mb-2",placeholder:"Start Year",type:"number"},null,512),[[s.Jo,i.newEducation.start_year]])]),(0,o.Lk)("div",YF,[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>i.newEducation.end_year=e),class:"form-control mb-2",placeholder:"End Year",type:"number"},null,512),[[s.Jo,i.newEducation.end_year]])])]),(0,o.Lk)("button",{onClick:t[8]||(t[8]=(...e)=>l.addEducation&&l.addEducation(...e)),class:"btn btn-success btn-sm me-2"},"Save"),(0,o.Lk)("button",{onClick:t[9]||(t[9]=(...e)=>l.cancelEducation&&l.cancelEducation(...e)),class:"btn btn-secondary btn-sm"},"Cancel")])):(0,o.Q3)("",!0),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.education,(e=>((0,o.uX)(),(0,o.CE)("div",{key:e.id,class:"border p-2 mb-2 rounded"},[(0,o.Lk)("div",eM,[(0,o.Lk)("div",null,[(0,o.Lk)("strong",null,(0,L.v_)(e.degree)+" in "+(0,L.v_)(e.field_of_study),1),t[33]||(t[33]=(0,o.Lk)("br",null,null,-1)),(0,o.Lk)("small",null,(0,L.v_)(e.institution)+" ("+(0,L.v_)(e.start_year)+"-"+(0,L.v_)(e.end_year)+")",1)]),(0,o.Lk)("button",{onClick:t=>l.deleteEducation(e.id),class:"btn btn-danger btn-sm"},"Delete",8,tM)])])))),128))])]),(0,o.Lk)("div",aM,[(0,o.Lk)("div",sM,[t[34]||(t[34]=(0,o.Lk)("h6",null,[(0,o.Lk)("i",{class:"ti ti-briefcase"}),(0,o.eW)(" Experience")],-1)),(0,o.Lk)("button",{onClick:t[10]||(t[10]=e=>i.showExperienceForm=!i.showExperienceForm),class:"btn btn-outline-primary btn-sm"}," Add Experience ")]),(0,o.Lk)("div",oM,[i.showExperienceForm?((0,o.uX)(),(0,o.CE)("div",rM,[(0,o.Lk)("div",iM,[(0,o.Lk)("div",lM,[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[11]||(t[11]=e=>i.newExperience.company=e),class:"form-control mb-2",placeholder:"Company"},null,512),[[s.Jo,i.newExperience.company]])]),(0,o.Lk)("div",nM,[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[12]||(t[12]=e=>i.newExperience.position=e),class:"form-control mb-2",placeholder:"Position"},null,512),[[s.Jo,i.newExperience.position]])]),(0,o.Lk)("div",dM,[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[13]||(t[13]=e=>i.newExperience.start_date=e),class:"form-control mb-2",type:"date"},null,512),[[s.Jo,i.newExperience.start_date]])]),(0,o.Lk)("div",cM,[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[14]||(t[14]=e=>i.newExperience.end_date=e),class:"form-control mb-2",type:"date"},null,512),[[s.Jo,i.newExperience.end_date]])]),(0,o.Lk)("div",mM,[(0,o.bo)((0,o.Lk)("textarea",{"onUpdate:modelValue":t[15]||(t[15]=e=>i.newExperience.description=e),class:"form-control mb-2",placeholder:"Job description...",rows:"3"},null,512),[[s.Jo,i.newExperience.description]])])]),(0,o.Lk)("button",{onClick:t[16]||(t[16]=(...e)=>l.addExperience&&l.addExperience(...e)),class:"btn btn-success btn-sm me-2"},"Save"),(0,o.Lk)("button",{onClick:t[17]||(t[17]=(...e)=>l.cancelExperience&&l.cancelExperience(...e)),class:"btn btn-secondary btn-sm"},"Cancel")])):(0,o.Q3)("",!0),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.experience,(e=>((0,o.uX)(),(0,o.CE)("div",{key:e.id,class:"border p-2 mb-2 rounded"},[(0,o.Lk)("div",uM,[(0,o.Lk)("div",null,[(0,o.Lk)("strong",null,(0,L.v_)(e.position),1),(0,o.eW)(" at "+(0,L.v_)(e.company),1),t[35]||(t[35]=(0,o.Lk)("br",null,null,-1)),(0,o.Lk)("small",null,(0,L.v_)(l.formatDate(e.start_date))+" - "+(0,L.v_)(l.formatDate(e.end_date)),1),t[36]||(t[36]=(0,o.Lk)("br",null,null,-1)),(0,o.Lk)("p",gM,(0,L.v_)(e.description),1)]),(0,o.Lk)("button",{onClick:t=>l.deleteExperience(e.id),class:"btn btn-danger btn-sm"},"Delete",8,hM)])])))),128))])]),(0,o.Lk)("div",pM,[(0,o.Lk)("div",bM,[t[37]||(t[37]=(0,o.Lk)("h6",null,[(0,o.Lk)("i",{class:"ti ti-code"}),(0,o.eW)(" Projects")],-1)),(0,o.Lk)("button",{onClick:t[18]||(t[18]=e=>i.showProjectForm=!i.showProjectForm),class:"btn btn-outline-primary btn-sm"}," Add Project ")]),(0,o.Lk)("div",fM,[i.showProjectForm?((0,o.uX)(),(0,o.CE)("div",kM,[(0,o.Lk)("div",vM,[(0,o.Lk)("div",yM,[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[19]||(t[19]=e=>i.newProject.title=e),class:"form-control mb-2",placeholder:"Project Title"},null,512),[[s.Jo,i.newProject.title]])]),(0,o.Lk)("div",LM,[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[20]||(t[20]=e=>i.newProject.technologies=e),class:"form-control mb-2",placeholder:"Technologies Used"},null,512),[[s.Jo,i.newProject.technologies]])]),(0,o.Lk)("div",CM,[(0,o.bo)((0,o.Lk)("textarea",{"onUpdate:modelValue":t[21]||(t[21]=e=>i.newProject.description=e),class:"form-control mb-2",placeholder:"Project description...",rows:"3"},null,512),[[s.Jo,i.newProject.description]])]),(0,o.Lk)("div",wM,[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[22]||(t[22]=e=>i.newProject.link=e),class:"form-control mb-2",placeholder:"Project Link (optional)",type:"url"},null,512),[[s.Jo,i.newProject.link]])])]),(0,o.Lk)("button",{onClick:t[23]||(t[23]=(...e)=>l.addProject&&l.addProject(...e)),class:"btn btn-success btn-sm me-2"},"Save"),(0,o.Lk)("button",{onClick:t[24]||(t[24]=(...e)=>l.cancelProject&&l.cancelProject(...e)),class:"btn btn-secondary btn-sm"},"Cancel")])):(0,o.Q3)("",!0),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.projects,(e=>((0,o.uX)(),(0,o.CE)("div",{key:e.id,class:"border p-2 mb-2 rounded"},[(0,o.Lk)("div",_M,[(0,o.Lk)("div",null,[(0,o.Lk)("strong",null,(0,L.v_)(e.title),1),t[38]||(t[38]=(0,o.Lk)("br",null,null,-1)),(0,o.Lk)("small",null,"Technologies: "+(0,L.v_)(e.technologies),1),t[39]||(t[39]=(0,o.Lk)("br",null,null,-1)),(0,o.Lk)("p",AM,(0,L.v_)(e.description),1),e.link?((0,o.uX)(),(0,o.CE)("a",{key:0,href:e.link,target:"_blank",class:"btn btn-link btn-sm p-0"},"View Project",8,EM)):(0,o.Q3)("",!0)]),(0,o.Lk)("button",{onClick:t=>l.deleteProject(e.id),class:"btn btn-danger btn-sm"},"Delete",8,IM)])])))),128))])]),(0,o.Lk)("div",xM,[(0,o.Lk)("div",PM,[t[40]||(t[40]=(0,o.Lk)("h6",null,[(0,o.Lk)("i",{class:"ti ti-language"}),(0,o.eW)(" Languages")],-1)),(0,o.Lk)("button",{onClick:t[25]||(t[25]=e=>i.showLanguageForm=!i.showLanguageForm),class:"btn btn-outline-primary btn-sm"}," Add Language ")]),(0,o.Lk)("div",SM,[i.showLanguageForm?((0,o.uX)(),(0,o.CE)("div",FM,[(0,o.Lk)("div",MM,[(0,o.Lk)("div",TM,[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[26]||(t[26]=e=>i.newLanguage.language=e),class:"form-control mb-2",placeholder:"Language"},null,512),[[s.Jo,i.newLanguage.language]])]),(0,o.Lk)("div",jM,[(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[27]||(t[27]=e=>i.newLanguage.proficiency=e),class:"form-control mb-2"},t[41]||(t[41]=[(0,o.Fv)('<option value="" data-v-47fc3f48>Select Proficiency</option><option value="Beginner" data-v-47fc3f48>Beginner</option><option value="Intermediate" data-v-47fc3f48>Intermediate</option><option value="Advanced" data-v-47fc3f48>Advanced</option><option value="Native" data-v-47fc3f48>Native</option>',5)]),512),[[s.u1,i.newLanguage.proficiency]])])]),(0,o.Lk)("button",{onClick:t[28]||(t[28]=(...e)=>l.addLanguage&&l.addLanguage(...e)),class:"btn btn-success btn-sm me-2"},"Save"),(0,o.Lk)("button",{onClick:t[29]||(t[29]=(...e)=>l.cancelLanguage&&l.cancelLanguage(...e)),class:"btn btn-secondary btn-sm"},"Cancel")])):(0,o.Q3)("",!0),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.languages,(e=>((0,o.uX)(),(0,o.CE)("div",{key:e.id,class:"border p-2 mb-2 rounded d-flex justify-content-between"},[(0,o.Lk)("div",null,[(0,o.Lk)("strong",null,(0,L.v_)(e.language),1),(0,o.eW)(" - "+(0,L.v_)(e.proficiency),1)]),(0,o.Lk)("button",{onClick:t=>l.deleteLanguage(e.id),class:"btn btn-danger btn-sm"},"Delete",8,DM)])))),128))])]),(0,o.Lk)("div",UM,[(0,o.Lk)("button",{onClick:t[30]||(t[30]=(...e)=>l.generateCV&&l.generateCV(...e)),class:"btn btn-success btn-lg"},t[42]||(t[42]=[(0,o.Lk)("i",{class:"ti ti-download"},null,-1),(0,o.eW)(" Generate CV ")]))])])])}var XM={name:"CVGenerator",data(){return{userId:"",message:null,messageType:null,cvData:{summary:""},education:[],experience:[],projects:[],languages:[],showEducationForm:!1,showExperienceForm:!1,showProjectForm:!1,showLanguageForm:!1,newEducation:{institution:"",degree:"",field_of_study:"",start_year:"",end_year:""},newExperience:{company:"",position:"",start_date:"",end_date:"",description:""},newProject:{title:"",description:"",technologies:"",link:""},newLanguage:{language:"",proficiency:""}}},mounted(){this.getUserId(),this.loadCVData()},methods:{async getUserId(){const e=localStorage.getItem("authToken");if(e)try{const t=JSON.parse(atob(e.split(".")[1])),a=t.email,s=await fetch(`${de}/get_user_id_by_email/${a}`,{headers:{Authorization:`Bearer ${e}`}}),o=await s.json();s.ok&&(this.userId=o.users_id)}catch(t){console.error("Error getting user ID:",t)}},async loadCVData(){await this.loadEducation(),await this.loadExperience(),await this.loadProjects(),await this.loadLanguages()},async saveSummary(){try{const e=await fetch(`${de}/api/cv/summary`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")}`},body:JSON.stringify({users_id:this.userId,summary:this.cvData.summary})}),t=await e.json();e.ok?this.showMessage("Summary saved successfully!","alert-success"):this.showMessage(t.message,"alert-danger")}catch(e){this.showMessage("Error saving summary","alert-danger")}},async loadEducation(){try{const e=await fetch(`${de}/api/cv/education/${this.userId}`,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}});e.ok&&(this.education=await e.json())}catch(e){console.error("Error loading education:",e)}},async addEducation(){try{const e=await fetch(`${de}/api/cv/education`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")}`},body:JSON.stringify({users_id:this.userId,...this.newEducation})});e.ok&&(this.showMessage("Education added successfully!","alert-success"),this.cancelEducation(),this.loadEducation())}catch(e){this.showMessage("Error adding education","alert-danger")}},async deleteEducation(e){try{const t=await fetch(`${de}/api/cv/education/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}});t.ok&&(this.showMessage("Education deleted successfully!","alert-success"),this.loadEducation())}catch(t){this.showMessage("Error deleting education","alert-danger")}},cancelEducation(){this.showEducationForm=!1,this.newEducation={institution:"",degree:"",field_of_study:"",start_year:"",end_year:""}},async loadExperience(){try{const e=await fetch(`${de}/api/cv/experience/${this.userId}`,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}});e.ok&&(this.experience=await e.json())}catch(e){console.error("Error loading experience:",e)}},async addExperience(){try{const e=await fetch(`${de}/api/cv/experience`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")}`},body:JSON.stringify({users_id:this.userId,...this.newExperience})});e.ok&&(this.showMessage("Experience added successfully!","alert-success"),this.cancelExperience(),this.loadExperience())}catch(e){this.showMessage("Error adding experience","alert-danger")}},async deleteExperience(e){try{const t=await fetch(`${de}/api/cv/experience/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}});t.ok&&(this.showMessage("Experience deleted successfully!","alert-success"),this.loadExperience())}catch(t){this.showMessage("Error deleting experience","alert-danger")}},cancelExperience(){this.showExperienceForm=!1,this.newExperience={company:"",position:"",start_date:"",end_date:"",description:""}},async loadProjects(){try{const e=await fetch(`${de}/api/cv/projects/${this.userId}`,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}});e.ok&&(this.projects=await e.json())}catch(e){console.error("Error loading projects:",e)}},async addProject(){try{const e=await fetch(`${de}/api/cv/projects`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")}`},body:JSON.stringify({users_id:this.userId,...this.newProject})});e.ok&&(this.showMessage("Project added successfully!","alert-success"),this.cancelProject(),this.loadProjects())}catch(e){this.showMessage("Error adding project","alert-danger")}},async deleteProject(e){try{const t=await fetch(`${de}/api/cv/projects/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}});t.ok&&(this.showMessage("Project deleted successfully!","alert-success"),this.loadProjects())}catch(t){this.showMessage("Error deleting project","alert-danger")}},cancelProject(){this.showProjectForm=!1,this.newProject={title:"",description:"",technologies:"",link:""}},async loadLanguages(){try{const e=await fetch(`${de}/api/cv/languages/${this.userId}`,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}});e.ok&&(this.languages=await e.json())}catch(e){console.error("Error loading languages:",e)}},async addLanguage(){try{const e=await fetch(`${de}/api/cv/languages`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")}`},body:JSON.stringify({users_id:this.userId,...this.newLanguage})});e.ok&&(this.showMessage("Language added successfully!","alert-success"),this.cancelLanguage(),this.loadLanguages())}catch(e){this.showMessage("Error adding language","alert-danger")}},async deleteLanguage(e){try{const t=await fetch(`${de}/api/cv/languages/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}});t.ok&&(this.showMessage("Language deleted successfully!","alert-success"),this.loadLanguages())}catch(t){this.showMessage("Error deleting language","alert-danger")}},cancelLanguage(){this.showLanguageForm=!1,this.newLanguage={language:"",proficiency:""}},formatDate(e){if(!e)return"";const t=new Date(e);return t.toLocaleDateString()},showMessage(e,t){this.message=e,this.messageType=t,setTimeout((()=>{this.message=null,this.messageType=null}),3e3)},generateCV(){this.showMessage("CV generation feature coming soon!","alert-info")}}};const VM=(0,n.A)(XM,[["render",$M],["__scopeId","data-v-47fc3f48"]]);var BM=VM;const JM=[{path:"/home",name:"Home",component:y,meta:{title:"Choose Role - Kozi Rwanda"}},{path:"/",name:"here",component:P,meta:{title:"Choose Role - Kozi Rwanda"}},{path:"/role-selector",name:"heree",component:P,meta:{title:"Choose Role - Kozi Rwanda"}},{path:"/login",name:"login",component:ue,meta:{title:"Login - Kozi Rwanda"}},{path:"/login2",name:"login2",component:xe},{path:"/signup",name:"signup",component:ft,meta:{title:"Sign up - Kozi Rwanda"}},{path:"/verify-otp",name:"verify-otp",component:Yt,meta:{title:"Verify OTP - Kozi Rwanda"}},{path:"/forgot-password",name:"forgot-password",component:Pa,meta:{title:"Forgot password - Kozi Rwanda"}},{path:"/verify-forgot-otp",name:"verify-forgot-otp",component:Ha,meta:{title:"Verify OTP - Kozi Rwanda"}},{path:"/password-change",name:"password-change",component:bs,meta:{title:"Change Password - Kozi Rwanda"}},{path:"/header",name:"header",component:eo},{path:"/dashboard/",name:"dashboards/",component:Co,meta:{title:"Dashboard - Job Seeker",noHeaderFooter:!0,requiresAuth:!0}},{path:"/dashboard/Edit-Profile",name:"edit-profile",component:br,meta:{title:"Edit Profile - Job Seeker",noHeaderFooter:!0,requiresAuth:!0}},{path:"/dashboard/View-profile",name:"view-profile",component:Dr,meta:{title:"View Profile - Job Seeker",noHeaderFooter:!0,requiresAuth:!0}},{path:"/dashboard/My-application",name:"my-application",component:qr,meta:{title:"My Application - Job Seeker",noHeaderFooter:!0,requiresAuth:!0}},{path:"/dashboard/All-jobs",name:"all-jobs",component:wi,meta:{title:"All Jobs - Job Seeker",noHeaderFooter:!0,requiresAuth:!0}},{path:"/dashboard/settings",name:"settings",component:bn,meta:{title:"All Jobs - Job Seeker",noHeaderFooter:!0,requiresAuth:!0}},{path:"/dashboard/generate-cv",name:"settings",component:BM,meta:{title:"All Jobs - Job Seeker",noHeaderFooter:!0,requiresAuth:!0}},{path:"/career/:job_id",name:"job-details",component:zi,meta:{title:"Job Details - Job Seeker",noHeaderFooter:!0,requiresAuth:!0}},{path:"/dashboard/payment",name:"payment",component:hl,meta:{title:"Payment - Job Seeker",noHeaderFooter:!0,requiresAuth:!0}},{path:"/dashboard/message",name:"message",component:Dl,meta:{title:"Message - Job Seeker",noHeaderFooter:!0,requiresAuth:!0}},{path:"/dashboard/change-password",name:"change-password-jobseeker",component:Rl,meta:{title:"Change Password - Job Seeker",noHeaderFooter:!0,requiresAuth:!0}},{path:"/employer/dashboard",name:"provider-dashboard",component:Ld,meta:{title:"Dashboard - Job Provider",noHeaderFooter:!0,requiresAuth:!0}},{path:"/employer/edit-profile",name:"provider-edit-profile",component:ec,meta:{title:"Edit Profile - Job Provider",noHeaderFooter:!0,requiresAuth:!0}},{path:"/employer/view-profile",name:"provider-view-profile",component:gc,meta:{title:"View Profile - Job Provider",noHeaderFooter:!0,requiresAuth:!0}},{path:"/employer/seekers",name:"provider-seekers",component:Xc,meta:{title:" All  Seekers - Job Provider",noHeaderFooter:!0,requiresAuth:!0}},{path:"/employer/seekers/:users_id",name:"seeker-details",component:zm,meta:{title:"Seeker Info - Job Provider",noHeaderFooter:!0,requiresAuth:!0}},{path:"/employer/category",name:"provider-categories",component:cu,meta:{title:"Categories - Job Provider",noHeaderFooter:!0,requiresAuth:!0}},{path:"/employer/category/:category_id",name:"seekers-by-category",component:Mu,meta:{title:"Seekers by Category - Job Provider",noHeaderFooter:!0,requiresAuth:!0}},{path:"/employer/support",name:"support",component:Gu,meta:{title:"Support - Job Provider",noHeaderFooter:!0,requiresAuth:!0}},{path:"/employer/add-job",name:"add-job",component:Og,meta:{title:"Add Job - Job Provider",noHeaderFooter:!0,requiresAuth:!0}},{path:"/employer/change-password",name:"change-password-provider",component:sh,meta:{title:"Change Password - Job Provider",noHeaderFooter:!0,requiresAuth:!0}},{path:"/employer/settings",name:"delete-account",component:Sh,meta:{title:"Settings - Job Provider",noHeaderFooter:!0,requiresAuth:!0}},{path:"/admin/view-seekers",name:"checkkkkadmin-register-seekers",component:Cw,meta:{title:"All Seekers - Admin",noHeaderFooter:!0,requiresAuth:!0}},{path:"/admin/check",name:"admin-view-seekers",component:Cw,meta:{title:"View Seekers - Admin",noHeaderFooter:!0,requiresAuth:!0}},{path:"/admin",name:"admin-login",component:Kh,meta:{title:"Admin Login - Kozi Rwanda",noHeaderFooter:!0}},{path:"/admin/index",name:"admin-index",component:Ub,meta:{title:"Dashboard - Admin",noHeaderFooter:!0,requiresAuth:!0}},{path:"/admin/register-seeker",name:"admin-register-seekers",component:jk,meta:{title:"Register Seeker - Admin",noHeaderFooter:!0,requiresAuth:!0}},{path:"/admin/hired-seeker",name:"hired-seekers",component:tv,meta:{title:"Hired Seeker - Admin",noHeaderFooter:!0,requiresAuth:!0}},{path:"/admin/edit-seekers/:id",name:"edit-seekers",component:wf,meta:{title:"Edit Job Seeker - Admin",noHeaderFooter:!0,requiresAuth:!0}},{path:"/admin/view-seekers/:id",name:"view-seekers",component:zf,meta:{title:"View Seekers - Admin",noHeaderFooter:!0,requiresAuth:!0}},{path:"/admin/view-more/:id",name:"view-more",component:tL,meta:{title:"Admin Index - Kozi Rwanda",noHeaderFooter:!0,requiresAuth:!0}},{path:"/admin/payroll",name:"payroll",component:UA,meta:{title:"Payroll - Admin",noHeaderFooter:!0,requiresAuth:!0}},{path:"/admin/approved-user",name:"approved-seekers",component:fv,meta:{title:"Approved Seekers - Admin",noHeaderFooter:!0,requiresAuth:!0}},{path:"/admin/approved-providers",name:"admin/approved-providers",component:$v,meta:{title:"Approved Providers - Admin",noHeaderFooter:!0,requiresAuth:!0}},{path:"/admin/open-tickets",name:"open-ticket",component:ky,meta:{title:"Open Ticket - Admin",noHeaderFooter:!0,requiresAuth:!0}},{path:"/admin/view-provider",name:"view-providers",component:Jy,meta:{title:"View Provider - Admin",noHeaderFooter:!0,requiresAuth:!0}},{path:"/admin/view-more/:id",name:"view-more",component:tL,meta:{title:"Provider Info - Admin",noHeaderFooter:!0,requiresAuth:!0}},{path:"/admin/edit-providers/:id",name:"edit-providers",component:pL,meta:{title:"Edit provider - Admin",noHeaderFooter:!0,requiresAuth:!0}},{path:"/admin/register-provider",name:"register-provider",component:bP,meta:{title:"Register Provider - Admin",noHeaderFooter:!0,requiresAuth:!0}},{path:"/admin/more-agent/:id",name:"more-agent",component:VF,meta:{title:"Agent Info - Admin",noHeaderFooter:!0,requiresAuth:!0}},{path:"/admin/edit-agent/:id",name:"edit-agent",component:eC,meta:{title:"Edit Agent - Admin",noHeaderFooter:!0,requiresAuth:!0}},{path:"/admin/view-agent",name:"view-agent",component:jL,meta:{title:"View Agent - Admin",noHeaderFooter:!0,requiresAuth:!0}},{path:"/admin/register-agent",name:"register-agent",component:zL,meta:{title:"Register Agent - Admin",noHeaderFooter:!0,requiresAuth:!0}},{path:"/admin/Register-jobs",name:"Register-jobs ",component:hS,meta:{title:"Register Jobs - Admin",noHeaderFooter:!0,requiresAuth:!0}},{path:"/admin/job-details/:id",name:"admin/job-details",component:jS,meta:{title:"Job Info - Admin",noHeaderFooter:!0,requiresAuth:!0}},{path:"/admin/unpublished-job/",name:"admin/unpublished",component:eF,meta:{title:"Unpublished Job - Admin",noHeaderFooter:!0,requiresAuth:!0}},{path:"/admin/Job-Applicants/",name:"admin/JObapplicant",component:kF,meta:{title:"Job Applicant - Admin",noHeaderFooter:!0,requiresAuth:!0}},{path:"/admin/advert/",name:"admin/advert",component:a_,meta:{title:"Advert - Admin",noHeaderFooter:!0,requiresAuth:!0}},{path:"/admin/category/",name:"admin/category",component:V_,meta:{title:"Category - Admin",noHeaderFooter:!0,requiresAuth:!0}},{path:"/agent",name:"agent-login",component:aE,meta:{title:"Agent Login - Kozi Rwanda",noHeaderFooter:!0}},{path:"/agent/index",name:"agent-index",component:ZC,meta:{title:"Agent Index - Kozi Rwanda",noHeaderFooter:!0,requiresAuth:!0}},{path:"/agent/view-seekers",name:"admin-view-seekers",component:LE,meta:{title:"View Seekers - Kozi Rwanda",noHeaderFooter:!0,requiresAuth:!0}},{path:"/agent/dashboard",name:"agent-dashboard",component:ZC,meta:{title:"View Seekers - Kozi Rwanda",noHeaderFooter:!0,requiresAuth:!0}},{path:"/agent/agent-edit-seekers/:id",name:"agent/agent-edit-seekers",component:lI,meta:{title:"View Seekers - Kozi Rwanda",noHeaderFooter:!0,requiresAuth:!0}},{path:"/agent/agent-view-seekers/:id",name:"agent/agent-view-seekers",component:AI,meta:{title:"View Seekers - Kozi Rwanda",noHeaderFooter:!0,requiresAuth:!0}},{path:"/agent/register-seeker",name:"agent/register-seeker",component:gx,meta:{title:"View Seekers - Kozi Rwanda",noHeaderFooter:!0,requiresAuth:!0}},{path:"/agent/change-password",name:"agent/change-password",component:wx,meta:{title:"Change-password- Kozi Rwanda",noHeaderFooter:!0,RequiredAuth:!0}},{path:"/agent/My-profile",name:"agent/My-profile",component:Nx,meta:{title:"Change-password- Kozi Rwanda",noHeaderFooter:!0,RequiredAuth:!0}},{path:"/:pathMatch(.*)*",name:"NotFound",component:b,meta:{title:"404 - Page Not Found",noHeaderFooter:!1,requiresAuth:!1}}],NM=(0,m.aE)({history:(0,m.LA)(),routes:JM});NM.beforeEach(((e,t,a)=>{const s=localStorage.getItem("authToken"),o=localStorage.getItem("adminToken"),r=localStorage.getItem("agentToken"),i=localStorage.getItem("roleId"),l=e.meta.requiresAuth,n=e.path.startsWith("/admin"),d=e.path.startsWith("/agent");return"/admin"===e.path&&o&&"3"===i?a("/admin/index"):"/admin"===e.path&&r&&"4"===i?a("/agent/index"):l?n?o&&"3"===i?a():a("/admin"):d?r&&"4"===i?a():a("/agent"):!s||"1"!==i&&"2"!==i?a("/login"):a():(NM.afterEach((e=>{const t="Kozi rwanda";document.title=e.meta.title||t})),a())}));var QM=NM;const zM=(0,s.Ef)(c);zM.use(QM),zM.mount("#app")},4083:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAYAAAD0eNT6AAAACXBIWXMAAA7EAAAOxAGVKw4bAAAJSWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNi4wLWMwMDIgNzkuMTY0NDYwLCAyMDIwLzA1LzEyLTE2OjA0OjE3ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIgeG1sbnM6ZXhpZj0iaHR0cDovL25zLmFkb2JlLmNvbS9leGlmLzEuMC8iIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1wTU06RG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOmUzNjM4ODNjLTQzNTYtNTY0Yi1iMGNkLWY2MjE2OTMzODM2NCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo2Njk2NWFhNi00NzU3LTE0NGItOTQ1MC00NzFhMTdmOWIwMjYiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0iQjAzQzQzRUE0OTJCMTUyQ0MzOEM2NDA4MzI4RjczQ0UiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiBwaG90b3Nob3A6SUNDUHJvZmlsZT0iIiB0aWZmOkltYWdlV2lkdGg9IjUxMiIgdGlmZjpJbWFnZUxlbmd0aD0iNTEyIiB0aWZmOlBob3RvbWV0cmljSW50ZXJwcmV0YXRpb249IjIiIHRpZmY6U2FtcGxlc1BlclBpeGVsPSIzIiB0aWZmOlhSZXNvbHV0aW9uPSI5Ni8xIiB0aWZmOllSZXNvbHV0aW9uPSI5Ni8xIiB0aWZmOlJlc29sdXRpb25Vbml0PSIyIiBleGlmOkV4aWZWZXJzaW9uPSIwMjMxIiBleGlmOkNvbG9yU3BhY2U9IjY1NTM1IiBleGlmOlBpeGVsWERpbWVuc2lvbj0iNTEyIiBleGlmOlBpeGVsWURpbWVuc2lvbj0iNTEyIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyNS0wNy0xMFQwNDo0Nzo0MS0wOTowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjUtMDctMTBUMDQ6NDk6MjEtMDk6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjUtMDctMTBUMDQ6NDk6MjEtMDk6MDAiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo0MDBkODFlZi05ODI3LThkNGQtYmQwMS0xYTJiOWJiYmNjYzUiIHN0RXZ0OndoZW49IjIwMjUtMDctMTBUMDQ6NDk6MjEtMDk6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyMS4yIChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY29udmVydGVkIiBzdEV2dDpwYXJhbWV0ZXJzPSJmcm9tIGltYWdlL2pwZWcgdG8gaW1hZ2UvcG5nIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJkZXJpdmVkIiBzdEV2dDpwYXJhbWV0ZXJzPSJjb252ZXJ0ZWQgZnJvbSBpbWFnZS9qcGVnIHRvIGltYWdlL3BuZyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6NjY5NjVhYTYtNDc1Ny0xNDRiLTk0NTAtNDcxYTE3ZjliMDI2IiBzdEV2dDp3aGVuPSIyMDI1LTA3LTEwVDA0OjQ5OjIxLTA5OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjEuMiAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjQwMGQ4MWVmLTk4MjctOGQ0ZC1iZDAxLTFhMmI5YmJiY2NjNSIgc3RSZWY6ZG9jdW1lbnRJRD0iQjAzQzQzRUE0OTJCMTUyQ0MzOEM2NDA4MzI4RjczQ0UiIHN0UmVmOm9yaWdpbmFsRG9jdW1lbnRJRD0iQjAzQzQzRUE0OTJCMTUyQ0MzOEM2NDA4MzI4RjczQ0UiLz4gPHRpZmY6Qml0c1BlclNhbXBsZT4gPHJkZjpTZXE+IDxyZGY6bGk+ODwvcmRmOmxpPiA8cmRmOmxpPjg8L3JkZjpsaT4gPHJkZjpsaT44PC9yZGY6bGk+IDwvcmRmOlNlcT4gPC90aWZmOkJpdHNQZXJTYW1wbGU+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+JQsx8QAAFQZJREFUeJzt3Ut2G8GRBdCijxbau+u99SbYA4kWBRJEfbIy43PvxPaIhapAvIcEab393//87waU8D7p57xN+jnAjX6tvgDgklmh/+xnKgOQlAIAOawI+j1eXZeCAEEpABBP1LA/w2kBBKUAQAyVQv+Zx9eoEMBCCgCs0SHwX/m4B4oALKAAwFyC/ytfE8ACCgDcT+jvpwzAJAoA3EfwX+MrAriRAgBjCf3xnArADRQAGEPwz+FUAAZRAOAawb+GIgAXKQBwjuCPQRGAk/6z+gIgIeEfz/vmucAhCgDsJ2Ti83xgJ18BwGtCJRdfC8AOTgDgZ8I/L88OfuAEAL4nPGpwGgBPOAGAr4R/PZ4pPHACAH8JidqcBsAnTgDgN+Hfh2cNmwIA2yYQOvInnbSnANCZEMDzpy0FgK4sfj6YBVpSAOjIwueRmaAdBYBuLHqe8ZUQrSgAdGG5s5c5oQUFgA4sdI4yM5SnAFCdRc5ZZofSFAAqs8C5ygxRlgJAVRY3o5glSlIAqMjCZjQzRTkKANVY1NzFbFGKAkAlFjR3M2OUoQBQhcXMLGaNEhQAKrCQmc3MkZ4CQHYWMauYPVJTAACgIQWAzHwCYzUzSFoKAFlZvERhFklJASAjC5dozCTpKABkY9ESldkkFQUAABpSAMjEJyyiM6OkoQCQhcVKFmaVFH6tvgDCibC83h7+d4RrgqsizPHje4vGFAC2LcZi+iza9cBRUWf48boUgsYUgH6iLiZgvu/2gVLQhAJQn8AHjnBK0IQCUI/AB0b6vFOUgUIUgDoEP3C3jz2jCBSgAOQm9IEVnAoUoADkI/SBSJSBpBSAPAQ/EJ2vCBJRAOIT/EA2ikACCkBcgh/IThEITAGIR/AD1SgCASkAcQh+oDpFIBAFYD3BD3SjCATgnwNeS/gDndmBCzkBWMPQA/zmNGARJwDzCX+Ar943+3EqBWAeww3wmj05iQIwh4EG2M8HpgkUgHsZYoDz7M8bKQD3MbgA19mlN/FXAOMZVoCx/KXADZwAjCX8Ae5jxw6kAIxjMAHuZ9cOogCMYSAB5rFzB1AArjOIAPPZvRcpANcYQIB17OALFIDzDB7AenbxSQrAOQYOIA47+QQF4DiDBhCP3XyQAnCMAQOIy44+QAHYz2ABxGdX76QA7GOgAPKws3dQAF4zSAD52N0vKAA/M0AAednhP1AAnjM4APnZ5U8oAN8zMAB12OnfUAC+MigA9djtDxSAfxkQgLrs+E8UgL8MBgBtKAAAdOLD3h8KwG8GAqAPO39TALbNIAB01H73dy8A7QcAgJ66FwAA+mr9IbBzAWj94AHYtq1xFnQuAADQVtcC0LbxAfBFy0zoWABaPmgAftQuGzoWAABor1sBaNfwANitVUZ0KgCtHiwAp7TJik4FAAD4o0sBaNPoALisRWZ0KQAAwCcdCkCLJgfAUOWzo0MBAAAeVC8A5RscALcpnSHVCwAA8I3KBaB0cwNgirJZUrkAAABPVC0AZRsbANOVzJSqBQAA+EHFAlCyqQHASBULAACMVu7DpQIAAA1VKwDlGhoAYZTKmGoFAADYoVIBKNXMAOBOlQoAANytzIdNBQAAGqpSAMo0MgDCK5E5VQoAAHCAAgAADSkAANBQhQJQ4rsYAFJJnz0VCgAAcJACAAANZS8A6Y9gAEgrdQZlLwAAwAkKAAA0pAAAQEOZC0Dq714AYKXMBQAAVkv7YVQBAICGFAAAaEgBAICGshaAtN+5AEAEWQsAAHCBAgAA16Q8lVYAAKAhBQAAGlIAAKAhBQAAGlIAAKAhBQAAGlIAAKAhBQAAGlIAAKAhBQAAGlIAAKAhBQAAGlIAAKAhBQAAGlIAAKAhBQAAGlIAAKAhBQAAGlIAAKAhBQAAGlIAAKAhBQAAGlIAAKAhBQAAGlIAAKAhBQAAGlIAAKAhBQAAGlIAAKAhBQAAGlIAAOCat9UXcEbWApDyZgNAFFkLAABwgQIAAA1lLQDvqy8AADLLWACEPwCRvG8JsylbAUh3gwFoI1VG/Vp9ATuluqkAtPWRV+H/Wi3DCYDwByCb8NkVvQCEv4EA8EToDItcAELfOADYIWyWRfwdgLA3CwBOCPl7AdFOAIQ/UFWo5c8SoTIuUgEIdWMABnp7+E/6CpN1UQpAmBsCMNhj6CsBhMi8CAUgxI0AuMGzsFcCWJ59qwvA8hsAcJNXIa8EsDQDVxYA4Q9UtTfclQCWZeGqAiD8gaqOhroSwJJMXFEAhD9Q1dkwVwKYno2zC4DwB6q6GuJKAFMzcmYBEP5AVaPCWwlgWlbOKgDCH6hqdGgrAUyx+s8AATK7K6yVgN6mfGieUQB8+gcqujuklYDebs/OuwuA8AcqmhXOSkBvt2bonQVA+AMVzQ5lJaC327L0rgIg/IGKVoWxEsBwfgkQYJ/VIbz657POLR+q7ygAPv0D1UQJ3yjXwXzDs3V0ARD+QDXRQjfa9TDP0IwdWQCEP1BN1LCNel0k4ncAAL4XPWSjXx/3GPZhe1QB8OkfqCRLuGa5TsYakrkjCoDwByrJFqrZrpcgfAUA8FfWMM163Zx3+cP31QLg0z9QRfYQzX79HHcpg50AANQJzyqvgwmuFACf/oEKqoVmtdfDz05nsRMAoLOqYVn1dTHQ2QLg0z+QXfWQrP76+OtUJp8pAMIfyK5LOHZ5nZzIZl8BAN0IRdiOFwCf/oHMuoW/nd3LoeftBADoQvjDJ0cKgGECMnrbhD997H72TgCAyroF/7YJf3baWwAMFJCN8KerXXPgBACoSPjDCwoAUI3whx32FACDBWQh/OG3l3PhBACoQvjDAa8KgOECMhD+8NWPM+IEAMhO+MMJCgCQmfCHk34qAIYMiEz4w2tPZ8YJAJCR8IeLnhUAgwZEJfxhACcAQCbCH477doYUACAL4Q8DKQBABsIfBvuuABg6IBLhD9d9mSknAEBkwh9uogAAUQl/uNFjATB8QATCH8b7Z8acAADRCH+YQAEAIhH+MIkCAEQh/GEiBQCIQPjDZJ8LgGEEVhD+MM9/Z88JALCS8IdFFABgFeEPCykAwArCHxZTAIDZhD+s9b5tCgAwl/CHID4KgAEF7ib8IRAnAETTMSQ66PhchT+hKQBE8vbwn9TQ8XkKf8JTAIjiMSQ6hkZFHZ+j8CeDdwWACJ6FRMfwqKTj8xP+pKEAsNqrkOgYIhV0fG7Cn1QUAFbaGxIdwySzjs9L+JOOAsAqR0OiY6hk1PE5CX9S+s9meJnvbEh0DJdMOj4f+5O0nAAw29WQ6BgyGXR8LsKf1BQAZhoVEh3DJrKOz0P4k54CwCyjQ6Jj6ETU8TkIf0pQAJjhrpDoGD6RdLz/wp8yFADudndIdAyhCDred+FPKQoAd5oVEh3DaKWO91v4U44CwF1mh0THUFqh430W/pSkAHCHVSHRMZxm6nh/hT9lKQCMtjokVv/8qjreV+FPaQoAI0UJibctzrVU0PFeCn/KUwAYJWJIRLymbDreQ+FPCwoAI0QOicjXFl23e/e+CX8aUQC4KkNIZLjGaLrdM8FPOwoAV2QKiUzXulq3eyX8aUkB4KyMIZHxmmfrdo+EP20pAJyROSQyX/vdut0b4U9rCgBHVQiJCq9htG73RPjT3n+2fm98zqs0K5Vey1Xd7oXwh80JAPtVDImKr+mobvdA+MMfCgB7VA6Jyq/tlW6vXfjDJwoAr3QIiQ6v8VG31yz84V9vCgA/6RQSXmtdwh++oQDAXx2CscNr/Ez4wxMKAD/puDwrB2Tl1/adjvMLuykAvNJxiVYLyo7/PHLHuYVDFAD26LhMqwRmlddxRMd5hSPetu1vAei4JDim41LN/r7Ifv1ndJxTOMUJAEd0XK5ZQzTrdV/RcT7hNAWAozou2Wxhmu16R+g4l3CJAsAZHZdtllDNcp0jdZxHOOu/O0IB4KyOSzd6uEa/vjt0nEMY4nMB6Lg8uKbj8o36Pol6XXfqOH8wjBMAruq4hKOFbbTrmaHj3MFQCgAjdFzGUUI3ynXM1HHeYLjHAtBxmTBGx6W8+v9hr+P7teOcwSj/7AwnAIzUdTmvCGLhD1yiADBa1yU9M5CFP3DZdwWg43JhrK7LesZ7p+P7s+s8wUhfdocTAO7SdWnfGdDCHxhGAeBOXZf3HUEt/IGhFADu1nWJjwxs4Q9c8e0OeVYAOi4c7tN1mY94H3V8L3adF5jKCQCzdF3qVwJc+AO3+akAdFw+3Kvrcj/zXur4/us6H3Cnp7vECQCzdV3yRwJd+AO3UwBYoeuy3xPswh+Y4lUB6LiMmKPr0v/pPdXx/dZ1DmCGH3eKEwBW6rr8v3tTCn9gqj0FoONiYp6uIfD25L930fW5wywv94oTACLoGgar/znhVbo+bwhFASAKodCD5wxB7C0AHT+lMJ9wqM3zhTl2ZbYTAKJ53wRFRZ4pBHOkADgFYCaBUYdnCfPszmonAEQmOPLzDCGoowXAKQCzCZC8PDuY61BGOwEgA0GSj2cGwZ0pAE4BWEGg5OFZwXyHs/nsCYASwAqCJT7PCOY7lcm+AiAbAROXZwOJXCkATgFYRdDE45nAGqez2AkAWQmcODwLSOhqAXAKwEqCZz3PANa5lMEjTgCUAFYSQOu497DO5ez1FQAVCKL53HNIblQBcArAagJpHvca1hqSuSNPAJQAVhNM93OPYa1hWesrAKoRUPdxb6GQ0QXAKQARCKrx3FNYb2jG3nECoAQQgcAax72E9YZnq68AqExwXecewnq3fLC+qwA4BSAKAXaeeweF3XkCoAQQhSA7zj2DGG7L0ru/AlACiEKg7edeQQy3ZuiM3wFQAohCsL3mHkEMt2fnrF8CVAKIQsA9595ADFMy018B0JGg+8o9gWZmFgCnAEQi8P5yLyCOaVk5+wRACSASweceQCRTM3LFVwBKAJF0DsDOrx2imZ6Nq34HQAkgko5B2PE1Q1RLMnHlLwEqAUTSJRDftz6vFTJYloWr/wpACSCS6sFY/fVBNkszcHUB2DYlgFiqfkKu+Jogs+XZF6EAbFuAGwEPKhWBKq8DqgiReVEKwLYFuSHwIHN4VioxUEWYrItUALYt0I2BT7IFabbrhS5CZVy0ArBtv29QqJsEf2QI1QzXCN2EzLVfqy/gB2+bZUY8n2cyyhva+wTiirInvoh4AvBZ2BsHW4yj9tU/H3gudIZFPgH44CSA6GaeCngvQHyhg/9DhgKwbX9vpuVHdHeUAXMPeaQI/23LUwA+OA0gE7MKvaQJ/22L/zsA30l1gwFoIV02ZSwA25bwRgNQVspMyloAAIALFAAAaChrAfDLVQBwQdYCAABRpPxQqgAAQEMKAAA0pAAAQEMKAAA0pAAAQEMKAAA0pAAAQEMKAAA0pAAAQEMKAAA0pAAAQEMKAAA0pAAAQEMKAAA0pAAAQEMKAAA0pAAAQEMKAAA0pAAAQEMKAAA0pAAAQEMKAAA0pAAAQEMKAAA0pAAAQEMKAAA0pAAAQEMKAAA0pAAAQEMKAAA0pAAAQEMKAAA0lLUAvK2+AAD4I2UmZS0AAMAFCgAANKQAAEBDCgAAnJfy+/9ty10A0t50AFgtcwEAAE5SAACgIQUAABrKXgD8HgAAq6TOoOwFAAA4QQEAgIYUAAA4LvXx/7bVKADpHwIAzFahAAAABykAAHBMiZPnKgWgxMMAgFmqFAAA4AAFAAD2K3PiXKkAlHkoAHC3SgUAANipWgFwCgDAXUplTLUCAADsoAAAwGulPv1vW80CUO4hAcBoFQsAAPBC1QLgFACAUUpmStUCAAD8oHIBKNnYAJiqbJZULgAAwBPVC0DZ5gbA7UpnSPUCAAB8o0MBKN3gALhF+ezoUAAAgAddCkD5JgfAMC0yo0sBAAA+6VQAWjQ6AC5pkxWdCsC2NXqwABzWKiO6FQAAYOtZAFo1PAB2aZcNHQvAtjV80AA81TITuhYAAGitcwFo2fgA+EfbLOhcAADorW34b5sC0PrhA9BX9wKwbUoAQEftd78C8Fv7QQBoxM7fFAAAehH+fygAfxkKANpQAP6lBADUZcd/ogB8ZUAA6rHbHygA3zMoAHXY6d9QAJ4zMAD52eVPKAA/MzgAednhP1AAXjNAAPnY3S8oAPsYJIA87OwdFID9DBRAfHb1TgrAMQYLIC47+gAF4DgDBhCP3XyQAnCOQQOIw04+QQE4z8ABrGcXn6QAXGPwANaxgy9QAK4zgADz2b0XKQBjGESAeezcARSAcQwkwP3s2kEUgLEMJsB97NiBfq2+gII+BvR96VUA1CH4b+AE4D4GFuA6u/QmCsC93jbDC3CW/XkjBWAOQwywnw9PEygA8xhogNfsyUkUgPkMN8BXPiRN5q8A1vCXAgC/Cf1FnACsZfCBzuzAhZwArOc0AOhG8AegAMShCADVCf5AFIB4FAGgGsEfkAIQlyIAZCf4A1MA4lMEgGwEfwIKQB6KABCZ0E9GAcjn85tMGQBWE/xJKQC5ORUAVhH8ySkANTgVAGYQ+oUoAPUoA8AoAr8wBaC27968SgHwE6HfhALQjxMC4IOwb0wB6C3qCcHjdUW4Jjgiy3uLxhQAHkVcEG9bjOUJV0R8b9GYfw6YLCxPsjCrpKAAkInFSnRmlDQUAABoSAEgG5+wiMpskooCQEYWLdGYSdJRAMjKwiUKs0hKCgCZWbysZgZJSwEAgIYUALLzCYxVzB6pKQBUYBEzm5kjPQWAKixkZjFrlKAAUInFzN3MGGUoAFRjQXMXs0UpCgAVWdSMZqYoRwGgKgubUcwSJSkAVGZxc5UZoiwFgOoscM4yO5SmANCBRc5RZobyFAC6eNssdfYxJ7SgANCN5c4zSiKtKAB0ZMnzyEzQjgJAVxY+H8wCLSkAdObIF8+fthQAEAIdKX+0pwDAb8KgD88atm37tfoCIJCPYHhfehXcRfDDJ04A4CtBUY9nCg+cAMD3nAbUIPjhCScA8DMBkpdnBz9wAgCvOQ3IRfDDDk4AYD9/Ohaf5wM7KQBwnJCJRzmDg3wFAOf4WiAGoQ8nKQBwjSKwhuCHixQAGEMRmEPwwyAKAIz1OaCUgTGEPtxAAYD7OBW4RvDDjRQAuJ9Tgf2EPkyiAMBcysBXQh8WUABgnc5lQOjDYgoAxNChDAh9CEQBgHi+C8qspUDoQ1AKAOTwLEhXFwMBD0kpAJDbiq8OhD4U8P99FzW3UM7m9wAAAABJRU5ErkJggg=="},5549:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALQAAAAzCAYAAAA+eCJSAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAACxMAAAsTAQCanBgAAAlnaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/Pg0KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDIgNzkuMTYwOTI0LCAyMDE3LzA3LzEzLTAxOjA2OjM5ICAgICAgICAiPg0KCTxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+DQoJCTxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczpzdEV2dD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlRXZlbnQjIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1wOkNyZWF0b3JUb29sPSJNaWNyb3NvZnQgV2luZG93cyBQaG90byBWaWV3ZXIgMTAuMC4yNjEwMC4xODgyIiB4bXA6Q3JlYXRlRGF0ZT0iMjAxOC0wNi0wOVQxMTo1Njo1NiswMzowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjQtMDYtMDhUMDk6MTg6MDkrMDI6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjQtMDYtMDhUMDk6MTg6MDkrMDI6MDAiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6YmQ1MzY0ZjItYzE3YS1mOTQxLTg5MTMtYjVlZjQwMGM0MTRkIiB4bXBNTTpEb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6ZmU3MmE4MzYtMmJhNi02YTRiLWJkMTYtOTNjYWNhOTdkMGYzIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6MEU1ODA0OTc2QkMzMTFFOEExNTc4QTkwQ0VDMEZFRTkiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiBwaG90b3Nob3A6SUNDUHJvZmlsZT0ic1JHQiBJRUM2MTk2Ni0yLjEiPg0KCQkJPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MEU1ODA0OTQ2QkMzMTFFOEExNTc4QTkwQ0VDMEZFRTkiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MEU1ODA0OTU2QkMzMTFFOEExNTc4QTkwQ0VDMEZFRTkiLz4NCgkJCTx4bXBNTTpIaXN0b3J5Pg0KCQkJCTxyZGY6U2VxPg0KCQkJCQk8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6OTk4ZWI1YjctYjM0NC00ZDRhLWE5MmYtNjI1Zjg5ZDg2MjU5IiBzdEV2dDp3aGVuPSIyMDI0LTAyLTA2VDA4OjM1OjMyKzAyOjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4NCgkJCQkJPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmJkNTM2NGYyLWMxN2EtZjk0MS04OTEzLWI1ZWY0MDBjNDE0ZCIgc3RFdnQ6d2hlbj0iMjAyNC0wNi0wOFQwOToxODowOSswMjowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKFdpbmRvd3MpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+DQoJCQkJPC9yZGY6U2VxPg0KCQkJPC94bXBNTTpIaXN0b3J5Pg0KCQkJPHBob3Rvc2hvcDpUZXh0TGF5ZXJzPg0KCQkJCTxyZGY6QmFnPg0KCQkJCQk8cmRmOmxpIHBob3Rvc2hvcDpMYXllck5hbWU9IksgICBaIiBwaG90b3Nob3A6TGF5ZXJUZXh0PSJLICAgWiIvPg0KCQkJCQk8cmRmOmxpIHBob3Rvc2hvcDpMYXllck5hbWU9IkkiIHBob3Rvc2hvcDpMYXllclRleHQ9IkkiLz4NCgkJCQk8L3JkZjpCYWc+DQoJCQk8L3Bob3Rvc2hvcDpUZXh0TGF5ZXJzPg0KCQkJPHBob3Rvc2hvcDpEb2N1bWVudEFuY2VzdG9ycz4NCgkJCQk8cmRmOkJhZz4NCgkJCQkJPHJkZjpsaT5hZG9iZTpkb2NpZDpwaG90b3Nob3A6OGI1MWJjOTMtZGM3NC02MzQ5LTkxODMtOWIxMjk3MDRhNDI1PC9yZGY6bGk+DQoJCQkJPC9yZGY6QmFnPg0KCQkJPC9waG90b3Nob3A6RG9jdW1lbnRBbmNlc3RvcnM+DQoJCQk8eG1wOmNyZWF0b3J0b29sPk1pY3Jvc29mdCBXaW5kb3dzIFBob3RvIFZpZXdlciAxMC4wLjI2MTAwLjE4ODI8L3htcDpjcmVhdG9ydG9vbD48L3JkZjpEZXNjcmlwdGlvbj4NCgkJPHJkZjpEZXNjcmlwdGlvbiB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyI+PHRpZmY6T3JpZW50YXRpb24+MTwvdGlmZjpPcmllbnRhdGlvbj48L3JkZjpEZXNjcmlwdGlvbj48L3JkZjpSREY+DQo8L3g6eG1wbWV0YT4NCjw/eHBhY2tldCBlbmQ9J3cnPz53cdrfAAAFd0lEQVR4Xu3dW2gcVRzH8e8YC0rSWi2plYCiFWykFmmpLd5AKlRRFB+E1FpMjPrg5UFBFEUQEbQigg+CYGSriObB+7VYiy2aoqgo3kAKRX2oNBEETWg1MePDnq3//e+ZnTkzq7PZ/X9g6Jz/nGbZ8svh7Ow50yiOY4zpFMfogjELmQXadJSoVVOOKOrTJe1Y4GJgE7AKWAOcBMRABPwIfOuO99yfieJ4WpdaYmpkvA+4FTgd2NVfGXpV9zHtqy7QUdRXl+44no5kW1P9k/r2AEPAncA6fTHBEWA38AgwoS9WzQC9hX8b5XucGhlf5F5vvejyQH9l6GHRNm0s95RDhz/BamAP8EJAmAGOA64APgTGgGW6w3/kfBVmgLtU27Sx3IH+10xUPRpsAvYCF+oLbnqxG3gOqAAvAp8Cv6p+i4BR4B1ghbomXjvrkWqRLgB/64JpX7kCnWF0vhR4w82RpZ3AZuAc12cYuBHYCmx09a2e+fMG93f7VT2Ab3rSEPI9wBeq9oRqmzYWPIeWfeJ4OoqiWpfeWrkf+Aw4rVYAZoHbgGdErZklwOPAzar+MnBt9XRGXUqjA10Ns/5QPDUyvgQYAU4FPuqvDL1e18G0taBA6zBXaw2BrriRt+Yv4DrgFVHL6il3x0HaVp2ThwRah5nEQJuFLdeUQwddWAfcoGqP5QwzwB1ubi3dL3978mmYapgOkTnQevROMKpu3/0AbBftUPPA3e5edc0q94EzI9/obDpVpkD7phoeK4CrVO1ZoOg3IB+7D2vSNtUOkD46R1FfLA993bSv1EBnDDPAIHCKaM8Cu0Q7rxh4V9XOVe0ENjp3m6aBDhyd1quftx/4XrSL2KfuBw+I8wS+MKePzmZhaxroQIOqPenucLTCQeCwaB8vzo05KijQKSP2nGr/otpFTHm+RWzCRuduFRRo0kMtzetCAfMt/nmmQzUNdMqHQK1HtU9Q7SIWuyMDG527WdNAJ0kYpfWUQN7xKOpkYKlo24Ih45Ua6IBR+hPVXunWQ7TCWrUS7pA4F2x07napgU7iGaW/A34X7aXARaJdxCWqfUC1jYGsgU4apVWoD3jWXVyv2nkMAFermmdblI3OJmOgaRJqYdbtLpE2u50nRdyj5s9/+ANtTECgk9WNjG8BX4t2BDxZYGH+lZ7lo2PAT/UlG51NVVCgM4zShz2r41YCb6oF/2ki4DK3NUveDvzZLfw3xiso0MnqRsj3PUtGN7pVc3o1XpLz3D5Cee95zi1PPShq+rUdG527VXCgm4zSMlj3efbiDQSs7fhG3QY84h6F8IGoGdMgaAuWpPvWyqp9L/CQu4c8UdsBPjk8BnAB8LaYUux3jxH4c/mOm3Brnp93O8RvaVyKmvRcjrDR2bcFS7+3Zv8Opr0Ej9ApdDoedbu7J9zGWanH3b2ofa29Vq3X+Bx42v0SBKyr7o3DDtNJco/QePpXpY+Qk8Mv4R4NNiVuye0ELgdYvmNLXf9kxQPpe4/6ffn6mPZUN0LH8XQkD3nNR/evHjFphzMHvCZ+3NGNtLp/8qFfO/wQr286QKunHKFOFOdfivNSWegXrjIDvdh9cVIzKs6NyaXMQA+6eXRN1nvUxiQqM9BnqvaAZ1+iMUHKDPRZutDC5aamS5UZ6DW6EPgMaWMalBno1brgedi4MUHKCvQy4AxddKN2KzfXmi5TVqAHE167J2HkNiYTX6j+D2frguCbWxuTSTsG2kZok1tZgd6gC4Le4W1MZmUFutnjcEO2ahlTp6xAP6gLwu26YExWZQV6O/CVLrr/17Cii8ZkVVagcbu6tWt0wZgQZQb6kPtPNmu2AL+JtjHBygw07rkb+9xu7nF90ZhQdXsKjVno/gEyXO89kMqOGgAAAABJRU5ErkJggg=="},6826:function(e,t,a){e.exports=a.p+"img/Onboarding-Screen.59d9e705.png"},9793:function(e,t,a){e.exports=a.p+"img/payment-post.65675734.jpg"}},t={};function a(s){var o=t[s];if(void 0!==o)return o.exports;var r=t[s]={exports:{}};return e[s].call(r.exports,r,r.exports,a),r.exports}a.m=e,function(){var e=[];a.O=function(t,s,o,r){if(!s){var i=1/0;for(c=0;c<e.length;c++){s=e[c][0],o=e[c][1],r=e[c][2];for(var l=!0,n=0;n<s.length;n++)(!1&r||i>=r)&&Object.keys(a.O).every((function(e){return a.O[e](s[n])}))?s.splice(n--,1):(l=!1,r<i&&(i=r));if(l){e.splice(c--,1);var d=o();void 0!==d&&(t=d)}}return t}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[s,o,r]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.p="/"}(),function(){var e={524:0};a.O.j=function(t){return 0===e[t]};var t=function(t,s){var o,r,i=s[0],l=s[1],n=s[2],d=0;if(i.some((function(t){return 0!==e[t]}))){for(o in l)a.o(l,o)&&(a.m[o]=l[o]);if(n)var c=n(a)}for(t&&t(s);d<i.length;d++)r=i[d],a.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return a.O(c)},s=self["webpackChunkkozi"]=self["webpackChunkkozi"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=a.O(void 0,[504],(function(){return a(4042)}));s=a.O(s)})();
//# sourceMappingURL=app.4f8fa726.js.map