{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/web.dom-exception.stack.js\";\nimport IndexComponent from \"./IndexComponent.vue\";\nimport { globalVariable } from \"@/global\";\nexport default {\n  name: \"MainWrapper\",\n  components: {\n    IndexComponent\n  },\n  data() {\n    return {\n      jobs: [],\n      userEmail: \"\",\n      userId: \"\",\n      showModal: false,\n      selectedJobId: null,\n      searchQuery: \"\",\n      currentPage: 1,\n      itemsPerPage: 20\n    };\n  },\n  computed: {\n    filteredJobs() {\n      const query = this.searchQuery.toLowerCase();\n      return this.jobs.filter(job => {\n        const fullName = `${job.first_name} ${job.last_name}`.toLowerCase();\n        const telephone = job.telephone?.toLowerCase() || \"\";\n        const title = job.job_title?.toLowerCase() || \"\";\n        return fullName.includes(query) || telephone.includes(query) || title.includes(query);\n      });\n    },\n    totalPages() {\n      return Math.ceil(this.filteredJobs.length / this.itemsPerPage);\n    },\n    paginatedJobs() {\n      const start = (this.currentPage - 1) * this.itemsPerPage;\n      return this.filteredJobs.slice(start, start + this.itemsPerPage);\n    }\n  },\n  mounted() {\n    this.userEmail = localStorage.getItem(\"userEmail\") || \"\";\n    if (this.userEmail) {\n      this.getUserIdFromEmail();\n    }\n  },\n  methods: {\n    formatDateTime(datetime) {\n      if (!datetime) return \"\";\n      const date = new Date(datetime);\n      const year = date.getFullYear();\n      const month = String(date.getMonth() + 1).padStart(2, \"0\");\n      const day = String(date.getDate()).padStart(2, \"0\");\n      let hours = date.getHours();\n      const minutes = String(date.getMinutes()).padStart(2, \"0\");\n      const seconds = String(date.getSeconds()).padStart(2, \"0\");\n      const ampm = hours >= 12 ? \"PM\" : \"AM\";\n      hours = hours % 12;\n      hours = hours ? hours : 12;\n      return `${year}-${month}-${day} ${String(hours).padStart(2, \"0\")}:${minutes}:${seconds} ${ampm}`;\n    },\n    changePage(page) {\n      if (page >= 1 && page <= this.totalPages) {\n        this.currentPage = page;\n      }\n    },\n    highlightMatch(text) {\n      if (!this.searchQuery) return text;\n      const regex = new RegExp(`(${this.searchQuery})`, \"gi\");\n      return text.replace(regex, `<span class=\"bg-warning text-dark\">$1</span>`);\n    },\n    openModal(job_id) {\n      this.selectedJobId = job_id;\n      this.showModal = true;\n    },\n    closeModal() {\n      this.showModal = false;\n      this.selectedJobId = null;\n    },\n    async fetchJobsByUser() {\n      try {\n        const token = localStorage.getItem(\"adminToken\");\n        if (!this.userId) return;\n        const res = await fetch(`${globalVariable}/admin/Applicants`, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        if (!res.ok) throw new Error(\"Failed to fetch jobs\");\n        const data = await res.json();\n        this.jobs = data;\n      } catch (err) {\n        console.error(\"Error fetching jobs:\", err);\n      }\n    },\n    async getUserIdFromEmail() {\n      const token = localStorage.getItem(\"adminToken\");\n      if (!token) return;\n      try {\n        const payload = JSON.parse(atob(token.split(\".\")[1]));\n        this.userEmail = this.userEmail || payload.email;\n        const res = await fetch(`${globalVariable}/get_user_id_by_email/${this.userEmail}`, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        const data = await res.json();\n        if (res.ok) {\n          this.userId = data.users_id;\n          this.fetchJobsByUser();\n        } else {\n          console.error(\"Error: \", data.message);\n        }\n      } catch (err) {\n        console.error(\"Error getting user ID:\", err);\n      }\n    }\n  }\n};","map":{"version":3,"names":["IndexComponent","globalVariable","name","components","data","jobs","userEmail","userId","showModal","selectedJobId","searchQuery","currentPage","itemsPerPage","computed","filteredJobs","query","toLowerCase","filter","job","fullName","first_name","last_name","telephone","title","job_title","includes","totalPages","Math","ceil","length","paginatedJobs","start","slice","mounted","localStorage","getItem","getUserIdFromEmail","methods","formatDateTime","datetime","date","Date","year","getFullYear","month","String","getMonth","padStart","day","getDate","hours","getHours","minutes","getMinutes","seconds","getSeconds","ampm","changePage","page","highlightMatch","text","regex","RegExp","replace","openModal","job_id","closeModal","fetchJobsByUser","token","res","fetch","headers","Authorization","ok","Error","json","err","console","error","payload","JSON","parse","atob","split","email","users_id","message"],"sources":["/Users/gentil/Desktop/Kozi-ai-agent/src/views/admin/JobApplicant.vue"],"sourcesContent":["<template>\n  <IndexComponent />\n  <div class=\"page-wrapper\" id=\"main-wrapper\" data-layout=\"vertical\" data-navbarbg=\"skin6\"\n    data-sidebartype=\"full\" data-sidebar-description=\"fixed\" data-header-description=\"fixed\">\n    <div class=\"body-wrapper\">\n      <!-- Modal -->\n      <div v-if=\"showModal\" class=\"modal-overlay\">\n        <div class=\"modal-content\">\n          <h5>Are you sure you want to delete this job?</h5>\n          <div>\n            <button class=\"btn btn-danger mt-3\" @click=\"confirmDeleteJob\">Yes, Delete</button>\n            <button class=\"btn btn-cancel mt-3\" style=\"background-color: teal; color: white;\" @click=\"closeModal\">Cancel</button>\n          </div>\n        </div>\n      </div>\n\n      <h5 class=\"card-title fw-semibold mb-4\" style=\"color: #E960A6;\">\n        <i class=\"ti ti-user-plus\"></i> Job Applicant\n      </h5>\n\n      <!-- Search Input -->\n       <div class=\"d-flex justify-content-center mb-3\">\n        <input v-model=\"searchQuery\" class=\"form-control\" type=\"text\" style=\"max-width: 400px\" placeholder=\"Search by name, telephone or job title\" />\n      </div>\n\n      <!-- Table -->\n       <div v-if=\"filteredJobs.length === 0\" class=\"d-flex justify-content-center my-4\">\n        <div class=\"alert alert-danger text-center\" style=\"width: 40rem;\">\n          No Applicant.\n        </div>\n      </div>\n\n\n\n      <div class=\"table-responsive\" v-else>\n        <table class=\"table table-bordered\">\n          <thead class=\"table-light\">\n            <tr>\n              <th>Id</th>\n              <th>Names</th>\n              <th>Telephone</th>\n              <th>Job Title</th>\n              <th>Applied On</th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr v-for=\"(job, index) in paginatedJobs\" :key=\"job.job_id\">\n              <td>{{ (currentPage - 1) * itemsPerPage + index + 1 }}</td>\n              <td v-html=\"highlightMatch(job.first_name + ' ' + job.last_name)\"></td>\n              <td v-html=\"highlightMatch(job.telephone)\"></td>\n              <td v-html=\"highlightMatch(job.job_title)\"></td>\n              <td>{{ formatDateTime(job.created_at) }}</td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n\n      <!-- Pagination -->\n      <!-- Pagination -->\n<nav class=\"mt-3\" v-if=\"filteredJobs.length > 0\">\n  <ul class=\"pagination justify-content-center\">\n    <li class=\"page-item\" :class=\"{ disabled: currentPage === 1 }\">\n      <button class=\"page-link\" @click=\"changePage(currentPage - 1)\">Previous</button>\n    </li>\n    <li v-for=\"page in totalPages\" :key=\"page\" class=\"page-item\" :class=\"{ active: currentPage === page }\">\n      <button class=\"page-link\" @click=\"changePage(page)\">{{ page }}</button>\n    </li>\n    <li class=\"page-item\" :class=\"{ disabled: currentPage === totalPages }\">\n      <button class=\"page-link\" @click=\"changePage(currentPage + 1)\">Next</button>\n    </li>\n  </ul>\n</nav>\n\n    </div>\n  </div>\n</template>\n\n<script>\nimport IndexComponent from \"./IndexComponent.vue\";\nimport { globalVariable } from \"@/global\";\n\nexport default {\n  name: \"MainWrapper\",\n  components: { IndexComponent },\n  data() {\n    return {\n      jobs: [],\n      userEmail: \"\",\n      userId: \"\",\n      showModal: false,\n      selectedJobId: null,\n      searchQuery: \"\",\n      currentPage: 1,\n      itemsPerPage: 20,\n    };\n  },\n  computed: {\n    filteredJobs() {\n      const query = this.searchQuery.toLowerCase();\n      return this.jobs.filter((job) => {\n        const fullName = `${job.first_name} ${job.last_name}`.toLowerCase();\n        const telephone = job.telephone?.toLowerCase() || \"\";\n        const title = job.job_title?.toLowerCase() || \"\";\n        return (\n          fullName.includes(query) ||\n          telephone.includes(query) ||\n          title.includes(query)\n        );\n      });\n    },\n    totalPages() {\n      return Math.ceil(this.filteredJobs.length / this.itemsPerPage);\n    },\n    paginatedJobs() {\n      const start = (this.currentPage - 1) * this.itemsPerPage;\n      return this.filteredJobs.slice(start, start + this.itemsPerPage);\n    },\n  },\n  mounted() {\n    this.userEmail = localStorage.getItem(\"userEmail\") || \"\";\n    if (this.userEmail) {\n      this.getUserIdFromEmail();\n    }\n  },\n  methods: {\n    formatDateTime(datetime) {\n      if (!datetime) return \"\";\n      const date = new Date(datetime);\n      const year = date.getFullYear();\n      const month = String(date.getMonth() + 1).padStart(2, \"0\");\n      const day = String(date.getDate()).padStart(2, \"0\");\n      let hours = date.getHours();\n      const minutes = String(date.getMinutes()).padStart(2, \"0\");\n      const seconds = String(date.getSeconds()).padStart(2, \"0\");\n      const ampm = hours >= 12 ? \"PM\" : \"AM\";\n      hours = hours % 12;\n      hours = hours ? hours : 12;\n      return `${year}-${month}-${day} ${String(hours).padStart(2, \"0\")}:${minutes}:${seconds} ${ampm}`;\n    },\n    changePage(page) {\n      if (page >= 1 && page <= this.totalPages) {\n        this.currentPage = page;\n      }\n    },\n    highlightMatch(text) {\n      if (!this.searchQuery) return text;\n      const regex = new RegExp(`(${this.searchQuery})`, \"gi\");\n      return text.replace(regex, `<span class=\"bg-warning text-dark\">$1</span>`);\n    },\n    openModal(job_id) {\n      this.selectedJobId = job_id;\n      this.showModal = true;\n    },\n    closeModal() {\n      this.showModal = false;\n      this.selectedJobId = null;\n    },\n    async fetchJobsByUser() {\n      try {\n        const token = localStorage.getItem(\"adminToken\");\n        if (!this.userId) return;\n        const res = await fetch(`${globalVariable}/admin/Applicants`, {\n          headers: { Authorization: `Bearer ${token}` },\n        });\n        if (!res.ok) throw new Error(\"Failed to fetch jobs\");\n        const data = await res.json();\n        this.jobs = data;\n      } catch (err) {\n        console.error(\"Error fetching jobs:\", err);\n      }\n    },\n    async getUserIdFromEmail() {\n      const token = localStorage.getItem(\"adminToken\");\n      if (!token) return;\n      try {\n        const payload = JSON.parse(atob(token.split(\".\")[1]));\n        this.userEmail = this.userEmail || payload.email;\n        const res = await fetch(`${globalVariable}/get_user_id_by_email/${this.userEmail}`, {\n          headers: { Authorization: `Bearer ${token}` },\n        });\n        const data = await res.json();\n        if (res.ok) {\n          this.userId = data.users_id;\n          this.fetchJobsByUser();\n        } else {\n          console.error(\"Error: \", data.message);\n        }\n      } catch (err) {\n        console.error(\"Error getting user ID:\", err);\n      }\n    },\n  },\n};\n</script>\n\n\n\n\n\n\n\n<style scoped>\n\n.page-item.active .page-link {\n  background-color: #E960A6;\n  color: white;\n  border-color: #E960A6;\n}\n\n.page-link {\n  border-radius: 4px;\n  padding: 0.4rem 0.75rem;\n  cursor: pointer;\n  color:#336Cb6\n}\n      .modal-overlay {\n         position: fixed;\n          top: 0;\n          left: 0;\n          width: 100%;\n          height: 100%;\n          background: rgba(0, 0, 0, 0.5);\n          display: flex;\n          justify-content: center;\n          align-items: center;\n          z-index: 1000;\n        }\n        \n        /* Modal content styling */\n        .modal-content {\n          background-color: white;\n          padding: 20px;\n          border-radius: 8px;\n          text-align: center;\n          width: 300px;\n        }\n      \n        .container-fluid {\n          max-width: 800px;\n          margin: auto;\n          padding: 20px;\n          background-color: #ffffff;\n          border-radius: 8px;\n          box-shadow: 0 8px 30px rgba(0, 0, 0, 0.2);\n        }\n        \n        h5 {\n          color: #333;\n          margin-bottom: 20px;\n        }\n        .custom-select {\n          width: 100%;\n          padding: 15px;\n          height: 50px;\n          border: 1px solid #ccc;\n          border-radius: 5px;\n          box-sizing: border-box;\n          transition: border-color 0.3s, box-shadow 0.3s;\n          font-size: 16px;\n    \n        }\n        \n.highlight-teal {\n  background-color: #20c997;\n  color: white;\n  padding: 0 2px;\n  border-radius: 3px;\n}\n.form-control {\n          width: 100%;\n          padding: 15px;\n          height: 50px;\n          border: 1px solid #ccc;\n          border-radius: 5px;\n          box-sizing: border-box;\n          transition: border-color 0.3s, box-shadow 0.3s;\n          font-size: 16px;\n        }\n        \n        .form-control:focus {\n          border-color: #E960A6;\n          box-shadow: 0 0 5px rgba(0, 123, 255, 0.5);\n          outline: none;\n        }\n        \n        .form-label {\n          font-weight: bold;\n          margin-bottom: 5px;\n          display: block;\n        }\n        \n        .btn-primary {\n          background-color: #E960A6;\n          color: white;\n        \n        }\n        \n        .btn-primary:hover {\n          background-color: #E960A6;\n          color: teal;\n        }\n        \n        .form-group {\n          margin-bottom: 15px;\n        }\n        \n        </style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}