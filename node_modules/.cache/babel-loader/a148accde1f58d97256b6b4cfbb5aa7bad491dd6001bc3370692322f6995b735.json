{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, createCommentVNode as _createCommentVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, normalizeClass as _normalizeClass, renderList as _renderList, Fragment as _Fragment, vModelSelect as _vModelSelect, withDirectives as _withDirectives, vModelText as _vModelText, withModifiers as _withModifiers } from \"vue\";\nconst _hoisted_1 = {\n  class: \"page-wrapper\",\n  id: \"main-wrapper\",\n  \"data-layout\": \"vertical\",\n  \"data-navbarbg\": \"skin6\",\n  \"data-sidebartype\": \"full\",\n  \"data-sidebar-description\": \"fixed\",\n  \"data-header-description\": \"fixed\",\n  style: {\n    \"position\": \"absolute\",\n    \"top\": \"0\",\n    \"left\": \"0\",\n    \"right\": \"0\",\n    \"bottom\": \"0\",\n    \"z-index\": \"1\"\n  }\n};\nconst _hoisted_2 = {\n  class: \"body-wrapper\",\n  style: {\n    \"margin-top\": \"70px\",\n    \"margin-left\": \"270px\",\n    \"background\": \"white\",\n    \"min-height\": \"calc(100vh - 70px)\",\n    \"padding\": \"20px\",\n    \"overflow-y\": \"auto\",\n    \"max-height\": \"calc(100vh - 70px)\"\n  }\n};\nconst _hoisted_3 = {\n  key: 0,\n  class: \"card-body\"\n};\nconst _hoisted_4 = {\n  class: \"card-title fw-semibold mb-4\",\n  style: {\n    \"color\": \"#E960A6\"\n  }\n};\nconst _hoisted_5 = {\n  class: \"form-group row\"\n};\nconst _hoisted_6 = {\n  class: \"col-md-12\"\n};\nconst _hoisted_7 = {\n  class: \"position-relative\"\n};\nconst _hoisted_8 = [\"value\"];\nconst _hoisted_9 = {\n  key: 0,\n  class: \"spinner-overlay\"\n};\nconst _hoisted_10 = {\n  class: \"form-group row\"\n};\nconst _hoisted_11 = {\n  class: \"col-md-12\"\n};\nconst _hoisted_12 = {\n  class: \"form-group row\"\n};\nconst _hoisted_13 = {\n  class: \"col-md-12\"\n};\nconst _hoisted_14 = {\n  key: 0,\n  class: \"mb-2\"\n};\nconst _hoisted_15 = [\"src\"];\nconst _hoisted_16 = [\"required\"];\nconst _hoisted_17 = [\"disabled\"];\nconst _hoisted_18 = {\n  key: 0,\n  class: \"red-spinner-inline me-2\"\n};\nconst _hoisted_19 = {\n  key: 1,\n  class: \"modal-overlay\"\n};\nconst _hoisted_20 = {\n  class: \"modal-content\"\n};\nconst _hoisted_21 = [\"disabled\"];\nconst _hoisted_22 = {\n  key: 0,\n  class: \"red-spinner-inline me-2\"\n};\nconst _hoisted_23 = {\n  key: 2,\n  class: \"text-center py-4\"\n};\nconst _hoisted_24 = {\n  key: 3,\n  class: \"text-muted px-4\"\n};\nconst _hoisted_25 = {\n  class: \"fw-bold text-primary\"\n};\nconst _hoisted_26 = {\n  key: 0,\n  class: \"text-muted px-3 mb-3\"\n};\nconst _hoisted_27 = {\n  key: 1,\n  class: \"table-responsive\"\n};\nconst _hoisted_28 = {\n  class: \"table table-bordered\"\n};\nconst _hoisted_29 = [\"src\"];\nconst _hoisted_30 = {\n  key: 1,\n  class: \"text-muted\"\n};\nconst _hoisted_31 = {\n  style: {\n    \"padding\": \"10px\"\n  }\n};\nconst _hoisted_32 = [\"onClick\", \"disabled\"];\nconst _hoisted_33 = [\"onClick\", \"disabled\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_IndexComponent = _resolveComponent(\"IndexComponent\");\n  return _openBlock(), _createElementBlock(\"div\", null, [_createVNode(_component_IndexComponent), _createElementVNode(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [$data.userEmail ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [_createCommentVNode(\" <h5 class=\\\"text-center\\\">Logged in as:</h5>\\n          <h6 class=\\\"text-center text-muted\\\">{{ userEmail }}</h6>\\n          <p><strong>users_id:</strong> {{ userId }}</p> \")])) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"h5\", _hoisted_4, [_cache[6] || (_cache[6] = _createElementVNode(\"i\", {\n    class: \"ti ti-briefcase\"\n  }, null, -1 /* HOISTED */)), _createTextVNode(\" \" + _toDisplayString($data.form.id ? \"Update Category\" : \"Add Category\"), 1 /* TEXT */)]), _createElementVNode(\"form\", {\n    class: \"mx-4\",\n    onSubmit: _cache[3] || (_cache[3] = _withModifiers((...args) => $options.submitForm && $options.submitForm(...args), [\"prevent\"]))\n  }, [$data.status.message ? (_openBlock(), _createElementBlock(\"div\", {\n    key: 0,\n    class: _normalizeClass(['alert mt-3', $data.status.success ? 'alert-success' : 'alert-danger'])\n  }, _toDisplayString($data.status.message), 3 /* TEXT, CLASS */)) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"div\", _hoisted_6, [_cache[9] || (_cache[9] = _createElementVNode(\"label\", {\n    class: \"form-label\"\n  }, \"Category Type\", -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_7, [_withDirectives(_createElementVNode(\"select\", {\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.form.category_type = $event),\n    style: {\n      \"height\": \"54px\"\n    },\n    class: \"form-control\",\n    required: \"\"\n  }, [_cache[7] || (_cache[7] = _createElementVNode(\"option\", {\n    value: \"\"\n  }, \"Select Category Type\", -1 /* HOISTED */)), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.categoryTypes, type => {\n    return _openBlock(), _createElementBlock(\"option\", {\n      key: type.id,\n      value: type.id\n    }, _toDisplayString(type.name), 9 /* TEXT, PROPS */, _hoisted_8);\n  }), 128 /* KEYED_FRAGMENT */))], 512 /* NEED_PATCH */), [[_vModelSelect, $data.form.category_type]]), $data.loadingCategoryTypes ? (_openBlock(), _createElementBlock(\"div\", _hoisted_9, _cache[8] || (_cache[8] = [_createElementVNode(\"div\", {\n    class: \"red-spinner\"\n  }, null, -1 /* HOISTED */)]))) : _createCommentVNode(\"v-if\", true)])])]), _createElementVNode(\"div\", _hoisted_10, [_createElementVNode(\"div\", _hoisted_11, [_cache[10] || (_cache[10] = _createElementVNode(\"label\", {\n    class: \"form-label\"\n  }, \"Category Name\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.form.name = $event),\n    type: \"text\",\n    class: \"form-control\",\n    placeholder: \"Enter category name\",\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.form.name]])])]), _createElementVNode(\"div\", _hoisted_12, [_createElementVNode(\"div\", _hoisted_13, [_cache[11] || (_cache[11] = _createElementVNode(\"label\", {\n    class: \"form-label\"\n  }, \"Logo\", -1 /* HOISTED */)), $data.form.logo && typeof $data.form.logo === 'string' ? (_openBlock(), _createElementBlock(\"div\", _hoisted_14, [_createElementVNode(\"img\", {\n    src: $data.uploadsUrl + $data.form.logo,\n    alt: \"Current Logo\",\n    class: \"custom-job-logo\",\n    width: \"150\"\n  }, null, 8 /* PROPS */, _hoisted_15)])) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"input\", {\n    type: \"file\",\n    onChange: _cache[2] || (_cache[2] = (...args) => $options.handleFileUpload && $options.handleFileUpload(...args)),\n    class: \"form-control\",\n    required: !$data.form.id\n  }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_16)])]), _createElementVNode(\"button\", {\n    type: \"submit\",\n    class: \"btn btn-primary mt-3\",\n    disabled: !$options.isAdmin || $data.isSubmitting\n  }, [$data.isSubmitting ? (_openBlock(), _createElementBlock(\"span\", _hoisted_18)) : _createCommentVNode(\"v-if\", true), _createTextVNode(\" \" + _toDisplayString($data.isSubmitting ? \"Submitting...\" : $data.form.id ? \"Update Category\" : \"Submit Category\"), 1 /* TEXT */)], 8 /* PROPS */, _hoisted_17)], 32 /* NEED_HYDRATION */), _createCommentVNode(\" Confirmation Modal \"), $data.showModal ? (_openBlock(), _createElementBlock(\"div\", _hoisted_19, [_createElementVNode(\"div\", _hoisted_20, [_cache[13] || (_cache[13] = _createElementVNode(\"h5\", null, \"Are you sure you want to delete this category?\", -1 /* HOISTED */)), _createElementVNode(\"div\", null, [_createElementVNode(\"button\", {\n    class: \"btn btn-danger mt-3\",\n    onClick: _cache[4] || (_cache[4] = (...args) => $options.confirmDeleteCategory && $options.confirmDeleteCategory(...args)),\n    disabled: $data.isDeletingCategory\n  }, [$data.isDeletingCategory ? (_openBlock(), _createElementBlock(\"span\", _hoisted_22)) : _createCommentVNode(\"v-if\", true), _createTextVNode(\" \" + _toDisplayString($data.isDeletingCategory ? \"Deleting...\" : \"Yes, Delete\"), 1 /* TEXT */)], 8 /* PROPS */, _hoisted_21), _cache[12] || (_cache[12] = _createTextVNode(\" Â  \")), _createElementVNode(\"button\", {\n    class: \"btn btn-cancel mt-3\",\n    style: {\n      \"background-color\": \"teal\",\n      \"color\": \"white\"\n    },\n    onClick: _cache[5] || (_cache[5] = (...args) => $options.closeModal && $options.closeModal(...args))\n  }, \" Cancel \")])])])) : _createCommentVNode(\"v-if\", true), _cache[16] || (_cache[16] = _createElementVNode(\"hr\", {\n    class: \"my-4\"\n  }, null, -1 /* HOISTED */)), _cache[17] || (_cache[17] = _createElementVNode(\"h5\", {\n    class: \"fw-semibold mb-3\"\n  }, \"Categories by Type\", -1 /* HOISTED */)), _createCommentVNode(\" Loading spinner for categories \"), $data.loadingCategories ? (_openBlock(), _createElementBlock(\"div\", _hoisted_23, _cache[14] || (_cache[14] = [_createElementVNode(\"div\", {\n    class: \"red-spinner-large\"\n  }, null, -1 /* HOISTED */), _createElementVNode(\"p\", {\n    class: \"text-muted mt-2\"\n  }, \"Loading categories...\", -1 /* HOISTED */)]))) : $data.categoriesWithTypes.length === 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_24, \"No categories available yet.\")) : (_openBlock(true), _createElementBlock(_Fragment, {\n    key: 4\n  }, _renderList($data.categoriesWithTypes, categoryType => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: categoryType.type_id,\n      class: \"mb-4\"\n    }, [_createElementVNode(\"h6\", _hoisted_25, _toDisplayString(categoryType.type_name), 1 /* TEXT */), categoryType.categories.length === 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_26, \" No categories in this type yet. \")) : (_openBlock(), _createElementBlock(\"div\", _hoisted_27, [_createElementVNode(\"table\", _hoisted_28, [_cache[15] || (_cache[15] = _createElementVNode(\"thead\", {\n      class: \"table-light\"\n    }, [_createElementVNode(\"tr\", null, [_createElementVNode(\"th\", null, \"Id\"), _createElementVNode(\"th\", null, \"Category Name\"), _createElementVNode(\"th\", null, \"Logo\"), _createElementVNode(\"th\", null, \"Action\")])], -1 /* HOISTED */)), _createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(categoryType.categories, (category, index) => {\n      return _openBlock(), _createElementBlock(\"tr\", {\n        key: category.id\n      }, [_createElementVNode(\"td\", null, _toDisplayString(index + 1), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(category.name), 1 /* TEXT */), _createElementVNode(\"td\", null, [category.logo ? (_openBlock(), _createElementBlock(\"img\", {\n        key: 0,\n        src: $data.uploadsUrl + category.logo,\n        alt: \"Logo\",\n        class: \"custom-job-logo\",\n        width: \"100\"\n      }, null, 8 /* PROPS */, _hoisted_29)) : (_openBlock(), _createElementBlock(\"span\", _hoisted_30, \"No logo\"))]), _createElementVNode(\"td\", _hoisted_31, [_createElementVNode(\"button\", {\n        class: \"btn btn-primary btn-sm me-2\",\n        onClick: $event => $options.editCategory(category, categoryType.type_id),\n        disabled: !$options.isAdmin\n      }, \"Edit\", 8 /* PROPS */, _hoisted_32), _createElementVNode(\"button\", {\n        class: \"btn btn-danger btn-sm\",\n        onClick: $event => $options.openModal(category.id),\n        disabled: !$options.isAdmin\n      }, \"Delete\", 8 /* PROPS */, _hoisted_33)])]);\n    }), 128 /* KEYED_FRAGMENT */))])])]))]);\n  }), 128 /* KEYED_FRAGMENT */))])])]);\n}","map":{"version":3,"names":["class","id","style","key","_createElementBlock","_createVNode","_component_IndexComponent","_createElementVNode","_hoisted_1","_hoisted_2","$data","userEmail","_hoisted_3","_createCommentVNode","_hoisted_4","_createTextVNode","_toDisplayString","form","onSubmit","_cache","_withModifiers","args","$options","submitForm","status","message","_normalizeClass","success","_hoisted_5","_hoisted_6","_hoisted_7","$event","category_type","required","value","_Fragment","_renderList","categoryTypes","type","name","_hoisted_8","loadingCategoryTypes","_hoisted_9","_hoisted_10","_hoisted_11","placeholder","_hoisted_12","_hoisted_13","logo","_hoisted_14","src","uploadsUrl","alt","width","_hoisted_15","onChange","handleFileUpload","_hoisted_16","disabled","isAdmin","isSubmitting","_hoisted_18","_hoisted_17","showModal","_hoisted_19","_hoisted_20","onClick","confirmDeleteCategory","isDeletingCategory","_hoisted_22","_hoisted_21","closeModal","loadingCategories","_hoisted_23","categoriesWithTypes","length","_hoisted_24","categoryType","type_id","_hoisted_25","type_name","categories","_hoisted_26","_hoisted_27","_hoisted_28","category","index","_hoisted_29","_hoisted_30","_hoisted_31","editCategory","_hoisted_32","openModal","_hoisted_33"],"sources":["/Users/gentil/Desktop/Kozi-ai-agent/src/views/admin/CategoryComponent.vue"],"sourcesContent":["<template>\n  <div>\n    <IndexComponent />\n    <div class=\"page-wrapper\" id=\"main-wrapper\" data-layout=\"vertical\" data-navbarbg=\"skin6\"\n      data-sidebartype=\"full\" data-sidebar-description=\"fixed\" data-header-description=\"fixed\"\n      style=\"position: absolute; top: 0; left: 0; right: 0; bottom: 0; z-index: 1;\">\n      <div class=\"body-wrapper\" style=\"margin-top: 70px; margin-left: 270px; background: white; min-height: calc(100vh - 70px); padding: 20px; overflow-y: auto; max-height: calc(100vh - 70px);\">\n        <div v-if=\"userEmail\" class=\"card-body\">\n          <!-- <h5 class=\"text-center\">Logged in as:</h5>\n          <h6 class=\"text-center text-muted\">{{ userEmail }}</h6>\n          <p><strong>users_id:</strong> {{ userId }}</p> -->\n        </div>\n\n         <h5  class=\"card-title fw-semibold mb-4\" style=\"color: #E960A6;\">\n          <i class=\"ti ti-briefcase\"></i>\n          {{ form.id ? \"Update Category\" : \"Add Category\" }}\n        </h5>\n\n        <form class=\"mx-4\" @submit.prevent=\"submitForm\">\n          <div v-if=\"status.message\" :class=\"['alert mt-3', status.success ? 'alert-success' : 'alert-danger']\">\n            {{ status.message }}\n          </div>\n\n          <div class=\"form-group row\">\n            <div class=\"col-md-12\">\n              <label class=\"form-label\">Category Type</label>\n              <div class=\"position-relative\">\n                <select v-model=\"form.category_type\" style=\"height: 54px;\" class=\"form-control\"  required>\n                  <option value=\"\">Select Category Type</option>\n                  <option v-for=\"type in categoryTypes\" :key=\"type.id\" :value=\"type.id\">\n                    {{ type.name }}\n                  </option>\n                </select>\n                <div v-if=\"loadingCategoryTypes\" class=\"spinner-overlay\">\n                  <div class=\"red-spinner\"></div>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <div class=\"form-group row\">\n            <div class=\"col-md-12\">\n              <label class=\"form-label\">Category Name</label>\n              <input v-model=\"form.name\" type=\"text\" class=\"form-control\" placeholder=\"Enter category name\" required />\n            </div>\n          </div>\n\n          <div class=\"form-group row\">\n            <div class=\"col-md-12\">\n              <label class=\"form-label\">Logo</label>\n              <div v-if=\"form.logo && typeof form.logo === 'string'\" class=\"mb-2\">\n                <img :src=\"uploadsUrl + form.logo\" alt=\"Current Logo\" class=\"custom-job-logo\" width=\"150\" />\n              </div>\n              <input type=\"file\" @change=\"handleFileUpload\" class=\"form-control\" :required=\"!form.id\" />\n            </div>\n          </div>\n\n          <button type=\"submit\" class=\"btn btn-primary mt-3\" :disabled=\"!isAdmin || isSubmitting\">\n            <span v-if=\"isSubmitting\" class=\"red-spinner-inline me-2\"></span>\n            {{ isSubmitting ? \"Submitting...\" : form.id ? \"Update Category\" : \"Submit Category\" }}\n          </button>\n        </form>\n\n        <!-- Confirmation Modal -->\n        <div v-if=\"showModal\" class=\"modal-overlay\">\n          <div class=\"modal-content\">\n            <h5>Are you sure you want to delete this category?</h5>\n            <div>\n              <button class=\"btn btn-danger mt-3\" @click=\"confirmDeleteCategory\" :disabled=\"isDeletingCategory\">\n                <span v-if=\"isDeletingCategory\" class=\"red-spinner-inline me-2\"></span>\n                {{ isDeletingCategory ? \"Deleting...\" : \"Yes, Delete\" }}\n              </button>\n              &nbsp;\n              <button class=\"btn btn-cancel mt-3\" style=\"background-color: teal; color: white;\" @click=\"closeModal\">\n                Cancel\n              </button>\n            </div>\n          </div>\n        </div>\n\n        <hr class=\"my-4\" />\n        <h5 class=\"fw-semibold mb-3\">Categories by Type</h5>\n\n        <!-- Loading spinner for categories -->\n        <div v-if=\"loadingCategories\" class=\"text-center py-4\">\n          <div class=\"red-spinner-large\"></div>\n          <p class=\"text-muted mt-2\">Loading categories...</p>\n        </div>\n\n        <div v-else-if=\"categoriesWithTypes.length === 0\" class=\"text-muted px-4\">No categories available yet.</div>\n\n        <div v-else v-for=\"categoryType in categoriesWithTypes\" :key=\"categoryType.type_id\" class=\"mb-4\">\n          <h6 class=\"fw-bold text-primary\">{{ categoryType.type_name }}</h6>\n          \n          <div v-if=\"categoryType.categories.length === 0\" class=\"text-muted px-3 mb-3\">\n            No categories in this type yet.\n          </div>\n          \n          <div v-else class=\"table-responsive\">\n            <table class=\"table table-bordered\">\n              <thead class=\"table-light\">\n                <tr>\n                  <th>Id</th>\n                  <th>Category Name</th>\n                  <th>Logo</th>\n                  <th>Action</th>\n                </tr>\n              </thead>\n              <tbody>\n                <tr v-for=\"(category,index) in categoryType.categories\" :key=\"category.id\">\n                  <td>{{ index+1 }}</td>\n                  <td>{{ category.name }}</td>\n                  <td>\n                    <img v-if=\"category.logo\" :src=\"uploadsUrl + category.logo\" alt=\"Logo\" class=\"custom-job-logo\" width=\"100\" />\n                    <span v-else class=\"text-muted\">No logo</span>\n                  </td>\n                  <td style=\"padding: 10px;\">\n                    <button class=\"btn btn-primary btn-sm me-2\" @click=\"editCategory(category, categoryType.type_id)\" :disabled=\"!isAdmin\">Edit</button>\n                    <button class=\"btn btn-danger btn-sm\" @click=\"openModal(category.id)\" :disabled=\"!isAdmin\">Delete</button>\n                  </td>\n\n                 \n                </tr>\n              </tbody>\n            </table>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport IndexComponent from \"./IndexComponent.vue\";\nimport { globalVariable } from \"@/global\";\n\nexport default {\n  name: \"CategoryWrapper\",\n  components: { IndexComponent },\n  data() {\n    return {\n      uploadsUrl: globalVariable + \"/uploads/logo/\",\n      form: {\n        id: null,\n        category_type: \"\",\n        name: \"\",\n        logo: \"\",\n      },\n      categoryTypes: [],\n      categoriesWithTypes: [],\n      isSubmitting: false,\n      loadingCategoryTypes: false,\n      loadingCategories: false,\n      isDeletingCategory: false,\n      status: {\n        success: false,\n        message: \"\",\n      },\n      userEmail: \"\",\n      userId: \"\",\n      showModal: false,\n      selectedCategoryId: null,\n    };\n  },\n  computed: {\n    isAdmin() {\n    return this.userEmail.toLowerCase() === \"admin@kozi.rw\";\n  }},\n  mounted() {\n    this.userEmail = localStorage.getItem(\"userEmail\") || \"\";\n    if (this.userEmail) {\n      this.getUserIdFromEmail();\n    }\n    this.fetchCategoryTypes();\n    this.fetchCategoriesWithTypes();\n  },\n  methods: {\n    handleFileUpload(event) {\n      this.form.logo = event.target.files[0];\n    },\n    openModal(id) {\n      this.selectedCategoryId = id;\n      this.showModal = true;\n    },\n    closeModal() {\n      this.showModal = false;\n      this.selectedCategoryId = null;\n    },\n    async fetchCategoryTypes() {\n      this.loadingCategoryTypes = true;\n      try {\n        const res = await fetch(`${globalVariable}/category-types`);\n        if (!res.ok) throw new Error(\"Failed to fetch category types\");\n        const data = await res.json();\n        this.categoryTypes = data;\n      } catch (err) {\n        console.error(\"Error fetching category types:\", err);\n        this.status = {\n          success: false,\n          message: \"Failed to fetch category types.\",\n        };\n      } finally {\n        this.loadingCategoryTypes = false;\n      }\n    },\n    async fetchCategoriesWithTypes() {\n      this.loadingCategories = true;\n      try {\n        const res = await fetch(`${globalVariable}/category-types-with-categories`);\n        if (!res.ok) throw new Error(\"Failed to fetch categories with types\");\n        const data = await res.json();\n        this.categoriesWithTypes = data;\n      } catch (err) {\n        console.error(\"Error fetching categories with types:\", err);\n        this.status = {\n          success: false,\n          message: \"Failed to fetch categories.\",\n        };\n      } finally {\n        this.loadingCategories = false;\n      }\n    },\n    async confirmDeleteCategory() {\n      this.isDeletingCategory = true;\n      const token = localStorage.getItem(\"adminToken\");\n      try {\n        const res = await fetch(`${globalVariable}/admin/category_delete/${this.selectedCategoryId}`, {\n          method: \"DELETE\",\n          headers: {\n            Authorization: `Bearer ${token}`,\n          },\n        });\n        const result = await res.json();\n\n        if (res.ok) {\n          this.status = {\n            success: true,\n            message: result.message || \"Category deleted successfully.\",\n          };\n          this.fetchCategoriesWithTypes();\n        } else {\n          this.status = {\n            success: false,\n            message: result.message || \"Failed to delete category.\",\n          };\n        }\n      } catch (err) {\n        console.error(\"Delete error:\", err);\n        this.status = {\n          success: false,\n          message: \"Unexpected error occurred while deleting.\",\n        };\n      } finally {\n        this.isDeletingCategory = false;\n        this.closeModal();\n      }\n    },\n    async submitForm() {\n      this.isSubmitting = true;\n      this.status.message = \"\";\n\n      try {\n        const formData = new FormData();\n        formData.append(\"category_type\", this.form.category_type);\n        formData.append(\"name\", this.form.name);\n        if (this.form.logo && typeof this.form.logo !== \"string\") {\n          formData.append(\"logo\", this.form.logo);\n        }\n\n        const token = localStorage.getItem(\"adminToken\");\n\n        const url = this.form.id\n          ? `${globalVariable}/admin/update_category/${this.form.id}`\n          : `${globalVariable}/admin/add_category`;\n\n        const method = this.form.id ? \"PUT\" : \"POST\";\n\n        const response = await fetch(url, {\n          method,\n          headers: {\n            Authorization: `Bearer ${token}`,\n          },\n          body: formData,\n        });\n\n        const result = await response.json();\n\n        if (response.ok) {\n          this.status = {\n            success: true,\n            message: result.message || (this.form.id ? \"Category updated!\" : \"Category added!\"),\n          };\n\n          this.form = { id: null, category_type: \"\", name: \"\", logo: \"\" };\n          this.fetchCategoriesWithTypes();\n        } else {\n          this.status = {\n            success: false,\n            message: result.message || \"Failed to submit category.\",\n          };\n        }\n      } catch (err) {\n        console.error(\"Error submitting category:\", err);\n        this.status = {\n          success: false,\n          message: \"Unexpected error occurred.\",\n        };\n      } finally {\n        this.isSubmitting = false;\n      }\n    },\n    editCategory(category, categoryTypeId) {\n      this.form = {\n        id: category.id,\n        category_type: categoryTypeId,\n        name: category.name,\n        logo: category.logo,\n      };\n      window.scrollTo({ top: 0, behavior: \"smooth\" });\n    },\n    async getUserIdFromEmail() {\n      const token = localStorage.getItem(\"adminToken\");\n      if (!token) return;\n\n      try {\n        const payload = JSON.parse(atob(token.split(\".\")[1]));\n        if (!this.userEmail) this.userEmail = payload.email;\n\n        const res = await fetch(`${globalVariable}/get_user_id_by_email/${this.userEmail}`, {\n          headers: { Authorization: `Bearer ${token}` },\n        });\n        const data = await res.json();\n\n        if (res.ok) {\n          this.userId = data.users_id;\n        } else {\n          this.status = {\n            success: false,\n            message: data.message || \"Unable to get user ID.\",\n          };\n        }\n      } catch (err) {\n        console.error(\"Error getting users_id:\", err);\n        this.status = {\n          success: false,\n          message: \"Failed to fetch user ID.\",\n        };\n      }\n    },\n  },\n};\n</script>\n\n<style scoped>\n.modal-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.5);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 1000;\n}\n\n.modal-content {\n  background: white;\n  padding: 20px;\n  border-radius: 8px;\n  text-align: center;\n  max-width: 400px;\n  width: 90%;\n}\n\n.custom-job-logo {\n  border-radius: 4px;\n  border: 1px solid #ddd;\n}\n\n/* Red Spinner Styles */\n.position-relative {\n  position: relative;\n}\n\n.spinner-overlay {\n  position: absolute;\n  top: 0;\n  right: 10px;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  pointer-events: none;\n}\n\n.red-spinner {\n  width: 20px;\n  height: 20px;\n  border: 2px solid #f3f3f3;\n  border-top: 2px solid #dc3545;\n  border-radius: 50%;\n  animation: spin 1s linear infinite;\n}\n\n.red-spinner-inline {\n  display: inline-block;\n  width: 16px;\n  height: 16px;\n  border: 2px solid #f3f3f3;\n  border-top: 2px solid #dc3545;\n  border-radius: 50%;\n  animation: spin 1s linear infinite;\n  vertical-align: middle;\n}\n\n.red-spinner-large {\n  width: 40px;\n  height: 40px;\n  border: 4px solid #f3f3f3;\n  border-top: 4px solid #dc3545;\n  border-radius: 50%;\n  animation: spin 1s linear infinite;\n  margin: 0 auto;\n}\n\n@keyframes spin {\n  0% { transform: rotate(0deg); }\n  100% { transform: rotate(360deg); }\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}