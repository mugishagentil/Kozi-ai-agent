{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/web.dom-exception.stack.js\";\nimport { globalVariable } from \"@/global\";\nexport default {\n  name: \"HeaderComponent\",\n  data() {\n    return {\n      defaultImage: require(\"@/assets/img/user-1.jpg\"),\n      uploadsUrl: globalVariable + \"/uploads/profile/\",\n      userId: \"\",\n      userEmail: \"\",\n      firstName: \"\",\n      lastName: \"\",\n      image: \"\"\n    };\n  },\n  mounted() {\n    this.getUserIdFromEmail();\n  },\n  methods: {\n    onLogoError(event) {\n      event.target.src = this.defaultImage;\n    },\n    async getUserIdFromEmail() {\n      const token = localStorage.getItem(\"employeeToken\");\n      if (!token) return;\n      try {\n        const payload = JSON.parse(atob(token.split(\".\")[1]));\n        this.userEmail = payload.email;\n        const res = await fetch(`${globalVariable}/get_user_id_by_email/${this.userEmail}`, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        const data = await res.json();\n        if (res.ok) {\n          this.userId = data.users_id;\n          this.fetchProfile(); // Fetch profile after getting userId\n        } else {\n          console.error(\"Unable to get user ID:\", data.message);\n        }\n      } catch (err) {\n        console.error(\"Error getting users_id:\", err);\n      }\n    },\n    async fetchProfile() {\n      const token = localStorage.getItem(\"employeeToken\");\n      if (!token || !this.userId) return;\n      try {\n        const res = await fetch(`${globalVariable}/seeker/view_profile/${this.userId}`, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        const data = await res.json();\n        if (res.ok) {\n          this.firstName = data.first_name || \"\";\n          this.lastName = data.last_name || \"\";\n          this.image = data.image || \"\";\n        } else {\n          console.error(\"Failed to fetch profile:\", data.message);\n        }\n      } catch (err) {\n        console.error(\"Error fetching profile:\", err);\n      }\n    },\n    logout() {\n      localStorage.removeItem(\"authToken\");\n      this.$router.push(\"/login\");\n    }\n  }\n};","map":{"version":3,"names":["globalVariable","name","data","defaultImage","require","uploadsUrl","userId","userEmail","firstName","lastName","image","mounted","getUserIdFromEmail","methods","onLogoError","event","target","src","token","localStorage","getItem","payload","JSON","parse","atob","split","email","res","fetch","headers","Authorization","json","ok","users_id","fetchProfile","console","error","message","err","first_name","last_name","logout","removeItem","$router","push"],"sources":["/Users/gentil/Desktop/Kozi-ai-agent/src/views/jobseeker/HeaderComponent.vue"],"sourcesContent":["<template>\n  <header class=\"app-header\">\n    <nav class=\"navbar navbar-expand-lg navbar-light px-3 fixed-top\" style=\"background-color: white;\">\n      <ul class=\"navbar-nav\">\n        <!-- Sidebar toggle visible only on small screens -->\n        <li class=\"nav-item d-block d-xl-none\">\n          <a\n            class=\"nav-link sidebartoggler nav-icon-hover\"\n            href=\"javascript:void(0)\"\n            @click=\"$emit('toggle-sidebar')\"\n            title=\"Toggle Sidebar\"\n          >\n            <i class=\"ti ti-menu-2\"></i>\n          </a>\n        </li>\n      </ul>\n\n      <div class=\"navbar-collapse justify-content-end px-0\" id=\"navbarNav\">\n        <ul class=\"navbar-nav flex-row ms-auto align-items-center justify-content-end\">\n          <!-- User Info Display -->\n          <li class=\"nav-item me-3\" v-if=\"userEmail\">\n            <div class=\"d-flex flex-column text-end\">\n              <!-- <small class=\"text-muted mb-0\"><strong>Name:</strong> {{ firstName }} {{ lastName }}</small>\n              <small class=\"text-muted mb-0\"><strong>Image:</strong> {{ image }}</small>\n              <img :src=\"uploadsUrl +image\" alt=\"Current Logo\" class=\"custom-job-logo\" width=\"150\" /> -->\n        <!-- <small class=\"text-muted mb-0\"><strong>Email:</strong> {{ userEmail }}</small>\n              <small class=\"text-muted\"><strong>ID:</strong> {{ userId }}</small> -->\n            </div>\n          </li>\n          \n          <!-- User dropdown -->\n          <li class=\"nav-item dropdown\">\n            <a\n              class=\"nav-link nav-icon-hover\"\n              href=\"javascript:void(0)\"\n              id=\"userDropdown\"\n              data-bs-toggle=\"dropdown\"\n              aria-expanded=\"false\"\n            >\n\n            <img\n            :src=\"uploadsUrl + image\"\n            @error=\"onLogoError($event)\"\n            alt=\"User Profile\"\n            class=\"rounded-circle\"\n            width=\"35\"\n            height=\"35\"\n            />\n            \n              \n            </a>\n           \n            <ul\n              class=\"dropdown-menu dropdown-menu-end dropdown-menu-animate-up\"\n              aria-labelledby=\"userDropdown\"\n            >\n              <li>\n                <router-link\n                  to=\"/dashboard/View-profile\"\n                  class=\"dropdown-item d-flex align-items-center \"\n                >\n                  <i class=\"ti ti-user fs-6 me-2\"></i> My Profile\n                </router-link>\n              </li>\n              \n              <li>\n                <router-link\n                  to=\"/dashboard/change-password\"\n                  class=\"dropdown-item d-flex align-items-center\"\n                  \n                >\n                 <i class=\"fa-solid fa-key me-2\"></i> Credentials\n                </router-link>\n              </li>\n              <li>\n                <router-link\n                  to=\"/dashboard/settings\"\n                  class=\"dropdown-item d-flex align-items-center\"\n                  \n                >\n                 <i class=\"fa-solid fa-key me-2\"></i> Settings\n                </router-link>\n              </li>\n              <li>\n                <a\n                  href=\"javascript:void(0)\"\n                  class=\"dropdown-item\"\n                  @click=\"logout\"\n                >\n                 <i class=\"ti ti-square-arrow-left me-2\" style=\"width: 2rem;\"></i> Logout\n                </a>\n              </li>\n              \n              \n            </ul>\n          </li>\n        </ul>\n      </div>\n    </nav>\n  </header>\n</template>\n\n<script>\nimport { globalVariable } from \"@/global\";\n\nexport default {\n  name: \"HeaderComponent\",\n  data() {\n    return {\n      defaultImage: require(\"@/assets/img/user-1.jpg\"),\n      uploadsUrl: globalVariable + \"/uploads/profile/\",\n      \n      userId: \"\",\n      userEmail: \"\",\n      firstName: \"\",\n      lastName: \"\",\n      image: \"\",\n    };\n  },\n  mounted() {\n    this.getUserIdFromEmail();\n  },\n  methods: {\n\n     onLogoError(event) {\n    event.target.src = this.defaultImage;\n  },\n    async getUserIdFromEmail() {\n      const token = localStorage.getItem(\"employeeToken\");\n      if (!token) return;\n      \n      try {\n        const payload = JSON.parse(atob(token.split(\".\")[1]));\n        this.userEmail = payload.email;\n        \n        const res = await fetch(`${globalVariable}/get_user_id_by_email/${this.userEmail}`, {\n          headers: { Authorization: `Bearer ${token}` },\n        });\n        \n        const data = await res.json();\n        if (res.ok) {\n          this.userId = data.users_id;\n          this.fetchProfile(); // Fetch profile after getting userId\n        } else {\n          console.error(\"Unable to get user ID:\", data.message);\n        }\n      } catch (err) {\n        console.error(\"Error getting users_id:\", err);\n      }\n    },\n\n    async fetchProfile() {\n      const token = localStorage.getItem(\"employeeToken\");\n      if (!token || !this.userId) return;\n      \n      try {\n        const res = await fetch(`${globalVariable}/seeker/view_profile/${this.userId}`, {\n          headers: { Authorization: `Bearer ${token}` },\n        });\n        \n        const data = await res.json();\n        if (res.ok) {\n          this.firstName = data.first_name || \"\";\n          this.lastName = data.last_name || \"\";\n          this.image = data.image || \"\";\n        } else {\n          console.error(\"Failed to fetch profile:\", data.message);\n        }\n      } catch (err) {\n        console.error(\"Error fetching profile:\", err);\n      }\n    },\n    \n    logout() {\n      localStorage.removeItem(\"authToken\");\n      this.$router.push(\"/login\");\n    },\n  },\n};\n</script>\n\n<style scoped>\n.app-header {\n  width: 100%;\n  background: #ffffff;\n  \n}\n\n.nav-icon-hover {\n  cursor: pointer;\n}\n\n/* Hover effect for dropdown items */\n.dropdown-item:hover {\n  background-color: #ea60a7 !important;\n  color: white !important;\n}\n\n/* Override bootstrap dropdown-menu animation if needed */\n.dropdown-menu-animate-up {\n  animation: dropdownAnimateUp 0.3s ease forwards;\n}\n\n@keyframes dropdownAnimateUp {\n  0% {\n    opacity: 0;\n    transform: translateY(10px);\n  }\n  100% {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n</style>\n"],"mappings":";;AAuGA,SAASA,cAAa,QAAS,UAAU;AAEzC,eAAe;EACbC,IAAI,EAAE,iBAAiB;EACvBC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,YAAY,EAAEC,OAAO,CAAC,yBAAyB,CAAC;MAChDC,UAAU,EAAEL,cAAa,GAAI,mBAAmB;MAEhDM,MAAM,EAAE,EAAE;MACVC,SAAS,EAAE,EAAE;MACbC,SAAS,EAAE,EAAE;MACbC,QAAQ,EAAE,EAAE;MACZC,KAAK,EAAE;IACT,CAAC;EACH,CAAC;EACDC,OAAOA,CAAA,EAAG;IACR,IAAI,CAACC,kBAAkB,CAAC,CAAC;EAC3B,CAAC;EACDC,OAAO,EAAE;IAENC,WAAWA,CAACC,KAAK,EAAE;MACpBA,KAAK,CAACC,MAAM,CAACC,GAAE,GAAI,IAAI,CAACd,YAAY;IACtC,CAAC;IACC,MAAMS,kBAAkBA,CAAA,EAAG;MACzB,MAAMM,KAAI,GAAIC,YAAY,CAACC,OAAO,CAAC,eAAe,CAAC;MACnD,IAAI,CAACF,KAAK,EAAE;MAEZ,IAAI;QACF,MAAMG,OAAM,GAAIC,IAAI,CAACC,KAAK,CAACC,IAAI,CAACN,KAAK,CAACO,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACrD,IAAI,CAAClB,SAAQ,GAAIc,OAAO,CAACK,KAAK;QAE9B,MAAMC,GAAE,GAAI,MAAMC,KAAK,CAAC,GAAG5B,cAAc,yBAAyB,IAAI,CAACO,SAAS,EAAE,EAAE;UAClFsB,OAAO,EAAE;YAAEC,aAAa,EAAE,UAAUZ,KAAK;UAAG;QAC9C,CAAC,CAAC;QAEF,MAAMhB,IAAG,GAAI,MAAMyB,GAAG,CAACI,IAAI,CAAC,CAAC;QAC7B,IAAIJ,GAAG,CAACK,EAAE,EAAE;UACV,IAAI,CAAC1B,MAAK,GAAIJ,IAAI,CAAC+B,QAAQ;UAC3B,IAAI,CAACC,YAAY,CAAC,CAAC,EAAE;QACvB,OAAO;UACLC,OAAO,CAACC,KAAK,CAAC,wBAAwB,EAAElC,IAAI,CAACmC,OAAO,CAAC;QACvD;MACF,EAAE,OAAOC,GAAG,EAAE;QACZH,OAAO,CAACC,KAAK,CAAC,yBAAyB,EAAEE,GAAG,CAAC;MAC/C;IACF,CAAC;IAED,MAAMJ,YAAYA,CAAA,EAAG;MACnB,MAAMhB,KAAI,GAAIC,YAAY,CAACC,OAAO,CAAC,eAAe,CAAC;MACnD,IAAI,CAACF,KAAI,IAAK,CAAC,IAAI,CAACZ,MAAM,EAAE;MAE5B,IAAI;QACF,MAAMqB,GAAE,GAAI,MAAMC,KAAK,CAAC,GAAG5B,cAAc,wBAAwB,IAAI,CAACM,MAAM,EAAE,EAAE;UAC9EuB,OAAO,EAAE;YAAEC,aAAa,EAAE,UAAUZ,KAAK;UAAG;QAC9C,CAAC,CAAC;QAEF,MAAMhB,IAAG,GAAI,MAAMyB,GAAG,CAACI,IAAI,CAAC,CAAC;QAC7B,IAAIJ,GAAG,CAACK,EAAE,EAAE;UACV,IAAI,CAACxB,SAAQ,GAAIN,IAAI,CAACqC,UAAS,IAAK,EAAE;UACtC,IAAI,CAAC9B,QAAO,GAAIP,IAAI,CAACsC,SAAQ,IAAK,EAAE;UACpC,IAAI,CAAC9B,KAAI,GAAIR,IAAI,CAACQ,KAAI,IAAK,EAAE;QAC/B,OAAO;UACLyB,OAAO,CAACC,KAAK,CAAC,0BAA0B,EAAElC,IAAI,CAACmC,OAAO,CAAC;QACzD;MACF,EAAE,OAAOC,GAAG,EAAE;QACZH,OAAO,CAACC,KAAK,CAAC,yBAAyB,EAAEE,GAAG,CAAC;MAC/C;IACF,CAAC;IAEDG,MAAMA,CAAA,EAAG;MACPtB,YAAY,CAACuB,UAAU,CAAC,WAAW,CAAC;MACpC,IAAI,CAACC,OAAO,CAACC,IAAI,CAAC,QAAQ,CAAC;IAC7B;EACF;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}