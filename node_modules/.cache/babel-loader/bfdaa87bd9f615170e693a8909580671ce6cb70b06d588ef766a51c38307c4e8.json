{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, createCommentVNode as _createCommentVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, normalizeClass as _normalizeClass, Fragment as _Fragment } from \"vue\";\nconst _hoisted_1 = {\n  class: \"page-wrapper\",\n  id: \"main-wrapper\",\n  \"data-layout\": \"vertical\",\n  \"data-navbarbg\": \"skin6\",\n  \"data-sidebartype\": \"full\",\n  \"data-sidebar-description\": \"fixed\",\n  \"data-header-description\": \"fixed\",\n  style: {\n    \"position\": \"absolute\",\n    \"top\": \"0\",\n    \"left\": \"0\",\n    \"right\": \"0\",\n    \"bottom\": \"0\",\n    \"z-index\": \"1\"\n  }\n};\nconst _hoisted_2 = {\n  class: \"body-wrapper\",\n  style: {\n    \"margin-top\": \"70px\",\n    \"margin-left\": \"270px\",\n    \"background\": \"white\",\n    \"min-height\": \"calc(100vh - 70px)\",\n    \"padding\": \"20px\",\n    \"overflow-y\": \"auto\",\n    \"max-height\": \"calc(100vh - 70px)\"\n  }\n};\nconst _hoisted_3 = {\n  class: \"container-fluid\"\n};\nconst _hoisted_4 = {\n  class: \"row\"\n};\nconst _hoisted_5 = {\n  id: \"about\",\n  class: \"section wb\"\n};\nconst _hoisted_6 = {\n  key: 0,\n  class: \"mx-4 mb-4\"\n};\nconst _hoisted_7 = {\n  class: \"container\"\n};\nconst _hoisted_8 = {\n  key: 0,\n  class: \"job-details\"\n};\nconst _hoisted_9 = {\n  class: \"section-title text-center\"\n};\nconst _hoisted_10 = {\n  style: {\n    \"font-family\": \"'Michroma'\"\n  }\n};\nconst _hoisted_11 = {\n  class: \"lead\",\n  style: {\n    \"color\": \"darkblue\"\n  }\n};\nconst _hoisted_12 = {\n  class: \"job-details\"\n};\nconst _hoisted_13 = [\"innerHTML\"];\nconst _hoisted_14 = [\"innerHTML\"];\nconst _hoisted_15 = [\"innerHTML\"];\nconst _hoisted_16 = [\"innerHTML\"];\nconst _hoisted_17 = [\"disabled\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_IndexComponent = _resolveComponent(\"IndexComponent\");\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createVNode(_component_IndexComponent), _createElementVNode(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"div\", _hoisted_5, [$data.userEmail ? (_openBlock(), _createElementBlock(\"div\", _hoisted_6, [_createCommentVNode(\" <p><strong>Your email:</strong> {{ userEmail }}</p>\\n        <p><strong>users_id:</strong> {{ userId }}</p> \")])) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"div\", _hoisted_7, [$data.job ? (_openBlock(), _createElementBlock(\"div\", _hoisted_8, [_createElementVNode(\"div\", _hoisted_9, [_createElementVNode(\"h3\", _hoisted_10, _toDisplayString($data.job.job_title) + \" - \" + _toDisplayString($data.job.location), 1 /* TEXT */), _createElementVNode(\"p\", _hoisted_11, [_createElementVNode(\"strong\", null, \"Job Opportunity at: \" + _toDisplayString($data.job.company), 1 /* TEXT */), _cache[1] || (_cache[1] = _createTextVNode()), _cache[2] || (_cache[2] = _createElementVNode(\"br\", null, null, -1 /* HOISTED */)), _createElementVNode(\"strong\", null, \"Published Date: \" + _toDisplayString($options.formatDate($data.job.published_date)), 1 /* TEXT */), _cache[3] || (_cache[3] = _createElementVNode(\"br\", null, null, -1 /* HOISTED */)), _createElementVNode(\"strong\", null, \"Application Deadline: \" + _toDisplayString($options.formatDate($data.job.deadline_date)), 1 /* TEXT */), _cache[4] || (_cache[4] = _createElementVNode(\"br\", null, null, -1 /* HOISTED */)), _createCommentVNode(\" Salary Range: {{job.salary_min }} Rwf - {{job.salary_max}} Rwf  Monthly \")])]), _createElementVNode(\"div\", _hoisted_12, [_cache[5] || (_cache[5] = _createElementVNode(\"h4\", null, [_createElementVNode(\"strong\", null, \"Company Overview\")], -1 /* HOISTED */)), _createElementVNode(\"p\", {\n    innerHTML: $data.job.job_description\n  }, null, 8 /* PROPS */, _hoisted_13), _cache[6] || (_cache[6] = _createElementVNode(\"h4\", null, [_createElementVNode(\"strong\", null, \"Requirements\")], -1 /* HOISTED */)), _createElementVNode(\"p\", {\n    innerHTML: $data.job.requirements,\n    style: {\n      \"margin-left\": \"2rem\"\n    }\n  }, null, 8 /* PROPS */, _hoisted_14), _cache[7] || (_cache[7] = _createElementVNode(\"h4\", null, [_createElementVNode(\"strong\", null, \"Responsabilities\")], -1 /* HOISTED */)), _createElementVNode(\"p\", {\n    innerHTML: $data.job.responsability,\n    style: {\n      \"margin-left\": \"2rem\"\n    }\n  }, null, 8 /* PROPS */, _hoisted_15), _cache[8] || (_cache[8] = _createElementVNode(\"h4\", null, [_createElementVNode(\"strong\", null, \"conclusion\")], -1 /* HOISTED */)), _createElementVNode(\"p\", {\n    innerHTML: $data.job.conclusion\n  }, null, 8 /* PROPS */, _hoisted_16)]), _createElementVNode(\"button\", {\n    class: \"custom-btn-apply\",\n    onClick: _cache[0] || (_cache[0] = (...args) => $options.applyForJob && $options.applyForJob(...args)),\n    disabled: $data.isApplying || !$data.job?.job_id || !$data.userId\n  }, _toDisplayString($data.isApplying ? \"Applying...\" : \"Apply for Job\"), 9 /* TEXT, PROPS */, _hoisted_17), _cache[9] || (_cache[9] = _createElementVNode(\"br\", null, null, -1 /* HOISTED */)), _cache[10] || (_cache[10] = _createElementVNode(\"br\", null, null, -1 /* HOISTED */)), $data.applyMessage ? (_openBlock(), _createElementBlock(\"div\", {\n    key: 0,\n    class: _normalizeClass(['alert', $data.applyStatusClass]),\n    role: \"alert\"\n  }, _toDisplayString($data.applyMessage), 3 /* TEXT, CLASS */)) : _createCommentVNode(\"v-if\", true)])) : _createCommentVNode(\"v-if\", true)])])])])])])], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["class","id","style","key","_createElementBlock","_Fragment","_createVNode","_component_IndexComponent","_createElementVNode","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","$data","userEmail","_hoisted_6","_createCommentVNode","_hoisted_7","job","_hoisted_8","_hoisted_9","_hoisted_10","_toDisplayString","job_title","location","_hoisted_11","company","_createTextVNode","$options","formatDate","published_date","deadline_date","_hoisted_12","innerHTML","job_description","_hoisted_13","requirements","_hoisted_14","responsability","_hoisted_15","conclusion","_hoisted_16","onClick","_cache","args","applyForJob","disabled","isApplying","job_id","userId","_hoisted_17","applyMessage","_normalizeClass","applyStatusClass","role"],"sources":["/Users/gentil/Desktop/Kozi-ai-agent/src/views/jobseeker/JobDetails.vue"],"sourcesContent":["<template>\n  <IndexComponent />\n  <div\n    class=\"page-wrapper\"\n    id=\"main-wrapper\"\n    data-layout=\"vertical\"\n    data-navbarbg=\"skin6\"\n    data-sidebartype=\"full\"\n    data-sidebar-description=\"fixed\"\n    data-header-description=\"fixed\"\n    style=\"position: absolute; top: 0; left: 0; right: 0; bottom: 0; z-index: 1;\"\n  >\n     <div class=\"body-wrapper\" style=\"margin-top: 70px; margin-left: 270px; background: white; min-height: calc(100vh - 70px); padding: 20px; overflow-y: auto; max-height: calc(100vh - 70px);\">\n      <div class=\"container-fluid\">\n        <div class=\"row\">\n          <div id=\"about\" class=\"section wb\">\n            <div v-if=\"userEmail\" class=\"mx-4 mb-4\">\n        <!-- <p><strong>Your email:</strong> {{ userEmail }}</p>\n        <p><strong>users_id:</strong> {{ userId }}</p> -->\n      </div>\n            <div class=\"container\">\n              <div v-if=\"job\" class=\"job-details\">\n                <div class=\"section-title text-center\">\n                  <h3 style=\"font-family: 'Michroma';\">{{ job.job_title }} - {{ job.location }}</h3>\n                  <p class=\"lead\" style=\"color: darkblue;\">\n                    <strong>Job Opportunity at: {{ job.company }}</strong> <br />\n                    <strong>Published Date: {{ formatDate(job.published_date) }}</strong><br />\n                    <strong>Application Deadline: {{ formatDate(job.deadline_date) }}</strong><br>\n                     <!-- Salary Range: {{job.salary_min }} Rwf - {{job.salary_max}} Rwf  Monthly -->\n                    \n                  </p>\n                </div>\n                <div class=\"job-details\">\n                  <h4><strong>Company Overview</strong></h4>\n                  <p v-html=\"job.job_description\"></p>\n                  <h4><strong>Requirements</strong></h4>\n                  <p v-html=\"job.requirements\" style=\"margin-left: 2rem;\"></p>\n                  <h4><strong>Responsabilities</strong></h4>\n                  <p v-html=\"job.responsability\" style=\"margin-left: 2rem;\"></p>\n                  <h4><strong>conclusion</strong></h4>\n                  <p v-html=\"job.conclusion\"></p>\n\n                  \n                </div>\n                <button\n                  class=\"custom-btn-apply\"\n                  @click=\"applyForJob\"\n                  :disabled=\"isApplying || !job?.job_id || !userId\"\n                >\n                  {{ isApplying ? \"Applying...\" : \"Apply for Job\" }}\n                </button><br><br>\n\n                <div v-if=\"applyMessage\" :class=\"['alert', applyStatusClass]\" role=\"alert\">\n                  {{ applyMessage }}\n                </div>\n\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { globalVariable } from \"@/global\";\nimport IndexComponent from \"./IndexComponent.vue\";\n\n\nexport default {\n  components: {\n    IndexComponent,\n  },\n  data() {\n    return {\n      job: null,\n      isApplying: false,\n      applyMessage: null,\n      applyStatusClass: \"\",\n      userEmail: null,\n      userId: null,\n    };\n  },\n  async mounted() {\n    this.fetchJobDetails();\n    this.getUserEmail();\n    await this.fetchUserId();\n  },\n  methods: {\n    async fetchJobDetails() {\n      const jobId = this.$route.params.job_id;\n      try {\n        const token = localStorage.getItem(\"employeeToken\");\n        const response = await fetch(`${globalVariable}/admin/select_job/${jobId}`, {\n          headers: {\n            Authorization: `Bearer ${token}`,\n          },\n        });\n        const data = await response.json();\n        if (!response.ok) {\n          console.error(\"Failed to fetch job:\", data.message);\n        } else {\n          this.job = data;\n        }\n      } catch (error) {\n        console.error(\"Error fetching job:\", error);\n      }\n    },\n    \n    formatDate(dateStr) {\n      const date = new Date(dateStr);\n      return date.toLocaleDateString(\"en-US\", {\n        year: \"numeric\",\n        month: \"long\",\n        day: \"numeric\",\n      });\n    },\n    async applyForJob() {\n  this.isApplying = true;\n  this.applyMessage = null;\n\n  try {\n    const token = localStorage.getItem(\"employeeToken\");\n    const response = await fetch(`${globalVariable}/seeker/apply`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${token}`,\n      },\n      body: JSON.stringify({\n        job_id: this.job?.job_id,\n        users_id: this.userId,\n        user_email: this.userEmail,\n        company: this.job?.company,\n      }),\n    });\n\n    const result = await response.json();\n    if (!response.ok) {\n      this.applyMessage = result.message || \"Failed to apply.\";\n      this.applyStatusClass = \"alert-danger\";\n    } else {\n      this.applyMessage = result.message;\n      this.applyStatusClass = \"alert-success\";\n    }\n  } catch (error) {\n    console.error(\"Error applying for job:\", error);\n    this.applyMessage = \"An error occurred while applying.\";\n    this.applyStatusClass = \"text-danger\";\n  } finally {\n    this.isApplying = false;\n  }\n},\n    getUserEmail() {\n      const token = localStorage.getItem(\"employeeToken\");\n      if (token) {\n        const payload = token.split('.')[1];\n        const decodedPayload = atob(payload);\n        const parsedPayload = JSON.parse(decodedPayload);\n        this.userEmail = parsedPayload.email;\n      }\n    },\n    async fetchUserId() {\n      const email = this.userEmail;\n      const token = localStorage.getItem(\"employeeToken\");\n\n      if (email && token) {\n        try {\n          const response = await fetch(`${globalVariable}/get_user_id_by_email/${email}`, {\n            headers: { Authorization: `Bearer ${token}` },\n          });\n\n          const data = await response.json();\n          if (response.ok) {\n            this.userId = data.users_id;\n          } else {\n            console.error(\"Error fetching user ID:\", data.message);\n          }\n        } catch (error) {\n          console.error(\"Error fetching user ID:\", error);\n        }\n      }\n    },\n  },\n};\n</script>\n\n<style scoped>\n.custom-btn-apply {\n  background: #EA60A7;\n  color: #fff;\n  padding: 10px 15px;\n  border: none;\n  border-radius: 5px;\n  font-size: 14px;\n  cursor: pointer;\n  margin-top: 20px;\n  transition: background 0.3s ease;\n}\n.custom-btn-apply:hover {\n  background: #fff;\n  color: #EA60A7;\n  border: 1px solid #EA60A7;\n}\n.text-success {\n  color: green;\n  margin-top: 10px;\n}\n.text-danger {\n  color: red;\n  margin-top: 10px;\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}