{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass, Fragment as _Fragment } from \"vue\";\nconst _hoisted_1 = {\n  class: \"page-wrapper\",\n  id: \"main-wrapper\",\n  \"data-layout\": \"vertical\",\n  \"data-navbarbg\": \"skin6\",\n  \"data-sidebartype\": \"full\",\n  \"data-sidebar-description\": \"fixed\",\n  \"data-header-description\": \"fixed\"\n};\nconst _hoisted_2 = {\n  class: \"body-wrapper\",\n  style: {\n    \"margin-top\": \"-3rem\"\n  }\n};\nconst _hoisted_3 = {\n  class: \"container-fluid\"\n};\nconst _hoisted_4 = {\n  class: \"row\"\n};\nconst _hoisted_5 = {\n  id: \"about\",\n  class: \"section wb\"\n};\nconst _hoisted_6 = {\n  class: \"container\"\n};\nconst _hoisted_7 = {\n  key: 0,\n  class: \"job-details\"\n};\nconst _hoisted_8 = {\n  class: \"section-title text-center\"\n};\nconst _hoisted_9 = {\n  style: {\n    \"font-family\": \"'Michroma'\"\n  }\n};\nconst _hoisted_10 = {\n  class: \"lead\",\n  style: {\n    \"color\": \"darkblue\"\n  }\n};\nconst _hoisted_11 = {\n  class: \"job-details\"\n};\nconst _hoisted_12 = [\"innerHTML\"];\nconst _hoisted_13 = [\"innerHTML\"];\nconst _hoisted_14 = [\"innerHTML\"];\nconst _hoisted_15 = [\"innerHTML\"];\nconst _hoisted_16 = {\n  key: 0,\n  class: \"text-center mt-4\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_IndexComponent = _resolveComponent(\"IndexComponent\");\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createVNode(_component_IndexComponent), _createElementVNode(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"div\", _hoisted_5, [_createCommentVNode(\" <div class=\\\"card-body\\\">\\n        <h5 class=\\\"text-center\\\">Logged in as:</h5>\\n        <h6 class=\\\"text-center text-muted\\\">{{ userEmail }}</h6>\\n        <p><strong>jobid ID from URL:</strong> {{ jobIdurl }}</p>\\n      </div> \"), _createElementVNode(\"div\", _hoisted_6, [$data.job ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, [_createElementVNode(\"div\", _hoisted_8, [_createElementVNode(\"h2\", _hoisted_9, _toDisplayString($data.job.job_title) + \" - \" + _toDisplayString($data.job.location), 1 /* TEXT */), _createElementVNode(\"p\", _hoisted_10, [_createElementVNode(\"strong\", null, \"Job Opportunity at: \" + _toDisplayString($data.job.company), 1 /* TEXT */), _cache[2] || (_cache[2] = _createTextVNode()), _cache[3] || (_cache[3] = _createElementVNode(\"br\", null, null, -1 /* HOISTED */)), _createElementVNode(\"strong\", null, \"Published Date: \" + _toDisplayString($options.formatDate($data.job.published_date)), 1 /* TEXT */), _cache[4] || (_cache[4] = _createElementVNode(\"br\", null, null, -1 /* HOISTED */)), _createTextVNode(\" Salary Range: \" + _toDisplayString($data.job.salary_min) + \" Rwf - \" + _toDisplayString($data.job.salary_max) + \" Rwf Monthly \", 1 /* TEXT */)])]), _createElementVNode(\"div\", _hoisted_11, [_cache[5] || (_cache[5] = _createElementVNode(\"h4\", null, [_createElementVNode(\"strong\", null, \"Company Overview\")], -1 /* HOISTED */)), _createElementVNode(\"p\", {\n    innerHTML: $data.job.job_description\n  }, null, 8 /* PROPS */, _hoisted_12), _cache[6] || (_cache[6] = _createElementVNode(\"h4\", null, [_createElementVNode(\"strong\", null, \"Requirements\")], -1 /* HOISTED */)), _createElementVNode(\"p\", {\n    innerHTML: $data.job.requirements,\n    style: {\n      \"margin-left\": \"2rem\"\n    }\n  }, null, 8 /* PROPS */, _hoisted_13), _cache[7] || (_cache[7] = _createElementVNode(\"h4\", null, [_createElementVNode(\"strong\", null, \"Responsabilities\")], -1 /* HOISTED */)), _createElementVNode(\"p\", {\n    innerHTML: $data.job.responsability,\n    style: {\n      \"margin-left\": \"2rem\"\n    }\n  }, null, 8 /* PROPS */, _hoisted_14), _cache[8] || (_cache[8] = _createElementVNode(\"h4\", null, [_createElementVNode(\"strong\", null, \"conclusion\")], -1 /* HOISTED */)), _createElementVNode(\"p\", {\n    innerHTML: $data.job.conclusion\n  }, null, 8 /* PROPS */, _hoisted_15)]), $data.job ? (_openBlock(), _createElementBlock(\"div\", _hoisted_16, [$data.job.status === 0 ? (_openBlock(), _createElementBlock(\"button\", {\n    key: 0,\n    onClick: _cache[0] || (_cache[0] = (...args) => $options.publishJob && $options.publishJob(...args)),\n    class: \"btn btn-primary\"\n  }, \" Publish \")) : $data.job.status === 1 ? (_openBlock(), _createElementBlock(\"button\", {\n    key: 1,\n    onClick: _cache[1] || (_cache[1] = (...args) => $options.unpublishJob && $options.unpublishJob(...args)),\n    class: \"btn btn-cancel\"\n  }, \" Unpublish \")) : _createCommentVNode(\"v-if\", true)])) : _createCommentVNode(\"v-if\", true), $data.applyMessage ? (_openBlock(), _createElementBlock(\"div\", {\n    key: 1,\n    class: _normalizeClass(['alert', $data.applyStatusClass]),\n    role: \"alert\"\n  }, _toDisplayString($data.applyMessage), 3 /* TEXT, CLASS */)) : _createCommentVNode(\"v-if\", true)])) : _createCommentVNode(\"v-if\", true)])])])])])])], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["class","id","style","key","_createElementBlock","_Fragment","_createVNode","_component_IndexComponent","_createElementVNode","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_createCommentVNode","_hoisted_6","$data","job","_hoisted_7","_hoisted_8","_hoisted_9","_toDisplayString","job_title","location","_hoisted_10","company","_createTextVNode","$options","formatDate","published_date","salary_min","salary_max","_hoisted_11","innerHTML","job_description","_hoisted_12","requirements","_hoisted_13","responsability","_hoisted_14","conclusion","_hoisted_15","_hoisted_16","status","onClick","_cache","args","publishJob","unpublishJob","applyMessage","_normalizeClass","applyStatusClass","role"],"sources":["/Users/gentil/Desktop/Kozi-ai-agent/src/views/admin/JobDetails.vue"],"sourcesContent":["<template>\n  <IndexComponent />\n  <div\n    class=\"page-wrapper\"\n    id=\"main-wrapper\"\n    data-layout=\"vertical\"\n    data-navbarbg=\"skin6\"\n    data-sidebartype=\"full\"\n    data-sidebar-description=\"fixed\"\n    data-header-description=\"fixed\"\n  >\n    <div class=\"body-wrapper\" style=\"margin-top: -3rem;\">\n    \n      <div class=\"container-fluid\">\n        <div class=\"row\">\n          <div id=\"about\" class=\"section wb\">\n            <!-- <div class=\"card-body\">\n        <h5 class=\"text-center\">Logged in as:</h5>\n        <h6 class=\"text-center text-muted\">{{ userEmail }}</h6>\n        <p><strong>jobid ID from URL:</strong> {{ jobIdurl }}</p>\n      </div> -->\n            <div class=\"container\">\n              <div v-if=\"job\" class=\"job-details\">\n                <div class=\"section-title text-center\">\n                  <h2 style=\"font-family: 'Michroma';\">{{ job.job_title }} - {{ job.location }}</h2>\n                  <p class=\"lead\" style=\"color: darkblue;\">\n                    <strong>Job Opportunity at: {{ job.company }}</strong> <br />\n                    <strong>Published Date: {{ formatDate(job.published_date) }}</strong><br />\n                    \n                  Salary Range: {{job.salary_min }} Rwf - {{job.salary_max}} Rwf  Monthly\n\n                    \n                  </p>\n                </div>\n                <div class=\"job-details\">\n                  <h4><strong>Company Overview</strong></h4>\n                  <p v-html=\"job.job_description\"></p>\n                  <h4><strong>Requirements</strong></h4>\n                  <p v-html=\"job.requirements\" style=\"margin-left: 2rem;\"></p>\n                  <h4><strong>Responsabilities</strong></h4>\n                  <p v-html=\"job.responsability\" style=\"margin-left: 2rem;\"></p>\n                  <h4><strong>conclusion</strong></h4>\n                  <p v-html=\"job.conclusion\"></p>\n\n                </div><div class=\"text-center mt-4\" v-if=\"job\">\n                  <button\n                   v-if=\"job.status === 0\"\n                    @click=\"publishJob\"\n                     class=\"btn btn-primary\"\n                     >\n                     Publish\n                    </button>\n                    <button\n                    v-else-if=\"job.status === 1\"\n                     @click=\"unpublishJob\"\n                     class=\"btn btn-cancel\"\n                     >\n                     Unpublish\n                    </button>\n                  </div>\n                  <div v-if=\"applyMessage\" :class=\"['alert', applyStatusClass]\" role=\"alert\">\n                  {{ applyMessage }}\n                </div>\n\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  \n</template>\n\n<script>\nimport { globalVariable } from \"@/global\";\nimport IndexComponent from \"./IndexComponent.vue\";\n\n\nexport default {\n  components: {\n    IndexComponent,\n  },\n  data() {\n    return {\n      job: null,\n      isApplying: false,\n      applyMessage: null,\n      applyStatusClass: \"\",\n      userEmail: null,\n      userId: null,\n      jobIdurl: null,\n    };\n  },\n  async mounted() {\n    this.jobIdurl = this.$route.params.id;\n    this.fetchJobDetails();\n    this.getUserEmail();\n    await this.fetchUserId();\n  },\n  methods: {\n    async fetchJobDetails() {\n      \n      try {\n        const token = localStorage.getItem(\"adminToken\");\n        const response = await fetch(`${globalVariable}/admin/select_job/${this.jobIdurl}`, {\n          headers: {\n            Authorization: `Bearer ${token}`,\n          },\n        });\n        const data = await response.json();\n        if (!response.ok) {\n          console.error(\"Failed to fetch job:\", data.message);\n        } else {\n          this.job = data;\n        }\n      } catch (error) {\n        console.error(\"Error fetching job:\", error);\n      }\n    },\n    formatDate(dateStr) {\n      const date = new Date(dateStr);\n      return date.toLocaleDateString(\"en-US\", {\n        year: \"numeric\",\n        month: \"long\",\n        day: \"numeric\",\n      });\n    },\n\n    getUserEmail() {\n      const token = localStorage.getItem(\"adminToken\");\n      if (token) {\n        const payload = token.split('.')[1];\n        const decodedPayload = atob(payload);\n        const parsedPayload = JSON.parse(decodedPayload);\n        this.userEmail = parsedPayload.email;\n      }\n    },\n    async fetchUserId() {\n      const email = this.userEmail;\n      const token = localStorage.getItem(\"adminToken\");\n\n      if (email && token) {\n        try {\n          const response = await fetch(`${globalVariable}/get_user_id_by_email/${email}`, {\n            headers: { Authorization: `Bearer ${token}` },\n          });\n\n          const data = await response.json();\n          if (response.ok) {\n            this.userId = data.users_id;\n          } else {\n            console.error(\"Error fetching user ID:\", data.message);\n          }\n        } catch (error) {\n          console.error(\"Error fetching user ID:\", error);\n        }\n      }\n    },\n    async publishJob() {\n  try {\n    const token = localStorage.getItem(\"adminToken\");\n    const response = await fetch(`${globalVariable}/admin/publish/${this.jobIdurl}`, {\n      method: \"POST\",\n      headers: {\n        Authorization: `Bearer ${token}`,\n      },\n    });\n\n    const data = await response.json();\n    if (response.ok) {\n      this.job.status = 1;\n      this.applyMessage = \"Job published successfully.\";\n      this.applyStatusClass = \"alert-success\";\n    } else {\n      this.applyMessage = data.message || \"Failed to publish job.\";\n      this.applyStatusClass = \"alert-danger\";\n    }\n  } catch (error) {\n    this.applyMessage = \"An error occurred while publishing the job.\";\n    this.applyStatusClass = \"alert-danger\";\n    console.error(\"Error publishing job:\", error);\n  }\n},\n\nasync unpublishJob() {\n  try {\n    const token = localStorage.getItem(\"adminToken\");\n    const response = await fetch(`${globalVariable}/admin/unpublish/${this.jobIdurl}`, {\n      method: \"POST\",\n      headers: {\n        Authorization: `Bearer ${token}`,\n      },\n    });\n\n    const data = await response.json();\n    if (response.ok) {\n      this.job.status = 0;\n      this.applyMessage = \"Job unpublished successfully.\";\n      this.applyStatusClass = \"alert-warning\";\n    } else {\n      this.applyMessage = data.message || \"Failed to unpublish job.\";\n      this.applyStatusClass = \"alert-danger\";\n    }\n  } catch (error) {\n    this.applyMessage = \"An error occurred while unpublishing the job.\";\n    this.applyStatusClass = \"alert-danger\";\n    console.error(\"Error unpublishing job:\", error);\n  }\n},\n\n\n\n  },\n};\n</script>\n\n<style scoped>\n\n.btn-primary {\n  background-color: #E960A6;\n  color: white;\n}\n\n.btn-primary:hover {\n  background-color: #E960A6;\n  color: teal;\n}\n\n.btn-cancel {\n  background-color: teal;\n  color: white;\n}\n\n.btn-cancel:hover {\n  background-color: teal;\n  color: #E960A6;\n}\n.custom-btn-apply {\n  background: #EA60A7;\n  color: #fff;\n  padding: 10px 15px;\n  border: none;\n  border-radius: 5px;\n  font-size: 14px;\n  cursor: pointer;\n  margin-top: 20px;\n  transition: background 0.3s ease;\n}\n.custom-btn-apply:hover {\n  background: #fff;\n  color: #EA60A7;\n  border: 1px solid #EA60A7;\n}\n.text-success {\n  color: green;\n  margin-top: 10px;\n}\n.text-danger {\n  color: red;\n  margin-top: 10px;\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}