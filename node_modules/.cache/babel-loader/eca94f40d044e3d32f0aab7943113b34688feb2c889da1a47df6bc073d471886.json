{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, createCommentVNode as _createCommentVNode, vModelText as _vModelText, withDirectives as _withDirectives, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, vModelSelect as _vModelSelect, normalizeClass as _normalizeClass } from \"vue\";\nconst _hoisted_1 = {\n  class: \"page-wrapper\",\n  id: \"main-wrapper\",\n  \"data-layout\": \"vertical\",\n  \"data-navbarbg\": \"skin6\",\n  \"data-sidebartype\": \"full\",\n  \"data-sidebar-description\": \"fixed\",\n  \"data-header-description\": \"fixed\",\n  style: {\n    \"position\": \"absolute\",\n    \"top\": \"0\",\n    \"left\": \"0\",\n    \"right\": \"0\",\n    \"bottom\": \"0\",\n    \"z-index\": \"1\"\n  }\n};\nconst _hoisted_2 = {\n  class: \"body-wrapper\",\n  style: {\n    \"margin-top\": \"70px\",\n    \"margin-left\": \"270px\",\n    \"background\": \"white\",\n    \"min-height\": \"calc(100vh - 70px)\",\n    \"padding\": \"20px\",\n    \"overflow-y\": \"auto\",\n    \"max-height\": \"calc(100vh - 70px)\"\n  }\n};\nconst _hoisted_3 = {\n  class: \"row mb-3\"\n};\nconst _hoisted_4 = {\n  class: \"col-md-8\"\n};\nconst _hoisted_5 = {\n  class: \"col-md-3\"\n};\nconst _hoisted_6 = [\"value\"];\nconst _hoisted_7 = {\n  key: 0,\n  class: \"d-flex justify-content-center my-5\"\n};\nconst _hoisted_8 = {\n  key: 1,\n  class: \"d-flex justify-content-center my-4\"\n};\nconst _hoisted_9 = {\n  key: 2,\n  class: \"table-responsive\"\n};\nconst _hoisted_10 = {\n  class: \"table table-bordered\"\n};\nconst _hoisted_11 = {\n  class: \"d-flex gap-2\"\n};\nconst _hoisted_12 = [\"onClick\", \"disabled\"];\nconst _hoisted_13 = [\"onClick\"];\nconst _hoisted_14 = [\"onClick\", \"disabled\"];\nconst _hoisted_15 = {\n  key: 0,\n  class: \"spinner-border spinner-border-sm me-1\",\n  role: \"status\"\n};\nconst _hoisted_16 = {\n  key: 3,\n  class: \"d-flex justify-content-center mt-4\"\n};\nconst _hoisted_17 = {\n  class: \"pagination\"\n};\nconst _hoisted_18 = [\"onClick\"];\nconst _hoisted_19 = {\n  key: 0,\n  class: \"modal-overlay\"\n};\nconst _hoisted_20 = {\n  class: \"modal-content\"\n};\nconst _hoisted_21 = [\"disabled\"];\nconst _hoisted_22 = {\n  key: 0,\n  class: \"spinner-border spinner-border-sm me-1\",\n  role: \"status\"\n};\nconst _hoisted_23 = [\"disabled\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_IndexComponent = _resolveComponent(\"IndexComponent\");\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createVNode(_component_IndexComponent), _createElementVNode(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_cache[11] || (_cache[11] = _createElementVNode(\"h5\", {\n    class: \"card-title fw-semibold mb-4\",\n    style: {\n      \"color\": \"#E960A6\"\n    }\n  }, [_createElementVNode(\"i\", {\n    class: \"ti ti-user-plus\"\n  }), _createTextVNode(\" View Seekers \")], -1 /* HOISTED */)), _createCommentVNode(\" <p><strong>Your email:</strong> {{ userEmail }}</p> \"), _createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [_withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.searchQuery = $event),\n    class: \"form-control\",\n    placeholder: \"Search by name,email, skills , province or  district\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.searchQuery]])]), _createElementVNode(\"div\", _hoisted_5, [_withDirectives(_createElementVNode(\"select\", {\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.selectedCategoryId = $event),\n    class: \"form-control\",\n    style: {\n      \"height\": \"48px\",\n      \"padding-top\": \"8px\",\n      \"padding-bottom\": \"8px\"\n    }\n  }, [_cache[6] || (_cache[6] = _createElementVNode(\"option\", {\n    disabled: \"\",\n    value: \"\"\n  }, \"CHOOSE CATEGORY\", -1 /* HOISTED */)), _cache[7] || (_cache[7] = _createElementVNode(\"option\", {\n    value: \"\"\n  }, \"All Categories\", -1 /* HOISTED */)), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.categories, category => {\n    return _openBlock(), _createElementBlock(\"option\", {\n      key: category.id,\n      value: category.id\n    }, _toDisplayString(category.name), 9 /* TEXT, PROPS */, _hoisted_6);\n  }), 128 /* KEYED_FRAGMENT */))], 512 /* NEED_PATCH */), [[_vModelSelect, $data.selectedCategoryId]])])]), _createCommentVNode(\" Loading Spinner \"), $data.isLoading ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, _cache[8] || (_cache[8] = [_createElementVNode(\"div\", {\n    class: \"text-center\"\n  }, [_createElementVNode(\"div\", {\n    class: \"spinner-border text-primary\",\n    role: \"status\",\n    style: {\n      \"width\": \"3rem\",\n      \"height\": \"3rem\"\n    }\n  }, [_createElementVNode(\"span\", {\n    class: \"visually-hidden\"\n  }, \"Loading...\")]), _createElementVNode(\"div\", {\n    class: \"mt-2\"\n  }, [_createElementVNode(\"p\", {\n    class: \"text-muted\"\n  }, \"Loading job seekers...\")])], -1 /* HOISTED */)]))) : $options.filteredJobs.length === 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_8, _cache[9] || (_cache[9] = [_createElementVNode(\"div\", {\n    class: \"alert alert-danger text-center\",\n    style: {\n      \"width\": \"40rem\"\n    }\n  }, \" No job seekers found. \", -1 /* HOISTED */)]))) : _createCommentVNode(\"v-if\", true), !$data.isLoading && $options.filteredJobs.length > 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_9, [_createElementVNode(\"table\", _hoisted_10, [_cache[10] || (_cache[10] = _createElementVNode(\"thead\", {\n    class: \"table-light\"\n  }, [_createElementVNode(\"tr\", null, [_createElementVNode(\"th\", null, \"Ids\"), _createElementVNode(\"th\", null, \"NAMES\"), _createElementVNode(\"th\", null, \"PROVINCE\"), _createElementVNode(\"th\", null, \"CATEGORY\"), _createElementVNode(\"th\", null, \"SKILLS\"), _createElementVNode(\"th\", null, \"SALARY\"), _createElementVNode(\"th\", null, \"ACTION\")])], -1 /* HOISTED */)), _createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($options.paginatedJobs, (seeker, index) => {\n    return _openBlock(), _createElementBlock(\"tr\", {\n      key: seeker.users_id\n    }, [_createElementVNode(\"td\", null, _toDisplayString(($data.currentPage - 1) * $data.itemsPerPage + index + 1), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(seeker.first_name) + \" \" + _toDisplayString(seeker.last_name), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(seeker.province), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString($options.getCategoryName(seeker.categories_id)), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(seeker.bio && seeker.bio.length > 40 ? seeker.bio.substring(0, 40) + '...' : seeker.bio || 'N/A'), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(seeker.salary), 1 /* TEXT */), _createElementVNode(\"td\", null, [_createElementVNode(\"div\", _hoisted_11, [_createElementVNode(\"button\", {\n      class: \"btn btn-primary btn-sm\",\n      onClick: $event => $options.goToEdit(seeker.users_id),\n      disabled: !$options.isAdmin || $data.isDeletingId === seeker.users_id\n    }, \" Edit \", 8 /* PROPS */, _hoisted_12), _createElementVNode(\"button\", {\n      class: \"btn btn-cancel btn-sm\",\n      onClick: $event => $options.goToMore(seeker.users_id)\n    }, \"More\", 8 /* PROPS */, _hoisted_13), _createElementVNode(\"button\", {\n      class: \"btn btn-primary btn-sm\",\n      onClick: $event => $options.confirmDelete(seeker.users_id),\n      disabled: !$options.isAdmin || $data.isDeletingId === seeker.users_id\n    }, [$data.isDeletingId === seeker.users_id ? (_openBlock(), _createElementBlock(\"span\", _hoisted_15)) : _createCommentVNode(\"v-if\", true), _createTextVNode(_toDisplayString($data.isDeletingId === seeker.users_id ? 'Deleting...' : 'Delete'), 1 /* TEXT */)], 8 /* PROPS */, _hoisted_14)])])]);\n  }), 128 /* KEYED_FRAGMENT */))])])])) : _createCommentVNode(\"v-if\", true), !$data.isLoading && $options.totalPages > 1 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_16, [_createElementVNode(\"nav\", null, [_createElementVNode(\"ul\", _hoisted_17, [_createElementVNode(\"li\", {\n    class: _normalizeClass([\"page-item\", {\n      disabled: $data.currentPage === 1\n    }])\n  }, [_createElementVNode(\"button\", {\n    class: \"page-link\",\n    onClick: _cache[2] || (_cache[2] = $event => $options.goToPage($data.currentPage - 1))\n  }, \"Previous\")], 2 /* CLASS */), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($options.visiblePageNumbers, page => {\n    return _openBlock(), _createElementBlock(\"li\", {\n      key: page,\n      class: _normalizeClass([\"page-item\", {\n        active: page === $data.currentPage\n      }])\n    }, [_createElementVNode(\"button\", {\n      class: \"page-link\",\n      onClick: $event => $options.goToPage(page)\n    }, _toDisplayString(page), 9 /* TEXT, PROPS */, _hoisted_18)], 2 /* CLASS */);\n  }), 128 /* KEYED_FRAGMENT */)), _createElementVNode(\"li\", {\n    class: _normalizeClass([\"page-item\", {\n      disabled: $data.currentPage === $options.totalPages\n    }])\n  }, [_createElementVNode(\"button\", {\n    class: \"page-link\",\n    onClick: _cache[3] || (_cache[3] = $event => $options.goToPage($data.currentPage + 1))\n  }, \"Next\")], 2 /* CLASS */)])])])) : _createCommentVNode(\"v-if\", true)])]), $data.showModal ? (_openBlock(), _createElementBlock(\"div\", _hoisted_19, [_createElementVNode(\"div\", _hoisted_20, [_cache[13] || (_cache[13] = _createElementVNode(\"h5\", null, \"Are you sure you want to delete this job seeker content?\", -1 /* HOISTED */)), _createElementVNode(\"div\", null, [_createElementVNode(\"button\", {\n    class: \"btn btn-primary mt-3\",\n    onClick: _cache[4] || (_cache[4] = $event => $options.deleteAbout($data.selectedAboutId)),\n    disabled: $data.isDeleting\n  }, [$data.isDeleting ? (_openBlock(), _createElementBlock(\"span\", _hoisted_22)) : _createCommentVNode(\"v-if\", true), _createTextVNode(\" \" + _toDisplayString($data.isDeleting ? 'Deleting...' : 'Yes, Delete'), 1 /* TEXT */)], 8 /* PROPS */, _hoisted_21), _cache[12] || (_cache[12] = _createTextVNode(\"Â  \")), _createElementVNode(\"button\", {\n    class: \"btn btn-cancel mt-3\",\n    style: {\n      \"background-color\": \"teal\",\n      \"color\": \"white\"\n    },\n    onClick: _cache[5] || (_cache[5] = (...args) => $options.closeModal && $options.closeModal(...args)),\n    disabled: $data.isDeleting\n  }, \" Cancel \", 8 /* PROPS */, _hoisted_23)])])])) : _createCommentVNode(\"v-if\", true)], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["class","id","style","key","role","_createElementBlock","_Fragment","_createVNode","_component_IndexComponent","_createElementVNode","_hoisted_1","_hoisted_2","_createTextVNode","_createCommentVNode","_hoisted_3","_hoisted_4","type","_cache","$event","$data","searchQuery","placeholder","_hoisted_5","selectedCategoryId","disabled","value","_renderList","categories","category","name","_hoisted_6","isLoading","_hoisted_7","$options","filteredJobs","length","_hoisted_8","_hoisted_9","_hoisted_10","paginatedJobs","seeker","index","users_id","_toDisplayString","currentPage","itemsPerPage","first_name","last_name","province","getCategoryName","categories_id","bio","substring","salary","_hoisted_11","onClick","goToEdit","isAdmin","isDeletingId","_hoisted_12","goToMore","_hoisted_13","confirmDelete","_hoisted_15","_hoisted_14","totalPages","_hoisted_16","_hoisted_17","_normalizeClass","goToPage","visiblePageNumbers","page","active","_hoisted_18","showModal","_hoisted_19","_hoisted_20","deleteAbout","selectedAboutId","isDeleting","_hoisted_22","_hoisted_21","args","closeModal","_hoisted_23"],"sources":["/Users/gentil/Desktop/Kozi-ai-agent/src/views/admin/ViewSeekers.vue"],"sourcesContent":["<template>\n  <IndexComponent />\n  <div\n    class=\"page-wrapper\"\n    id=\"main-wrapper\"\n    data-layout=\"vertical\"\n    data-navbarbg=\"skin6\"\n    data-sidebartype=\"full\"\n    data-sidebar-description=\"fixed\"\n    data-header-description=\"fixed\"\n    style=\"position: absolute; top: 0; left: 0; right: 0; bottom: 0; z-index: 1;\"\n  >\n    <div class=\"body-wrapper\" style=\"margin-top: 70px; margin-left: 270px; background: white; min-height: calc(100vh - 70px); padding: 20px; overflow-y: auto; max-height: calc(100vh - 70px);\">\n      <h5 class=\"card-title fw-semibold mb-4\" style=\"color: #E960A6;\">\n        <i class=\"ti ti-user-plus\"></i> View Seekers\n      </h5>\n      <!-- <p><strong>Your email:</strong> {{ userEmail }}</p> -->\n        \n      \n      <div class=\"row mb-3\">\n        <div class=\"col-md-8\">\n          <input\n            type=\"text\"\n            v-model=\"searchQuery\"\n            class=\"form-control\"\n            placeholder=\"Search by name,email, skills , province or  district\"\n          />\n        </div>\n\n        <div class=\"col-md-3\">\n          <select v-model=\"selectedCategoryId\" class=\"form-control\" style=\"height: 48px; padding-top: 8px; padding-bottom: 8px;\">\n            <option disabled value=\"\">CHOOSE CATEGORY</option>\n            <option value=\"\">All Categories</option>\n            <option\n              v-for=\"category in categories\"\n              :key=\"category.id\"\n              :value=\"category.id\"\n            >\n              {{ category.name }}\n            </option>\n          </select>\n        </div>\n\n        \n      </div>\n\n      <!-- Loading Spinner -->\n      <div v-if=\"isLoading\" class=\"d-flex justify-content-center my-5\">\n        <div class=\"text-center\">\n          <div class=\"spinner-border text-primary\" role=\"status\" style=\"width: 3rem; height: 3rem;\">\n            <span class=\"visually-hidden\">Loading...</span>\n          </div>\n          <div class=\"mt-2\">\n            <p class=\"text-muted\">Loading job seekers...</p>\n          </div>\n        </div>\n      </div>\n      \n      <div v-else-if=\"filteredJobs.length === 0\" class=\"d-flex justify-content-center my-4\">\n        <div class=\"alert alert-danger text-center\" style=\"width: 40rem;\">\n          No job seekers found.\n        </div>\n      </div>\n\n      <div class=\"table-responsive\" v-if=\"!isLoading && filteredJobs.length > 0\">\n        <table class=\"table table-bordered\">\n          <thead class=\"table-light\">\n            <tr>\n              <th>Ids</th>\n              <th>NAMES</th>\n              <th>PROVINCE</th>\n              <th>CATEGORY</th>\n              <th>SKILLS</th>\n              <th>SALARY</th>\n              <th>ACTION</th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr v-for=\"(seeker, index) in paginatedJobs\" :key=\"seeker.users_id\">\n              <td>{{ (currentPage - 1) * itemsPerPage + index + 1 }}</td>\n              <td>{{ seeker.first_name }} {{ seeker.last_name }}</td>\n              <td>{{ seeker.province }}</td>\n              <td>{{ getCategoryName(seeker.categories_id) }}</td>\n              <td>{{ seeker.bio && seeker.bio.length > 40 ? seeker.bio.substring(0, 40) + '...' : seeker.bio || 'N/A' }}</td>\n              <td>{{ seeker.salary }}</td>\n              \n\n              <td>\n                <div class=\"d-flex gap-2\">\n                  \n                  <button \n                  class=\"btn btn-primary btn-sm\" \n                  @click=\"goToEdit(seeker.users_id)\"\n                  :disabled=\"!isAdmin || isDeletingId === seeker.users_id\"\n                  >\n                  Edit\n                </button>\n                  <button class=\"btn btn-cancel btn-sm\" @click=\"goToMore(seeker.users_id)\">More</button>\n                  <button \n                class=\"btn btn-primary btn-sm\" \n                @click=\"confirmDelete(seeker.users_id)\"\n                :disabled=\"!isAdmin || isDeletingId === seeker.users_id\"\n                >\n                <span v-if=\"isDeletingId === seeker.users_id\" class=\"spinner-border spinner-border-sm me-1\" role=\"status\"></span>{{ isDeletingId === seeker.users_id ? 'Deleting...' : 'Delete' }}\n              </button>\n                </div>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n\n      <div class=\"d-flex justify-content-center mt-4\" v-if=\"!isLoading && totalPages > 1\">\n        <nav>\n          <ul class=\"pagination\">\n            <li class=\"page-item\" :class=\"{ disabled: currentPage === 1 }\">\n              <button class=\"page-link\" @click=\"goToPage(currentPage - 1)\">Previous</button>\n            </li>\n\n            <li\n              v-for=\"page in visiblePageNumbers\"\n              :key=\"page\"\n              class=\"page-item\"\n              :class=\"{ active: page === currentPage }\"\n            >\n              <button class=\"page-link\" @click=\"goToPage(page)\">{{ page }}</button>\n            </li>\n\n            <li class=\"page-item\" :class=\"{ disabled: currentPage === totalPages }\">\n              <button class=\"page-link\" @click=\"goToPage(currentPage + 1)\">Next</button>\n            </li>\n          </ul>\n        </nav>\n      </div>\n\n    </div>\n  </div>\n\n  <div v-if=\"showModal\" class=\"modal-overlay\">\n    <div class=\"modal-content\">\n      <h5>Are you sure you want to delete this job seeker content?</h5>\n      <div>\n        <button \n          class=\"btn btn-primary mt-3\" \n          @click=\"deleteAbout(selectedAboutId)\"\n          :disabled=\"isDeleting\"\n        >\n          <span v-if=\"isDeleting\" class=\"spinner-border spinner-border-sm me-1\" role=\"status\"></span>\n          {{ isDeleting ? 'Deleting...' : 'Yes, Delete' }}\n        </button>&nbsp;\n        <button \n          class=\"btn btn-cancel mt-3\" \n          style=\"background-color: teal; color: white;\" \n          @click=\"closeModal\"\n          :disabled=\"isDeleting\"\n        >\n          Cancel\n        </button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport IndexComponent from \"./IndexComponent.vue\";\nimport { globalVariable } from \"@/global\";\n\nexport default {\n  name: \"MainWrapper\",\n  components: { IndexComponent },\n  data() {\n    return {\n      uploadsUrl: globalVariable + \"/uploads/logo/\",\n      // Load search state from localStorage on initialization\n      searchQuery: localStorage.getItem(\"seekers_search_query\") || \"\",\n      selectedCategoryId: localStorage.getItem(\"seekers_selected_category\") || \"\",\n      currentPage: parseInt(localStorage.getItem(\"seekers_current_page\")) || 1,\n      itemsPerPage: 20,\n      form: {\n        users_id: null,\n        job_title: \"\",\n        company: \"\",\n        deadline_date: \"\",\n        job_description: \"\",\n        logo: \"\",\n        location: \"\",\n      },\n      jobs: [],\n      categories: [],\n      categoryNames: {},\n      isSubmitting: false,\n      isLoading: true, // Main loading state\n      isDeleting: false, // Delete operation loading state\n      isDeletingId: null, // Track which item is being deleted\n      status: {\n        success: false,\n        message: \"\",\n      },\n      userEmail: \"\",\n      userId: \"\",\n      showModal: false,\n      selectedAboutId: null,\n    };\n  },\n  computed: {\n    isAdmin() {\n    return this.userEmail.toLowerCase() === \"admin@kozi.rw\";\n  },\n    filteredJobs() {\n      const query = this.searchQuery.toLowerCase();\n      return this.jobs.filter((job) => {\n        const fullName = `${job.first_name} ${job.last_name}`.toLowerCase();\n        const province = (job.province || '').toLowerCase();\n        const bio = (job.bio || '').toLowerCase();\n        const district = (job.district || '').toLowerCase();\n        const email = (job.email || '').toLowerCase();\n        const matchesSearch = !query || fullName.includes(query) || province.includes(query) || bio.includes(query) || email.includes(query) || district.includes(query);\n        const matchesCategory = !this.selectedCategoryId || job.categories_id == this.selectedCategoryId;\n        return matchesSearch && matchesCategory;\n      });\n    },\n    paginatedJobs() {\n      const start = (this.currentPage - 1) * this.itemsPerPage;\n      const end = start + this.itemsPerPage;\n      return this.filteredJobs.slice(start, end);\n    },\n    totalPages() {\n      return Math.ceil(this.filteredJobs.length / this.itemsPerPage);\n    },\n    visiblePageNumbers() {\n      const maxPagesToShow = 5;\n      const pages = [];\n\n      let start = Math.max(this.currentPage - Math.floor(maxPagesToShow / 2), 1);\n      let end = start + maxPagesToShow - 1;\n\n      if (end > this.totalPages) {\n        end = this.totalPages;\n        start = Math.max(end - maxPagesToShow + 1, 1);\n      }\n\n      for (let i = start; i <= end; i++) {\n        pages.push(i);\n      }\n\n      return pages;\n    },\n  },\n  watch: {\n    searchQuery() {\n      this.currentPage = 1;\n      // Save to localStorage whenever search query changes\n      localStorage.setItem(\"seekers_search_query\", this.searchQuery);\n      localStorage.setItem(\"seekers_current_page\", \"1\");\n    },\n    selectedCategoryId() {\n      this.currentPage = 1;\n      // Save to localStorage whenever category changes\n      localStorage.setItem(\"seekers_selected_category\", this.selectedCategoryId);\n      localStorage.setItem(\"seekers_current_page\", \"1\");\n    },\n    currentPage() {\n      // Save current page to localStorage\n      localStorage.setItem(\"seekers_current_page\", this.currentPage.toString());\n    }\n  },\n  async mounted() {\n    this.userEmail = localStorage.getItem(\"userEmail\") || \"\";\n    \n    try {\n      await this.fetchCategories();\n      if (this.userEmail) {\n        await this.getUserIdFromEmail();\n      }\n    } catch (error) {\n      console.error(\"Error during initialization:\", error);\n    } finally {\n      this.isLoading = false;\n    }\n  },\n  methods: {\n    handleFileUpload(event) {\n      this.form.logo = event.target.files[0];\n    },\n\n    async fetchJobsByUser() {\n      try {\n        this.isLoading = true;\n        const token = localStorage.getItem(\"adminToken\");\n        if (!this.userId) return;\n        \n        const res = await fetch(`${globalVariable}/admin/job_seekers`, {\n          headers: {\n            Authorization: `Bearer ${token}`,\n          },\n        });\n        \n        if (!res.ok) throw new Error(\"Failed to fetch jobs\");\n        const data = await res.json();\n        this.jobs = data;\n\n        const uniqueCategoryIds = [...new Set(data.map(job => job.categories_id).filter(id => id))];\n        for (const categoryId of uniqueCategoryIds) {\n          await this.fetchCategoryName(categoryId);\n        }\n      } catch (err) {\n        console.error(\"Error fetching jobs for user:\", err);\n        this.status = {\n          success: false,\n          message: \"Failed to load job seekers. Please try again.\",\n        };\n      } finally {\n        this.isLoading = false;\n      }\n    },\n\n    async fetchCategories() {\n      try {\n        const token = localStorage.getItem(\"adminToken\");\n        const response = await fetch(`${globalVariable}/name_and_id`, {\n          headers: {\n            Authorization: `Bearer ${token}`,\n          },\n        });\n        const data = await response.json();\n        if (response.ok) {\n          this.categories = data;\n          data.forEach(category => {\n            this.categoryNames[category.id] = category.name;\n          });\n        } else {\n          console.error(\"Failed to load categories:\", data.message);\n        }\n      } catch (error) {\n        console.error(\"Error fetching categories:\", error);\n      }\n    },\n\n    async fetchCategoryName(categoryId) {\n      if (this.categoryNames[categoryId]) return;\n\n      try {\n        const response = await fetch(`${globalVariable}/category_name/${categoryId}`);\n        const data = await response.json();\n        if (response.ok && data && data.name) {\n          this.categoryNames[categoryId] = data.name;\n        } else {\n          this.categoryNames[categoryId] = \"Unknown\";\n        }\n      } catch (error) {\n        console.error(`Error fetching category name for ID ${categoryId}:`, error);\n        this.categoryNames[categoryId] = \"Unknown\";\n      }\n    },\n\n    getCategoryName(categoryId) {\n      return this.categoryNames[categoryId] || \"Loading...\";\n    },\n\n    goToEdit(job_id) {\n      // Store current search state before navigating\n      localStorage.setItem(\"seekers_search_query\", this.searchQuery);\n      localStorage.setItem(\"seekers_selected_category\", this.selectedCategoryId);\n      localStorage.setItem(\"seekers_current_page\", this.currentPage.toString());\n      \n      this.$router.push({ name: \"edit-seekers\", params: { id: job_id } });\n    },\n\n    goToMore(job_id) {\n      // Store current search state before navigating\n      localStorage.setItem(\"seekers_search_query\", this.searchQuery);\n      localStorage.setItem(\"seekers_selected_category\", this.selectedCategoryId);\n      localStorage.setItem(\"seekers_current_page\", this.currentPage.toString());\n      \n      this.$router.push({ name: \"view-seekers\", params: { id: job_id } });\n    },\n    \n    goToPage(page) {\n      if (page >= 1 && page <= this.totalPages) {\n        this.currentPage = page;\n      }\n    },\n\n    // Method to clear search filters\n    clearFilters() {\n      this.searchQuery = \"\";\n      this.selectedCategoryId = \"\";\n      this.currentPage = 1;\n      \n      // Clear from localStorage\n      localStorage.removeItem(\"seekers_search_query\");\n      localStorage.removeItem(\"seekers_selected_category\");\n      localStorage.removeItem(\"seekers_current_page\");\n    },\n\n    confirmDelete(id) {\n      this.selectedAboutId = id;\n      this.showModal = true;\n    },\n\n    closeModal() {\n      if (!this.isDeleting) {\n        this.showModal = false;\n        this.selectedAboutId = null;\n      }\n    },\n\n    async deleteAbout(users_id) {\n      const token = localStorage.getItem(\"adminToken\");\n      try {\n        this.isDeleting = true;\n        this.isDeletingId = users_id;\n        \n        const res = await fetch(`${globalVariable}/admin/delete_job_seeker/${users_id}`, {\n          method: \"DELETE\",\n          headers: {\n            Authorization: `Bearer ${token}`,\n          },\n        });\n        \n        const data = await res.json();\n        if (res.ok) {\n          this.jobs = this.jobs.filter(job => job.users_id !== users_id);\n          this.status = {\n            success: true,\n            message: \"Job seeker deleted successfully.\",\n          };\n        } else {\n          this.status = {\n            success: false,\n            message: data.message || \"Failed to delete job seeker.\",\n          };\n        }\n      } catch (err) {\n        console.error(\"Error deleting job seeker:\", err);\n        this.status = {\n          success: false,\n          message: \"An error occurred while deleting.\",\n        };\n      } finally {\n        this.isDeleting = false;\n        this.isDeletingId = null;\n        this.closeModal();\n      }\n    },\n\n    async getUserIdFromEmail() {\n      const token = localStorage.getItem(\"adminToken\");\n      if (!token) return;\n      \n      try {\n        const payload = JSON.parse(atob(token.split(\".\")[1]));\n        if (!this.userEmail) {\n          this.userEmail = payload.email;\n        }\n        \n        const res = await fetch(`${globalVariable}/get_user_id_by_email/${this.userEmail}`, {\n          headers: { Authorization: `Bearer ${token}` },\n        });\n        \n        const data = await res.json();\n        if (res.ok) {\n          this.userId = data.users_id;\n          await this.fetchJobsByUser();\n        } else {\n          this.status = {\n            success: false,\n            message: data.message || \"Unable to get user ID.\",\n          };\n        }\n      } catch (err) {\n        console.error(\"Error getting users_id:\", err);\n        this.status = {\n          success: false,\n          message: \"Failed to fetch user ID.\",\n        };\n      }\n    },\n  },\n\n  // Optional: Clean up localStorage when component is destroyed\n  beforeUnmount() {\n    // Uncomment these lines if you want to clear search state when leaving the component permanently\n    // localStorage.removeItem(\"seekers_search_query\");\n    // localStorage.removeItem(\"seekers_selected_category\");\n    // localStorage.removeItem(\"seekers_current_page\");\n  }\n};\n</script>\n\n\n<style scoped>\n.modal-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.5);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 1000;\n}\n\n.modal-content {\n  background: white;\n  padding: 20px;\n  border-radius: 8px;\n  text-align: center;\n  max-width: 400px;\n  width: 90%;\n}\n\n.spinner-border-sm {\n  width: 1rem;\n  height: 1rem;\n}\n\n\n\n.pagination {\n  display: flex;\n  justify-content: center;\n  gap: 0.3rem;\n}\n\n.page-item.active .page-link {\n  background-color: #E960A6;\n  color: white;\n  border-color: #E960A6;\n}\n\n.page-link {\n  border-radius: 4px;\n  padding: 0.4rem 0.75rem;\n  cursor: pointer;\n  color:#336Cb6\n}\n\n.modal-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.5);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 1000;\n}\n\n/* Modal content styling */\n.modal-content {\n  background-color: white;\n  padding: 20px;\n  border-radius: 8px;\n  text-align: center;\n  width: 300px;\n}\n\n.container-fluid {\n  max-width: 800px;\n  margin: auto;\n  padding: 20px;\n  background-color: #ffffff;\n  border-radius: 8px;\n  box-shadow: 0 8px 30px rgba(0, 0, 0, 0.2);\n}\n\nh5 {\n  color: #333;\n  margin-bottom: 20px;\n}\n\n.custom-select {\n  width: 100%;\n  padding: 15px;\n  height: 50px;\n  border: 1px solid #ccc;\n  border-radius: 5px;\n  box-sizing: border-box;\n  transition: border-color 0.3s, box-shadow 0.3s;\n  font-size: 16px;\n}\n\n.form-control {\n  width: 100%;\n  padding: 15px;\n  height: 50px;\n  border: 1px solid #ccc;\n  border-radius: 5px;\n  box-sizing: border-box;\n  transition: border-color 0.3s, box-shadow 0.3s;\n  font-size: 16px;\n}\n\n.form-control:focus {\n  border-color: #E960A6;\n  box-shadow: 0 0 5px rgba(0, 123, 255, 0.5);\n  outline: none;\n}\n\n.form-label {\n  font-weight: bold;\n  margin-bottom: 5px;\n  display: block;\n}\n\n.btn-primary {\n  background-color: #E960A6;\n  color: white;\n}\n\n.btn-primary:hover {\n  background-color: #E960A6;\n  color: teal;\n}\n\n.btn-cancel {\n  background-color: teal;\n  color: white;\n}\n\n.btn-cancel:hover {\n  background-color: teal;\n  color: #E960A6;\n}\n\n.form-group {\n  margin-bottom: 15px;\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}